if (self.CavalryLogger) { CavalryLogger.start_js(["1+IP5"]); }

__d("VideoComposerVideoPublishingMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"VideoPublishResponsePayload",kind:"LinkedField",name:"video_publish",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"video_asset_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VideoComposerVideoPublishingMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VideoComposerVideoPublishingMutation",selections:b},params:{id:"2794099187357617",metadata:{},name:"VideoComposerVideoPublishingMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("BandicootSession",[],(function(a,b,c,d,e,f){"use strict";f.isValidSession=a;f.isTrackedSession=b;f.isCrashedSession=c;f.isOrphanSession=d;var g=Object.freeze({ACTIVE:"ACTIVE",INACTIVE:"INACTIVE",CLOSED:"CLOSED"});f.Status=g;var h=10*60*1e3,i=14*24*60*60*1e3;function j(a){return Date.now()-a.lastUpdated}function a(a){return!!(typeof a==="object"&&a&&a.lastUpdated&&a.status)}function b(a){if(a.status===g.CLOSED)return!1;else if(a.status===g.INACTIVE&&j(a)>h)return!1;return!0}function c(a){return a.status===g.ACTIVE&&j(a)>h}function d(a){return j(a)>i}}),null);
__d("Bandicoot",["invariant","BandicootSession","FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=5*1e3,i=h*2,j="Bandicoot:";function a(){try{var a=window.localStorage;if(a){var c="__test"+Date.now();a.setItem(c,"");a.removeItem(c)}return a}catch(a){b("FBLogger")("bandicoot").warn("Local storage is full");return null}}var k=a();c=function(){function a(a){this.$5=j+a,this.$4={},this.$1=this.$7.bind(this),this.sessionID=null,this.sessionStartTime=null,this.storage=k}var c=a.prototype;c.getCrashTimeData=function(){var a=window.performance&&window.performance.memory||{},b=this.sessionStartTime;return{duration:b?Date.now()-b:0,tabs:Object.keys(this.$8()).length,jsHeapSizeLimit:a.jsHeapSizeLimit,totalJSHeapSize:a.totalJSHeapSize,usedJSHeapSize:a.usedJSHeapSize,elementsInDOM:document.getElementsByTagName("*").length,uri:window.location.href}};c.getLogTimeData=function(){return{userAgent:window.navigator.userAgent}};c.logCrash=function(a,c,d){b("FBLogger")("bandicoot").warn("Session %s crashed at %s",a,d)};c.logBrowserUnsupported=function(){b("FBLogger")("bandicoot").warn("Browser not supported")};c.logTrackingError=function(){b("FBLogger")("bandicoot").warn("Failed to record data for current session")};c.startSession=function(){var a=this;if(!this.storage){this.logBrowserUnsupported();return}if(this.$2)return;this.sessionID||(this.sessionID=Math.random().toString(36).slice(2,9));this.sessionStartTime||(this.sessionStartTime=Date.now());this.$2=setInterval(function(){a.$9()},h);this.$9();document.addEventListener&&document.addEventListener("visibilitychange",this.$1);this.$10()};c.endSession=function(){if(!this.storage)return;if(!this.$2)return;clearInterval(this.$2);this.$2=null;this.$3||this.$11({status:b("BandicootSession").Status.CLOSED});this.sessionID=null;this.sessionStartTime=null;document.removeEventListener&&document.removeEventListener("visibilitychange",this.$1)};c.logKnownCrashes=function(){var a=this;if(!this.storage)return;if(!this.$2){var c=this.$8();c=this.$12(c,function(c,d){if(b("BandicootSession").isCrashedSession(c)){a.logCrash(d,c,a.getLogTimeData());return null}else return c});this.$13(c)}};c.$14=function(){var a=this.sessionID;a||g(0,663);return a};c.$9=function(){var a=this.$8();this.$15(a);a=this.$16(a);this.$13(a)};c.$15=function(a){var b=this.$14(),c=a[b]?a[b]:{};a[b]=babelHelpers["extends"]({},c,this.getCrashTimeData(),{lastUpdated:Date.now(),status:this.$17()})};c.$12=function(a,c){var d={};Object.keys(a).forEach(function(e){var f=a[e];if(b("BandicootSession").isValidSession(f)&&b("BandicootSession").isTrackedSession(f)&&!b("BandicootSession").isOrphanSession(f)){f=c(f,e);f&&(d[e]=f)}});return d};c.$16=function(a){var c=this;return this.$12(a,function(a,d){if(b("BandicootSession").isCrashedSession(a)){var e=a.loggerReportTime||0;if(Date.now()-e>i)a.loggerReportTime=Date.now(),a.loggerReportSession=c.$14();else if(a.loggerReportSession==c.$14()){c.logCrash(d,a,c.getLogTimeData());c.$4[d]=!0;return null}}return a})};c.$8=function(a){a=a||this.$5;var c=this.storage.getItem(a)||"{}";try{c=JSON.parse(c)}catch(d){c={},this.storage.removeItem(a),b("FBLogger")("bandicoot").catching(d).warn("Invalid JSON data")}return c};c.$11=function(a){a.lastUpdated=Date.now();var b=this.$8(),c=this.sessionID;c&&b[c]&&(Object.assign(b[c],a),this.$13(b))};c.$13=function(a){a=JSON.stringify(a);try{this.storage.setItem(this.$5,a)}catch(d){a=this.$6;var c=Date.now();(!a||c>a+h)&&(this.logTrackingError(),this.$6=c);try{this.storage.removeItem(this.$5)}catch(a){this.$3=!0,this.endSession(),b("FBLogger")("bandicoot").catching(a).warn("Removing from storage failed")}}};c.$10=function(){for(var a=0;a<this.storage.length;++a){var c=this.storage.key(a);if(c.indexOf(j)===0&&c!==this.$5){var d=this.$8(c),e=Object.keys(d).every(function(a){a=d[a];return!b("BandicootSession").isValidSession(a)||b("BandicootSession").isOrphanSession(a)});e&&this.storage.removeItem(c)}}};c.$7=function(){this.$11({status:this.$17()})};c.$17=function(){return document.hidden?b("BandicootSession").Status.INACTIVE:b("BandicootSession").Status.ACTIVE};return a}();e.exports=c}),null);
__d("FileHasher",["WebWorker","emptyFunction","fileSliceName","FileHashWorkerResource"],(function(a,b,c,d,e,f){a=function(){"use strict";a.isSupported=function(){return b("WebWorker").isSupported()};function a(){var a=this,c=b("FileHashWorkerResource");b("WebWorker").prepareResource(c);this.$1=new(b("WebWorker"))(c).setMessageHandler(function(b){a.$2(b)}).execute()}var c=a.prototype;c.hash=function(a,c){this.$2=c;this.$1.postMessage({file:a,fileSliceName:b("fileSliceName")});return this};c.destroy=function(){this.$2=b("emptyFunction"),this.$1.terminate()};return a}();e.exports=a}),null);
__d("mediaUploadLogStackTrace",["Banzai","ErrorNormalizeUtils","err","gkx"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){if(b("gkx")("1816889")){var c=b("ErrorNormalizeUtils").normalizeError(b("err")("no-op"));c=c.stack;a={event:"upload.client.media_debug_info",waterfall_id:a.waterfallID,source:a.sourceType,composer_entry_point_ref:a.composerEntryPointRef,error_trace:c};b("Banzai").post("video_waterfall",a,b("Banzai").VITAL)}}}),null);
__d("FBSphericalMetadataTags",[],(function(a,b,c,d,e,f){a=Object.freeze({SPHERICAL:"FBSpherical:Spherical",INITIAL_VERTICAL_FOV_DEGREES:"FBSpherical:InitialVerticalFOVDegrees",GUIDE:"FBSpherical:Guide",HOTSPOT:"FBSpherical:HotspotMetadata",USED_360_DIRECTOR:"FBSpherical:Used360Director"});e.exports=a}),null);
__d("GSphericalMetadataTags",[],(function(a,b,c,d,e,f){a=Object.freeze({SPHERICAL:"GSpherical:Spherical",INITIAL_VIEW_HEADING_DEGREES:"GSpherical:InitialViewHeadingDegrees",INITIAL_VIEW_PITCH_DEGREES:"GSpherical:InitialViewPitchDegrees",PROJECTION_TYPE:"GSpherical:ProjectionType",STEREO_MODE:"GSpherical:StereoMode",STITCHED:"GSpherical:Stitched",STITCHING_SOFTWARE:"GSpherical:StitchingSoftware",CROPPED_AREA_IMAGE_WIDTH_PIXELS:"GSphercal:CroppedAreaImageWidthPixels",CROPPED_AREA_IMAGE_HEIGHT_PIXELS:"GSphercal:CroppedAreaImageHeightPixels",CROPPED_AREA_LEFT_PIXELS:"GSphercal:CroppedAreaLeftPixels",CROPPED_AREA_TOP_PIXELS:"GSphercal:CroppedAreaTopPixels",FULL_PANO_WIDTH_PIXELS:"GSphercal:FullPanoWidthPixels",FULL_PANO_HEIGHT_PIXELS:"GSphercal:FullPanoHeightPixels"});e.exports=a}),null);
__d("SphericalVideoMetadataTags",["FBSphericalMetadataTags","GSphericalMetadataTags"],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({GSPHERICAL:b("GSphericalMetadataTags"),FBSPHERICAL:b("FBSphericalMetadataTags")});e.exports=a}),null);
__d("ResumableUploadAsyncService",["regeneratorRuntime","Promise","AsyncRequest","EventEmitter","ResumableUploadServiceState.enum","URI","gkx","uuid"],(function(a,b,c,d,e,f){"use strict";var g,h="rupload",i="facebook.com";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g,j,k,l,m,n){var o;o=a.call(this)||this;o.consumer=c;o.accessToken=d;o.sessionKey=e||b("uuid")();o.contentKey=f||"";o.contentValue=g||"";o.serviceName=j&&j!=""?j:h;o.serviceDomain=k&&k!=""?k:i;o.receiveParameters=l;o.flowCaptureHeaderValue=m;o.tracingHeaderValue=n;return o}c.create=function(a){return new c(a.consumer,a.accessToken,a.sessionKey||"",a.contentKey,a.contentValue,a.serviceName,a.serviceDomain,a.receiveParameters,a.flowCaptureHeaderValue,a.tracingHeaderValue)};var d=c.prototype;d.$ResumableUploadService1=function(a){if(b("gkx")("1765373")){var c;if(((c=this.receiveParameters)==null?void 0:c.target_id)!=null){a.setRequestHeader("target_id",String((c=this.receiveParameters)==null?void 0:c.target_id))}if(((c=this.receiveParameters)==null?void 0:c.video_waterfall_id)!=null){a.setRequestHeader("x_fb_video_waterfall_id",String((c=this.receiveParameters)==null?void 0:c.video_waterfall_id))}}};d.resume=function(a){var c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0;e.next=3;return b("regeneratorRuntime").awrap(this.sendOffsetRequest());case 3:c=e.sent;this.emit(b("ResumableUploadServiceState.enum").START,{offset:c.offset});e.next=7;return b("regeneratorRuntime").awrap(this.sendUploadRequest(a,c));case 7:d=e.sent;this.emit(b("ResumableUploadServiceState.enum").SUCCESS,d.h);e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),this.emit(b("ResumableUploadServiceState.enum").FAIL,e.t0);case 14:this.abortUpload=void 0;case 15:case"end":return e.stop()}},null,this,[[0,11]])};d.cancel=function(){this.abortUpload&&this.abortUpload(),this.emit(b("ResumableUploadServiceState.enum").CANCEL)};d.decorateRequestFlowCaptureHeader=function(a){this.flowCaptureHeaderValue&&a.setRequestHeader("X-Fb-Flow-Capture",String(this.flowCaptureHeaderValue))};d.sendOffsetRequest=function(){var a=this;return new(b("Promise"))(function(c,d){var e=new(b("AsyncRequest"))().setAllowCrossOrigin(!0).setAllowCredentials(!0).setMethod("GET").setURI(a.getUploadUri()).setReadOnly(!0).setRequestHeader("Authorization","OAuth "+a.accessToken).setHandler(function(a){return c(JSON.parse(a.payload.response))}).setErrorHandler(d).setOption("suppressEvaluation",!0).setTransportErrorHandler(function(c){a.emit(b("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,c)});a.$ResumableUploadService1(e);a.decorateRequestFlowCaptureHeader(e);a.abortUpload=function(){return e.abort()};e.send()})};d.sendUploadRequest=function(a,c){var d=this;c=c||{};var e=c.offset;c=c.duplicate;var f=c?"":a.slice(e);return new(b("Promise"))(function(c,g){var h=new(b("AsyncRequest"))().setAllowCrossOrigin(!0).setAllowCredentials(!0).setURI(d.getUploadUri()).setRawData(f).setHandler(function(a){return c(JSON.parse(a.payload.response))}).setErrorHandler(g).setRequestHeader("Authorization","OAuth "+d.accessToken).setRequestHeader("X-Entity-Name",encodeURIComponent(a.name)).setRequestHeader("X-Entity-Type",a.type).setRequestHeader("X-Entity-Length",String(a.size)).setRequestHeader("Offset",String(e)).setOption("suppressEvaluation",!0).setUploadProgressHandler(function(c){c=new ProgressEvent("upload-service",{total:a.size,loaded:c.loaded+Number(e)});d.emit(b("ResumableUploadServiceState.enum").PROGRESS,c)}).setTransportErrorHandler(function(a){d.emit(b("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,a)});d.$ResumableUploadService1(h);d.decorateRequestFlowCaptureHeader(h);d.abortUpload=function(){return h.abort()};g=d.receiveParameters;g&&(h.setRequestHeader("start_offset",String(g.start_offset)).setRequestHeader("end_offset",String(g.end_offset)).setRequestHeader("composer_session_id",String(g.composer_session_id)).setRequestHeader("id",String(g.upload_session_id)),g.fb_region&&h.setRequestHeader("X-FB-Region",String(g.fb_region)));d.tracingHeaderValue&&h.setRequestHeader("x-fb-product-log",d.tracingHeaderValue);h.send()})};d.getUploadUri=function(){var a=this.getServiceName();a=new(g||(g=b("URI")))("https://"+a+"/"+this.consumer+"/"+this.sessionKey);this.contentKey&&this.contentValue&&(a=a.addQueryData(this.contentKey,this.contentValue));return a};d.getServiceName=function(){return this.serviceName+"."+this.serviceDomain};return c}(b("EventEmitter"));e.exports=a}),null);
__d("GraphQLVideoPublishUtils",["gkx","immutable"],(function(a,b,c,d,e,f){"use strict";f.isGraphQLPublish=a;function a(a,c,d,e){if(d&&!b("gkx")("1797557"))return!1;if(e&&!b("gkx")("1827276"))return!1;d=b("immutable").List(["cs_ab_testing_video_upload","cs_content_library","cs_content_library_bulk_upload","cs_content_library_upload_videos","cs_content_show_episode_upload","cs_global_basic_post","cs_global_bulk_upload","cs_global_multipost","cs_global_upload_video","cs_home_basic_post","cs_home_bulk_video","cs_home_upload_video","cs_home_multipost","cs_instagram_content_library","media_manager","pages_composer_bulk_upload_upsell","page_content_tab_drafts","page_content_tab_published_posts_opted_out","page_content_tab_scheduled_posts_opted_out","page_content_tab_video_library","page_content_tab_video_library_premiere","pages_posts","pages_video_tab","timeline","video_page_video_list"]);e=b("gkx")("1787006")?d.contains(c)||b("gkx")("1809100")&&c==="pages_feed_video_composer":!0;return b("gkx")("1687206")&&(a==="composer"||a==="media_manager_instagram_video_composer")&&e}}),null);
__d("GraphQLVideoPublisherInputDataHandlerBase",["invariant","gkx"],(function(a,b,c,d,e,f,g){"use strict";f.hasAPISupport=h;a=function(){function a(a,b){this.postData=a,this.extraData=b}var b=a.prototype;b.mapPostDataToGraphQLInputObject=function(){g(0,85)};b.hasAPISupport=function(){return h(this.postData)};b.uploadables=function(){g(0,85)};return a}();f.GraphQLVideoPublisherInputDataHandlerBase=a;function h(a){return b("gkx")("1687206")}}),null);
__d("BrandedContentSharedToSponsorStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_SHARED:0,ALL_SHARED:1});e.exports=a}),null);
__d("ExpirationType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,DELETE:1,HIDE:2,ONLY_ME:3});e.exports=a}),null);
__d("VideoAssetMatureContentRating",[],(function(a,b,c,d,e,f){a=Object.freeze({UNSET:0,SUITABLE_FOR_ALL:1,FOURTEEN_PLUS:2,EIGHTEEN_PLUS:3});e.exports=a}),null);
__d("VideoCommentatingPermission",[],(function(a,b,c,d,e,f){a=Object.freeze({UNSET:"unset",ALLOW:"allow",DISALLOW:"disallow"});e.exports=a}),null);
__d("VideoFundedContentFlagProgram",[],(function(a,b,c,d,e,f){a=Object.freeze({UNSET:0,IS_FUNDED_CONTENT:1,NOT_FUNDED_CONTENT:2});e.exports=a}),null);
__d("VideoStereoFormat",[],(function(a,b,c,d,e,f){a=Object.freeze({MONO:"mono",LEFT_RIGHT:"left-right",TOP_BOTTOM:"top-bottom"});e.exports=a}),null);
__d("GraphQLVideoPublisherVideoUploaderInputDataHandler",["BrandedContentSharedToSponsorStatus","BrandedContentSponsorRelationship","CallToActionTypes","ClientIDs","ExpirationType","GraphQLVideoPublisherInputDataHandlerBase","VideoAssetMatureContentRating","VideoCommentatingPermission","VideoFundedContentFlagProgram","VideoProjection","VideoStereoFormat","enumUtils"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.mapPostDataToGraphQLInputObject=function(){var a=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler1(),c=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler2(),d=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler3(),e=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler4(),f=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler5(),g=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler6(),h=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler7(),i=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler8(),j=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler9(),k=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler10(),l=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler11(),m=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler12(),n=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler13(),o=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler14(),p=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler15();return{actor_id:this.extraData.target_id,basic_data:a,client_mutation_id:b("ClientIDs").getNewClientID(),thumbnail_data:c,ad_break_data:e,auto_reframe_data:j,post_status_data:d,main_composer_tab_data:f,distribution_data:g,stars_data:h,metadata_data:i,questions_data:k,polls_data:l,tracking_data:m,captions_data:n,spherical_data:o,live_premiere_data:p,video_editor_config_json:this.postData.video_editor_config_json}};d.uploadables=function(){return babelHelpers["extends"]({},this.$GraphQLVideoPublisherVideoUploaderInputDataHandler16(),this.$GraphQLVideoPublisherVideoUploaderInputDataHandler17(),this.$GraphQLVideoPublisherVideoUploaderInputDataHandler18())};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler1=function(){var a;return{source:this.extraData.source,target_id:this.extraData.target_id,video_id:this.extraData.video_id,video_title:this.postData.video_title,waterfall_id:this.extraData.waterfall_id,xhpc_message:this.postData.xhpc_message,creator_product:(a=this.extraData.creator_product)==null?void 0:a.toString(),composer_entry_point_ref:this.extraData.composer_entry_point_ref,composer_dialog_version:this.extraData.composer_dialog_version,has_file_been_replaced:this.extraData.has_file_been_replaced,supports_chunking:this.extraData.supports_chunking}};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler2=function(){return{thumbnail_type:this.postData.thumbnail_type}};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler17=function(){return this.postData.thumbnail_uploadable};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler18=function(){var a={},b=this.postData.schedule_custom_background_image,c=this.postData.schedule_custom_profile_image,d=this.postData.schedule_feed_background_image;b!=null&&(a.schedule_custom_background_image=b);c!=null&&(a.schedule_custom_profile_image=c);d!=null&&(a.schedule_feed_background_image=d);return a};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler4=function(){return{ad_breaks:this.postData.ad_breaks,ad_break_prereview:this.postData.ad_break_prereview,ad_breaks_experiment_revenue_loss_threshold:this.postData.ad_breaks_experiment_revenue_loss_threshold,enable_ad_breaks_experiment:this.postData.enable_ad_breaks_experiment,ad_breaks_block_lists:this.postData.ad_breaks_block_lists,has_ad_breaks_block_lists:this.postData.has_ad_breaks_block_lists,is_in_stream_enabled:this.postData.is_in_stream_enabled,self_cert_answers:this.postData.self_cert_answers,should_auto_adjust_manual_ad_breaks:this.postData.should_auto_adjust_manual_ad_breaks,should_auto_insert_ad_breaks:this.postData.should_auto_insert_ad_breaks,should_use_image_ads:this.postData.should_use_image_ads}};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler3=function(){return{dogfooding:this.postData.dogfooding,draft:this.postData.draft,is_reviewable_branded_content:this.postData.is_reviewable_branded_content,scheduled:this.postData.scheduled,future_date:this.postData.future_date,future_time:this.postData.future_time,expiring:this.postData.expiring,expire_type:this.postData.expire_type!=null?b("enumUtils").enumValueToKeyEnforcing(this.postData.expire_type,b("ExpirationType")):null,expire_time:this.postData.expire_time,backdated_date:this.postData.backdated_date,hide_from_newsfeed:this.postData.hide_from_newsfeed}};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler19=function(){var a=this.postData.branded_content_data;if(a==null)return null;var c=a.tagging_data;c!=null&&(c=babelHelpers["extends"]({},c,{shared_to_sponsor_status:c.shared_to_sponsor_status!=null?b("enumUtils").enumValueToKeyEnforcing(c.shared_to_sponsor_status,b("BrandedContentSharedToSponsorStatus")):null,sponsor_relationship:c.sponsor_relationship!=null?b("enumUtils").enumValueToKeyEnforcing(c.sponsor_relationship,b("BrandedContentSponsorRelationship")):null}));return babelHelpers["extends"]({},a,{tagging_data:c})};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler5=function(){return{action_type_id:this.postData.action_type_id,branded_content_data:this.$GraphQLVideoPublisherVideoUploaderInputDataHandler19(),composertags_place_name:this.postData.composertags_place_name,composertags_place:this.postData.composertags_place,composertags_product_items:this.postData.composertags_product_items,composertags_sponsor:this.postData.composertags_sponsor,composertags_with:this.postData.composertags_with,content_tags:this.postData.content_tags,cta_type:this.postData.cta_type!=null?b("enumUtils").enumValueToKeyEnforcing(this.postData.cta_type,b("CallToActionTypes")):null,deal_id:this.postData.deal_id,direct_share_status:this.postData.direct_share_status!=null?b("enumUtils").enumValueToKeyEnforcing(this.postData.direct_share_status,b("BrandedContentSharedToSponsorStatus")):null,episode_data_json:this.postData.episode_data_json,external_movie_data:this.postData.external_movie_data,feed_targeted_data:this.$GraphQLVideoPublisherVideoUploaderInputDataHandler20(),fan_funding_promotion_metadata:this.postData.fan_funding_promotion_metadata,free_form_tags:this.postData.free_form_tags,funded_content_program:this.postData.funded_content_program?b("enumUtils").enumValueToKeyEnforcing(this.postData.funded_content_program,b("VideoFundedContentFlagProgram")):null,fundraiser_for_story_charity_id:this.postData.fundraiser_for_story_charity_id,fundraiser_for_story_charity_type:this.postData.fundraiser_for_story_charity_type,game_id:this.postData.game_id,icon_id:this.postData.icon_id,is_explicitly_tagged_as_gaming_video:this.postData.is_explicitly_tagged_as_gaming_video,is_stars_enabled_for_post:this.postData.is_stars_enabled_for_post,multilingual_specified_lang:this.postData.multilingual_specified_lang,multilingual_status_langs:this.postData.multilingual_status_langs,multilingual_statuses:this.postData.multilingual_statuses,object_id:this.postData.object_id,object_str:this.postData.object_str,playlistIDs:this.postData.playlistIDs,share_to_parent_page_option_selected:this.postData.share_to_parent_page_option_selected,sponsor_relationship:this.postData.sponsor_relationship?b("enumUtils").enumValueToKeyEnforcing(this.postData.sponsor_relationship,b("BrandedContentSponsorRelationship")):null,targeted_privacy_data:JSON.stringify(this.postData.targeted_privacy_data)}};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler20=function(){var a=babelHelpers["extends"]({},this.postData.feed_targeted_data);this.postData.relevant_until_date!=null&&(a["relevant-until-date"]=this.postData.relevant_until_date);this.postData.relevant_until_time!=null&&(a["relevant-until-time"]=this.postData.relevant_until_time);Object.keys(a).length===0&&(a=void 0);return JSON.stringify(a)};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler6=function(){return{commentating_permission:this.postData.commentating_permission!=null?b("enumUtils").enumValueToKeyEnforcing(this.postData.commentating_permission,b("VideoCommentatingPermission")):null,crossposting_config:this.postData.crossposting_config,disturbing:this.postData.disturbing,embeddable:this.postData.embeddable,enable_drm:this.postData.enable_drm,exclude_from_watch:this.postData.exclude_from_watch,mature_content_rating:this.postData.mature_content_rating!=null?b("enumUtils").enumValueToKeyEnforcing(this.postData.mature_content_rating,b("VideoAssetMatureContentRating")):null,no_story:this.postData.no_story,secret:this.postData.secret,shows_v2_episode_data:this.postData.shows_v2_episode_data,social_actions:this.postData.social_actions}};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler7=function(){return{is_receiving_stars_enabled:this.postData.is_receiving_stars_enabled,stars_goal_id:this.postData.stars_goal_id,stars_cue_trigger_timestamp:this.postData.stars_cue_trigger_timestamp}};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler12=function(){return{custom_labels:this.postData.custom_labels,external_video_id:this.postData.external_video_id}};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler10=function(){return{questions:this.postData.questions}};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler11=function(){return{polls:this.postData.polls}};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler21=function(a){return a.getIsDefault()?"captions_default":"captions_file"};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler13=function(){var a,b=this;a=(a=this.postData.captions)==null?void 0:a.map(function(a,c){return b.$GraphQLVideoPublisherVideoUploaderInputDataHandler21(a)+c});return{autopublish_captions:this.postData.autopublish_captions,captions:a,should_review_all_captions:this.postData.should_review_all_captions,spoken_locale:this.postData.spoken_locale}};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler16=function(){var a,b=this,c={};(a=this.postData.captions)==null?void 0:a.forEach(function(a,d){c[b.$GraphQLVideoPublisherVideoUploaderInputDataHandler21(a)+d]=a.getFile()});return c};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler8=function(){return{is_vu_experiment_eligible:this.postData.is_vu_experiment_eligible}};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler9=function(){return{aspect_ratios:this.postData.aspect_ratios,auto_reframe_publish_mode:this.postData.auto_reframe_publish_mode}};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler14=function(){return{initialHeading:this.postData.initialHeading,initialPitch:this.postData.initialPitch,fov:this.postData.fov,guide_enabled:this.postData.guide_enabled,guide_keyframes:this.postData.guide_keyframes,enable_omnistab:this.postData.enable_omnistab,spherical:this.postData.spherical,projection:this.postData.projection!=null?b("enumUtils").enumValueToKeyEnforcing(this.postData.projection,b("VideoProjection")):null,stereoMode:this.postData.stereoMode!=null?b("enumUtils").enumValueToKeyEnforcing(this.postData.stereoMode,b("VideoStereoFormat")):null}};d.$GraphQLVideoPublisherVideoUploaderInputDataHandler15=function(){return{premiere_time_ms:this.postData.premiere_time_ms,should_premiere:this.postData.should_premiere,premiere_in_living_room_video_ids:this.postData.premiere_in_living_room_video_ids,premiere_custom_profile_image_focus:this.postData.premiere_custom_profile_image_focus,feed_background_focus:this.postData.feed_background_focus,premiere_audience:this.postData.premiere_audience}};return c}(b("GraphQLVideoPublisherInputDataHandlerBase").GraphQLVideoPublisherInputDataHandlerBase);e.exports=a}),null);
__d("VideoComposerVideoPublishingMutation",["RelayAPIConfig","RelayModern","RelayRuntime","gkx","VideoComposerVideoPublishingMutation.graphql"],(function(a,b,c,d,e,f){"use strict";f.commit=a;var g,h=b("RelayRuntime").commitMutation,i=1e3*60,j=g!==void 0?g:g=b("VideoComposerVideoPublishingMutation.graphql");function a(a,c,d,e,f){if(b("gkx")("1841018")){var g=b("RelayAPIConfig").fetchTimeout;b("RelayAPIConfig").fetchTimeout=i;return h(c,{uploadables:d,mutation:j,variables:{input:a},onCompleted:function(a){b("RelayAPIConfig").fetchTimeout=g,e(a)},onError:function(a){b("RelayAPIConfig").fetchTimeout=g,f(a)}})}return h(c,{uploadables:d,mutation:j,variables:{input:a},onCompleted:e,onError:f})}}),null);
__d("VideoComposerVideoPublisher",["RelayFBEnvironmentFactory","VideoComposerVideoPublishingMutation","err"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a.mapPostDataToGraphQLInputObject(),this.$3=a.hasAPISupport(),this.$2=a.uploadables()}var c=a.prototype;c.publish=function(a,c){if(!this.$3)throw b("err")("This api does not support your publishing use case");b("VideoComposerVideoPublishingMutation").commit(this.$1,b("RelayFBEnvironmentFactory").getForActorID(this.$1.basic_data.target_id),this.$2,a,c)};return a}();e.exports=a}),null);
__d("VideoUploadSphericalLogger",["Banzai"],(function(a,b,c,d,e,f){var g=3e3;a=function(){function a(){this.$1={},this.$2=!1,this.$3=0}var c=a.prototype;c.log=function(){this.$2?this.$4():this.$5()};c.$5=function(){b("Banzai").post("spherical_video_composer_upload",babelHelpers["extends"]({},this.$1))};c.$4=function(){var a=Date.now();a-this.$3>g&&(this.$3=a,this.$5())};c.setDirectorsCutEnabled=function(a){this.$1.directors_cut_enabled=a;return this};c.setFieldOfView=function(a){this.$1.field_of_view=a;return this};c.setFileExtension=function(a){this.$1.file_extension=a;return this};c.setHasSphericalMetadata=function(a){this.$1.has_spherical_metadata=a;return this};c.setPitchDegrees=function(a){this.$1.pitch_degrees=a;return this};c.setTargetID=function(a){this.$1.target_id=a;return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setUserAction=function(a){this.$1.user_action=a;a==="drag_video_preview"||a==="scroll_video_preview"?this.$2=!0:this.$2=!1;return this};c.setVideoPreviewPosition=function(a){this.$1.video_preview_position=a;return this};c.setYawDegrees=function(a){this.$1.yaw_degrees=a;return this};c.setIsRedesign=function(a){this.$1.is_redesign=a;return this};c.setFinalGuideEnabled=function(a){this.$1.final_guide_enabled=a;return this};c.setFinalNumGuidePoints=function(a){this.$1.final_num_guide_points=a;return this};c.setIsNuxTest=function(a){this.$1.is_nux_test=a;return this};return a}();c=new a();e.exports=c}),null);
__d("VideoUploadCallbacksMixin",[],(function(a,b,c,d,e,f){"use strict";function g(a){return Array.isArray(a)?a:[a]}a={inform:function(a,b){var c=this.__callbacksByType;if(c==null)return;a=g(a);a.forEach(function(a){var d=c[a];if(d==null)return;d.forEach(function(c){try{c(a,b)}catch(a){}})})},subscribe:function(a,b){var c,d=this.__callbacksByType=(c=this.__callbacksByType)!=null?c:{},e=g(a);e.forEach(function(a){a=d[a]=(a=d[a])!=null?a:[];a.push(b)});var f=!1;return{remove:function(){if(f===!0)return;f=!0;e.forEach(function(a){var c=d[a];if(c==null)return;var e=c.indexOf(b);e!==-1&&c.splice(e,1);c.length===0&&delete d[a]})}}}};e.exports=a}),null);
__d("VideoUploadCrashMonitor",["Bandicoot","VideoUploadLogger"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b,c,d,e,f,g,h,i){var j;j=a.call(this,"VideoUploadSession")||this;j.$VideoUploadCrashMonitor1={waterfallID:b,actorID:c,source:d,targetID:e,loggingDelay:f,supportsChunking:g,composerEntryPointRef:h,flowStarted:i};return j}var d=c.prototype;d.flowStarted=function(){this.$VideoUploadCrashMonitor1.flowStarted=!0};d.getCrashTimeData=function(){return this.$VideoUploadCrashMonitor1};d.logCrash=function(a,c,d){if(!c.waterfallID)return;a=new(b("VideoUploadLogger"))({actor_id:c.actorID,source:c.source,waterfall_id:c.waterfallID,target_id:c.targetID,delay:c.loggingDelay,is_chunked_upload:c.supportsChunking,composer_entry_point_ref:c.composerEntryPointRef});d={error:"Crash Detected",error_description:"Detected video upload did not complete due to a crash"};a.logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING,d);c.flowStarted&&a.logEvent(b("VideoUploadLogger").EVENT_RESIGNED_FLOW,{})};return c}(b("Bandicoot"));e.exports=a}),null);
__d("VideoUploadFileValidator",["errorCode","fbt","requireCond","cr:909496","cr:909497","React"],(function(a,b,c,d,e,f,g,h){var i=b("React"),j=[1363019,1363020,1363021,1363022,1363023,1363024,1363025,1363026,1363027,1363030,1363031,1363032,1363033,1363038,1363039,1363040,1363048],k=["VIDEO__INVALID_GUIDE_DATA"];a=function(){"use strict";function a(a){this.$1=a}var c=a.prototype;c.validate=function(a,b){return this.$2(a)&&this.$3(a)&&this.$4(a.getExtension()==="gif",b)};c.getValidationErrorMessage=function(a,b){return this.$5(a)||this.$6(a)||this.$7(a.getExtension()==="gif",b)};a.canReplaceVideoForError=function(a){if(!a)return!0;if(k.indexOf(a)>-1)return!1;return j.indexOf(a)>-1?!0:!1};c.$2=function(a){a=this.$5(a);if(a){b("cr:909496")!==null&&b("cr:909496").show(a.summary,a.description);return!1}else return!0};c.$5=function(a){if(this.$1.extensions[a.getExtension()])return;a="http://www.facebook.com/help/?faq=218673814818907#What-formats-of-video-files-can-I-upload?";a=i.jsx(b("cr:909497"),{target:"_blank",href:a,children:h._("\u1021\u1000\u103c\u1036\u1015\u103c\u102f\u1011\u102c\u1038\u101e\u1031\u102c \u1016\u1031\u102c\u1019\u1010\u103a\u1019\u103b\u102c\u1038")});return{summary:h._("\u1016\u102d\u102f\u1004\u103a\u1016\u1031\u102c\u1019\u1010\u103a\u1019\u103b\u102c\u1038\u1000\u102d\u102f \u1019\u1015\u1036\u1037\u1015\u102d\u102f\u1038\u1011\u102c\u1038\u1015\u102b"),description:h._("\u101e\u1004\u103a\u101b\u103d\u1031\u1038\u1001\u103b\u101a\u103a\u1011\u102c\u1038\u101e\u100a\u1037\u103a \u1016\u102d\u102f\u1004\u103a\u101e\u100a\u103a \u1000\u103b\u103d\u1014\u103a\u102f\u1015\u103a\u1010\u102d\u102f\u1037 \u1019\u1015\u1036\u1037\u1015\u102d\u102f\u1038\u101e\u100a\u1037\u103a \u1016\u1031\u102c\u1019\u1010\u103a\u1016\u103c\u1005\u103a\u1014\u1031\u101e\u1016\u103c\u1004\u1037\u103a \u1010\u1031\u102c\u1004\u103a\u1038\u1015\u1014\u103a\u1015\u102b\u101e\u100a\u103a\u104b \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1016\u102d\u102f\u1004\u103a\u1019\u103b\u102c\u1038\u1021\u1010\u103d\u1000\u103a \u1000\u103b\u103d\u1014\u103a\u102f\u1015\u103a\u1010\u102d\u102f\u1037 {link} \u1011\u1032\u1019\u103e\u1010\u1005\u103a\u1001\u102f\u1000\u102d\u102f \u1021\u101e\u102f\u1036\u1038\u1015\u103c\u102f\u1015\u102b\u104b",[h._param("link",a)])}};c.$3=function(a){a=this.$6(a);if(a){b("cr:909496")!==null&&b("cr:909496").show(a.summary,a.description);return!1}else return!0};c.$6=function(a){var b;if(a.getSize()===null)return;a.getSize()<this.$1.minSize&&(b=this.$8());a.getSize()>this.$1.maxSize&&(b=this.$9());return b};c.$8=function(){var a=Math.round(this.$1.minSize/1024);return{summary:h._("\u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1016\u102d\u102f\u1004\u103a\u101e\u100a\u103a \u1021\u101c\u103d\u1014\u103a\u101e\u1031\u1038\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a"),description:h._("\u101e\u1004\u103a\u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1010\u1004\u103a\u101b\u1014\u103a \u1000\u103c\u102d\u102f\u1038\u1005\u102c\u1038\u1001\u1032\u1037\u101e\u100a\u1037\u103a \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1016\u102d\u102f\u1004\u103a\u101e\u100a\u103a \u101e\u1031\u1038\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a\u104b \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1016\u102d\u102f\u1004\u103a\u1010\u1005\u103a\u1001\u102f\u104f \u1021\u1004\u101a\u103a\u1006\u102f\u1036\u1038\u1021\u101b\u103d\u101a\u103a\u1021\u1005\u102c\u1038\u1019\u103e\u102c {min-size} KB\u1016\u103c\u1005\u103a\u101e\u100a\u103a\u104b \u1015\u102d\u102f\u1000\u103c\u102e\u1038\u101e\u100a\u1037\u103a \u1016\u102d\u102f\u1004\u103a\u1010\u1005\u103a\u1001\u102f\u1016\u103c\u1004\u1037\u103a \u1011\u1015\u103a\u1005\u1019\u103a\u1038\u1000\u103c\u100a\u1037\u103a\u1015\u102b\u104b",[h._param("min-size",a)])}};c.$9=function(){var a=Math.floor(this.$1.maxSize/1024/1024);return{summary:h._("\u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1016\u102d\u102f\u1004\u103a \u1000\u103c\u102e\u1038\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a"),description:h._("\u101e\u1004\u103a\u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1010\u1004\u103a\u101b\u1014\u103a \u1000\u103c\u102d\u102f\u1038\u1005\u102c\u1038\u1001\u1032\u1037\u101e\u100a\u1037\u103a \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1016\u102d\u102f\u1004\u103a\u1019\u103e\u102c \u1000\u103c\u102e\u1038\u101c\u103d\u1014\u103a\u1038\u1014\u1031\u101e\u100a\u103a\u104b \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1016\u102d\u102f\u1004\u103a\u1010\u1005\u103a\u1001\u102f\u1021\u1010\u103d\u1000\u103a \u1021\u1000\u103c\u102e\u1038\u1006\u102f\u1036\u1038\u1021\u101b\u103d\u101a\u103a\u1021\u1005\u102c\u1038\u1019\u103e\u102c {max-size} MB\u1016\u103c\u1005\u103a\u101e\u100a\u103a\u104b \u1015\u102d\u102f\u101e\u1031\u1038\u101e\u100a\u1037\u103a \u1016\u102d\u102f\u1004\u103a\u1010\u1005\u103a\u1001\u102f\u1016\u103c\u1004\u1037\u103a \u1011\u1015\u103a\u101c\u102f\u1015\u103a\u1000\u103c\u100a\u1037\u103a\u1015\u102b\u104b",[h._param("max-size",a)])}};c.$4=function(a,c){a=this.$7(a,c);if(a){b("cr:909496")!==null&&b("cr:909496").show(a.summary,a.description);return!1}else return!0};c.$7=function(a,b){var c;if(!b)return;var d=b.format.duration;d&&(d>this.$1.maxLength&&(c=this.$10()),d<this.$1.minLength&&!a&&(c=this.$11()));if(!b.streams||!b.streams.primaryVideo)return;d=b.streams.primaryVideo.width;a=b.streams.primaryVideo.height;var e=0,f=0;b.videoPlayerData!==null&&(e=b.videoPlayerData.height,f=b.videoPlayerData.width);this.$1.acceptDimensionsFromPlayer&&f!==0&&e!==0&&(d=f,a=e);!b.streams.primaryVideo&&b.streams.primaryAudio&&(c=this.$12());d<this.$1.minWidth&&(c=this.$13());a<this.$1.minHeight&&(c=this.$14());f=d/a;this.$1.require16to9AspectRatio&&((f>2||f<1.6)&&(c=this.$15()));this.$1.minAspectRatio&&(f<this.$1.minAspectRatio&&(c=this.$16()));this.$1.maxAspectRatio&&(f>this.$1.maxAspectRatio&&(c=this.$17()));return c};c.$10=function(){if(this.$1.source==="profile_video")return{summary:h._("\u1000\u102d\u102f\u101a\u103a\u101b\u1031\u1038\u1019\u103e\u1010\u103a\u1010\u1019\u103a\u1038 \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f \u1015\u103c\u101e\u1001\u103b\u102d\u1014\u103a \u1000\u103c\u102c\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a"),description:h._("\u1021\u1019\u103b\u102c\u1038\u1006\u102f\u1036\u1038\u1000\u103c\u102c\u1001\u103b\u102d\u1014\u103a\u101e\u100a\u103a {max-length} \u1005\u1000\u1039\u1000\u1014\u1037\u103a\u1016\u103c\u1005\u103a\u101e\u100a\u103a\u104b \u1000\u103b\u1031\u1038\u1007\u1030\u1038\u1015\u103c\u102f\u104d \u1015\u102d\u102f\u1010\u102d\u102f\u101e\u100a\u1037\u103a \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1010\u1005\u103a\u1001\u102f \u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1010\u1004\u103a\u1015\u102b\u104b",[h._param("max-length",this.$1.maxLength)])};else return{summary:h._("\u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f \u1015\u103c\u101e\u1001\u103b\u102d\u1014\u103a \u1000\u103c\u102c\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a"),description:h._("\u101e\u1004\u103a\u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1010\u1004\u103a\u101b\u1014\u103a \u1000\u103c\u102d\u102f\u1038\u1005\u102c\u1038\u1001\u1032\u1037\u101e\u100a\u1037\u103a \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f \u1015\u103c\u101e\u1001\u103b\u102d\u1014\u103a\u101e\u100a\u103a \u1021\u101c\u103d\u1014\u103a\u101b\u103e\u100a\u103a\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a\u104b \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1010\u1005\u103a\u1001\u102f\u1021\u1010\u103d\u1000\u103a \u1021\u1019\u103b\u102c\u1038\u1006\u102f\u1036\u1038\u1000\u103c\u102c\u1001\u103b\u102d\u1014\u103a\u1019\u103e\u102c {max-length} \u1019\u102d\u1014\u1005\u103a\u1016\u103c\u1005\u103a\u101e\u100a\u103a\u104b \u1000\u103b\u1031\u1038\u1007\u1030\u1038\u1015\u103c\u102f\u104d \u1015\u102d\u102f\u1010\u102d\u102f\u101e\u100a\u1037\u103a \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1010\u1005\u103a\u1001\u102f \u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1010\u1004\u103a\u1000\u103c\u100a\u1037\u103a\u1015\u102b\u104b",[h._param("max-length",Math.round(this.$1.maxLength/60))])}};c.$11=function(){return{summary:h._("\u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1015\u103c\u101e\u1001\u103b\u102d\u1014\u103a\u1010\u102d\u102f\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a"),description:h._({"second":"\u101e\u1004\u103a\u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1010\u1004\u103a\u101b\u1014\u103a \u1000\u103c\u102d\u102f\u1038\u1005\u102c\u1038\u1001\u1032\u1037\u101e\u100a\u1037\u103a \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u104f \u1015\u103c\u101e\u1001\u103b\u102d\u1014\u103a\u101e\u100a\u103a \u1010\u102d\u102f\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a\u104b \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1010\u1005\u103a\u1001\u102f\u104f \u1021\u1014\u100a\u103a\u1038\u1006\u102f\u1036\u1038\u1000\u103c\u102c\u1001\u103b\u102d\u1014\u103a\u101e\u100a\u103a {min-length} \u1005\u1000\u1039\u1000\u1014\u1037\u103a\u1016\u103c\u1005\u103a\u101e\u100a\u103a\u104b \u1015\u102d\u102f\u101b\u103e\u100a\u103a\u1000\u103c\u102c\u101e\u100a\u1037\u103a \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1010\u1005\u103a\u1001\u102f \u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1010\u1004\u103a\u1000\u103c\u100a\u1037\u103a\u1015\u102b\u104b","seconds":"\u101e\u1004\u103a\u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1010\u1004\u103a\u101b\u1014\u103a \u1000\u103c\u102d\u102f\u1038\u1005\u102c\u1038\u1001\u1032\u1037\u101e\u100a\u1037\u103a \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f \u1015\u103c\u101e\u1001\u103b\u102d\u1014\u103a\u101e\u100a\u103a \u1021\u101c\u103d\u1014\u103a\u1010\u102d\u102f\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a\u104b \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1010\u1005\u103a\u1001\u102f\u1021\u1010\u103d\u1000\u103a \u1021\u1014\u100a\u103a\u1038\u1006\u102f\u1036\u1038\u1000\u103c\u102c\u1001\u103b\u102d\u1014\u103a\u1019\u103e\u102c {min-length} \u1005\u1000\u1039\u1000\u1014\u1037\u103a\u1016\u103c\u1005\u103a\u101e\u100a\u103a\u104b \u1000\u103b\u1031\u1038\u1007\u1030\u1038\u1015\u103c\u102f\u104d \u1015\u102d\u102f\u1000\u103c\u102c\u101e\u100a\u1037\u103a \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1010\u1005\u103a\u1001\u102f \u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1010\u1004\u103a\u1000\u103c\u100a\u1037\u103a\u1015\u102b\u104b"},[h._param("min-length",this.$1.minLength),h._enum(this.$1.minLength===1?"second":"seconds",{second:"second",seconds:"seconds"})])}};c.$12=function(){var a="http://www.facebook.com/help/?faq=218673814818907#What-formats-of-video-files-can-I-upload?";a=i.jsx(b("cr:909497"),{href:a,children:h._("\u1015\u1036\u1037\u1015\u102d\u102f\u1038\u1011\u102c\u1038\u101e\u1031\u102c \u1017\u102e\u1012\u102e\u101a\u102d\u102f\u1016\u1031\u102c\u1019\u1010\u103a")});return{summary:h._("\u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u101b\u103e\u102c\u1019\u1010\u103d\u1031\u1037\u1015\u102b"),description:h._("\u101e\u1004\u103a\u101e\u100a\u103a \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1019\u101f\u102f\u1010\u103a\u101e\u100a\u1037\u103a \u1016\u102d\u102f\u1004\u103a\u1010\u1005\u103a\u1001\u102f\u1000\u102d\u102f \u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1010\u1004\u103a\u101b\u1014\u103a \u1000\u103c\u102d\u102f\u1038\u1005\u102c\u1038\u1014\u1031\u1015\u102f\u1036\u1015\u1031\u102b\u103a\u101e\u100a\u103a\u104b {supported-video-format link} \u1010\u1005\u103a\u1001\u102f\u1000\u102d\u102f \u1021\u1015\u103a\u101c\u102f\u1012\u103a \u1005\u1019\u103a\u1038\u1010\u1004\u103a\u1000\u103c\u100a\u1037\u103a\u1015\u102b",[h._param("supported-video-format link",a)])}};c.$13=function(){return{summary:h._("\u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1021\u1014\u1036 \u1000\u103b\u1009\u103a\u1038\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a"),description:h._("\u101e\u1004\u103a\u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1010\u1004\u103a\u101b\u1014\u103a \u1000\u103c\u102d\u102f\u1038\u1005\u102c\u1038\u1001\u1032\u1037\u101e\u100a\u1037\u103a \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1021\u1014\u1036\u101e\u100a\u103a \u1021\u101c\u103d\u1014\u103a\u1010\u102d\u102f\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a\u104b \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1010\u1005\u103a\u1001\u102f\u1021\u1010\u103d\u1000\u103a \u1021\u1014\u100a\u103a\u1038\u1006\u102f\u1036\u1038\u1021\u1014\u1036\u1019\u103e\u102c {min-width} \u1016\u103c\u1005\u103a\u101e\u100a\u103a\u104b \u1000\u103b\u1031\u1038\u1007\u1030\u1038\u1015\u103c\u102f\u104d \u1015\u102d\u102f\u1000\u103b\u101a\u103a\u101e\u100a\u1037\u103a \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1000\u102d\u102f \u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1010\u1004\u103a\u1000\u103c\u100a\u1037\u103a\u1015\u102b\u104b",[h._param("min-width",this.$1.minWidth)])}};c.$15=function(){return{summary:h._("\u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f \u1021\u1015\u103a\u101c\u102f\u1012\u103a\u101c\u102f\u1015\u103a\u1014\u1031\u1005\u1009\u103a \u1015\u103c\u103f\u1014\u102c \u1016\u103c\u1005\u103a\u1015\u1031\u102b\u103a\u1014\u1031\u101e\u100a\u103a"),description:h._("\u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1019\u103b\u102c\u1038\u1010\u103d\u1004\u103a \u1021\u101c\u103b\u102c\u1038\u1021\u1014\u1036\u1021\u1001\u103b\u102d\u102f\u1038 \u1041\u1046\u1038\u1049 \u101b\u103e\u102d\u101c\u103b\u103e\u1004\u103a \u1021\u1000\u1031\u102c\u1004\u103a\u1038\u1006\u102f\u1036\u1038\u1016\u103c\u1005\u103a\u101e\u100a\u103a\u104b \u101e\u1004\u1037\u103a\u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1000\u102d\u102f \u1015\u103c\u1014\u103a\u1015\u103c\u1004\u103a\u1006\u1004\u103a\u1015\u103c\u102e\u1038 \u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1011\u1015\u103a\u101c\u102f\u1015\u103a\u1000\u103c\u100a\u1037\u103a\u1015\u102b\u104b")}};c.$14=function(){return{summary:h._("\u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1021\u1019\u103c\u1004\u1037\u103a\u1019\u103e\u102c \u1010\u102d\u102f\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a"),description:h._("\u101e\u1004\u103a\u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1010\u1004\u103a\u101b\u1014\u103a \u1000\u103c\u102d\u102f\u1038\u1005\u102c\u1038\u1001\u1032\u1037\u101e\u100a\u1037\u103a \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1021\u1019\u103c\u1004\u1037\u103a\u101e\u100a\u103a \u1010\u102d\u102f\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a\u104b \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1010\u1005\u103a\u1001\u102f\u1021\u1010\u103d\u1000\u103a \u1021\u1014\u100a\u103a\u1038\u1006\u102f\u1036\u1038\u1016\u101b\u102d\u1014\u103a\u1021\u1019\u103c\u1004\u1037\u103a\u1019\u103e\u102c {min-height} \u1016\u103c\u1005\u103a\u101e\u100a\u103a\u104b \u1016\u101b\u102d\u1014\u103a\u1015\u102d\u102f\u1019\u103c\u1004\u1037\u103a\u101e\u100a\u1037\u103a \u1017\u103d\u102e\u1012\u102e\u101a\u102d\u102f\u1010\u1005\u103a\u1001\u102f \u1021\u1015\u103a\u101c\u102f\u1012\u103a\u1010\u1004\u103a\u1000\u103c\u100a\u1037\u103a\u1015\u102b\u104b",[h._param("min-height",this.$1.minHeight)])}};c.$17=function(){return{summary:h._("\u1017\u102e\u1012\u102e\u101a\u102d\u102f \u1000\u103b\u101a\u103a\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a"),description:h._("\u101e\u1004\u103a\u101b\u103d\u1031\u1038\u1001\u103b\u101a\u103a\u1011\u102c\u1038\u101e\u100a\u1037\u103a \u1017\u102e\u1012\u102e\u101a\u102d\u102f\u101e\u100a\u103a \u1000\u103b\u101a\u103a\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a\u104b \u1017\u102e\u1012\u102e\u101a\u102d\u102f\u1019\u103b\u102c\u1038\u1021\u1010\u103d\u1000\u103a \u101b\u103e\u102f\u1011\u1031\u102c\u1004\u1037\u103a\u1021\u1001\u103b\u102d\u102f\u1038\u1019\u103b\u102c\u1038\u101e\u100a\u103a {max_aspect_ratio} \u1014\u103e\u1004\u1037\u103a {min_aspect_ratio} \u1021\u1000\u103c\u102c\u1038\u101b\u103e\u102d\u101b\u1014\u103a\u101c\u102d\u102f\u1021\u1015\u103a\u1015\u102b\u101e\u100a\u103a\u104b \u1015\u102d\u102f\u1019\u102d\u102f\u101b\u103e\u100a\u103a\u101e\u100a\u1037\u103a\u1017\u102e\u1012\u102e\u101a\u102d\u102f\u1000\u102d\u102f \u1019\u103e\u1010\u103a\u1010\u1019\u103a\u1038\u101a\u1030\u1015\u103c\u102e\u1038 \u1021\u1015\u103a\u101c\u102f\u1012\u103a\u101c\u102f\u1015\u103a\u1015\u102b\u104b",[h._param("max_aspect_ratio",this.$1.maxAspectRatio+":1"),h._param("min_aspect_ratio",this.$1.minAspectRatio+":1")])}};c.$16=function(){return{summary:h._("\u1017\u102e\u1012\u102e\u101a\u102d\u102f\u101b\u103e\u100a\u103a\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a"),description:h._("\u101e\u1004\u103a\u101b\u103d\u1031\u1038\u1001\u103b\u101a\u103a\u101e\u100a\u1037\u103a\u1017\u102e\u1012\u102e\u101a\u102d\u102f\u101e\u100a\u103a \u101b\u103e\u100a\u103a\u101c\u103d\u1014\u103a\u1038\u101e\u100a\u103a\u104b \u1017\u102e\u1012\u102e\u101a\u102d\u102f\u1019\u103b\u102c\u1038\u1021\u1010\u103d\u1000\u103a \u101b\u103e\u102f\u1011\u1031\u102c\u1004\u1037\u103a\u1021\u1001\u103b\u102d\u102f\u1038\u1019\u103b\u102c\u1038\u1019\u103e\u102c {max_aspect_ratio} \u1014\u103e\u1004\u1037\u103a {min_aspect_ratio} \u1021\u1000\u103c\u102c\u1038\u101b\u103e\u102d\u101b\u1014\u103a\u101c\u102d\u102f\u1021\u1015\u103a\u1015\u102b\u101e\u100a\u103a\u104b \u1015\u102d\u102f\u1019\u102d\u102f\u1010\u102d\u102f\u101e\u100a\u1037\u103a\u1017\u102e\u1012\u102e\u101a\u102d\u102f\u1000\u102d\u102f \u1019\u103e\u1010\u103a\u1010\u1019\u103a\u1038\u101a\u1030\u1015\u103c\u102e\u1038 \u1021\u1015\u103a\u101c\u102f\u1012\u103a\u101c\u102f\u1015\u103a\u1015\u102b\u104b",[h._param("max_aspect_ratio",this.$1.maxAspectRatio+":1"),h._param("min_aspect_ratio",this.$1.minAspectRatio+":1")])}};return a}();e.exports=a}),null);
__d("submitForm",["DOM"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){var c=a.querySelector('input[type="submit"]');c!=null?c.click():(c=b("DOM").create("input",{type:"submit",className:"hidden_elem"}),b("DOM").appendContent(a,c),c.click(),b("DOM").remove(c))}}),null);
__d("VideoUploadRequest",["AsyncRequest","DOM","DTSG","FileForm","Form","VideoUploadFeatureDetector","emptyFunction","flattenPHPQueryData","submitForm"],(function(a,b,c,d,e,f){var g="video";a=function(){"use strict";function a(a){this.$1=a;this.$2=null;this.$3=!1;this.$4=null;this.$5=null;this.$6=null;this.$7=null;this.$8=a=b("emptyFunction");this.$9=a;this.$10=a;this.$11=a;this.$12=null}var c=a.prototype;c.setAllowCrossOrigin=function(a){this.$3=a;return this};c.setData=function(a){this.$4=a;return this};c.setWaterfallID=function(a){this.$6=a;return this};c.setSuccessHandler=function(a){this.$8=a;return this};c.setErrorHandler=function(a){this.$9=a;return this};c.setTransportErrorHandler=function(a){this.$10=a;return this};c.setUploadProgressHandler=function(a){this.$11=a;return this};c.setTimeoutHandler=function(a,b){this.$7=a;this.$12=b;return this};c.setThumbnail=function(a){this.$13=a;return this};c.setCustomProfileImage=function(a){this.$14=a;return this};c.setCustomBackgroundImage=function(a){this.$15=a;return this};c.setFeedBackgroundImage=function(a){this.$16=a;return this};c.setHandle=function(a){this.$5=a;return this};c.setCaptions=function(a){this.$17=a;return this};c.setPollOptionImages=function(a){this.$18=a;return this};c.send=function(){if(this.$2)throw new Error("An upload request is already in progress.");if(b("VideoUploadFeatureDetector").supportsXHR()){this.$2=this.$19();if(this.$13||this.$17||this.$14||this.$15||this.$16||this.$18){var a=new FormData();this.$13&&a.append("thumb",this.$13);this.$14&&a.append("schedule_custom_profile_image",this.$14);this.$15&&a.append("schedule_custom_background_image",this.$15);this.$16&&a.append("schedule_feed_background_image",this.$16);this.$17&&this.$17.forEach(function(b,c){c=b.getIsDefault()?"captions_default":"captions_file"+c;a.append(c,b.getFile())});if(this.$18){var c=this.$18;Object.keys(c).forEach(function(b){a.append(b,c[b])})}if(this.$4){var d=b("flattenPHPQueryData")(this.$4);Object.keys(d).forEach(function(b){a.append(b,d[b])})}this.$2.setRawData(a)}this.$2.send()}else this.$2=this.$20(),this.$21(this.$2)};c.sendChunk=function(a){if(this.$2)throw new Error("An upload request is already in progress.");var b=new FormData();this.$5?b.append("fbuploader_video_file_chunk",this.$5):b.append("video_file_chunk",a);this.$2=this.$19();this.$2.setRawData(b);this.$2.send()};c.sendFile=function(a){if(this.$2)throw new Error("An upload request is already in progress.");this.$2=this.$20();var c=a.cloneNode(!1);a.name=g;b("DOM").replace(a,c);b("DOM").appendContent(this.$2.getRoot(),a);this.$21(this.$2);a.name=c.name;b("DOM").replace(c,a)};c.abort=function(){if(!this.$2)return;this.$2.abort();this.$2=null};c.$19=function(){var a=this.__getAsyncRequest().setAllowCrossOrigin(this.$3).setURI(this.$1).setData(this.$4).setRequestHeader("X_FB_VIDEO_WATERFALL_ID",this.$6).setHandler(this.$8).setErrorHandler(this.$9).setTransportErrorHandler(this.$10).setUploadProgressHandler(this.$11);this.$12&&a.setTimeoutHandler(this.$7,this.$12);return a};c.__getAsyncRequest=function(){return new(b("AsyncRequest"))()};c.$20=function(){var a=b("DOM").create("form",{action:this.$1,method:"POST"});b("Form").createHiddenInputs(babelHelpers["extends"]({fb_dtsg:b("DTSG").getToken()},this.$4),a);a=new(b("FileForm"))(a,null,{allowCrossOrigin:this.$3});a.subscribe("success",this.$22.bind(this));a.subscribe("failure",this.$23.bind(this));a.subscribe("progress",this.$24.bind(this));return a};c.$21=function(a){b("DOM").appendContent(document.body,a.getRoot()),b("submitForm")(a.getRoot())};c.$22=function(a,b){this.$8(b.response)};c.$23=function(a,b){this.$9(b.response)};c.$24=function(a,b){this.$11(b.event)};return a}();e.exports=a}),null);
__d("VideoUploadRequestContext",[],(function(a,b,c,d,e,f){a=function(){function a(){this.$14=!1,this.$21=0,this.$22=!1,this.$23=!1,this.$26=!1,this.reset()}var b=a.prototype;b.setFile=function(a){this.$1=a;return this};b.getFile=function(){return this.$1};b.setMetadata=function(a){this.$24=a;return this};b.getMetadata=function(){return this.$24};b.setVideoID=function(a){this.$2=a;return this};b.getVideoID=function(){return this.$2};b.setXPVAssetID=function(a){this.$29=a;return this};b.getXPVAssetID=function(){return this.$29};b.setUploadSessionID=function(a){this.$3=a;return this};b.getUploadSessionID=function(){return this.$3};b.setFbRegion=function(a){this.$4=a;return this};b.getFbRegion=function(){return this.$4};b.setStartOffset=function(a){this.$5=a;return this};b.getStartOffset=function(){return this.$5};b.setEndOffset=function(a){this.$6=a;return this};b.getEndOffset=function(){return this.$6};b.setPartitionStartOffset=function(a){this.$17=a;return this};b.getPartitionStartOffset=function(){return this.$17};b.setPartitionEndOffset=function(a){this.$18=a;return this};b.getPartitionEndOffset=function(){return this.$18};b.setPartitionNo=function(a){this.$19=a;return this};b.getPartitionNo=function(){return this.$19};b.setTargetID=function(a){this.$7=a;return this};b.getTargetID=function(){return this.$7};b.setSource=function(a){this.$8=a;return this};b.setComposerDialogVersion=function(a){this.$9=a;return this};b.getComposerDialogVersion=function(){return this.$9};b.getSource=function(){return this.$8};b.setWaterfallID=function(a){this.$10=a;return this};b.getWaterfallID=function(){return this.$10};b.setComposerEntryPointRef=function(a){this.$11=a;return this};b.getComposerEntryPointRef=function(){return this.$11};b.setComposerWorkSharedDraftMode=function(a){this.$12=a;return this};b.getComposerWorkSharedDraftMode=function(){return this.$12};b.setHasFileBeenReplaced=function(a){this.$14=a;return this};b.getHasFileBeenReplaced=function(){return this.$14};b.setSupportsChunking=function(a){this.$15=a;return this};b.getSupportsChunking=function(){return this.$15};b.setSupportsFileAPI=function(a){this.$16=a;return this};b.getSupportsFileAPI=function(){return this.$16};b.setCreatorProduct=function(a){this.$20=a;return this};b.getCreatorProduct=function(){return this.$20};b.setLastKnownUploadSpeed=function(a){this.$21=a;return this};b.getLastKnownUploadSpeed=function(){return this.$21||0};b.setUseParallelChunks=function(a){this.$22=a;return this};b.getUseParallelChunks=function(){return this.$22};b.setIsSphericalVideo=function(a){this.$23=a;return this};b.getIsSphericalVideo=function(){return this.$23};b.setSphericalMetadata=function(a){this.$25=a;return this};b.getSphericalMetadata=function(){return this.$25};b.setEnableOmnistab=function(a){this.$26=a;return this};b.getEnableOmnistab=function(){return this.$26};b.setClientChunkSize=function(a){this.$27=a;return this};b.getClientChunkSize=function(){return this.$27};b.setVideoPublisherActionSource=function(a){this.$28=a;return this};b.getVideoPublisherActionSource=function(){return this.$28};b.setComposerSessionID=function(a){this.$13=a;return this};b.getComposerSessionID=function(){return this.$13};b.setRetryState=function(a){this.$30=a;return this};b.getRetryState=function(){return this.$30};b.reset=function(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null,this.$12=null,this.$14=!1,this.$15=null,this.$16=null,this.$17=null,this.$18=null,this.$19=null,this.$20=null,this.$21=0,this.$22=!1,this.$23=!1,this.$24={},this.$25={},this.$26=!1,this.$27=null,this.$28={},this.$13=null,this.$30=null};return a}();e.exports=a}),null);
__d("VideoUploadGraphQLPostRequestManager",["FBLogger","GraphQLVideoPublisherInputDataHandlerBase","GraphQLVideoPublisherVideoUploaderInputDataHandler","VideoComposerVideoPublisher","clearTimeout","err","gkx","mixin","requireCond","setTimeout","cr:909282"],(function(a,b,c,d,e,f){a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c,d,e){var f;f=a.call(this)||this;f.$VideoUploadGraphQLPostRequestManager1=0;f.$VideoUploadGraphQLPostRequestManager2=0;f.$VideoUploadGraphQLPostRequestManager3=0;f.$VideoUploadGraphQLPostRequestManager4=0;f.$VideoUploadGraphQLPostRequestManager5=0;f.$VideoUploadGraphQLPostRequestManager6=0;f.$VideoUploadGraphQLPostRequestManager7=null;f.$VideoUploadGraphQLPostRequestManager8=null;f.$VideoUploadGraphQLPostRequestManager9=!1;f.$VideoUploadGraphQLPostRequestManager1=b;f.$VideoUploadGraphQLPostRequestManager2=c;f.$VideoUploadGraphQLPostRequestManager3=0;f.$VideoUploadGraphQLPostRequestManager4=d;f.$VideoUploadGraphQLPostRequestManager5=e;f.$VideoUploadGraphQLPostRequestManager6=0;return f}var d=c.prototype;d.sendRequest=function(a){this.$VideoUploadGraphQLPostRequestManager8=a;if(this.$VideoUploadGraphQLPostRequestManager9){b("gkx")("1838765")&&b("FBLogger")("video_publish_graphql").info("Sending publishing request again while processing another request");return}this.$VideoUploadGraphQLPostRequestManager10();this.inform("request-started")};d.clearRequest=function(){this.$VideoUploadGraphQLPostRequestManager9=!1,this.$VideoUploadGraphQLPostRequestManager6=0,this.$VideoUploadGraphQLPostRequestManager3=0};d.$VideoUploadGraphQLPostRequestManager10=function(){var a=this.$VideoUploadGraphQLPostRequestManager8;if(a==null)return;b("clearTimeout")(this.$VideoUploadGraphQLPostRequestManager7);this.$VideoUploadGraphQLPostRequestManager7=null;var c=a.getMetadata();a=this.__createRequestData(a);c=new(b("GraphQLVideoPublisherVideoUploaderInputDataHandler"))(c,a);this.$VideoUploadGraphQLPostRequestManager9=!0;a=new(b("VideoComposerVideoPublisher"))(c);a.publish(this.$VideoUploadGraphQLPostRequestManager11.bind(this),this.$VideoUploadGraphQLPostRequestManager12.bind(this))};d.__createRequestData=function(a){var c=a.getVideoID(),d=a.getTargetID();if(c==null)throw b("err")("Video id cannot be null");if(d==null)throw b("err")("Target id cannot be null");return{video_id:c,target_id:d,source:"COMPOSER",waterfall_id:a.getWaterfallID()||"",creator_product:a.getCreatorProduct(),composer_entry_point_ref:a.getComposerEntryPointRef&&a.getComposerEntryPointRef(),composer_dialog_version:a.getComposerDialogVersion(),has_file_been_replaced:a.getHasFileBeenReplaced(),supports_chunking:a.getSupportsChunking()}};d.$VideoUploadGraphQLPostRequestManager11=function(a){this.inform("request-finished",{video_asset_id:(a=a.video_publish)==null?void 0:a.video_asset_id});this.clearRequest()};d.$VideoUploadGraphQLPostRequestManager13=function(a){this.inform("request-failed",{error_code:a.number,error_description:a.message,error_summary:a.name,error_object:a}),this.clearRequest()};d.$VideoUploadGraphQLPostRequestManager12=function(a){var c=b("gkx")("1835901");c&&this.$VideoUploadGraphQLPostRequestManager14(a)&&this.$VideoUploadGraphQLPostRequestManager6<this.$VideoUploadGraphQLPostRequestManager4?(b("gkx")("1838765")&&b("FBLogger")("video_publish_graphql").info("retry publishing for error: %s",a.stack),this.$VideoUploadGraphQLPostRequestManager6++,this.$VideoUploadGraphQLPostRequestManager15(this.$VideoUploadGraphQLPostRequestManager16(this.$VideoUploadGraphQLPostRequestManager5,this.$VideoUploadGraphQLPostRequestManager6))):this.$VideoUploadGraphQLPostRequestManager13(a)};d.$VideoUploadGraphQLPostRequestManager16=function(a,b){return Math.pow(a,b)*1e3};d.$VideoUploadGraphQLPostRequestManager15=function(a){b("clearTimeout")(this.$VideoUploadGraphQLPostRequestManager7),this.$VideoUploadGraphQLPostRequestManager7=b("setTimeout")(this.$VideoUploadGraphQLPostRequestManager10.bind(this),a)};d.$VideoUploadGraphQLPostRequestManager14=function(a){a=a.toString();return a.includes("NetworkTransportError")||a.includes("NetworkTimeoutError")||a.includes("NetworkRequestError")?!0:!1};d.hasAPISupport=function(a){return b("GraphQLVideoPublisherInputDataHandlerBase").hasAPISupport(a)};return c}(b("mixin")(b("cr:909282")));e.exports=a}),null);
__d("VideoUploadPostRequestManager",["VideoUploadLogger","VideoUploadRequest","clearTimeout","mixin","requireCond","setTimeout","cr:909282"],(function(a,b,c,d,e,f){a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c,d,e,f){var g;g=a.call(this)||this;g.$VideoUploadPostRequestManager2=b;g.$VideoUploadPostRequestManager3=c;g.$VideoUploadPostRequestManager4=d;g.$VideoUploadPostRequestManager5=0;g.$VideoUploadPostRequestManager6=e;g.$VideoUploadPostRequestManager7=f;g.$VideoUploadPostRequestManager8=0;return g}var d=c.prototype;d.$VideoUploadPostRequestManager9=function(){return this.$VideoUploadPostRequestManager1?new(b("VideoUploadLogger"))({source:this.$VideoUploadPostRequestManager1.getSource(),waterfall_id:this.$VideoUploadPostRequestManager1.getWaterfallID(),target_id:this.$VideoUploadPostRequestManager1.getTargetID(),composer_entry_point_ref:this.$VideoUploadPostRequestManager1.getComposerEntryPointRef&&this.$VideoUploadPostRequestManager1.getComposerEntryPointRef()}):null};d.getRequest=function(){return this.$VideoUploadPostRequestManager10};d.sendRequest=function(a){this.$VideoUploadPostRequestManager1=a;if(this.$VideoUploadPostRequestManager10){var c=this.$VideoUploadPostRequestManager9();c&&c.logEvent(b("VideoUploadLogger").EVENT_DUPLICATE_POST_REQUEST);return}this.$VideoUploadPostRequestManager11=babelHelpers["extends"]({},a.getMetadata(),this.__createRequestData(a));this.$VideoUploadPostRequestManager12=this.$VideoUploadPostRequestManager11.thumb;this.$VideoUploadPostRequestManager13=this.$VideoUploadPostRequestManager11.schedule_custom_profile_image;this.$VideoUploadPostRequestManager14=this.$VideoUploadPostRequestManager11.schedule_custom_background_image;this.$VideoUploadPostRequestManager15=this.$VideoUploadPostRequestManager11.schedule_feed_background_image;delete this.$VideoUploadPostRequestManager11.thumb;this.$VideoUploadPostRequestManager16=this.$VideoUploadPostRequestManager11.captions;delete this.$VideoUploadPostRequestManager11.captions;this.$VideoUploadPostRequestManager17=a.getWaterfallID();this.$VideoUploadPostRequestManager18=this.$VideoUploadPostRequestManager11.pollImages;this.$VideoUploadPostRequestManager19();this.inform("request-started")};d.$VideoUploadPostRequestManager19=function(){b("clearTimeout")(this.$VideoUploadPostRequestManager20),this.$VideoUploadPostRequestManager20=null,this.$VideoUploadPostRequestManager10=this.__getVideoUploadRequest(this.$VideoUploadPostRequestManager2).setAllowCrossOrigin(!0).setData(this.$VideoUploadPostRequestManager11).setThumbnail(this.$VideoUploadPostRequestManager12).setCustomProfileImage(this.$VideoUploadPostRequestManager13).setCustomBackgroundImage(this.$VideoUploadPostRequestManager14).setFeedBackgroundImage(this.$VideoUploadPostRequestManager15).setCaptions(this.$VideoUploadPostRequestManager16).setWaterfallID(this.$VideoUploadPostRequestManager17).setPollOptionImages(this.$VideoUploadPostRequestManager18).setSuccessHandler(this.$VideoUploadPostRequestManager21.bind(this)).setErrorHandler(this.$VideoUploadPostRequestManager22.bind(this)).setTransportErrorHandler(this.$VideoUploadPostRequestManager23.bind(this)),this.$VideoUploadPostRequestManager10.send()};d.__createRequestData=function(a){return{video_id:a.getVideoID(),target_id:a.getTargetID(),source:a.getSource(),waterfall_id:a.getWaterfallID(),creator_product:a.getCreatorProduct(),composer_entry_point_ref:a.getComposerEntryPointRef&&a.getComposerEntryPointRef(),composer_dialog_version:a.getComposerDialogVersion(),has_file_been_replaced:a.getHasFileBeenReplaced(),supports_chunking:a.getSupportsChunking()}};d.__getVideoUploadRequest=function(a){return new(b("VideoUploadRequest"))(a)};d.clearRequest=function(){this.$VideoUploadPostRequestManager10=null,this.$VideoUploadPostRequestManager8=0,this.$VideoUploadPostRequestManager5=0};d.isInProgress=function(){return!!this.$VideoUploadPostRequestManager10};d.$VideoUploadPostRequestManager24=function(a){b("clearTimeout")(this.$VideoUploadPostRequestManager20),this.$VideoUploadPostRequestManager20=b("setTimeout")(this.$VideoUploadPostRequestManager19.bind(this),a)};d.$VideoUploadPostRequestManager25=function(a,b){return Math.pow(a,b)*1e3};d.$VideoUploadPostRequestManager21=function(a){a=a.getPayload();this.inform("request-finished",{video_id:a.video_id,video_asset_id:a.video_asset_id,container_type:a.container_type,transport_retries:this.$VideoUploadPostRequestManager5,server_retries:this.$VideoUploadPostRequestManager8,premiere_destination_video_id:a.premiere_destination_video_id});this.clearRequest()};d.$VideoUploadPostRequestManager26=function(a){this.inform("request-failed",{error_code:a.getError(),error_description:a.getErrorDescription(),error_summary:a.getErrorSummary(),transport_retries:this.$VideoUploadPostRequestManager5,server_retries:this.$VideoUploadPostRequestManager8,error_is_silent:a.isSilent(),error_is_transient:a.isTransient(),www_request_id:(a=a.getPayload())==null?void 0:a.__www_request_id__});this.clearRequest()};d.$VideoUploadPostRequestManager22=function(a){this.$VideoUploadPostRequestManager10=null;this.$VideoUploadPostRequestManager5=0;var c=this.$VideoUploadPostRequestManager9();if(c){var d={server_retries:this.$VideoUploadPostRequestManager8,extra_data:{failure_is_transient:a.isTransient()}};c.logEvent(b("VideoUploadLogger").EVENT_HANDLING_SERVER_FAILURE_RESPONSE,d)}a.isTransient()&&this.$VideoUploadPostRequestManager8<this.$VideoUploadPostRequestManager6?(this.$VideoUploadPostRequestManager8++,this.$VideoUploadPostRequestManager24(this.$VideoUploadPostRequestManager25(this.$VideoUploadPostRequestManager7,this.$VideoUploadPostRequestManager8))):this.$VideoUploadPostRequestManager26(a)};d.$VideoUploadPostRequestManager23=function(a){var c=this.$VideoUploadPostRequestManager9();if(c){var d={extra_data:{transport_retries:this.$VideoUploadPostRequestManager5}};c.logEvent(b("VideoUploadLogger").EVENT_HANDLING_TRANSPORT_FAILURE_RESPONSE,d)}this.$VideoUploadPostRequestManager3===0||this.$VideoUploadPostRequestManager5>=this.$VideoUploadPostRequestManager3?this.$VideoUploadPostRequestManager26(a):(this.$VideoUploadPostRequestManager5++,this.$VideoUploadPostRequestManager10=null,this.$VideoUploadPostRequestManager24(this.$VideoUploadPostRequestManager25(this.$VideoUploadPostRequestManager4,this.$VideoUploadPostRequestManager5)))};return c}(b("mixin")(b("cr:909282")));e.exports=a}),null);
__d("VideoUploadConnectionMonitor",["requireCond","cr:909282","Network","VideoUploadFeatureDetector","debounce","mixin","setTimeout"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$VideoUploadConnectionMonitor1=!1;c.$VideoUploadConnectionMonitor2=[];c.$VideoUploadConnectionMonitor3=!1;c.$VideoUploadConnectionMonitor4=!0;c.$VideoUploadConnectionMonitor5=b("debounce")(function(){this.$VideoUploadConnectionMonitor6(!1)}.bind(babelHelpers.assertThisInitialized(c)),2e3);return c}var d=c.prototype;d.notifyStart=function(){if(this.$VideoUploadConnectionMonitor3)return;this.$VideoUploadConnectionMonitor2.length===0&&(this.$VideoUploadConnectionMonitor2.push(b("Network").addListener("online",function(){this.$VideoUploadConnectionMonitor6(!0)}.bind(this))),this.$VideoUploadConnectionMonitor2.push(b("Network").addListener("offline",function(){this.$VideoUploadConnectionMonitor1?this.$VideoUploadConnectionMonitor5():(this.$VideoUploadConnectionMonitor5.reset(),b("setTimeout")(this.$VideoUploadConnectionMonitor5,2e3))}.bind(this))));this.$VideoUploadConnectionMonitor3=!0};d.notifyProgress=function(a){if(!this.$VideoUploadConnectionMonitor3)return;if(!a)return;b("VideoUploadFeatureDetector").supportsFullProgress()&&(this.$VideoUploadConnectionMonitor1=!0,a.total&&a.loaded===a.total?this.$VideoUploadConnectionMonitor5.reset():this.$VideoUploadConnectionMonitor5())};d.notifySuccess=function(){if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(!0)};d.notifyTransportError=function(){if(!this.$VideoUploadConnectionMonitor3)return;this.$VideoUploadConnectionMonitor3=!1;this.$VideoUploadConnectionMonitor6(!1)};d.notifyError=function(){if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(!0)};d.isOnline=function(){return this.$VideoUploadConnectionMonitor4};d.reset=function(){while(this.$VideoUploadConnectionMonitor2.length)this.$VideoUploadConnectionMonitor2.pop().remove();this.$VideoUploadConnectionMonitor5.reset();this.$VideoUploadConnectionMonitor3=!1};d.$VideoUploadConnectionMonitor6=function(a){this.$VideoUploadConnectionMonitor5.reset(),this.$VideoUploadConnectionMonitor4!==a&&(this.$VideoUploadConnectionMonitor4=a,this.$VideoUploadConnectionMonitor4?this.inform("online"):this.inform("offline"))};return c}(b("mixin")(b("cr:909282")));e.exports=a}),null);
__d("VideoUploadReceiveRequestManager",["fbt","ODS","ResumableUploadAsyncService","ResumableUploadService","ResumableUploadServiceState.enum","VideoUploadConnectionMonitor","VideoUploadRequest","clearTimeout","gkx","md5","mixin","requireCond","setTimeout","uuid","cr:909282"],(function(a,b,c,d,e,f,g){var h=1363037,i={INITIAL:"initial",NEXT_CHUNK:"next chunk",INVALID_OFFSET_RETRY:"invalid offset retry",SERVER_FAILURE_RETRY:"server failure retry",TRANSPORT_FAILURE_RETRY:"transport failure retry",TIMEOUT_RETRY:"timeout retry",BACK_ONLINE:"back online"};a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var A;m===void 0&&(m="");n===void 0&&(n=!1);o===void 0&&(o=!1);p===void 0&&(p=null);q===void 0&&(q=null);r===void 0&&(r=null);s===void 0&&(s=0);t===void 0&&(t=!1);u===void 0&&(u=!1);v===void 0&&(v=!1);w===void 0&&(w=!1);x===void 0&&(x=!1);y===void 0&&(y=!1);z===void 0&&(z=0);A=a.call(this)||this;A.$VideoUploadReceiveRequestManager1=c;A.$VideoUploadReceiveRequestManager2=d;A.$VideoUploadReceiveRequestManager3=e!=null?e:0;A.$VideoUploadReceiveRequestManager4=f;A.$VideoUploadReceiveRequestManager5=g;A.$VideoUploadReceiveRequestManager6=h;A.$VideoUploadReceiveRequestManager7=i;A.$VideoUploadReceiveRequestManager8=j;A.$VideoUploadReceiveRequestManager9=k;A.$VideoUploadReceiveRequestManager10=l;A.$VideoUploadReceiveRequestManager11=0;A.$VideoUploadReceiveRequestManager14=0;A.$VideoUploadReceiveRequestManager15=0;A.$VideoUploadReceiveRequestManager16=null;A.$VideoUploadReceiveRequestManager17=null;A.$VideoUploadReceiveRequestManager18=0;A.$VideoUploadReceiveRequestManager19="constructed";A.$VideoUploadReceiveRequestManager13=null;A.$VideoUploadReceiveRequestManager20=null;A.$VideoUploadReceiveRequestManager21=null;A.$VideoUploadReceiveRequestManager22=m;A.$VideoUploadReceiveRequestManager24=o;A.$VideoUploadReceiveRequestManager23=n;A.$VideoUploadReceiveRequestManager25=p;A.$VideoUploadReceiveRequestManager26=!1;A.$VideoUploadReceiveRequestManager27=q;A.$VideoUploadReceiveRequestManager30=t;A.$VideoUploadReceiveRequestManager31=u;A.$VideoUploadReceiveRequestManager32=v;A.$VideoUploadReceiveRequestManager29=s;A.$VideoUploadReceiveRequestManager33=w;A.$VideoUploadReceiveRequestManager28=r;A.$VideoUploadReceiveRequestManager34=x;A.$VideoUploadReceiveRequestManager12=b("uuid")();A.$VideoUploadReceiveRequestManager35=y;A.$VideoUploadReceiveRequestManager36=z;A.$VideoUploadReceiveRequestManager41=null;A.$VideoUploadReceiveRequestManager42=null;A.$VideoUploadReceiveRequestManager40=!1;A.$VideoUploadReceiveRequestManager39=null;A.$VideoUploadReceiveRequestManager37=new(b("VideoUploadConnectionMonitor"))();A.$VideoUploadReceiveRequestManager37.subscribe("online",A.$VideoUploadReceiveRequestManager50.bind(babelHelpers.assertThisInitialized(A)));A.$VideoUploadReceiveRequestManager37.subscribe("offline",A.$VideoUploadReceiveRequestManager51.bind(babelHelpers.assertThisInitialized(A)));return A}var d=c.prototype;d.updateVideoID=function(a){if(this.$VideoUploadReceiveRequestManager38.getVideoID())return;this.$VideoUploadReceiveRequestManager38.setVideoID(a);this.$VideoUploadReceiveRequestManager45&&this.$VideoUploadReceiveRequestManager45.setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager38));this.$VideoUploadReceiveRequestManager52()};d.isResumabilityEnabled=function(){return this.$VideoUploadReceiveRequestManager23};d.isResumableServiceProxyReceiveEnabled=function(){return this.$VideoUploadReceiveRequestManager30};d.sendRequest=function(a){this.$VideoUploadReceiveRequestManager19="sending request";if(this.$VideoUploadReceiveRequestManager45){this.$VideoUploadReceiveRequestManager19="request already in progress";return}this.$VideoUploadReceiveRequestManager18=a.getEndOffset()-a.getStartOffset();this.$VideoUploadReceiveRequestManager38=a;this.$VideoUploadReceiveRequestManager53(i.INITIAL)};d.cancelRequest=function(){if(!this.$VideoUploadReceiveRequestManager45)return;this.$VideoUploadReceiveRequestManager45.abort();this.$VideoUploadReceiveRequestManager21!==void 0&&this.$VideoUploadReceiveRequestManager21!==null&&this.$VideoUploadReceiveRequestManager21.cancel();this.$VideoUploadReceiveRequestManager54();this.inform("request-canceled")};d.appendStateLogData=function(a,b){a[b+"request_manager_state"]=this.$VideoUploadReceiveRequestManager19,a[b+"upload_speed"]=this.$VideoUploadReceiveRequestManager17,a[b+"transport_retries"]=this.$VideoUploadReceiveRequestManager11,a[b+"server_retries"]=this.$VideoUploadReceiveRequestManager14,a[b+"timeout_retries"]=this.$VideoUploadReceiveRequestManager15,a[b+"last_timeout_value"]=this.$VideoUploadReceiveRequestManager43,a[b+"last_request_start_time"]=this.$VideoUploadReceiveRequestManager16,a[b+"pending_request"]=this.$VideoUploadReceiveRequestManager45!=null,a[b+"pending_timer"]=this.$VideoUploadReceiveRequestManager46!=null,a[b+"cached_chunk"]=this.$VideoUploadReceiveRequestManager44!=null,a[b+"early_receive_start"]=this.$VideoUploadReceiveRequestManager40,this.$VideoUploadReceiveRequestManager38!=null&&(a[b+"start_offset"]=this.$VideoUploadReceiveRequestManager38.getStartOffset(),a[b+"end_offset"]=this.$VideoUploadReceiveRequestManager38.getEndOffset(),a[b+"partition_start_offset"]=this.$VideoUploadReceiveRequestManager38.getPartitionStartOffset(),a[b+"partition_end_offset"]=this.$VideoUploadReceiveRequestManager38.getPartitionEndOffset()),this.$VideoUploadReceiveRequestManager37!=null&&(a[b+"connection_monitor_online"]=this.$VideoUploadReceiveRequestManager37.isOnline())};d.getHostName=function(a){try{return new URL(a).hostname}catch(a){return null}};d.$VideoUploadReceiveRequestManager54=function(){this.$VideoUploadReceiveRequestManager45=null,this.$VideoUploadReceiveRequestManager44=null,this.$VideoUploadReceiveRequestManager11=0,this.$VideoUploadReceiveRequestManager14=0,this.$VideoUploadReceiveRequestManager12=b("uuid")(),this.$VideoUploadReceiveRequestManager15=0,this.$VideoUploadReceiveRequestManager16=null,this.$VideoUploadReceiveRequestManager17=null,this.$VideoUploadReceiveRequestManager18=0,this.$VideoUploadReceiveRequestManager41=null,this.$VideoUploadReceiveRequestManager42=null,this.$VideoUploadReceiveRequestManager40=!1,this.$VideoUploadReceiveRequestManager26=!1,this.$VideoUploadReceiveRequestManager39=null,this.$VideoUploadReceiveRequestManager38.reset(),this.$VideoUploadReceiveRequestManager37.reset(),b("clearTimeout")(this.$VideoUploadReceiveRequestManager46),this.$VideoUploadReceiveRequestManager46=null};d.$VideoUploadReceiveRequestManager53=function(a,c){b("clearTimeout")(this.$VideoUploadReceiveRequestManager46);this.$VideoUploadReceiveRequestManager46=null;this.$VideoUploadReceiveRequestManager20=a;this.$VideoUploadReceiveRequestManager13=b("uuid")();if(this.$VideoUploadReceiveRequestManager38.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager38.getStartOffset()>=this.$VideoUploadReceiveRequestManager38.getPartitionEndOffset()){!c?(this.inform("request-finished",{start_offset:this.$VideoUploadReceiveRequestManager38.getEndOffset()-1,end_offset:this.$VideoUploadReceiveRequestManager38.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager11,server_retries:this.$VideoUploadReceiveRequestManager14,upload_speed:this.$VideoUploadReceiveRequestManager17,request_manager_state:this.$VideoUploadReceiveRequestManager19,upload_domain:this.$VideoUploadReceiveRequestManager39,debug:{request_reason:this.$VideoUploadReceiveRequestManager20,single_request_id:this.$VideoUploadReceiveRequestManager13}}),this.$VideoUploadReceiveRequestManager19="request finished - notified"):this.$VideoUploadReceiveRequestManager19="request finished - not notified";return}this.$VideoUploadReceiveRequestManager45=this.__getVideoUploadRequest(this.$VideoUploadReceiveRequestManager1).setAllowCrossOrigin(!0).setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager38)).setWaterfallID(this.$VideoUploadReceiveRequestManager38.getWaterfallID()).setSuccessHandler(this.__handleSuccessResponse.bind(this)).setErrorHandler(this.__handleServerFailureResponse.bind(this)).setTransportErrorHandler(this.$VideoUploadReceiveRequestManager55.bind(this));this.$VideoUploadReceiveRequestManager23||this.$VideoUploadReceiveRequestManager45.setUploadProgressHandler(this.$VideoUploadReceiveRequestManager56.bind(this));this.$VideoUploadReceiveRequestManager16=Date.now();this.$VideoUploadReceiveRequestManager39=this.getHostName(this.$VideoUploadReceiveRequestManager1);a=!1;if(this.$VideoUploadReceiveRequestManager38.getSupportsChunking()){if(this.$VideoUploadReceiveRequestManager5){c=this.$VideoUploadReceiveRequestManager57(this.$VideoUploadReceiveRequestManager38.getEndOffset()-this.$VideoUploadReceiveRequestManager38.getStartOffset(),this.$VideoUploadReceiveRequestManager17);this.$VideoUploadReceiveRequestManager45.setTimeoutHandler(c,this.__handleResponseTimeout.bind(this));this.$VideoUploadReceiveRequestManager19="sending chunk with timeout = "+c;this.$VideoUploadReceiveRequestManager43=c}else this.$VideoUploadReceiveRequestManager19="sending chunk without timeout";c=this.$VideoUploadReceiveRequestManager58();if(c===null||c===void 0){this.$VideoUploadReceiveRequestManager59({error_description:"Provided chunk is null.",error_is_transient:!1});return}else this.$VideoUploadReceiveRequestManager23&&this.$VideoUploadReceiveRequestManager29<this.$VideoUploadReceiveRequestManager38.getFile().getSize()?(a=!0,this.$VideoUploadReceiveRequestManager60(c)):this.$VideoUploadReceiveRequestManager45.sendChunk(c)}else this.$VideoUploadReceiveRequestManager19="sending file",this.$VideoUploadReceiveRequestManager45.sendFile(this.$VideoUploadReceiveRequestManager38.getFile().getFileInput());this.$VideoUploadReceiveRequestManager61(a);this.$VideoUploadReceiveRequestManager37.notifyStart();this.inform("request-started",{start_offset:this.$VideoUploadReceiveRequestManager38.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager38.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager11,server_retries:this.$VideoUploadReceiveRequestManager14,upload_speed:this.$VideoUploadReceiveRequestManager17,request_manager_state:this.$VideoUploadReceiveRequestManager19,upload_domain:this.$VideoUploadReceiveRequestManager39,debug:{request_reason:this.$VideoUploadReceiveRequestManager20,single_request_id:this.$VideoUploadReceiveRequestManager13}})};d.$VideoUploadReceiveRequestManager61=function(a){(this.$VideoUploadReceiveRequestManager38.getSource()==="create_flow"||this.$VideoUploadReceiveRequestManager38.getSource()==="ads_interfaces")&&b("ODS").bumpEntityKey(2966,"video_ads_upload",a?"upload_service":"graph_api")};d.$VideoUploadReceiveRequestManager62=function(a,b,c){!this.$VideoUploadReceiveRequestManager38.getVideoID()?(this.$VideoUploadReceiveRequestManager41=a,this.$VideoUploadReceiveRequestManager42=b):a(b,c)};d.$VideoUploadReceiveRequestManager52=function(){this.$VideoUploadReceiveRequestManager41&&(this.$VideoUploadReceiveRequestManager41(this.$VideoUploadReceiveRequestManager42),this.$VideoUploadReceiveRequestManager41=null,this.$VideoUploadReceiveRequestManager42=null)};d.$VideoUploadReceiveRequestManager60=function(a){var c,d=this.$VideoUploadReceiveRequestManager38.getFile(),e=d.getFile().lastModified+d.getFile().name+d.getFile().type+this.$VideoUploadReceiveRequestManager63();e=String(b("md5")(e))+"-"+this.$VideoUploadReceiveRequestManager38.getStartOffset()+"-"+this.$VideoUploadReceiveRequestManager38.getEndOffset();c=((c=this.$VideoUploadReceiveRequestManager38)==null?void 0:c.getRetryState())==null?this.$VideoUploadReceiveRequestManager14+this.$VideoUploadReceiveRequestManager11+this.$VideoUploadReceiveRequestManager15:this.$VideoUploadReceiveRequestManager38.getRetryState().getTotalRetryCount();d=this.$VideoUploadReceiveRequestManager35&&this.$VideoUploadReceiveRequestManager36<d.getSize()?["video_upload_www",[this.$VideoUploadReceiveRequestManager12,String(c)].join("_"),[String(this.$VideoUploadReceiveRequestManager38.getWaterfallID()),String(this.$VideoUploadReceiveRequestManager38.getVideoID())].join("_")].join(":"):null;this.isResumabilityEnabled()&&this.$VideoUploadReceiveRequestManager25&&this.$VideoUploadReceiveRequestManager11>this.$VideoUploadReceiveRequestManager2/3&&(this.$VideoUploadReceiveRequestManager26=!0);c="fb_video";this.$VideoUploadReceiveRequestManager30&&(c="fb_video2");var f=null;if(this.$VideoUploadReceiveRequestManager30||this.$VideoUploadReceiveRequestManager31){var g={};g.start_offset=this.$VideoUploadReceiveRequestManager38.getStartOffset();g.end_offset=this.$VideoUploadReceiveRequestManager38.getEndOffset();g.composer_session_id=this.$VideoUploadReceiveRequestManager38.getWaterfallID();g.upload_session_id=this.$VideoUploadReceiveRequestManager38.getUploadSessionID();g.product_media_id=this.$VideoUploadReceiveRequestManager38.getVideoID();g.xpv_asset_id=this.$VideoUploadReceiveRequestManager38.getXPVAssetID();g.fb_region=this.$VideoUploadReceiveRequestManager38.getFbRegion();this.$VideoUploadReceiveRequestManager32&&(g.total_file_size=this.$VideoUploadReceiveRequestManager38.getFile().getSize());b("gkx")("1765373")&&(g.video_waterfall_id=this.$VideoUploadReceiveRequestManager38.getWaterfallID(),g.target_id=this.$VideoUploadReceiveRequestManager38.getTargetID());f=g}g={};g.consumer=c;g.accessToken=this.$VideoUploadReceiveRequestManager22;g.sessionKey=e;g.serviceName=this.$VideoUploadReceiveRequestManager26?null:this.$VideoUploadReceiveRequestManager25;g.serviceDomain=this.$VideoUploadReceiveRequestManager27;g.receiveParameters=f;g.flowCaptureHeaderValue=this.$VideoUploadReceiveRequestManager34?this.$VideoUploadReceiveRequestManager38.getWaterfallID():null;g.tracingHeaderValue=d;this.$VideoUploadReceiveRequestManager24?c=b("ResumableUploadAsyncService").create(g):c=b("ResumableUploadService").create(g);this.$VideoUploadReceiveRequestManager21=c;this.$VideoUploadReceiveRequestManager39=c.getServiceName();this.$VideoUploadReceiveRequestManager64();c.resume(a);this.inform("resumable-called",{debug:{single_request_id:this.$VideoUploadReceiveRequestManager13,authority:this.$VideoUploadReceiveRequestManager39}})};d.$VideoUploadReceiveRequestManager64=function(){var a=this;this.$VideoUploadReceiveRequestManager38.getVideoID()||(this.$VideoUploadReceiveRequestManager40=!0);var c=this.$VideoUploadReceiveRequestManager21;if(c===null||c===void 0)return;c.addListener(b("ResumableUploadServiceState.enum").START,function(b){a.inform("resumable-started",{resume_from_offset:b.offset,debug:{single_request_id:a.$VideoUploadReceiveRequestManager13,partition:a.$VideoUploadReceiveRequestManager38.getPartitionNo(),authority:a.$VideoUploadReceiveRequestManager39}})});this.$VideoUploadReceiveRequestManager47=function(b){a.inform("resumable-failed",{error_code:b.getError(),error_description:b.getErrorDescription(),error_summary:b.getErrorSummary(),error_is_transient:b.isTransient(),debug:{error_source:"service",single_request_id:a.$VideoUploadReceiveRequestManager13,partition:a.$VideoUploadReceiveRequestManager38.getPartitionNo(),authority:a.$VideoUploadReceiveRequestManager39}}),a.__handleServerFailureResponse(b)};c.addListener(b("ResumableUploadServiceState.enum").FAIL,function(b){a.$VideoUploadReceiveRequestManager62(a.$VideoUploadReceiveRequestManager47,b)});this.$VideoUploadReceiveRequestManager48=function(b){!a.$VideoUploadReceiveRequestManager30?(a.$VideoUploadReceiveRequestManager45.setHandle(b),a.$VideoUploadReceiveRequestManager45.sendChunk(null)):a.__handleSuccessResponsePayload({start_offset:a.$VideoUploadReceiveRequestManager38.getEndOffset(),end_offset:a.$VideoUploadReceiveRequestManager38.getPartitionEndOffset()}),a.inform("resumable-success",{everstore_handle:b,debug:{single_request_id:a.$VideoUploadReceiveRequestManager13,partition:a.$VideoUploadReceiveRequestManager38.getPartitionNo(),authority:a.$VideoUploadReceiveRequestManager39}})};c.addListener(b("ResumableUploadServiceState.enum").SUCCESS,function(b){a.$VideoUploadReceiveRequestManager62(a.$VideoUploadReceiveRequestManager48,b)});this.$VideoUploadReceiveRequestManager49=function(b,c){a.inform("resumable-failed",{error_code:b.getError(),error_description:b.getErrorDescription(),error_summary:b.getErrorSummary(),error_is_transient:b.isTransient(),resume_from_offset:c.offset,debug:{error_source:"transport",single_request_id:a.$VideoUploadReceiveRequestManager13,partition:a.$VideoUploadReceiveRequestManager38.getPartitionNo(),method:c.method,authority:a.$VideoUploadReceiveRequestManager39}}),a.$VideoUploadReceiveRequestManager55(b)};c.addListener(b("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,function(b,c){a.$VideoUploadReceiveRequestManager62(a.$VideoUploadReceiveRequestManager49,b,c)});c.addListener(b("ResumableUploadServiceState.enum").PROGRESS,function(b){a.$VideoUploadReceiveRequestManager33&&(a.$VideoUploadReceiveRequestManager11=0),a.$VideoUploadReceiveRequestManager56(b)})};d.__getVideoUploadRequest=function(a){return new(b("VideoUploadRequest"))(a)};d.$VideoUploadReceiveRequestManager65=function(a,c){this.$VideoUploadReceiveRequestManager19="setting request to send after"+c,b("clearTimeout")(this.$VideoUploadReceiveRequestManager46),this.$VideoUploadReceiveRequestManager46=b("setTimeout")(this.$VideoUploadReceiveRequestManager53.bind(this,a),c)};d.$VideoUploadReceiveRequestManager58=function(){if(this.$VideoUploadReceiveRequestManager44)return this.$VideoUploadReceiveRequestManager44;var a=this.$VideoUploadReceiveRequestManager38.getFile();if(this.$VideoUploadReceiveRequestManager23){var b=a.getFile();this.$VideoUploadReceiveRequestManager44=b?b.slice(this.$VideoUploadReceiveRequestManager38.getStartOffset(),this.$VideoUploadReceiveRequestManager38.getEndOffset(),"application/octet-stream"):null}else this.$VideoUploadReceiveRequestManager44=a.getChunk(this.$VideoUploadReceiveRequestManager38.getStartOffset(),this.$VideoUploadReceiveRequestManager38.getEndOffset());return this.$VideoUploadReceiveRequestManager44};d.__createRequestData=function(a){return{composer_session_id:a.getComposerSessionID(),video_id:a.getVideoID(),start_offset:a.getStartOffset(),end_offset:a.getEndOffset(),source:a.getSource(),target_id:a.getTargetID(),waterfall_id:a.getWaterfallID(),composer_entry_point_ref:a.getComposerEntryPointRef&&a.getComposerEntryPointRef(),composer_work_shared_draft_mode:a.getComposerWorkSharedDraftMode(),composer_dialog_version:a.getComposerDialogVersion(),has_file_been_replaced:a.getHasFileBeenReplaced(),supports_chunking:a.getSupportsChunking(),upload_speed:this.$VideoUploadReceiveRequestManager17,partition_start_offset:a.getPartitionStartOffset(),partition_end_offset:a.getPartitionEndOffset()}};d.__handleSuccessResponse=function(a){a=a.getPayload();this.__handleSuccessResponsePayload(a)};d.__handleSuccessResponsePayload=function(a){this.$VideoUploadReceiveRequestManager19="success response received";var c=Date.now()-(this.$VideoUploadReceiveRequestManager16||0);c=c===0?1:c;if(a.start_offset===this.$VideoUploadReceiveRequestManager38.getEndOffset()){var d=this.$VideoUploadReceiveRequestManager38.getEndOffset()-this.$VideoUploadReceiveRequestManager38.getStartOffset();this.$VideoUploadReceiveRequestManager17=Math.floor(d/c)}else this.$VideoUploadReceiveRequestManager17=null;this.$VideoUploadReceiveRequestManager37.notifySuccess();this.inform("request-finished",{start_offset:this.$VideoUploadReceiveRequestManager38.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager38.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager11,server_retries:this.$VideoUploadReceiveRequestManager14,upload_speed:this.$VideoUploadReceiveRequestManager17,request_manager_state:this.$VideoUploadReceiveRequestManager19,upload_domain:this.$VideoUploadReceiveRequestManager39,debug:{request_reason:this.$VideoUploadReceiveRequestManager20,single_request_id:this.$VideoUploadReceiveRequestManager13}});this.$VideoUploadReceiveRequestManager38.setStartOffset(a.start_offset);d=a.end_offset;this.$VideoUploadReceiveRequestManager38.getClientChunkSize()&&(d=a.start_offset+Math.min(this.$VideoUploadReceiveRequestManager38.getPartitionEndOffset()-a.start_offset,this.$VideoUploadReceiveRequestManager38.getClientChunkSize()));this.$VideoUploadReceiveRequestManager38.setEndOffset(d);this.$VideoUploadReceiveRequestManager38.setLastKnownUploadSpeed(this.$VideoUploadReceiveRequestManager17);this.$VideoUploadReceiveRequestManager45=null;this.$VideoUploadReceiveRequestManager44=null;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager14=0;this.$VideoUploadReceiveRequestManager12=b("uuid")();this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager38.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager53(i.NEXT_CHUNK,!0)};d.$VideoUploadReceiveRequestManager66=function(a){var b=this,c=a.getPayload();this.$VideoUploadReceiveRequestManager19="invalid offset response received start="+c.start_offset+" end="+c.end_offset;(this.$VideoUploadReceiveRequestManager38.getStartOffset()!=c.start_offset||this.$VideoUploadReceiveRequestManager38.getEndOffset()!=c.end_offset)&&(this.$VideoUploadReceiveRequestManager38.setStartOffset(c.start_offset),this.$VideoUploadReceiveRequestManager38.setEndOffset(c.end_offset),this.$VideoUploadReceiveRequestManager44=null);((c=this.$VideoUploadReceiveRequestManager38)==null?void 0:c.getRetryState())==null?(this.$VideoUploadReceiveRequestManager14++,this.$VideoUploadReceiveRequestManager53(i.INVALID_OFFSET_RETRY)):this.$VideoUploadReceiveRequestManager38.getRetryState().handleRetry({context:{location:"receive-invalid_offset"},retryHandler:function(a){return b.$VideoUploadReceiveRequestManager65(i.INVALID_OFFSET_RETRY,a)},failureHandler:function(){return b.$VideoUploadReceiveRequestManager67(a)}})};d.__handleServerFailureResponse=function(a){var b=this;this.$VideoUploadReceiveRequestManager19="failure response received";this.$VideoUploadReceiveRequestManager45=null;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager17=null;this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager37.notifyError();if(this.__hasInvalidStartOffsetAndHasRetries(a.getError()))this.$VideoUploadReceiveRequestManager66(a);else{var c;((c=this.$VideoUploadReceiveRequestManager38)==null?void 0:c.getRetryState())==null?(a.isTransient()||this.$VideoUploadReceiveRequestManager10)&&this.$VideoUploadReceiveRequestManager14<this.$VideoUploadReceiveRequestManager4?(this.$VideoUploadReceiveRequestManager19="transient server error",this.$VideoUploadReceiveRequestManager14++,this.$VideoUploadReceiveRequestManager65(i.SERVER_FAILURE_RETRY,this.$VideoUploadReceiveRequestManager68(this.$VideoUploadReceiveRequestManager9,this.$VideoUploadReceiveRequestManager14,0))):this.$VideoUploadReceiveRequestManager67(a):this.$VideoUploadReceiveRequestManager38.getRetryState().handleRetry({context:{location:"receive-server_issue",error_code:a.getError()},predicate:function(){return a.isTransient()},retryHandler:function(a){b.$VideoUploadReceiveRequestManager19="transient server error",b.$VideoUploadReceiveRequestManager65(i.SERVER_FAILURE_RETRY,a)},failureHandler:function(){return b.$VideoUploadReceiveRequestManager67(a)}})}};d.__handleResponseTimeout=function(a){var b=this;this.inform("request-timeout",{start_offset:this.$VideoUploadReceiveRequestManager38.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager38.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager11,server_retries:this.$VideoUploadReceiveRequestManager14,timeout_retries:this.$VideoUploadReceiveRequestManager15,upload_speed:this.$VideoUploadReceiveRequestManager17,request_manager_state:this.$VideoUploadReceiveRequestManager19,debug:{upload_domain:this.$VideoUploadReceiveRequestManager39,single_request_id:this.$VideoUploadReceiveRequestManager13}});this.$VideoUploadReceiveRequestManager45.abort();this.$VideoUploadReceiveRequestManager45=null;this.$VideoUploadReceiveRequestManager17=null;this.$VideoUploadReceiveRequestManager37.notifyTransportError();var c=function(){var a=b.$VideoUploadReceiveRequestManager38.getEndOffset()-b.$VideoUploadReceiveRequestManager38.getStartOffset();a=Math.floor(a/2);a=Math.max(a,b.$VideoUploadReceiveRequestManager18);var c=b.$VideoUploadReceiveRequestManager38.getEndOffset();c=Math.min(c,b.$VideoUploadReceiveRequestManager38.getStartOffset()+a);b.$VideoUploadReceiveRequestManager38.setEndOffset(c);b.$VideoUploadReceiveRequestManager44=null;b.$VideoUploadReceiveRequestManager19="resending after timeout with chunksize="+a;b.$VideoUploadReceiveRequestManager53(i.TIMEOUT_RETRY)},d=function(){b.$VideoUploadReceiveRequestManager59({error_code:1006,error_description:g._("Your browser appears to be offline. Please check your internet connection and try again."),error_summary:g._("\u1000\u103d\u1014\u103a\u101b\u1000\u103a \u1001\u103b\u102d\u1010\u103a\u1006\u1000\u103a\u1019\u103e\u102f \u1019\u101b\u103e\u102d\u1015\u102b"),error_is_transient:!0})};((a=this.$VideoUploadReceiveRequestManager38)==null?void 0:a.getRetryState())==null?++this.$VideoUploadReceiveRequestManager15<=this.$VideoUploadReceiveRequestManager6?c():d():this.$VideoUploadReceiveRequestManager38.getRetryState().handleRetry({context:{location:"receive-timeout",error_code:1006},retryHandler:function(a){return c()},failureHandler:function(){return d()}})};d.__hasInvalidStartOffsetAndHasRetries=function(a){return a===h&&this.$VideoUploadReceiveRequestManager14<this.$VideoUploadReceiveRequestManager4};d.$VideoUploadReceiveRequestManager55=function(a){var b,c=this;this.$VideoUploadReceiveRequestManager37.notifyTransportError();this.$VideoUploadReceiveRequestManager17=null;((b=this.$VideoUploadReceiveRequestManager38)==null?void 0:b.getRetryState())==null?(this.$VideoUploadReceiveRequestManager15=0,this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager2?(this.$VideoUploadReceiveRequestManager19="resending after transport failure",this.$VideoUploadReceiveRequestManager11++,this.$VideoUploadReceiveRequestManager45=null,this.$VideoUploadReceiveRequestManager65(i.TRANSPORT_FAILURE_RETRY,this.$VideoUploadReceiveRequestManager68(this.$VideoUploadReceiveRequestManager8,this.$VideoUploadReceiveRequestManager11,this.$VideoUploadReceiveRequestManager3))):this.$VideoUploadReceiveRequestManager67(a)):this.$VideoUploadReceiveRequestManager38.getRetryState().handleRetry({context:{location:"receive-transport_issue",error_code:a.getError()},retryHandler:function(a){c.$VideoUploadReceiveRequestManager45=null,c.$VideoUploadReceiveRequestManager19="resending after transport failure",c.$VideoUploadReceiveRequestManager65(i.TRANSPORT_FAILURE_RETRY,a)},failureHandler:function(){return c.$VideoUploadReceiveRequestManager67(a)}})};d.$VideoUploadReceiveRequestManager67=function(a){this.$VideoUploadReceiveRequestManager59({error_code:a.getError(),error_description:a.getErrorDescription(),error_summary:a.getErrorSummary(),error_is_transient:a.isTransient(),upload_domain:this.uploadDomain,www_request_id:(a=a.getPayload())==null?void 0:a.__www_request_id__})};d.$VideoUploadReceiveRequestManager59=function(a){this.$VideoUploadReceiveRequestManager19="handling failure error",a.debug=babelHelpers["extends"]({},a.debug,{single_request_id:this.$VideoUploadReceiveRequestManager13}),this.inform("request-failed",a),this.$VideoUploadReceiveRequestManager54()};d.$VideoUploadReceiveRequestManager56=function(a){this.$VideoUploadReceiveRequestManager37.notifyProgress(a),this.$VideoUploadReceiveRequestManager38&&this.$VideoUploadReceiveRequestManager38.getFile()&&this.inform("request-progressed",{file_size:this.$VideoUploadReceiveRequestManager38.getFile().getSize(),start_offset:this.$VideoUploadReceiveRequestManager38.getStartOffset(),sent_bytes:a.loaded,transport_retries:this.$VideoUploadReceiveRequestManager11,upload_domain:this.$VideoUploadReceiveRequestManager39,debug:{single_request_id:this.$VideoUploadReceiveRequestManager13}})};d.$VideoUploadReceiveRequestManager50=function(){var a;this.inform("online");this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager15=0;(a=this.$VideoUploadReceiveRequestManager38)==null?void 0:(a=a.getRetryState())==null?void 0:a.resetDelay();this.$VideoUploadReceiveRequestManager46&&this.$VideoUploadReceiveRequestManager53(i.BACK_ONLINE)};d.$VideoUploadReceiveRequestManager51=function(){this.inform("offline")};d.$VideoUploadReceiveRequestManager68=function(a,b,c){var d;this.$VideoUploadReceiveRequestManager23?d=Math.min(Math.pow(a,b),8)*1e3:d=Math.pow(a,b)*1e3;c>0&&(d=Math.min(d,c));return d};d.$VideoUploadReceiveRequestManager57=function(a,b){b!==void 0&&b!==null&&b>0?b=b:b=10;a=Math.floor(a/b*this.$VideoUploadReceiveRequestManager7/100);return Math.max(a,3e4)};d.$VideoUploadReceiveRequestManager63=function(){return this.$VideoUploadReceiveRequestManager28?this.$VideoUploadReceiveRequestManager28:this.$VideoUploadReceiveRequestManager38.getWaterfallID()};return c}(b("mixin")(b("cr:909282")));e.exports=a}),null);
__d("VideoUploadStartRequestManager",["Assert","FileHasher","VideoUploadRequest","clearTimeout","mixin","performanceNow","requireCond","setTimeout","cr:909282"],(function(a,b,c,d,e,f){var g;a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c,d,e,f,g,h,i){var j;j=a.call(this)||this;j.$VideoUploadStartRequestManager1=b;j.$VideoUploadStartRequestManager2=c;j.$VideoUploadStartRequestManager3=d;j.$VideoUploadStartRequestManager4=e;j.$VideoUploadStartRequestManager5=0;j.$VideoUploadStartRequestManager6=f;j.$VideoUploadStartRequestManager7=g;j.$VideoUploadStartRequestManager8=h;j.$VideoUploadStartRequestManager9=i;j.$VideoUploadStartRequestManager10=0;return j}var d=c.prototype;d.getRequest=function(){return this.$VideoUploadStartRequestManager11};d.sendRequest=function(a){var c=this;if(this.$VideoUploadStartRequestManager12||this.$VideoUploadStartRequestManager11)return;this.$VideoUploadStartRequestManager13=a;this.$VideoUploadStartRequestManager6&&this.$VideoUploadStartRequestManager13.getFile().getFile()&&this.$VideoUploadStartRequestManager13.getFile().getFile().size<this.$VideoUploadStartRequestManager7&&b("FileHasher").isSupported()?(this.$VideoUploadStartRequestManager14=(g||(g=b("performanceNow")))(),this.$VideoUploadStartRequestManager12=new(b("FileHasher"))(),this.$VideoUploadStartRequestManager12.hash(this.$VideoUploadStartRequestManager13.getFile().getFile(),function(a){c.$VideoUploadStartRequestManager14=(g||(g=b("performanceNow")))()-c.$VideoUploadStartRequestManager14,c.$VideoUploadStartRequestManager15=a.hash,c.$VideoUploadStartRequestManager12.destroy(),c.$VideoUploadStartRequestManager12=null,a.hash||(c.$VideoUploadStartRequestManager16=a.exception),c.$VideoUploadStartRequestManager17()})):this.$VideoUploadStartRequestManager17()};d.$VideoUploadStartRequestManager17=function(){this.$VideoUploadStartRequestManager18(),this.inform("request-started",{hash_time:this.$VideoUploadStartRequestManager14,hash_exception:this.$VideoUploadStartRequestManager16})};d.$VideoUploadStartRequestManager18=function(){b("clearTimeout")(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=null,this.$VideoUploadStartRequestManager11=this.__getVideoUploadRequest(this.$VideoUploadStartRequestManager1).setAllowCrossOrigin(!0).setData(this.__getDataToSend(this.$VideoUploadStartRequestManager13,this.$VideoUploadStartRequestManager15)).setWaterfallID(this.$VideoUploadStartRequestManager13.getWaterfallID()).setSuccessHandler(this.$VideoUploadStartRequestManager20.bind(this)).setErrorHandler(this.$VideoUploadStartRequestManager21.bind(this)).setTransportErrorHandler(this.$VideoUploadStartRequestManager22.bind(this)),this.$VideoUploadStartRequestManager11.send()};d.__getVideoUploadRequest=function(a){return new(b("VideoUploadRequest"))(a)};d.__getDataToSend=function(a,b){return{file_size:a.getFile().getSize(),file_extension:a.getFile().getExtension(),target_id:a.getTargetID(),source:a.getSource(),composer_dialog_version:a.getComposerDialogVersion(),waterfall_id:a.getWaterfallID(),composer_session_id:a.getComposerSessionID(),composer_entry_point_ref:a.getComposerEntryPointRef&&a.getComposerEntryPointRef(),composer_work_shared_draft_mode:a.getComposerWorkSharedDraftMode(),has_file_been_replaced:a.getHasFileBeenReplaced(),supports_chunking:a.getSupportsChunking(),supports_file_api:a.getSupportsFileAPI(),partition_start_offset:a.getPartitionStartOffset(),partition_end_offset:a.getPartitionEndOffset(),creator_product:a.getCreatorProduct(),original_file_hash:b,spherical:a.getIsSphericalVideo(),spherical_metadata:a.getSphericalMetadata(),video_publisher_action_source:a.getVideoPublisherActionSource()}};d.cancelRequest=function(){this.$VideoUploadStartRequestManager23(),this.inform("request-canceled")};d.$VideoUploadStartRequestManager24=function(a){b("clearTimeout")(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=b("setTimeout")(this.$VideoUploadStartRequestManager18.bind(this),a)};d.$VideoUploadStartRequestManager23=function(){this.$VideoUploadStartRequestManager12&&(this.$VideoUploadStartRequestManager12.destroy(),this.$VideoUploadStartRequestManager12=null),this.$VideoUploadStartRequestManager11&&(this.$VideoUploadStartRequestManager11.abort(),this.$VideoUploadStartRequestManager11=null),this.$VideoUploadStartRequestManager10=0,this.$VideoUploadStartRequestManager5=0,this.$VideoUploadStartRequestManager13=null,b("clearTimeout")(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=null};d.$VideoUploadStartRequestManager25=function(a,b,c){a=Math.pow(a,b)*1e3;c>0&&(a=Math.min(a,c));return a};d.$VideoUploadStartRequestManager20=function(a){var c;(c=this.$VideoUploadStartRequestManager13)==null?void 0:(c=c.getRetryState())==null?void 0:c.resetDelay();c=a.getPayload();this.inform("request-finished",this.__getSuccessInformData(c));this.$VideoUploadStartRequestManager11=null;b("Assert").isTrue(this.$VideoUploadStartRequestManager12==null,"Unexpected: if file hasher is not null, clean up is required.")};d.__getSuccessInformData=function(a){return{video_id:a.video_id,xpv_asset_id:a.xpv_asset_id,upload_session_id:a.upload_session_id,fb_region:a.region_hint,start_offset:a.start_offset,end_offset:a.end_offset,transport_retries:this.$VideoUploadStartRequestManager5,server_retries:this.$VideoUploadStartRequestManager10,skip_upload:a.skip_upload,hash_time:this.$VideoUploadStartRequestManager14}};d.$VideoUploadStartRequestManager26=function(a){this.inform("request-failed",this.$VideoUploadStartRequestManager27(a)),this.$VideoUploadStartRequestManager11=null,b("Assert").isTrue(this.$VideoUploadStartRequestManager12==null,"Unexpected: if file hasher is not null, clean up is required.")};d.$VideoUploadStartRequestManager21=function(a){var b,c=this;this.$VideoUploadStartRequestManager11=null;var d=(b=this.$VideoUploadStartRequestManager13)==null?void 0:b.getRetryState();d==null?(this.$VideoUploadStartRequestManager5=0,a.isTransient()&&this.$VideoUploadStartRequestManager10<this.$VideoUploadStartRequestManager8?(this.$VideoUploadStartRequestManager10++,this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager25(this.$VideoUploadStartRequestManager9,this.$VideoUploadStartRequestManager10))):this.$VideoUploadStartRequestManager26(a)):d.handleRetry({context:{location:"start-server_issue",error_code:a.getError()},predicate:function(){return a.isTransient()},retryHandler:function(a){c.$VideoUploadStartRequestManager10=d.getTotalRetryCount(),c.$VideoUploadStartRequestManager24(a)},failureHandler:function(){return c.$VideoUploadStartRequestManager26(a)}})};d.$VideoUploadStartRequestManager22=function(a){var b,c=this;((b=this.$VideoUploadStartRequestManager13)==null?void 0:b.getRetryState())==null?this.$VideoUploadStartRequestManager2===0||this.$VideoUploadStartRequestManager5>=this.$VideoUploadStartRequestManager2?this.$VideoUploadStartRequestManager26(a):(this.$VideoUploadStartRequestManager5++,this.$VideoUploadStartRequestManager11=null,this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager25(this.$VideoUploadStartRequestManager3,this.$VideoUploadStartRequestManager5,this.$VideoUploadStartRequestManager4))):this.$VideoUploadStartRequestManager13.getRetryState().handleRetry({context:{location:"start-transport_issue",error_code:a.getError()},retryHandler:function(a){c.$VideoUploadStartRequestManager11=null,c.$VideoUploadStartRequestManager24(a)},failureHandler:function(){return c.$VideoUploadStartRequestManager26(a)}})};d.$VideoUploadStartRequestManager27=function(a){return{error_code:a.getError(),error_description:a.getErrorDescription(),error_summary:a.getErrorSummary(),transport_retries:this.$VideoUploadStartRequestManager5,server_retries:this.$VideoUploadStartRequestManager10,error_is_transient:a.isTransient(),www_request_id:(a=a.getPayload())==null?void 0:a.__www_request_id__}};return c}(b("mixin")(b("cr:909282")));e.exports=a}),null);
__d("ISOVideoBoxConstants",[],(function(a,b,c,d,e,f){"use strict";a=8;f.BOX_BASE_SIZE=a;b=[255,204,130,99,248,85,74,147,136,20,88,122,2,82,31,221];f.GSPHERICAL_UUID=b;c=[174,36,178,77,60,143,79,24,138,123,224,9,193,56,53,193];f.FBSPHERICAL_UUID=c}),null);
__d("VideoSphericalMetadataUtil",["SphericalVideoMetadataTags","VideoProjection","VideoStereoFormat"],(function(a,b,c,d,e,f){"use strict";f.parseXMLToDocument=a;f.stringToProjectionType=c;f.stringToStereoMode=d;f.getUnsupportedGSphericalTagsXML=e;f.isGoogleVR180=g;f.arrayBufferToFile=h;f.stringToArrayBuffer=i;f.bufferToFile=j;f.uuidArrayEquals=k;function a(a){if(!a)return null;a=a.replace(/\0/g,"");if(window.DOMParser){var b=new DOMParser();b=b.parseFromString(a,"text/xml")}else b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a);return b}function c(a){if(Object.values(b("VideoProjection")).includes(a))return a;else return null}function d(a){if(Object.values(b("VideoStereoFormat")).includes(a))return a;else return null}function e(a){a=a.getElementsByTagNameNS("*","*");var c=null;for(var d=0;d<a.length;d++){var e=a[d],f=e.nodeName,g=e.parentElement;if(f!=="parsererror"&&g&&g.nodeName!=="parsererror"&&Object.values(b("SphericalVideoMetadataTags").GSPHERICAL).indexOf(f)<0&&Object.values(b("SphericalVideoMetadataTags").GSPHERICAL).indexOf(g.nodeName)<0){c||(c="");g=e.outerHTML;c+="<"+f+g.slice(f.length+1,-(f.length+1))+f+">"}}return c}function g(a,b,c,d,e){if(null!==b&&null!==c&&null!==d&&null!==e&&a.projectionType==="equirectangular"&&(a.stereoMode==="left-right"||a.stereoMode==="top-bottom")){a=parseInt(b,10);b=parseInt(c,10);c=parseInt(d,10);d=parseInt(e,10);if(Math.abs(a-c/2)<=1&&Math.abs(b-d)<=1)return!0}return!1}function h(a,b,c){return new File([a],b,{type:c})}function i(a){var b=new ArrayBuffer(a.length),c=new DataView(b);for(var d=0;d<a.length;d++)c.setUint8(d,a.charCodeAt(d));return b}function j(a,b,c){a=a.buffer;return this.arrayBufferToFile(a,b,c)}function k(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}}),null);
__d("VideoUploadMetadataParserErrorCode",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["FILE_READING_NOT_SUPPORTED","UNKNOWN_FILE_EXTENSION","INTERNAL_FAILURE"]);c=a;e.exports=c}),null);
__d("checkForSphericalTag",["VideoSphericalMetadataUtil"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){a=b("VideoSphericalMetadataUtil").parseXMLToDocument(a);if(!a)return!1;a=a.getElementsByTagNameNS("*","Spherical");if(a.length===0)return!1;a=a[0];a=a.childNodes[0].nodeValue;return a.toLowerCase()==="true"}}),null);
__d("getVideo64BitAtomLength",["Int64"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c,d,e){var f=a.getUint32(c+e+d);a=a.getUint32(c+d+e+e);return new(b("Int64"))(a,f).toNumber()}}),null);
__d("VideoUploadMetadataParser",["regeneratorRuntime","Promise","Bootloader","ErrorNormalizeUtils","ISOVideoBoxConstants","VideoSphericalMetadataUtil","VideoUploadFeatureDetector","VideoUploadMetadataParserErrorCode","VideoUploadSphericalLogger","checkForSphericalTag","fileSlice","getErrorSafe","getVideo64BitAtomLength","gkx","nullthrows","promiseDone"],(function(a,b,c,d,e,f){var g=4,h=4,i=5242880,j=24,k=88,l=20,m=16,n=4,o=84,p=20,q=62,r=4,s=12,t=12,u=16,v=16,w={0:36,1:52,2:72},x=1,y=1,z=4,A=1,B=1,C=4,D=4,E=1e3,F=16,G=32,H=34;c=function(){function c(a,b,c,d){this.$1=a,this.$2=b==null?function(){}:b,this.$4=c,this.$5=!0,this.$3=d}var d=c.prototype;d.getHandler=function(){return this.$2};d.$6=function(a){this.$2(a),this.$3!=null&&this.$3({success:!0,metadata:a})};d.$7=function(a,c){this.$2(null);if(this.$3!=null){c=c==null?void 0:b("ErrorNormalizeUtils").normalizeError(b("getErrorSafe")(c));this.$3({success:!1,errorCode:a,errorObject:c})}};d.parse=function(){if(!b("VideoUploadFeatureDetector").supportsFileReading()){this.$7(b("VideoUploadMetadataParserErrorCode").FILE_READING_NOT_SUPPORTED);return null}switch(this.$1.getExtension()){case"mp4":case"mov":case"m4v":case"3gp":case"3g2":b("VideoUploadSphericalLogger").setFileExtension(this.$1.getExtension());break;case"mkv":if(b("gkx")("816873")){b("VideoUploadSphericalLogger").setFileExtension(this.$1.getExtension());break}default:this.$7(b("VideoUploadMetadataParserErrorCode").UNKNOWN_FILE_EXTENSION);return null}return this.$8()};d.$8=function(){var a=this,c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=this.$9();d=this.$10();return e.abrupt("return",new(b("Promise"))(function(e,f){try{b("promiseDone")(b("Promise").all([c,d]).then(function(b){var c=b[0];if(c.completed){b=b[1];c.videoPlayerData=b;a.$6(c)}e(c)},function(c){a.$7(b("VideoUploadMetadataParserErrorCode").INTERNAL_FAILURE,c),f(c)}))}catch(c){a.$7(b("VideoUploadMetadataParserErrorCode").INTERNAL_FAILURE,c),f(c)}}));case 3:case"end":return e.stop()}},null,this)};d.$9=function(){var a=this,c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.t0=this.$1.getExtension();d.next=d.t0==="mp4"?3:d.t0==="mov"?3:d.t0==="m4v"?3:d.t0==="3gp"?3:d.t0==="3g2"?3:d.t0==="mkv"?5:8;break;case 3:c=this.$11(0,Math.min(i,this.$1.getSize()||0),null);return d.abrupt("break",9);case 5:d.next=7;return b("regeneratorRuntime").awrap(new(b("Promise"))(function(d,e){b("Bootloader").loadModules(["VideoUploadMetadataMKVParser"],function(a){a=new a(this.$1);c=a.parse();d()}.bind(a),"VideoUploadMetadataParser")}));case 7:return d.abrupt("break",9);case 8:throw new Error("Unrecognized file extension in _parseImpl");case 9:return d.abrupt("return",b("nullthrows")(c));case 10:case"end":return d.stop()}},null,this)};d.$11=function(a,c,d){var e=this,f=new FileReader(),g=new(b("Promise"))(function(g,h){f.onload=function(j){var k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:m.prev=0;if(f.result instanceof ArrayBuffer){m.next=3;break}throw new Error("reader.result is something other than ArrayBuffer");case 3:k=e.$12(new DataView(f.result),0,c-a,a,d);if(!k.completed){m.next=10;break}j=e.$13(k);j.completed=!0;g(j);m.next=14;break;case 10:m.next=12;return b("regeneratorRuntime").awrap(e.$11(a+k.nextOffset,Math.min(e.$1.getSize()||0,a+k.nextOffset+i),k));case 12:l=m.sent,g(l);case 14:m.next=19;break;case 16:m.prev=16,m.t0=m["catch"](0),h(m.t0);case 19:case"end":return m.stop()}},null,this,[[0,16]])};var j=e.$1.getFile();f.readAsArrayBuffer(b("fileSlice").call(j,a,c))});return g};d.$10=function(){if(!this.$4||!a.URL||!a.URL.createObjectURL)return null;var c=this.$1.getFile(),d=document.createElement("video"),e=new(b("Promise"))(function(a,b){var c=window.setTimeout(function(){window.clearTimeout(c),b("Video onloadedmetadata timed out")},E)}),f=new(b("Promise"))(function(b,e){d.onloadedmetadata=function(){try{var a={width:d.videoWidth,height:d.videoHeight};b(a)}catch(a){e(a)}};try{d.src=a.URL.createObjectURL(c)}catch(a){e(a)}});return b("Promise").race([f,e])};d.$14=function(a,b,c){var d=[];for(var e=0;e<c;e++)d.push(String.fromCharCode(a.getUint8(b+e)));return d.join("")};d.$15=function(a,b,c){var d={version:null,ambisonic_type:null,ambisonic_order:null,ambisonic_channel_ordering:null,ambisonic_normalization:null,num_channels:null,channel_map:[]},e=0;d.version=a.getUint8(b+e);e=x;d.ambisonic_type=a.getUint8(b+e);e+=y;d.ambisonic_order=a.getUint32(b+e);e+=z;d.ambisonic_channel_ordering=a.getUint8(b+e);e+=A;d.ambisonic_normalization=a.getUint8(b+e);e+=B;d.num_channels=a.getUint32(b+e);e+=C;for(var f=0;f<d.num_channels;f++){d.channel_map.push(a.getUint32(b+e));e+=D;if(e>c)return null}return JSON.stringify(d)};d.$16=function(a,c,d,e){try{var f=h+g,i=b("ISOVideoBoxConstants").GSPHERICAL_UUID.length;if(f+i<d){var j=[];for(var k=0;k<i;k++)j.push(a.getUint8(c+f+k));k=b("VideoSphericalMetadataUtil").uuidArrayEquals(j,b("ISOVideoBoxConstants").GSPHERICAL_UUID);j=b("VideoSphericalMetadataUtil").uuidArrayEquals(j,b("ISOVideoBoxConstants").FBSPHERICAL_UUID);f+=i;if(k||j){i=this.$14(a,c+f,d-f);b("checkForSphericalTag")(i)&&(e.sphericalMetadata.spherical=!0,j?e.sphericalMetadata.FBSphericalMetadataXML=i:e.sphericalMetadata.sphericalMetadataXml=i)}}}catch(a){}};d.$12=function(a,c,d,e,f){f=f||{widths:[],heights:[],streamTypes:[],streamDurations:[],spherical:!1,sphericalMetadata:{sphericalMetadataXml:null,FBSphericalMetadataXML:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null},isParsingInMediaInformationAtom:!1,endOfMediaInformationAtomOffset:null,streamSampleCounts:[],samples:[]};var i=null;while(c<d){var x=a.getUint32(c),y=this.$14(a,c+g,h);x===1&&(x=b("getVideo64BitAtomLength")(a,c,h,g));if(c+x>d){f.completed=!1;f.nextOffset=c;x>d&&(f.nextOffset+=x);return f}f.isParsingInMediaInformationAtom&&c>=Number(f.endOfMediaInformationAtomOffset)&&(f.isParsingInMediaInformationAtom=!1,f.endOfMediaInformationAtomOffset=null);if(c+e===0&&y!=="ftyp")throw new Error("No ftyp atom");if(x===0)throw new Error("len is 0");var z=function(){var b=a.getUint32(c+l),d=a.getUint32(c+j);return d/b};switch(y){case"moov":case"trak":case"mdia":case"stbl":c+=g+h;break;case"mvhd":f.duration=z();c+=x;break;case"tkhd":y=a.getUint16(c+o);var A=a.getUint16(c+k);f.widths.push(y);f.heights.push(A);f.samples.push({descriptions:[]});i=a.getUint32(c+p);c+=x;break;case"hdlr":if(!f.isParsingInMediaInformationAtom){y=this.$14(a,c+m,n);switch(y){case"vide":y="video";break;case"soun":y="audio";break;case"subt":y="subtitle";break;default:y="data"}f.streamTypes.push(y)}c+=x;break;case"mdhd":f.streamDurations.push(z());c+=x;break;case"uuid":this.$16(a,c,x,f);c+=x;break;case"meta":A=t+s+r;y=this.$14(a,c+A,4);if(y!=="face"){c+=x;break}z=g+h+q;A=this.$14(a,c+z,x-z);A!==null&&((f.sphericalMetadata.fbSpatialAudioMetadataXml===null||f.sphericalMetadata.fbSpatialAudioMetadataXml===void 0)&&(f.sphericalMetadata.fbSpatialAudioMetadataXml="<fb360_spatial_audio>"),i?f.sphericalMetadata.fbSpatialAudioMetadataXml+='\n                <track id="'+i.toString()+'">\n                  '+A+"\n                </track>\n              ":f.sphericalMetadata.fbSpatialAudioMetadataXml+="\n                <spatial_audio_formatting>\n                  "+A+"\n                </spatial_audio_formatting>\n              ");c+=x;break;case"minf":y=this.$14(a,c+2*g+h,h);y==="smhd"||y==="vmhd"?(c+=g+h,f.isParsingInMediaInformationAtom=!0,f.endOfMediaInformationAtomOffset=c+x):(f.streamSampleCounts.push(null),c+=x);break;case"stsd":c+=u;break;case"avc1":if(this.$5&&f.samples.length>0){z=f.samples[f.samples.length-1];z.descriptions.push({width:a.getUint16(c+G),height:a.getUint16(c+H)})}c+=x;break;case"mp4a":case"sowt":case"raw ":case"twos":case"fl32":case"fl64":case"in24":case"in32":case"ulaw":case"alaw":case"lpcm":case"Opus":A=a.getUint16(c+v).toString();Object.prototype.hasOwnProperty.call(w,A)?c+=w[A]:c+=x;break;case"SA3D":y=this.$15(a,c+g+h,x);y!==null&&(f.sphericalMetadata.ytSa3dMetadataJson===null&&(f.sphericalMetadata.ytSa3dMetadataJson=y));c+=x;break;case"stsz":case"stz2":f.streamSampleCounts.push(a.getUint32(c+F));c+=x;break;default:c+=x}}f.completed=!0;f.sphericalMetadata.fbSpatialAudioMetadataXml&&(f.sphericalMetadata.fbSpatialAudioMetadataXml+="</fb360_spatial_audio>");return f};d.$13=function(a){var c={streams:{numAudioTracks:0},format:{},metadata:{}},d=a.widths.length,e=a.heights.length,f=a.streamTypes.length,g=a.streamDurations.length,h=a.streamSampleCounts.length,i=a.samples.length;if(d!==e||d!==f||d!==g||d!==h||d!==i)throw new Error("Number of parsed widths, heights, durations or sample counts for video file are mismatched.");for(var e=0;e<d;e++){var j={width:a.widths[e],height:a.heights[e],duration:a.streamDurations[e],type:a.streamTypes[e],sampleCount:a.streamSampleCounts[e]};if(j.type==="video"){this.$5&&a.samples[e].descriptions.forEach(function(a){a.width>j.width&&a.height>j.height&&(j.width=a.width,j.height=a.height)});f=j.width*j.height;g=c.streams.primaryVideo;(!g||g.width*g.height>f)&&(c.streams.primaryVideo=j)}else if(j.type==="audio"){h=c.streams.primaryAudio;(!h||h.duration<j.duration)&&(c.streams.primaryAudio=j);c.streams.numAudioTracks++}}c.format.duration=a.duration;c.format.isSpherical=a.sphericalMetadata.spherical;a.sphericalMetadata.spherical&&(c.metadata.sphericalMetadataXml=a.sphericalMetadata.sphericalMetadataXml,c.metadata.FBSphericalMetadataXML=a.sphericalMetadata.FBSphericalMetadataXML,c.metadata.fbSpatialAudioMetadataXml=a.sphericalMetadata.fbSpatialAudioMetadataXml,c.metadata.ytSa3dMetadataJson=a.sphericalMetadata.ytSa3dMetadataJson);b("VideoUploadSphericalLogger").setHasSphericalMetadata(a.sphericalMetadata.spherical);return c};return c}();e.exports=c}),null);
__d("VideoUploadSession",["requireCond","cr:909282","AsyncRequest","GraphQLVideoPublishUtils","SubscriptionsHandler","VideoUploadCrashMonitor","VideoUploadFeatureDetector","VideoUploadFileValidator","VideoUploadGraphQLPostRequestManager","VideoUploadLogger","VideoUploadMetadataParser","VideoUploadPostRequestManager","VideoUploadReceiveRequestManager","VideoUploadRequestContext","cr:1661398","VideoUploadStartRequestManager","WaterfallIDGenerator","getByPath","gkx","mixin","mediaUploadLogStackTrace"],(function(a,b,c,d,e,f){var g={CANCELED:"canceled",ABANDONED:"abandoned",SHUTDOWN:"shutdown"};a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.$VideoUploadSession1=c.source;d.$VideoUploadSession2=c.composer_dialog_version;d.$VideoUploadSession3=c.target_id;d.$VideoUploadSession4=c.logging_delay;d.$VideoUploadSession5=c.silent_file_validation;d.$VideoUploadSession6=c.background_upload;d.$VideoUploadSession7=c.actor_id;d.$VideoUploadSession8=c.composer_entry_point_ref;d.$VideoUploadSession9=c.composer_work_shared_draft_mode;d.$VideoUploadSession10=c.video_publisher_action_source;d.$VideoUploadSession11=c.monitor_crashes;d.$VideoUploadSession12=c.isMultiMediaPost;d.$VideoUploadSession13=c.container_type;d.$VideoUploadSession14=c.number_of_partitions;d.$VideoUploadSession15=c.multi_partitioning_enabled;d.$VideoUploadSession16=c.change_default_chunk_size;d.$VideoUploadSession17=c.has_file_been_replaced?c.has_file_been_replaced:!1;d.$VideoUploadSession16&&(d.$VideoUploadSession18=c.client_chunk_size);d.$VideoUploadSession19=c.early_receive;d.$VideoUploadSession20=!1;d.$VideoUploadSession21=c.accept_dimensions_from_player;d.$VideoUploadSession22=c.ad_account_id;d.$VideoUploadSession23=c.waterfall_id;d.$VideoUploadSession24=new(b("VideoUploadFileValidator"))({minSize:c.min_size,maxSize:c.max_size,minLength:c.min_length,maxLength:c.max_length,minWidth:c.min_width,minHeight:c.min_height,extensions:c.extensions,source:c.source,require16to9AspectRatio:c.require_16to9_aspect_ratio,minAspectRatio:c.min_aspect_ratio,maxAspectRatio:c.max_aspect_ratio,acceptDimensionsFromPlayer:c.accept_dimensions_from_player});d.$VideoUploadSession25=b("VideoUploadFeatureDetector").supportsChunking();d.$VideoUploadSession26=b("VideoUploadFeatureDetector").supportsFileAPI();d.$VideoUploadSession25?(d.$VideoUploadSession27=c.parallel_chunk_uploads,d.$VideoUploadSession27&&(d.$VideoUploadSession28=c.parallel_chunk_upload_filesize,d.$VideoUploadSession29=c.default_chunk_size)):d.$VideoUploadSession27=!1;d.$VideoUploadSession30=c.shutdown_logging_enabled;d.$VideoUploadSession31=d.$VideoUploadSession32(c);d.$VideoUploadSession33=d.$VideoUploadSession34(c);if(d.$VideoUploadSession27)if(d.$VideoUploadSession15){var e=0;d.$VideoUploadSession35=[];for(e=0;e<d.$VideoUploadSession14-1;e++)d.$VideoUploadSession35[e]=d.$VideoUploadSession34(c)}else d.$VideoUploadSession35=d.$VideoUploadSession34(c);d.$VideoUploadSession36=d.$VideoUploadSession37(c);d.$VideoUploadSession38=d.$VideoUploadSession39(c);d.$VideoUploadSession40=c.log_free_local_storage;d.$VideoUploadSession41=null;return d}var d=c.prototype;d.$VideoUploadSession42=function(){this.$VideoUploadSession43=[];this.$VideoUploadSession44=[];this.$VideoUploadSession45=[];this.$VideoUploadSession46=[];this.$VideoUploadSession47=[];var a=0;for(a=0;a<this.$VideoUploadSession48-1;a++)this.$VideoUploadSession43.push(!1)};d.$VideoUploadSession49=function(){var a;this.$VideoUploadSession23==null&&(this.$VideoUploadSession23=b("WaterfallIDGenerator").generate());this.$VideoUploadSession50=new(b("VideoUploadLogger"))({actor_id:this.$VideoUploadSession7,ad_account_id:this.$VideoUploadSession22,source:this.$VideoUploadSession1,composer_dialog_version:this.$VideoUploadSession2,waterfall_id:this.$VideoUploadSession23,target_id:this.$VideoUploadSession3,delay:this.$VideoUploadSession4,is_chunked_upload:this.$VideoUploadSession25,composer_entry_point_ref:this.$VideoUploadSession8,composer_work_shared_draft_mode:this.$VideoUploadSession9,container_type:this.$VideoUploadSession13,has_file_been_replaced:this.$VideoUploadSession17,composer_session_id:this.$VideoUploadSession51,asset_id:(a=this.$VideoUploadSession52)==null?void 0:a.getStableAssetID()});this.inform("set-waterfall-id",{waterfallID:this.$VideoUploadSession23})};d.createTestLogger=function(){this.$VideoUploadSession49()};d.$VideoUploadSession53=function(){this.$VideoUploadSession50||this.$VideoUploadSession49();return this.$VideoUploadSession50};d.getLogger=function(){return!this.$VideoUploadSession50?null:this.$VideoUploadSession50};d.$VideoUploadSession54=function(){var a,c=this;a=b("cr:1661398")==null?void 0:(a=b("cr:1661398").VideoUploadRetries)==null?void 0:a.createState();a!=null&&(a.addListener("retry-attempted",function(a){var d=a.delay_retry_count,e=a.total_retry_count,f=a.since_started_ms,g=a.retry_context;a=a.backoff_ms;c.__logEvent(b("VideoUploadLogger").EVENT_RETRY_ATTEMPT,{retries:e,elapsed_time:f,error_trace:g==null?void 0:g.location,error_code:g==null?void 0:g.error_code,debug:{delay_retry_count:d,backoff_ms:a}})}),a.addListener("retries-abandoned",function(a){var d=a.delay_retry_count,e=a.total_retry_count,f=a.since_started_ms,g=a.retry_context;a=a.abandon_reason;c.__logEvent(b("VideoUploadLogger").EVENT_RETRY_ATTEMPT,{retries:e,elapsed_time:f,error:a,error_trace:g==null?void 0:g.location,error_code:g==null?void 0:g.error_code,debug:{delay_retry_count:d}})}));return a};d.start=function(a){var c=this;this.$VideoUploadSession55=null;this.$VideoUploadSession56=null;this.$VideoUploadSession57=null;this.$VideoUploadSession58=!1;this.$VideoUploadSession59=!1;this.$VideoUploadSession60=null;this.$VideoUploadSession52=a;this.$VideoUploadSession61=0;this.$VideoUploadSession62=!1;this.$VideoUploadSession63={sphericalMetadataXml:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null};this.$VideoUploadSession64=!1;this.$VideoUploadSession41=this.$VideoUploadSession54();this.$VideoUploadSession49();b("mediaUploadLogStackTrace")({waterfallID:this.$VideoUploadSession23,sourceType:this.$VideoUploadSession1,composerEntryPointRef:this.$VideoUploadSession8});this.$VideoUploadSession15&&(this.$VideoUploadSession48=Math.min(this.$VideoUploadSession14,Math.ceil(this.$VideoUploadSession52.getSize()/this.$VideoUploadSession28)));this.__logEvent(b("VideoUploadLogger").EVENT_REQUESTED_UPLOADING);this.inform("upload-requested");a=new(b("VideoUploadMetadataParser"))(this.$VideoUploadSession52,this.$VideoUploadSession65.bind(this),this.$VideoUploadSession21);a.parse();this.$VideoUploadSession40&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota(function(a,d){c.__logEvent(b("VideoUploadLogger").EVENT_MEASURE_FREE_LOCAL_STORAGE,{free_space_in_device:d})})};d.setTargetID=function(a){this.$VideoUploadSession3=a};d.setComposerSessionID=function(a){this.$VideoUploadSession51=a};d.post=function(a){var c;this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_POST_REQUEST,this.$VideoUploadSession66);this.inform("post-started",a);var d=this.__createPostRequestContext(a);if(b("GraphQLVideoPublishUtils").isGraphQLPublish(this.$VideoUploadSession1,this.$VideoUploadSession8,(c=a==null?void 0:a.isProfilePlus)!=null?c:!1,(c=a==null?void 0:a.shouldPremiere)!=null?c:!1)&&this.$VideoUploadSession38.hasAPISupport(a)){this.$VideoUploadSession38.sendRequest(d);this.$VideoUploadSession67=a;return}this.$VideoUploadSession36.sendRequest(d);this.$VideoUploadSession67=a};d.__createPostRequestContext=function(a){var c=new(b("VideoUploadRequestContext"))();this.__setupPostRequestContext(c,a);return c};d.__setupPostRequestContext=function(a,b){a.setMetadata(b).setVideoID(this.$VideoUploadSession55).setTargetID(this.$VideoUploadSession3).setSource(this.$VideoUploadSession1).setComposerDialogVersion(this.$VideoUploadSession2).setComposerWorkSharedDraftMode(this.$VideoUploadSession9).setWaterfallID(this.$VideoUploadSession23).setComposerSessionID(this.$VideoUploadSession51).setSupportsChunking(this.$VideoUploadSession25).setCreatorProduct(this.$VideoUploadSession52.getCreatorProduct()).setFile(this.$VideoUploadSession52).setHasFileBeenReplaced(this.$VideoUploadSession17),b&&(b.spherical&&(this.$VideoUploadSession62=!0,a.setIsSphericalVideo(this.$VideoUploadSession62)),b.enable_omnistab&&(this.$VideoUploadSession64=!0,a.setEnableOmnistab(this.$VideoUploadSession64))),a.setComposerEntryPointRef&&a.setComposerEntryPointRef(this.$VideoUploadSession8)};d.$VideoUploadSession68=function(a,d){if(this.$VideoUploadSession58){var e={event_reason:d,debug:babelHelpers["extends"]({},this.__fetchReceiveRequestManagerStateLogData(),{is_background_upload:this.$VideoUploadSession6})};d=d===g.CANCELED?b("VideoUploadLogger").EVENT_CANCELED_UPLOADING:b("VideoUploadLogger").EVENT_ABANDONED_UPLOADING;this.$VideoUploadSession69();this.$VideoUploadSession6?(this.$VideoUploadSession59||this.__logEvent(d),this.$VideoUploadSession70&&(this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_FLOW,e),this.$VideoUploadSession70=!1)):(this.__logEvent(d),this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_FLOW,e));this.inform("upload-canceled")}else a&&this.$VideoUploadSession55&&c.deleteVideo(this.$VideoUploadSession55)};d.cancel=function(a){a===void 0&&(a=!1),this.$VideoUploadSession68(a,g.CANCELED)};d.abandon=function(a){a===void 0&&(a=!1),this.$VideoUploadSession68(a,g.ABANDONED)};d.isPostInProgress=function(){return this.$VideoUploadSession36.isInProgress()};d.isInProgress=function(){return this.$VideoUploadSession58};d.getHasUploadFinished=function(){return this.$VideoUploadSession59};d.getVideoID=function(){return this.$VideoUploadSession55};d.getUploadTime=function(){return this.$VideoUploadSession71};d.getExPartitionNumber=function(a){var b;for(b=0;b<this.$VideoUploadSession48-1;b++)if(a>=this.$VideoUploadSession44[b]&&a<this.$VideoUploadSession45[b])break;return b===this.$VideoUploadSession48?-1:b};d.getIsSphericalVideo=function(){return this.$VideoUploadSession62||!1};d.startFlow=function(){if(!this.$VideoUploadSession6||this.$VideoUploadSession70)return;this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_FLOW,{is_spherical:this.getIsSphericalVideo()?"true":null});this.$VideoUploadSession70=!0;this.$VideoUploadSession72&&this.$VideoUploadSession72.flowStarted()};d.__extractVideoMetadata=function(a){var c;a=(c=b("getByPath"))(a,["streams","primaryVideo"]);c={source_height:c(a,["height"]),source_width:c(a,["width"]),duration:c(a,["duration"])*1e3};c.original_video_duration=c.duration;return c};d.$VideoUploadSession65=function(a){var c;if(this.$VideoUploadSession5){var d=this.$VideoUploadSession24.getValidationErrorMessage(this.$VideoUploadSession52,a);d?(c={error_summary:d.summary,error_description:d.description},d=!1):d=!0}else d=this.$VideoUploadSession24.validate(this.$VideoUploadSession52,a);if(!d){this.__logEvent(b("VideoUploadLogger").EVENT_INVALIDATED_UPLOADING);this.inform("upload-failed",c);return}this.$VideoUploadSession66=this.__extractVideoMetadata(a);a&&a.format&&(this.$VideoUploadSession62=a.format.isSpherical,a.metadata&&(this.$VideoUploadSession63.sphericalMetadataXml=a.metadata.sphericalMetadataXml,this.$VideoUploadSession63.fbSpatialAudioMetadataXml=a.metadata.fbSpatialAudioMetadataXml,this.$VideoUploadSession63.ytSa3dMetadataJson=a.metadata.ytSa3dMetadataJson));this.$VideoUploadSession6||this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_FLOW,{is_spherical:this.getIsSphericalVideo()?"true":null});this.$VideoUploadSession73=this.$VideoUploadSession27&&this.$VideoUploadSession52.getSize()>=this.$VideoUploadSession28;this.$VideoUploadSession74=!1;this.$VideoUploadSession75=0;this.$VideoUploadSession76=this.$VideoUploadSession75;this.$VideoUploadSession77=0;this.$VideoUploadSession15?this.$VideoUploadSession42():this.$VideoUploadSession43=!1;if(this.$VideoUploadSession73)if(this.$VideoUploadSession15){d=0;this.$VideoUploadSession78=Math.ceil(this.$VideoUploadSession52.getSize()/this.$VideoUploadSession48);var e=this.$VideoUploadSession78,f=this.$VideoUploadSession78;for(d=0;d<this.$VideoUploadSession48-1;d++)this.$VideoUploadSession44[d]=e,e=Math.min(this.$VideoUploadSession44[d]+f,this.$VideoUploadSession52.getSize()),this.$VideoUploadSession45[d]=e,this.$VideoUploadSession46[d]=this.$VideoUploadSession44[d],this.$VideoUploadSession47[d]=0}else this.$VideoUploadSession78=Math.floor(this.$VideoUploadSession52.getSize()/2),this.$VideoUploadSession44=this.$VideoUploadSession78,this.$VideoUploadSession46=this.$VideoUploadSession44,this.$VideoUploadSession47=0,this.$VideoUploadSession45=this.$VideoUploadSession52.getSize();else this.$VideoUploadSession78=this.$VideoUploadSession52.getSize();d=new(b("VideoUploadRequestContext"))().setFile(this.$VideoUploadSession52).setTargetID(this.$VideoUploadSession3).setSource(this.$VideoUploadSession1).setComposerDialogVersion(this.$VideoUploadSession2).setComposerWorkSharedDraftMode(this.$VideoUploadSession9).setWaterfallID(this.$VideoUploadSession23).setComposerSessionID(this.$VideoUploadSession51).setHasFileBeenReplaced(this.$VideoUploadSession17).setSupportsChunking(this.$VideoUploadSession25).setSupportsFileAPI(this.$VideoUploadSession26).setCreatorProduct(this.$VideoUploadSession52.getCreatorProduct()).setPartitionStartOffset(this.$VideoUploadSession75).setPartitionEndOffset(this.$VideoUploadSession78).setRetryState(this.$VideoUploadSession41);this.$VideoUploadSession27&&d.setUseParallelChunks(this.$VideoUploadSession27);this.$VideoUploadSession62&&(d.setIsSphericalVideo(this.$VideoUploadSession62),d.setSphericalMetadata(this.$VideoUploadSession63));d.setComposerEntryPointRef&&d.setComposerEntryPointRef(this.$VideoUploadSession8);d.setVideoPublisherActionSource(this.$VideoUploadSession10);this.$VideoUploadSession79();this.$VideoUploadSession31.sendRequest(d);this.$VideoUploadSession19&&this.$VideoUploadSession16&&this.$VideoUploadSession33.isResumabilityEnabled()&&!this.$VideoUploadSession33.isResumableServiceProxyReceiveEnabled()&&this.$VideoUploadSession80();this.inform("metadata-parsed",a)};d.$VideoUploadSession32=function(a){var b=this.$VideoUploadSession25?a.chunk_start_uri:a.start_uri;b=this.__getVideoUploadStartRequestManager(b,a.start_max_transport_retries,a.start_transport_retry_interval_base,a.start_max_transport_retry_timeout,a.skip_upload_enabled,a.skip_upload_file_size_limit,a.start_max_server_retries,a.start_server_retry_interval_base);b.subscribe("request-started",this.$VideoUploadSession81.bind(this));b.subscribe("request-finished",this.$VideoUploadSession82.bind(this));b.subscribe("request-failed",this.$VideoUploadSession83.bind(this));b.subscribe("request-canceled",this.$VideoUploadSession84.bind(this));return b};d.$VideoUploadSession34=function(a){var b=this.$VideoUploadSession25?a.chunk_receive_uri:a.receive_uri;b=this.__getVideoUploadReceiveRequestManager(b,a);b.subscribe("request-started",this.$VideoUploadSession85.bind(this));b.subscribe("request-progressed",this.$VideoUploadSession86.bind(this));b.subscribe("request-finished",this.$VideoUploadSession87.bind(this));b.subscribe("request-failed",this.$VideoUploadSession88.bind(this));b.subscribe("request-canceled",this.$VideoUploadSession89.bind(this));b.subscribe("request-timeout",this.$VideoUploadSession90.bind(this));b.subscribe("online",this.$VideoUploadSession91.bind(this));b.subscribe("offline",this.$VideoUploadSession92.bind(this));b.subscribe("resumable-called",this.$VideoUploadSession93.bind(this));b.subscribe("resumable-started",this.$VideoUploadSession94.bind(this));b.subscribe("resumable-success",this.$VideoUploadSession95.bind(this));b.subscribe("resumable-failed",this.$VideoUploadSession96.bind(this));return b};d.$VideoUploadSession37=function(a){var b=this.$VideoUploadSession25?a.chunk_post_uri:a.post_uri;b=this.__getVideoUploadPostRequestManager(b,a);b.subscribe("request-finished",this.__handlePostRequestFinished.bind(this));b.subscribe("request-failed",this.$VideoUploadSession97.bind(this));return b};d.$VideoUploadSession39=function(a){a=new(b("VideoUploadGraphQLPostRequestManager"))(isNaN(a.post_max_transport_retries)?0:a.post_max_transport_retries,isNaN(a.post_transport_retry_interval_base)?0:a.post_transport_retry_interval_base,isNaN(a.post_max_server_retries)?0:a.post_max_server_retries,isNaN(a.post_server_retry_interval_base)?0:a.post_server_retry_interval_base);a.subscribe("request-finished",this.__handlePostRequestFinished.bind(this));a.subscribe("request-failed",this.$VideoUploadSession97.bind(this));return a};d.$VideoUploadSession81=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_UPLOADING,babelHelpers["extends"]({hash_time:c.hash_time,hash_exception:c.hash_exception},this.$VideoUploadSession66)),this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_START_REQUEST,this.$VideoUploadSession66),this.$VideoUploadSession98=Date.now(),this.inform("upload-started")};d.$VideoUploadSession80=function(a){if(!this.$VideoUploadSession20){this.$VideoUploadSession20=!0;a||(a={video_id:null});var b;b=this.__createReceiveRequestContext(a,!1);this.$VideoUploadSession33.sendRequest(b);if(this.$VideoUploadSession73)if(this.$VideoUploadSession15){var c=0;for(c=0;c<this.$VideoUploadSession48-1;c++)b=this.__createReceiveRequestContext(a,!0,c),this.$VideoUploadSession35[c].sendRequest(b)}else b=this.__createReceiveRequestContext(a,!0),this.$VideoUploadSession35.sendRequest(b)}else this.$VideoUploadSession99()};d.$VideoUploadSession99=function(){this.$VideoUploadSession33.updateVideoID(this.$VideoUploadSession55);if(this.$VideoUploadSession73)if(this.$VideoUploadSession15){var a=0;for(a=0;a<this.$VideoUploadSession48-1;a++)this.$VideoUploadSession35[a].updateVideoID(this.$VideoUploadSession55)}else this.$VideoUploadSession35.updateVideoID(this.$VideoUploadSession55)};d.$VideoUploadSession100=function(a){if(this.$VideoUploadSession41==null)return((a==null?void 0:a.transport_retries)||0)+((a==null?void 0:a.server_retries)||0)+((a==null?void 0:a.timeout_retries)||0);else return this.$VideoUploadSession41.getTotalRetryCount()};d.$VideoUploadSession82=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_PROGRESS_UPLOADING_START_REQUEST,{retries:this.$VideoUploadSession100(c),transport_retries:c.transport_retries,hash_time:c.hash_time,skip_upload:c.skip_upload?1:null}),this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_START_REQUEST,babelHelpers["extends"]({video_id:c.video_id},this.$VideoUploadSession66)),this.$VideoUploadSession55=c.video_id,this.$VideoUploadSession56=c.upload_session_id,this.$VideoUploadSession57=c.fb_region,this.$VideoUploadSession101=c.skip_upload,!c.skip_upload?this.$VideoUploadSession80(c):(this.$VideoUploadSession102(),this.inform("upload-progressed",{start_offset:0,end_offset:this.$VideoUploadSession52.getSize(),file_size:this.$VideoUploadSession52.getSize(),sent_bytes:this.$VideoUploadSession52.getSize(),video_id:c.video_id,skip_upload:c.skip_upload}),this.$VideoUploadSession6&&this.__logFinishedUploading(),this.inform("upload-finished",{start_offset:0,end_offset:this.$VideoUploadSession52.getSize(),video_id:c.video_id,is_spherical_video:this.$VideoUploadSession62}))};d.__fetchReceiveRequestManagerStateLogData=function(){var a={};this.$VideoUploadSession33!=null&&(this.$VideoUploadSession33.appendStateLogData(a,"requestManager_"),a.request_manager_state=a.requestManager_last_log_state);if(this.$VideoUploadSession15){var b=0;for(b=0;b<this.$VideoUploadSession48-1;b++)this.$VideoUploadSession35[b]!=null&&this.$VideoUploadSession35[b].appendStateLogData(a,"requestManagerEx_"+b.toString())}else this.$VideoUploadSession35!=null&&this.$VideoUploadSession35.appendStateLogData(a,"requestManagerEx_");return a};d.__createReceiveRequestContext=function(a,c,d){c||(c=!1);var e=new(b("VideoUploadRequestContext"))();this.$VideoUploadSession15?this.__setupReceiveRequestContext(e,a,c,d):this.__setupReceiveRequestContext(e,a,c);return e};d.__setupReceiveRequestContext=function(a,b,c,d){var e,f,g;!c?(c=this.$VideoUploadSession75,e=this.$VideoUploadSession78,this.$VideoUploadSession16?(f=this.$VideoUploadSession75,g=this.$VideoUploadSession18?Math.min(this.$VideoUploadSession18,this.$VideoUploadSession78):this.$VideoUploadSession78):(f=b.start_offset,g=b.end_offset)):this.$VideoUploadSession15?(this.$VideoUploadSession16&&(this.$VideoUploadSession29=this.$VideoUploadSession45[d]-this.$VideoUploadSession44[d],this.$VideoUploadSession29=this.$VideoUploadSession18?Math.min(this.$VideoUploadSession18,this.$VideoUploadSession29):this.$VideoUploadSession29),c=this.$VideoUploadSession44[d],e=this.$VideoUploadSession45[d],f=this.$VideoUploadSession44[d],g=this.$VideoUploadSession44[d]+this.$VideoUploadSession29>=this.$VideoUploadSession45[d]?this.$VideoUploadSession45[d]:this.$VideoUploadSession44[d]+this.$VideoUploadSession29):(this.$VideoUploadSession16&&(this.$VideoUploadSession29=this.$VideoUploadSession45-this.$VideoUploadSession44,this.$VideoUploadSession29=this.$VideoUploadSession18?Math.min(this.$VideoUploadSession18,this.$VideoUploadSession29):this.$VideoUploadSession29),c=this.$VideoUploadSession44,e=this.$VideoUploadSession45,f=this.$VideoUploadSession44,g=this.$VideoUploadSession44+this.$VideoUploadSession29>=this.$VideoUploadSession45?this.$VideoUploadSession45:this.$VideoUploadSession44+this.$VideoUploadSession29);a.setFile(this.$VideoUploadSession52).setVideoID(b.video_id).setXPVAssetID(b.xpv_asset_id).setUploadSessionID(b.upload_session_id).setFbRegion(b.fb_region).setStartOffset(f).setEndOffset(g).setPartitionStartOffset(c).setPartitionEndOffset(e).setPartitionNo(d).setTargetID(this.$VideoUploadSession3).setSource(this.$VideoUploadSession1).setComposerDialogVersion(this.$VideoUploadSession2).setComposerWorkSharedDraftMode(this.$VideoUploadSession9).setWaterfallID(this.$VideoUploadSession23).setComposerSessionID(this.$VideoUploadSession51).setSupportsChunking(this.$VideoUploadSession25).setHasFileBeenReplaced(this.$VideoUploadSession17).setRetryState(this.$VideoUploadSession41);this.$VideoUploadSession27&&a.setUseParallelChunks(this.$VideoUploadSession27);a.setComposerEntryPointRef&&a.setComposerEntryPointRef(this.$VideoUploadSession8);this.$VideoUploadSession18&&a.setClientChunkSize(this.$VideoUploadSession18)};d.$VideoUploadSession83=function(a,c){a=this.__getLogErrorData(c);this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_START_REQUEST,a);this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING,a);a=c.error_is_transient?b("VideoUploadLogger").EVENT_RESIGNED_FLOW:b("VideoUploadLogger").EVENT_FAILED_FLOW;this.$VideoUploadSession6?this.$VideoUploadSession70&&(this.__logEvent(a),this.$VideoUploadSession70=!1):this.__logEvent(a);this.$VideoUploadSession102();this.$VideoUploadSession103();this.inform("upload-failed",c)};d.$VideoUploadSession84=function(a){this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_START_REQUEST)};d.$VideoUploadSession85=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_RECEIVE_REQUEST,{debug:c.debug}),!c.start_offset&&!c.transport_retries&&!c.server_retries&&this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_SENDING_BYTES,{total_bytes:this.$VideoUploadSession52.getSize(),upload_domain:c.upload_domain,debug:c.debug}),this.$VideoUploadSession25&&this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_SENDING_CHUNK_BYTES,{start_offset:c.start_offset,total_bytes:c.end_offset-c.start_offset,retries:this.$VideoUploadSession100(c),transport_retries:c.transport_retries,server_retries:c.server_retries,upload_speed:c.upload_speed,request_manager_state:c.request_manager_state,upload_domain:c.upload_domain,debug:c.debug})};d.$VideoUploadSession86=function(a,b){if(b.start_offset<this.$VideoUploadSession78)this.$VideoUploadSession76=b.start_offset,this.$VideoUploadSession77=b.sent_bytes;else if(this.$VideoUploadSession15){a=this.getExPartitionNumber(b.start_offset);a>-1&&(this.$VideoUploadSession46[a]=b.start_offset,this.$VideoUploadSession47[a]=b.sent_bytes)}else this.$VideoUploadSession46=b.start_offset,this.$VideoUploadSession47=b.sent_bytes;b.start_offset=this.$VideoUploadSession76;b.sent_bytes=this.$VideoUploadSession77;if(this.$VideoUploadSession73)if(this.$VideoUploadSession15)for(a=0;a<this.$VideoUploadSession48-1;a++)b.start_offset+=this.$VideoUploadSession46[a]-this.$VideoUploadSession44[a],b.sent_bytes+=this.$VideoUploadSession47[a];else b.start_offset+=this.$VideoUploadSession46-this.$VideoUploadSession44,b.sent_bytes+=this.$VideoUploadSession47;a=Math.min(b.start_offset+b.sent_bytes,b.file_size);a>this.$VideoUploadSession61&&(this.$VideoUploadSession61=a,this.inform("upload-progressed",b))};d.$VideoUploadSession87=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_RECEIVE_REQUEST,{debug:c.debug});this.$VideoUploadSession25&&this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_SENDING_CHUNK_BYTES,{start_offset:c.start_offset,sent_bytes:c.end_offset-c.start_offset,retries:this.$VideoUploadSession100(c),transport_retries:c.transport_retries,server_retries:c.server_retries,upload_speed:c.upload_speed,request_manager_state:c.request_manager_state,upload_domain:c.upload_domain,debug:c.debug});a=!1;if(c.start_offset<this.$VideoUploadSession78)this.$VideoUploadSession74=c.end_offset>=this.$VideoUploadSession78;else if(this.$VideoUploadSession15){var d;d=this.getExPartitionNumber(c.start_offset);if(d===-1){var e={error_summary:"Invalid offset",error_description:"Offset doesn't fall in any exPartition range."};this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING);this.inform("upload-failed",e);return}this.$VideoUploadSession43[d]=c.end_offset>=this.$VideoUploadSession45[d]}else this.$VideoUploadSession43=c.end_offset>=this.$VideoUploadSession45;if(this.$VideoUploadSession15)for(d=0;d<this.$VideoUploadSession48-1;d++)if(this.$VideoUploadSession43[d]===!1){a=!1;break}else a=!0;else a=this.$VideoUploadSession43;(!this.$VideoUploadSession26||this.$VideoUploadSession74&&(!this.$VideoUploadSession73||a))&&(this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_SENDING_BYTES,{sent_bytes:this.$VideoUploadSession52.getSize(),upload_domain:c.upload_domain,debug:c.debug}),this.$VideoUploadSession71=Date.now()-this.$VideoUploadSession98,this.$VideoUploadSession6&&this.__logFinishedUploading(),c.video_id=this.$VideoUploadSession55,c.is_spherical_video=this.$VideoUploadSession62,this.inform("upload-finished",c),this.$VideoUploadSession12&&(this.$VideoUploadSession6||this.__logFinishedUploading(),this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_FLOW,c),this.$VideoUploadSession70=!1,this.$VideoUploadSession103(),this.inform("multimedia-upload-finished",c)))};d.$VideoUploadSession88=function(a,c){a=this.__getLogErrorData(c);this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_RECEIVE_REQUEST,a);this.$VideoUploadSession25&&this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_SENDING_CHUNK_BYTES,a);if(this.$VideoUploadSession58){this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_SENDING_BYTES,a);this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING,a);var d=c.error_is_transient?b("VideoUploadLogger").EVENT_RESIGNED_FLOW:b("VideoUploadLogger").EVENT_FAILED_FLOW;this.$VideoUploadSession6?this.$VideoUploadSession70&&(this.__logEvent(d,a),this.$VideoUploadSession70=!1):this.__logEvent(d,a)}this.$VideoUploadSession103();this.inform("upload-failed",c)};d.$VideoUploadSession89=function(a){this.$VideoUploadSession25?this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_SENDING_CHUNK_BYTES):this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_SENDING_BYTES)};d.$VideoUploadSession90=function(a,c){a={start_offset:c.start_offset,sent_bytes:c.end_offset-c.start_offset,retries:this.$VideoUploadSession100(c),transport_retries:c.transport_retries,server_retries:c.server_retries,timeout_retries:c.timeout_retries,upload_speed:c.upload_speed,request_manager_state:c.request_manager_state,debug:c.debug};this.__logEvent(b("VideoUploadLogger").EVENT_TIMEOUT_SENDING_CHUNK_BYTES,a)};d.$VideoUploadSession91=function(a,b){this.inform("online",b)};d.$VideoUploadSession92=function(a,b){this.inform("offline",b)};d.$VideoUploadSession93=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_RESUMABLE_CALLED,c)};d.$VideoUploadSession94=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_RESUMABLE_STARTED,c)};d.$VideoUploadSession95=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_RESUMABLE_SUCCESS,c)};d.$VideoUploadSession96=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_RESUMABLE_FAILED,c)};d.__handlePostRequestFinished=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_POST_REQUEST,babelHelpers["extends"]({video_id:this.$VideoUploadSession55},this.$VideoUploadSession66));c.video_id||(c.video_id=this.$VideoUploadSession55);this.$VideoUploadSession6||this.__logFinishedUploading();this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_FLOW);this.$VideoUploadSession70=!1;this.$VideoUploadSession103();a=babelHelpers["extends"]({},c,this.$VideoUploadSession67);this.inform("post-finished",a)};d.__logFinishedUploading=function(){this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_UPLOADING,babelHelpers["extends"]({elapsed_time:this.$VideoUploadSession71,skip_upload:this.$VideoUploadSession101?1:null,video_id:this.$VideoUploadSession55},this.$VideoUploadSession66)),this.$VideoUploadSession59=!0};d.$VideoUploadSession97=function(a,c){a=this.__getLogErrorData(c);this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_POST_REQUEST,a);if(this.$VideoUploadSession58){this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING,a);var d=c.error_is_transient?b("VideoUploadLogger").EVENT_RESIGNED_FLOW:b("VideoUploadLogger").EVENT_FAILED_FLOW;this.__logEvent(d,a)}this.$VideoUploadSession103();this.inform("post-failed",c)};d.$VideoUploadSession102=function(){this.$VideoUploadSession33.cancelRequest();if(this.$VideoUploadSession73)if(this.$VideoUploadSession15){var a=0;for(a=0;a<this.$VideoUploadSession48-1;a++)this.$VideoUploadSession35[a].cancelRequest()}else this.$VideoUploadSession35.cancelRequest();this.$VideoUploadSession20=!1};d.$VideoUploadSession69=function(){this.$VideoUploadSession31.cancelRequest(),this.$VideoUploadSession102(),this.$VideoUploadSession103(),this.$VideoUploadSession55&&(c.deleteVideo(this.$VideoUploadSession55),this.$VideoUploadSession55=null,this.$VideoUploadSession56=null,this.$VideoUploadSession57=null)};d.$VideoUploadSession79=function(){var a=this;this.$VideoUploadSession58=!0;this.$VideoUploadSession30&&(this.$VideoUploadSession60=new(b("SubscriptionsHandler"))(),this.$VideoUploadSession60.addSubscriptions(this.$VideoUploadSession53().postOnShutdown(function(){if(a.$VideoUploadSession58){var c={event_reason:g.SHUTDOWN,debug:babelHelpers["extends"]({},a.__fetchReceiveRequestManagerStateLogData(),{is_background_upload:a.$VideoUploadSession6})};a.$VideoUploadSession6?a.$VideoUploadSession70&&a.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_FLOW,c):a.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_FLOW,c)}})));this.$VideoUploadSession11&&(this.$VideoUploadSession72=new(b("VideoUploadCrashMonitor"))(this.$VideoUploadSession23,this.$VideoUploadSession7,this.$VideoUploadSession1,this.$VideoUploadSession3,this.$VideoUploadSession4,this.$VideoUploadSession25,this.$VideoUploadSession8,!this.$VideoUploadSession6||this.$VideoUploadSession70),this.$VideoUploadSession72.startSession())};d.$VideoUploadSession103=function(){this.$VideoUploadSession58=!1,this.$VideoUploadSession60&&(this.$VideoUploadSession60.release(),this.$VideoUploadSession60=null),this.$VideoUploadSession72&&(this.$VideoUploadSession72.endSession(),this.$VideoUploadSession72=null)};d.__getLogErrorData=function(a){return{error:a.error_summary,error_code:a.error_code,error_description:a.error_description,retries:this.$VideoUploadSession100(a),transport_retries:a.transport_retries,server_retries:a.server_retries,request_manager_state:a.request_manager_state,debug:a.debug}};d.__logEvent=function(a,b){b=b||{},this.$VideoUploadSession52&&(b.file_size=this.$VideoUploadSession52.getSize(),b.file_extension=this.$VideoUploadSession52.getExtension(),b.sent_bytes=this.$VideoUploadSession61),this.$VideoUploadSession53().logEvent(a,b)};d.__getVideoUploadStartRequestManager=function(a,c,d,e,f,g,h,i){return new(b("VideoUploadStartRequestManager"))(a,c,d,e,f,g,h,i)};d.__getVideoUploadReceiveRequestManager=function(a,c){return new(b("VideoUploadReceiveRequestManager"))(a,c.max_transport_retries,c.max_transport_retry_timeout,c.max_server_retries,c.response_timeout_enabled,c.max_response_timeout_retries,c.response_timeout_speed_variation_factor_ppt,c.transport_retry_interval_base,c.server_retry_interval_base,c.receive_errors_force_retry,c.access_token,c.resumability_enabled,c.resumability_async_enabled,c.resumable_service_name,c.resumable_service_domain,c.datr,c.resumability_min_file_size,c.resumable_service_proxy_receive,c.resumable_service_send_media_info,c.resumable_service_send_file_size,c.resumable_reset_transport_retries_on_progress,c.add_flow_capture_header,c.traffic_tracing_enabled,c.traffic_tracing_min_file_size)};d.__getVideoUploadPostRequestManager=function(a,c){return new(b("VideoUploadPostRequestManager"))(a,c.post_max_transport_retries,c.post_transport_retry_interval_base,c.post_max_server_retries,c.post_server_retry_interval_base)};c.deleteVideo=function(a){a=new(b("AsyncRequest"))("/ajax/video/actions/delete").setData({fbid:a,redirect:!1});a.setErrorHandler(function(){});a.send()};return c}(b("mixin")(b("cr:909282")));e.exports=a}),null);
__d("VideoUploader",["VideoUploadCrashMonitor","VideoUploadSession","mixin","requireCond","cr:909282"],(function(a,b,c,d,e,f){a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.$VideoUploader1=c;d.$VideoUploader2=null;d.$VideoUploader3=null;d.$VideoUploader4=c.waterfall_id==null?null:c.waterfall_id;d.$VideoUploader5=d.$VideoUploader1.ad_account_id;c.monitor_crashes&&(d.$VideoUploader6=new(b("VideoUploadCrashMonitor"))(),d.$VideoUploader6.logKnownCrashes());return d}var d=c.prototype;d.setComposerSessionID=function(a){this.$VideoUploader7=a,this.$VideoUploader2&&this.$VideoUploader2.setComposerSessionID(a)};d.getLogger=function(){if(!this.$VideoUploader2)return;if(this.$VideoUploader2.getLogger)return this.$VideoUploader2.getLogger()};d.upload=function(a){var b=this;if(this.$VideoUploader2)return;var c=this.__getVideoUploadSession(this.$VideoUploader1);c.setComposerSessionID(this.$VideoUploader7);c.subscribe(this.__getEventsWhichShouldListenFromSession(),function(a,c){return b.$VideoUploader8(a,c)});this.$VideoUploader2=c;c.start(a)};d.__getVideoUploadSession=function(a){return new(b("VideoUploadSession"))(a)};d.__getEventsWhichShouldListenFromSession=function(){return["upload-requested","upload-started","upload-progressed","upload-finished","upload-failed","upload-canceled","post-started","post-finished","post-failed","online","offline","metadata-parsed","set-waterfall-id"]};d.postUserRequest=function(){if(!this.$VideoUploader2)return;this.$VideoUploader2.startFlow&&this.$VideoUploader2.startFlow()};d.setTargetID=function(a){if(this.$VideoUploader2==null)return;this.$VideoUploader2.setTargetID(a)};d.setHasFileBeenReplaced=function(a){this.$VideoUploader1.has_file_been_replaced=a};d.post=function(a){if(!this.$VideoUploader2)return;this.$VideoUploader2.post(a)};d.getVideoID=function(){this.$VideoUploader2&&(this.$VideoUploader3=this.$VideoUploader2.getVideoID());return this.$VideoUploader3};d.cancel=function(a){a===void 0&&(a=!1);var c=this.getVideoID();this.$VideoUploader2?this.$VideoUploader2.cancel(a):a&&c&&b("VideoUploadSession").deleteVideo(c);this.reset()};d.abandon=function(a){a===void 0&&(a=!1);var c=this.getVideoID();this.$VideoUploader2?this.$VideoUploader2.abandon(a):a&&c&&b("VideoUploadSession").deleteVideo(c);this.reset()};d.reset=function(){this.$VideoUploader2&&(this.$VideoUploader3=this.getVideoID()),this.$VideoUploader2=null};d.getUploadSession=function(){return this.$VideoUploader2};d.getLoggerData=function(){return{waterfall_id:this.$VideoUploader2?this.$VideoUploader2.$VideoUploader4:null,actor_id:this.$VideoUploader1.actor_id,target_id:this.$VideoUploader1.target_id,target_type:this.$VideoUploader1.target_type,composer_entry_point_ref:this.$VideoUploader1.composer_entry_point_ref}};d.isPostInProgress=function(){return!!this.$VideoUploader2&&this.$VideoUploader2.isPostInProgress()};d.isSessionInProgress=function(){return!!this.$VideoUploader2&&this.$VideoUploader2.isInProgress()};d.isSessionExist=function(){return!!this.$VideoUploader2};d.getUploadParameters=function(){return this.$VideoUploader1};d.__getSession=function(){return this.$VideoUploader2};d.__getEventsForWhichSessionShouldBeSetToNull=function(){return["upload-failed","post-finished","multimedia-upload-finished"]};d.$VideoUploader8=function(a,b){this.__getEventsForWhichSessionShouldBeSetToNull().includes(a)&&this.reset(),this.__delegateEvent(a,b)};d.__delegateEvent=function(a,b){this.inform(a,b)};return c}(b("mixin")(b("cr:909282")));e.exports=a}),null);
__d("ComposerMediaFileUploader",["fbt","ActorURI","ReactComposerMediaConfig","VideoUploader","VideoUploadFile","VideoUploadFlowNotifier","VideoUploadSurface","XComposerPhotoUploader","gkx","killswitch","requireCond","cr:1342782"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(){this.subscribers=[]}var b=a.prototype;b.subscribe=function(a){this.subscribers.push(a)};b.notify=function(a){this.subscribers.forEach(function(b){return b(a)})};b.unsubscribe=function(a){this.subscribers=this.subscribers.filter(function(b){return b!==a})};return a}();a=function(){a.createOrGetInstance=function(c,d,e,f){f===void 0&&(f=!1);f=(b("killswitch")("COMET_COMPOSER_MEDIA_UPLOADER_PER_ACTOR_SINGLETON")?a.$1:a.$2.get(c))||new a(c,d,e,f);if(f.creationSessionID!==e){var g;f.creationSessionID=(g=e)!=null?g:"";f.videoUploaderConfig=d;f.videoUploadFlowNotifier=b("VideoUploadFlowNotifier").createVideoUploadFlowNotifier({cancel_on_leave:!1,composer_entry_point_ref:(g=f.videoUploaderConfig.composer_entry_point_ref)!=null?g:"unknown",composer_session_id:(d=e)!=null?d:"",extended_flow_logging_enabled:!0,source:f.videoUploaderConfig.source});b("VideoUploadSurface").VideoUploadSurface.getOrCreate(b("VideoUploadSurface").VideoUploadSurfaceIDs.FEED).notifiers().register(f.videoUploadFlowNotifier,f.creationSessionID)}b("killswitch")("COMET_COMPOSER_MEDIA_UPLOADER_PER_ACTOR_SINGLETON")?a.$1=f:a.$2.set(c,f);return f};a.getInstance=function(c){return b("killswitch")("COMET_COMPOSER_MEDIA_UPLOADER_PER_ACTOR_SINGLETON")?a.$1:a.$2.get(c)};function a(a,c,d,e){this.startedObserver=new h();this.progressObserver=new h();this.successObserver=new h();this.errorObserver=new h();this.uploadStatuses=new Map();this.uploadStatusChangeObserver=new h();this.videoUploadsQueue=[];this.actorID=a;this.videoUploaderConfig=c;this.creationSessionID=(a=d)!=null?a:"";this.photoUploader=this.$3(this.actorID,e);this.videoUploader=this.$4(this.videoUploaderConfig,this.creationSessionID);this.videoUploadFlowNotifier=b("VideoUploadFlowNotifier").createVideoUploadFlowNotifier({cancel_on_leave:!1,composer_entry_point_ref:(c=this.videoUploaderConfig.composer_entry_point_ref)!=null?c:"unknown",composer_session_id:(d=this.creationSessionID)!=null?d:"",extended_flow_logging_enabled:!0,source:this.videoUploaderConfig.source});b("VideoUploadSurface").VideoUploadSurface.getOrCreate(b("VideoUploadSurface").VideoUploadSurfaceIDs.FEED).notifiers().register(this.videoUploadFlowNotifier,this.creationSessionID)}var c=a.prototype;c.$5=function(a,b){var c;c=(c=this.uploadStatuses.get(a))==null?void 0:c.bytesTotal;if(c==null)return;this.uploadStatuses.set(a,{bytesLoaded:(a=b)!=null?a:c,bytesTotal:c});this.uploadStatusChangeObserver.notify(this.uploadStatuses)};c.$3=function(a,c){var d=this;a=b("cr:1342782")!=null&&b("cr:1342782").isSupported()?b("cr:1342782").getSingleton():void 0;return new(b("XComposerPhotoUploader"))({concurrentLimit:b("ReactComposerMediaConfig").photo.concurrentLimit,onUploadFailure:function(a,b){var c;d.errorObserver.notify({entID:(c=b.response.payload)==null?void 0:c.photoID,error:b.response.getErrorSummary(),uploadID:a})},onUploadProgress:function(a,b){var c=Math.min(1,Math.max(0,b.event.loaded/b.event.total));d.progressObserver.notify({percentComplete:c,uploadID:a});d.$5(a,b.event.loaded)},onUploadStart:function(a,b){d.startedObserver.notify({uploadID:a})},onUploadSuccess:function(a,b){var c=b.response.payload;c==null?d.errorObserver.notify({entID:null,error:b.response.getErrorSummary(),uploadID:a}):(d.successObserver.notify({attachmentType:"PHOTO",entID:c.photoID,imageURL:c.imageSrc,uploadID:a}),d.$5(a))},resizer:a,retryLimit:b("ReactComposerMediaConfig").photo.retryLimit,uploadData:babelHelpers["extends"]({},b("ReactComposerMediaConfig").photo.uploadData,{source:8},c?{work_shared_draft_mode:"drafter_creating"}:{}),uploadEndpoint:b("ActorURI").create(b("ReactComposerMediaConfig").photo.uploadEndpoint,this.actorID)})};c.$4=function(a,c){a=babelHelpers["extends"]({},a,{isMultiMediaPost:!0,waterfall_id:c});return new(b("VideoUploader"))(a)};c.upload=function(a){var b=this;a.forEach(function(a){var c=a[0];a[1];a=c.uploadID;a!=null&&b.uploadStatuses.get(a)==null&&b.uploadStatuses.set(a,{bytesLoaded:0,bytesTotal:c.size})});this.uploadStatusChangeObserver.notify(this.uploadStatuses);this.$6(a.filter(function(a){a[0];a=a[1];return a==="PHOTO"}).map(function(a){var b=a[0];a[1];return b}));this.$7(a.filter(function(a){a[0];a=a[1];return a==="VIDEO"}).map(function(a){var b=a[0];a[1];return b}))};c.$6=function(a){a.length>0&&this.photoUploader.getAsyncUploadRequest(a).send()};c.$7=function(a){var c=this;a.length>0&&(this.videoUploadsQueue=this.videoUploadsQueue.concat(a));if(this.videoUploadsQueue.length>0&&!this.videoUploader.isSessionExist()){var d=this.videoUploadsQueue.shift();this.videoUploader=this.$4(this.videoUploaderConfig,this.creationSessionID);var e=this.videoUploader;e.subscribe("upload-started",function(a,b){a=d.uploadID;a!=null&&c.startedObserver.notify({uploadID:a})});e.subscribe("upload-progressed",function(a,b){a=Math.min(1,Math.max(0,(b.start_offset+b.sent_bytes)/b.file_size));var f=d.uploadID;f!=null&&(c.progressObserver.notify({entID:e.getVideoID(),percentComplete:a,uploadID:f}),c.$5(f,b.start_offset+b.sent_bytes))});e.subscribe("upload-finished",function(a,b){e.reset();a=d.uploadID;a!=null&&(c.successObserver.notify({attachmentType:"VIDEO",entID:b.video_id,uploadID:a}),c.$5(a));c.$7([])});e.subscribe("upload-failed",function(a,b){a=d.uploadID;if(a!=null){c.errorObserver.notify({entID:b.video_id,error:(b=b.error_summary)!=null?b:g._("Something went wrong and your video couldn't be uploaded. Please try again."),uploadID:a})}});b("gkx")("1454236")&&this.videoUploadFlowNotifier.registerVideoUpload(e,d.uploadID);e.upload(b("VideoUploadFile").fromFile(d))}};c.getCreationSessionID=function(){return this.creationSessionID};return a}();e.exports=a;a.$1=null;a.$2=new Map()}),null);
__d("CometFeedStoryOptimisticProgressBar.react",["fbt","Actor","ComposerMediaFileUploader","React","RunComet","cometComposerLogger","qex","stylex","useOnBeforeUnload"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React"),i=b("qex")._("1221850")===!0,j=95;function a(){var a=h.useState(0),c=a[0],d=a[1];a=b("Actor").useActor();a=a[0];var e=b("ComposerMediaFileUploader").getInstance(a),f=h.useRef(!1),k=function(a){a=Array.from(a.values()).reduce(function(a,b){a.bytesLoaded+=b.bytesLoaded;a.bytesTotal+=b.bytesTotal;return a},{bytesLoaded:0,bytesTotal:0});a.bytesLoaded===a.bytesTotal&&(f.current=!0);var b=a.bytesTotal!==0?a.bytesLoaded/a.bytesTotal*j:0;d(function(a){return Math.max(b,a)})};b("useOnBeforeUnload")(function(){if(!f.current)return{warnMessage:g._("Your post is still uploading. Do you want to leave without finishing the upload?")}});h.useEffect(function(){i&&e&&e.uploadStatusChangeObserver.subscribe(k);var a=function(){if(!f.current){var a;b("cometComposerLogger")({fields:{terminalReason:"shutdown"},type:"COMPOSER_POST_TERMINAL"},(a=e==null?void 0:e.getCreationSessionID())!=null?a:"")}},c=b("RunComet").onUnload(a);return function(){i&&e&&e.uploadStatusChangeObserver.unsubscribe(k);return c.remove()}},[e]);return i?h.jsx("div",{className:"h4z51re5 osnr6wyh rv4hoivh jktsbyx5 kgtf8isp ed3p1gfi mwvzfrdb kxcb68kb kgjeooe1 dwerhba3 cwj9ozl2",children:h.jsx("div",{className:"stjgntxs ni8dbmo4 qhh1luux mwvzfrdb kxcb68kb kgjeooe1 dwerhba3",children:h.jsx("div",{className:"b7h9ocf4 flx89l3n tn0ko95a qhh1luux mwvzfrdb kxcb68kb kgjeooe1 dwerhba3 nfl8ryma",style:{transform:"translateX(calc(-100% + "+c+"%))"}})})}):h.jsx("div",{className:"h4z51re5 osnr6wyh rv4hoivh jktsbyx5 kgtf8isp ed3p1gfi mwvzfrdb kxcb68kb kgjeooe1 dwerhba3 cwj9ozl2",children:h.jsx("div",{className:"dd2scrzq qhh1luux mwvzfrdb kxcb68kb kgjeooe1 dwerhba3 nfl8ryma nn0ay230 h9pa7xm5 j1l0snac l10wm3d9"})})}}),null);
__d("SpectrumWasm",["Promise","bx"],(function(a,b,c,d,e,f){var g=b("bx").getURL(b("bx")("1061903")),h=function(){var c=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(d){d=d||{};var f=typeof d!=="undefined"?d:{},i={},j;for(j in f)Object.prototype.hasOwnProperty.call(f,j)&&(i[j]=f[j]);f.arguments=[];f.thisProgram="./this.program";f.quit=function(a,b){throw b};f.preRun=[];f.postRun=[];var k=!0,l=!1,m="";(k||l)&&(l?m=self.location.href:document.currentScript&&(m=document.currentScript.src),c&&(m=c),m.indexOf("blob:")!==0?m=m.substr(0,m.lastIndexOf("/")+1):m="",f.read=function(a){var b=new XMLHttpRequest();b.open("GET",a,!1);b.send(null);return b.responseText},l&&(f.readBinary=function(a){var b=new XMLHttpRequest();b.open("GET",a,!1);b.responseType="arraybuffer";b.send(null);return new Uint8Array(b.response)}),f.readAsync=function(a,b,c){var d=new XMLHttpRequest();d.open("GET",a,!0);d.responseType="arraybuffer";d.onload=function(){if(d.status==200||d.status==0&&d.response){b(d.response);return}c()};d.onerror=c;d.send(null)},f.setWindowTitle=function(a){document.title=a});var n=f.print||(typeof console!=="undefined"?emptyFunction.bind(console):typeof print!=="undefined"?print:null),o=f.printErr||(typeof printErr!=="undefined"?printErr:typeof console!=="undefined"&&emptyFunction.bind(console)||n);for(j in i)Object.prototype.hasOwnProperty.call(i,j)&&(f[j]=i[j]);i=void 0;function aa(a){var b=B[C>>2];a=b+a+15&-16;a>xb()&&$();B[C>>2]=a;return b}function p(a){switch(a){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:if(a[a.length-1]==="*")return 4;else if(a[0]==="i"){var b=parseInt(a.substr(1));t(b%8===0,"getNativeTypeSize invalid bits "+b+", type "+a);return b/8}else return 0}}var ba={"f64-rem":function(a,b){return a%b},"debugger":function(){debugger}};new Array(0);var ca=0,q=function(a){ca=a};m=function(){return ca};typeof WebAssembly!=="object"&&o("no native wasm support detected");function p(a,b,c,d){c=c||"i8";c.charAt(c.length-1)==="*"&&(c="i32");switch(c){case"i1":z[a>>0]=b;break;case"i8":z[a>>0]=b;break;case"i16":ra[a>>1]=b;break;case"i32":B[a>>2]=b;break;case"i64":I=[b>>>0,(p=b,+Ia(p)>=1?p>0?(La(+Ka(p/4294967296),4294967295)|0)>>>0:~~+Ja((p-+(~~p>>>0))/4294967296)>>>0:0)],B[a>>2]=I[0],B[a+4>>2]=I[1];break;case"float":sa[a>>2]=b;break;case"double":ta[a>>3]=b;break;default:$("invalid type for setValue: "+c)}}var r,s=!1;function t(a,b){a||$("Assertion failed: "+b)}function da(a){var b=f["_"+a];t(b,"Cannot call unknown function "+a+", make sure it is exported");return b}function ea(a,b,c,d,e){var f={string:function(a){var b=0;if(a!==null&&a!==void 0&&a!==0){var c=(a.length<<2)+1;b=yc(c);ia(a,b,c)}return b},array:function(a){var b=yc(a.length);ka(a,b);return b}};function e(a){if(b==="string")return v(a);return b==="boolean"?Boolean(a):a}a=da(a);var g=[],h=0;if(d)for(var i=0;i<d.length;i++){var j=f[c[i]];j?(h===0&&(h=Z()),g[i]=j(d[i])):g[i]=d[i]}j=a.apply(null,g);j=e(j);h!==0&&Y(h);return j}function fa(a,b,c,d){c=c||[];var e=c.every(function(a){return a==="number"}),f=b!=="string";return f&&e&&!d?da(a):function(){return ea(a,b,c,arguments,d)}}j=3;function ga(a){return!Aa?aa(a):xc(a)}var ha=typeof TextDecoder!=="undefined"?new TextDecoder("utf8"):void 0;function u(a,b,c){c=b+c;var d=b;while(a[d]&&!(d>=c))++d;if(d-b>16&&a.subarray&&ha)return ha.decode(a.subarray(b,d));else{c="";while(b<d){var e=a[b++];if(!(e&128)){c+=String.fromCharCode(e);continue}var f=a[b++]&63;if((e&224)==192){c+=String.fromCharCode((e&31)<<6|f);continue}var g=a[b++]&63;(e&240)==224?e=(e&15)<<12|f<<6|g:e=(e&7)<<18|f<<12|g<<6|a[b++]&63;if(e<65536)c+=String.fromCharCode(e);else{f=e-65536;c+=String.fromCharCode(55296|f>>10,56320|f&1023)}}}return c}function v(a,b){return a?u(A,a,b):""}function w(a,b,c,d){if(!(d>0))return 0;var e=c;d=c+d-1;for(var f=0;f<a.length;++f){var g=a.charCodeAt(f);if(g>=55296&&g<=57343){var h=a.charCodeAt(++f);g=65536+((g&1023)<<10)|h&1023}if(g<=127){if(c>=d)break;b[c++]=g}else if(g<=2047){if(c+1>=d)break;b[c++]=192|g>>6;b[c++]=128|g&63}else if(g<=65535){if(c+2>=d)break;b[c++]=224|g>>12;b[c++]=128|g>>6&63;b[c++]=128|g&63}else{if(c+3>=d)break;b[c++]=240|g>>18;b[c++]=128|g>>12&63;b[c++]=128|g>>6&63;b[c++]=128|g&63}}b[c]=0;return c-e}function ia(a,b,c){return w(a,A,b,c)}function x(a){var b=0;for(var c=0;c<a.length;++c){var d=a.charCodeAt(c);d>=55296&&d<=57343&&(d=65536+((d&1023)<<10)|a.charCodeAt(++c)&1023);d<=127?++b:d<=2047?b+=2:d<=65535?b+=3:b+=4}return b}typeof TextDecoder!=="undefined"?new TextDecoder("utf-16le"):void 0;function ja(a){var b=x(a)+1,c=xc(b);c&&w(a,z,c,b);return c}function ka(b,a){z.set(b,a)}function la(b,a,c){for(var d=0;d<b.length;++d)z[a++>>0]=b.charCodeAt(d);c||(z[a>>0]=0)}function ma(a){return a}function na(a){var b=/__Z[\w\d_]+/g;return a.replace(b,function(a){var b=ma(a);return a===b?a:b+" ["+a+"]"})}function oa(){var a=new Error();if(!a.stack){try{throw new Error(0)}catch(b){a=b}if(!a.stack)return"(no stack trace available)"}return a.stack.toString()}function pa(){var a=oa();f.extraStackTrace&&(a+="\n"+f.extraStackTrace());return na(a)}i=65536;function qa(a,b){a%b>0&&(a+=b-a%b);return a}var y,z,A,ra,B,sa,ta;function ua(){f.HEAP8=z=new Int8Array(y),f.HEAP16=ra=new Int16Array(y),f.HEAP32=B=new Int32Array(y),f.HEAPU8=A=new Uint8Array(y),f.HEAPU16=new Uint16Array(y),f.HEAPU32=new Uint32Array(y),f.HEAPF32=sa=new Float32Array(y),f.HEAPF64=ta=new Float64Array(y)}j=5385296;var C=142384,D=5242880,E=f.TOTAL_MEMORY||16777216;E<D&&o("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+E+"! (TOTAL_STACK="+D+")");f.wasmMemory?r=f.wasmMemory:r=new WebAssembly.Memory({initial:E/i});r&&(y=r.buffer);E=y.byteLength;ua();B[C>>2]=j;function va(a){while(a.length>0){var b=a.shift();if(typeof b=="function"){b();continue}var c=b.func;typeof c==="number"?b.arg===void 0?f.dynCall_v(c):f.dynCall_vi(c,b.arg):c(b.arg===void 0?null:b.arg)}}var wa=[],xa=[],ya=[],za=[],Aa=!1;function Ba(){if(f.preRun){typeof f.preRun=="function"&&(f.preRun=[f.preRun]);while(f.preRun.length)Ga(f.preRun.shift())}va(wa)}function Ca(){Aa=!0,!f.noFSInit&&!T.init.initialized&&T.init(),P.init(),va(xa)}function Da(){T.ignorePermissions=!1,va(ya)}function Ea(){}function Fa(){if(f.postRun){typeof f.postRun=="function"&&(f.postRun=[f.postRun]);while(f.postRun.length)Ha(f.postRun.shift())}va(za)}function Ga(a){wa.unshift(a)}function Ha(a){za.unshift(a)}var Ia=Math.abs,Ja=Math.ceil,Ka=Math.floor,La=Math.min,F=0,Ma=null,G=null;function Na(a){return a}function Oa(a){F++,f.monitorRunDependencies&&f.monitorRunDependencies(F)}function Pa(a){F--;f.monitorRunDependencies&&f.monitorRunDependencies(F);if(F==0){Ma!==null&&(clearInterval(Ma),Ma=null);if(G){a=G;G=null;a()}}}f.preloadedImages={};f.preloadedAudios={};var Qa="data:application/octet-stream;base64,";function Ra(a){return String.prototype.startsWith?a.startsWith(Qa):a.indexOf(Qa)===0}var H=g;function Sa(){try{if(f.wasmBinary)return new Uint8Array(f.wasmBinary);if(f.readBinary)return f.readBinary(H);else throw"both async and sync fetching of the wasm failed"}catch(a){$(a)}}function Ta(){return!f.wasmBinary&&(k||l)&&typeof fetch==="function"?fetch(H,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+H+"'";return a.arrayBuffer()})["catch"](function(){return Sa()}):new(b("Promise"))(function(a,b){a(Sa())})}function Ua(a){var b={env:a,global:{NaN:NaN,Infinity:Infinity},"global.Math":Math,asm2wasm:ba};function c(b,a){a=b.exports;f.asm=a;Pa("wasm-instantiate")}Oa("wasm-instantiate");function d(a){c(a.instance)}function g(a){return Ta().then(function(a){return WebAssembly.instantiate(a,b)}).then(a,function(a){o("failed to asynchronously prepare wasm: "+a),$(a)})}function h(){if(!f.wasmBinary&&typeof WebAssembly.instantiateStreaming==="function"&&!Ra(H)&&typeof fetch==="function")fetch(H,{credentials:"same-origin"}).then(function(a){return WebAssembly.instantiateStreaming(a,b).then(d,function(a){o("wasm streaming compile failed: "+a),o("falling back to ArrayBuffer instantiation"),g(d)})});else return g(d)}if(f.instantiateWasm)try{a=f.instantiateWasm(b,c);return a}catch(a){o("Module.instantiateWasm callback failed with error: "+a);return!1}h();return{}}f.asm=function(b,c,d){c.memory=r;c.table=new WebAssembly.Table({initial:2194,maximum:2194,element:"anyfunc"});c.__memory_base=1024;c.__table_base=0;b=Ua(c);return b};var I;xa.push({func:function(){vc()}});var J={};function Va(b){var c=64,d=1024,e;!Va.called?(Va.called=!0,J.USER=J.LOGNAME="web_user",J.PATH="/",J.PWD="/",J.HOME="/home/web_user",J.LANG="C.UTF-8",J.LANG=(typeof navigator==="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",J._=f.thisProgram,e=ga(d),c=ga(c*4),B[c>>2]=e,B[b>>2]=c):(c=B[b>>2],e=B[c>>2]);b=[];var g=0;for(var a in J)if(typeof J[a]==="string"){var h=a+"="+J[a];b.push(h);g+=h.length}if(g>d)throw new Error("Environment size exceeded TOTAL_ENV_SIZE!");g=4;for(var d=0;d<b.length;d++){var h=b[d];la(h,e);B[c+d*g>>2]=e;e+=h.length+1}B[c+b.length*g>>2]=0}function Wa(a){return xc(a)}var K={},Xa=[];function Ya(a){if(!a)return;a=K[a];a.refcount++}function Za(b){if(!b||K[b])return b;for(var a in K){var c=+a,d=K[c].adjusted,e=d.length;for(var f=0;f<e;f++)if(d[f]===b)return c}return b}function $a(a){var b=K[a];b&&!b.caught&&(b.caught=!0,W.uncaught_exception--);b&&(b.rethrown=!1);Xa.push(a);Ya(Za(a));return a}var L=0;function ab(a){try{return wc(a)}catch(a){}}function bb(a){if(!a)return;var b=K[a];b.refcount--;b.refcount===0&&!b.rethrown&&(b.destructor&&f.dynCall_vi(b.destructor,a),delete K[a],ab(a))}function cb(){X(0);var a=Xa.pop();a&&(bb(Za(a)),L=0)}function db(a){L||(L=a);throw a}function eb(){var b=L;if(!b)return(q(0),0)|0;var c=K[b],d=c.type;if(!d)return(q(0),b)|0;var e=Array.prototype.slice.call(arguments);uc(d);var a=142368;B[a>>2]=b;b=a;for(var f=0;f<e.length;f++)if(e[f]&&tc(e[f],d,b)){b=B[b>>2];c.adjusted.push(b);return(q(e[f]),b)|0}b=B[b>>2];return(q(d),b)|0}f.___cxa_find_matching_catch=eb;function fb(a,b){return eb(a,b)}function gb(a,b,c){return eb(a,b,c)}function hb(){s=!0;throw"Pure virtual function called!"}function ib(){var a=Xa.pop();a=Za(a);K[a].rethrown||(Xa.push(a),K[a].rethrown=!0);L=a;throw a}function jb(a,b,c){K[a]={ptr:a,adjusted:[a],type:b,destructor:c,refcount:0,caught:!1,rethrown:!1};L=a;!("uncaught_exception"in W)?W.uncaught_exception=1:W.uncaught_exception++;throw a}function kb(){return!!W.uncaught_exception}function lb(){}function M(a){f.___errno_location&&(B[f.___errno_location()>>2]=a);return a}function mb(a,b){M(1);return-1}var N={splitPath:function(a){var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return b.exec(a).slice(1)},normalizeArray:function(a,b){var c=0;for(var d=a.length-1;d>=0;d--){var e=a[d];e==="."?a.splice(d,1):e===".."?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c;c--)a.unshift("..");return a},normalize:function(a){var b=a.charAt(0)==="/",c=a.substr(-1)==="/";a=N.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/");!a&&!b&&(a=".");a&&c&&(a+="/");return(b?"/":"")+a},dirname:function(a){a=N.splitPath(a);var b=a[0];a=a[1];if(!b&&!a)return".";a&&(a=a.substr(0,a.length-1));return b+a},basename:function(a){if(a==="/")return"/";var b=a.lastIndexOf("/");return b===-1?a:a.substr(b+1)},extname:function(a){return N.splitPath(a)[3]},join:function(){var a=Array.prototype.slice.call(arguments,0);return N.normalize(a.join("/"))},join2:function(a,b){return N.normalize(a+"/"+b)}},O={resolve:function(){var a="",b=!1;for(var c=arguments.length-1;c>=-1&&!b;c--){var d=c>=0?arguments[c]:T.cwd();if(typeof d!=="string")throw new TypeError("Arguments to path.resolve must be strings");else if(!d)return"";a=d+"/"+a;b=d.charAt(0)==="/"}a=N.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/");return(b?"/":"")+a||"."},relative:function(a,b){a=O.resolve(a).substr(1);b=O.resolve(b).substr(1);function c(a){var b=0;for(;b<a.length;b++)if(a[b]!=="")break;var c=a.length-1;for(;c>=0;c--)if(a[c]!=="")break;return b>c?[]:a.slice(b,c-b+1)}a=c(a.split("/"));c=c(b.split("/"));b=Math.min(a.length,c.length);var d=b;for(var e=0;e<b;e++)if(a[e]!==c[e]){d=e;break}b=[];for(var e=d;e<a.length;e++)b.push("..");b=b.concat(c.slice(d));return b.join("/")}},P={ttys:[],init:function(){},shutdown:function(){},register:function(a,b){P.ttys[a]={input:[],output:[],ops:b},T.registerDevice(a,P.stream_ops)},stream_ops:{open:function(a){var b=P.ttys[a.node.rdev];if(!b)throw new T.ErrnoError(19);a.tty=b;a.seekable=!1},close:function(a){a.tty.ops.flush(a.tty)},flush:function(a){a.tty.ops.flush(a.tty)},read:function(b,a,c,d,e){if(!b.tty||!b.tty.ops.get_char)throw new T.ErrnoError(6);e=0;for(var f=0;f<d;f++){var g;try{g=b.tty.ops.get_char(b.tty)}catch(a){throw new T.ErrnoError(5)}if(g===void 0&&e===0)throw new T.ErrnoError(11);if(g===null||g===void 0)break;e++;a[c+f]=g}e&&(b.node.timestamp=Date.now());return e},write:function(b,a,c,d,e){if(!b.tty||!b.tty.ops.put_char)throw new T.ErrnoError(6);try{for(var e=0;e<d;e++)b.tty.ops.put_char(b.tty,a[c+e])}catch(a){throw new T.ErrnoError(5)}d&&(b.node.timestamp=Date.now());return e}},default_tty_ops:{get_char:function(a){if(!a.input.length){var b=null;typeof window!="undefined"&&typeof window.prompt=="function"?(b=window.prompt("Input: "),b!==null&&(b+="\n")):typeof readline=="function"&&(b=readline(),b!==null&&(b+="\n"));if(!b)return null;a.input=Rb(b,!0)}return a.input.shift()},put_char:function(a,b){b===null||b===10?(n(u(a.output,0)),a.output=[]):b!=0&&a.output.push(b)},flush:function(a){a.output&&a.output.length>0&&(n(u(a.output,0)),a.output=[])}},default_tty1_ops:{put_char:function(a,b){b===null||b===10?(o(u(a.output,0)),a.output=[]):b!=0&&a.output.push(b)},flush:function(a){a.output&&a.output.length>0&&(o(u(a.output,0)),a.output=[])}}},Q={ops_table:null,mount:function(a){return Q.createNode(null,"/",16384|511,0)},createNode:function(a,b,c,d){if(T.isBlkdev(c)||T.isFIFO(c))throw new T.ErrnoError(1);Q.ops_table||(Q.ops_table={dir:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr,lookup:Q.node_ops.lookup,mknod:Q.node_ops.mknod,rename:Q.node_ops.rename,unlink:Q.node_ops.unlink,rmdir:Q.node_ops.rmdir,readdir:Q.node_ops.readdir,symlink:Q.node_ops.symlink},stream:{llseek:Q.stream_ops.llseek}},file:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr},stream:{llseek:Q.stream_ops.llseek,read:Q.stream_ops.read,write:Q.stream_ops.write,allocate:Q.stream_ops.allocate,mmap:Q.stream_ops.mmap,msync:Q.stream_ops.msync}},link:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr,readlink:Q.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr},stream:T.chrdev_stream_ops}});c=T.createNode(a,b,c,d);T.isDir(c.mode)?(c.node_ops=Q.ops_table.dir.node,c.stream_ops=Q.ops_table.dir.stream,c.contents={}):T.isFile(c.mode)?(c.node_ops=Q.ops_table.file.node,c.stream_ops=Q.ops_table.file.stream,c.usedBytes=0,c.contents=null):T.isLink(c.mode)?(c.node_ops=Q.ops_table.link.node,c.stream_ops=Q.ops_table.link.stream):T.isChrdev(c.mode)&&(c.node_ops=Q.ops_table.chrdev.node,c.stream_ops=Q.ops_table.chrdev.stream);c.timestamp=Date.now();a&&(a.contents[b]=c);return c},getFileDataAsRegularArray:function(a){if(a.contents&&a.contents.subarray){var b=[];for(var c=0;c<a.usedBytes;++c)b.push(a.contents[c]);return b}return a.contents},getFileDataAsTypedArray:function(a){if(!a.contents)return new Uint8Array();return a.contents.subarray?a.contents.subarray(0,a.usedBytes):new Uint8Array(a.contents)},expandFileStorage:function(a,b){var c=a.contents?a.contents.length:0;if(c>=b)return;var d=1024*1024;b=Math.max(b,c*(c<d?2:1.125)|0);c!=0&&(b=Math.max(b,256));d=a.contents;a.contents=new Uint8Array(b);a.usedBytes>0&&a.contents.set(d.subarray(0,a.usedBytes),0);return},resizeFileStorage:function(a,b){if(a.usedBytes==b)return;if(b==0){a.contents=null;a.usedBytes=0;return}if(!a.contents||a.contents.subarray){var c=a.contents;a.contents=new Uint8Array(new ArrayBuffer(b));c&&a.contents.set(c.subarray(0,Math.min(b,a.usedBytes)));a.usedBytes=b;return}a.contents||(a.contents=[]);if(a.contents.length>b)a.contents.length=b;else while(a.contents.length<b)a.contents.push(0);a.usedBytes=b},node_ops:{getattr:function(a){var b={};b.dev=T.isChrdev(a.mode)?a.id:1;b.ino=a.id;b.mode=a.mode;b.nlink=1;b.uid=0;b.gid=0;b.rdev=a.rdev;T.isDir(a.mode)?b.size=4096:T.isFile(a.mode)?b.size=a.usedBytes:T.isLink(a.mode)?b.size=a.link.length:b.size=0;b.atime=new Date(a.timestamp);b.mtime=new Date(a.timestamp);b.ctime=new Date(a.timestamp);b.blksize=4096;b.blocks=Math.ceil(b.size/b.blksize);return b},setattr:function(a,b){b.mode!==void 0&&(a.mode=b.mode),b.timestamp!==void 0&&(a.timestamp=b.timestamp),b.size!==void 0&&Q.resizeFileStorage(a,b.size)},lookup:function(a,b){throw T.genericErrors[2]},mknod:function(a,b,c,d){return Q.createNode(a,b,c,d)},rename:function(a,b,c){if(T.isDir(a.mode)){var d;try{d=T.lookupNode(b,c)}catch(a){}if(d)for(var e in d.contents)throw new T.ErrnoError(39)}delete a.parent.contents[a.name];a.name=c;b.contents[c]=a;a.parent=b},unlink:function(a,b){delete a.contents[b]},rmdir:function(a,b){var c=T.lookupNode(a,b);for(var d in c.contents)throw new T.ErrnoError(39);delete a.contents[b]},readdir:function(b){var c=[".",".."];for(var a in b.contents){if(!Object.prototype.hasOwnProperty.call(b.contents,a))continue;c.push(a)}return c},symlink:function(a,b,c){a=Q.createNode(a,b,511|40960,0);a.link=c;return a},readlink:function(a){if(!T.isLink(a.mode))throw new T.ErrnoError(22);return a.link}},stream_ops:{read:function(b,a,c,d,e){var f=b.node.contents;if(e>=b.node.usedBytes)return 0;b=Math.min(b.node.usedBytes-e,d);if(b>8&&f.subarray)a.set(f.subarray(e,e+b),c);else for(var d=0;d<b;d++)a[c+d]=f[e+d];return b},write:function(b,a,c,d,e,f){f=!1;if(!d)return 0;b=b.node;b.timestamp=Date.now();if(a.subarray&&(!b.contents||b.contents.subarray))if(f){b.contents=a.subarray(c,c+d);b.usedBytes=d;return d}else if(b.usedBytes===0&&e===0){b.contents=new Uint8Array(a.subarray(c,c+d));b.usedBytes=d;return d}else if(e+d<=b.usedBytes){b.contents.set(a.subarray(c,c+d),e);return d}Q.expandFileStorage(b,e+d);if(b.contents.subarray&&a.subarray)b.contents.set(a.subarray(c,c+d),e);else for(var f=0;f<d;f++)b.contents[e+f]=a[c+f];b.usedBytes=Math.max(b.usedBytes,e+d);return d},llseek:function(a,b,c){b=b;c===1?b+=a.position:c===2&&(T.isFile(a.node.mode)&&(b+=a.node.usedBytes));if(b<0)throw new T.ErrnoError(22);return b},allocate:function(a,b,c){Q.expandFileStorage(a.node,b+c),a.node.usedBytes=Math.max(a.node.usedBytes,b+c)},mmap:function(b,a,c,d,e,f,g){if(!T.isFile(b.node.mode))throw new T.ErrnoError(19);c=b.node.contents;if(!(g&2)&&(c.buffer===a||c.buffer===a.buffer))f=!1,g=c.byteOffset;else{(e>0||e+d<b.node.usedBytes)&&(c.subarray?c=c.subarray(e,e+d):c=Array.prototype.slice.call(c,e,e+d));f=!0;g=xc(d);if(!g)throw new T.ErrnoError(12);a.set(c,g)}return{ptr:g,allocated:f}},msync:function(b,a,c,d,e){if(!T.isFile(b.node.mode))throw new T.ErrnoError(19);if(e&2)return 0;Q.stream_ops.write(b,a,0,d,c,!1);return 0}}},R={dbs:{},indexedDB:function(a){function b(){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(){if(typeof indexedDB!=="undefined")return indexedDB;var a=null;typeof window==="object"&&(a=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB);t(a,"IDBFS used, but indexedDB not supported");return a}),DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(a){return Q.mount.apply(null,arguments)},syncfs:function(a,b,c){R.getLocalSet(a,function(d,e){if(d)return c(d);R.getRemoteSet(a,function(a,d){if(a)return c(a);a=b?d:e;d=b?e:d;R.reconcile(a,d,c)})})},getDB:function(a,b){var c=R.dbs[a];if(c)return b(null,c);var d;try{d=R.indexedDB().open(a,R.DB_VERSION)}catch(a){return b(a)}if(!d)return b("Unable to connect to IndexedDB");d.onupgradeneeded=function(b){var a=b.target.result;b=b.target.transaction;a.objectStoreNames.contains(R.DB_STORE_NAME)?b=b.objectStore(R.DB_STORE_NAME):b=a.createObjectStore(R.DB_STORE_NAME);b.indexNames.contains("timestamp")||b.createIndex("timestamp","timestamp",{unique:!1})};d.onsuccess=function(){c=d.result,R.dbs[a]=c,b(null,c)};d.onerror=function(a){b(this.error),a.preventDefault()}},getLocalSet:function(a,b){var c={};function d(a){return a!=="."&&a!==".."}function e(a){return function(b){return N.join2(a,b)}}a=T.readdir(a.mountpoint).filter(d).map(e(a.mountpoint));while(a.length){var f=a.pop(),g;try{g=T.stat(f)}catch(a){return b(a)}T.isDir(g.mode)&&a.push.apply(a,T.readdir(f).filter(d).map(e(f)));c[f]={timestamp:g.mtime}}return b(null,{type:"local",entries:c})},getRemoteSet:function(a,b){var c={};R.getDB(a.mountpoint,function(a,d){if(a)return b(a);try{a=d.transaction([R.DB_STORE_NAME],"readonly");a.onerror=function(a){b(this.error),a.preventDefault()};a=a.objectStore(R.DB_STORE_NAME);a=a.index("timestamp");a.openKeyCursor().onsuccess=function(a){a=a.target.result;if(!a)return b(null,{type:"remote",db:d,entries:c});c[a.primaryKey]={timestamp:a.key};a["continue"]()}}catch(a){return b(a)}})},loadLocalEntry:function(a,b){try{var c=T.lookupPath(a);c=c.node;a=T.stat(a)}catch(a){return b(a)}if(T.isDir(a.mode))return b(null,{timestamp:a.mtime,mode:a.mode});else if(T.isFile(a.mode)){c.contents=Q.getFileDataAsTypedArray(c);return b(null,{timestamp:a.mtime,mode:a.mode,contents:c.contents})}else return b(new Error("node type not supported"))},storeLocalEntry:function(a,b,c){try{if(T.isDir(b.mode))T.mkdir(a,b.mode);else if(T.isFile(b.mode))T.writeFile(a,b.contents,{canOwn:!0});else return c(new Error("node type not supported"));T.chmod(a,b.mode);T.utime(a,b.timestamp,b.timestamp)}catch(a){return c(a)}c(null)},removeLocalEntry:function(a,b){try{T.lookupPath(a);var c=T.stat(a);T.isDir(c.mode)?T.rmdir(a):T.isFile(c.mode)&&T.unlink(a)}catch(a){return b(a)}b(null)},loadRemoteEntry:function(a,b,c){a=a.get(b);a.onsuccess=function(a){c(null,a.target.result)};a.onerror=function(a){c(this.error),a.preventDefault()}},storeRemoteEntry:function(a,b,c,d){a=a.put(c,b);a.onsuccess=function(){d(null)};a.onerror=function(a){d(this.error),a.preventDefault()}},removeRemoteEntry:function(a,b,c){a=a["delete"](b);a.onsuccess=function(){c(null)};a.onerror=function(a){c(this.error),a.preventDefault()}},reconcile:function(a,b,c){var d=0,e=[];Object.keys(a.entries).forEach(function(c){var f=a.entries[c],g=b.entries[c];(!g||f.timestamp>g.timestamp)&&(e.push(c),d++)});var f=[];Object.keys(b.entries).forEach(function(c){b.entries[c];var e=a.entries[c];e||(f.push(c),d++)});if(!d)return c(null);var g=!1,h=a.type==="remote"?a.db:b.db;h=h.transaction([R.DB_STORE_NAME],"readwrite");var i=h.objectStore(R.DB_STORE_NAME);function k(a){if(a&&!g){g=!0;return c(a)}}h.onerror=function(a){k(this.error),a.preventDefault()};h.oncomplete=function(a){g||c(null)};e.sort().forEach(function(a){b.type==="local"?R.loadRemoteEntry(i,a,function(b,c){if(b)return k(b);R.storeLocalEntry(a,c,k)}):R.loadLocalEntry(a,function(b,c){if(b)return k(b);R.storeRemoteEntry(i,a,c,k)})});f.sort().reverse().forEach(function(a){b.type==="local"?R.removeLocalEntry(a,k):R.removeRemoteEntry(i,a,k)})}},S={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(a){t(l);S.reader||(S.reader=new FileReaderSync());var b=S.createNode(null,"/",S.DIR_MODE,0),c={};function d(a){a=a.split("/");var d=b;for(var e=0;e<a.length-1;e++){var f=a.slice(0,e+1).join("/");c[f]||(c[f]=S.createNode(d,a[e],S.DIR_MODE,0));d=c[f]}return d}function e(a){a=a.split("/");return a[a.length-1]}Array.prototype.forEach.call(a.opts.files||[],function(a){S.createNode(d(a.name),e(a.name),S.FILE_MODE,0,a,a.lastModifiedDate)});(a.opts.blobs||[]).forEach(function(a){S.createNode(d(a.name),e(a.name),S.FILE_MODE,0,a.data)});(a.opts.packages||[]).forEach(function(a){a.metadata.files.forEach(function(b){var c=b.filename.substr(1);S.createNode(d(c),e(c),S.FILE_MODE,0,a.blob.slice(b.start,b.end))})});return b},createNode:function(a,b,c,d,e,f){d=T.createNode(a,b,c);d.mode=c;d.node_ops=S.node_ops;d.stream_ops=S.stream_ops;d.timestamp=(f||new Date()).getTime();t(S.FILE_MODE!==S.DIR_MODE);c===S.FILE_MODE?(d.size=e.size,d.contents=e):(d.size=4096,d.contents={});a&&(a.contents[b]=d);return d},node_ops:{getattr:function(a){return{dev:1,ino:void 0,mode:a.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:a.size,atime:new Date(a.timestamp),mtime:new Date(a.timestamp),ctime:new Date(a.timestamp),blksize:4096,blocks:Math.ceil(a.size/4096)}},setattr:function(a,b){b.mode!==void 0&&(a.mode=b.mode),b.timestamp!==void 0&&(a.timestamp=b.timestamp)},lookup:function(a,b){throw new T.ErrnoError(2)},mknod:function(a,b,c,d){throw new T.ErrnoError(1)},rename:function(a,b,c){throw new T.ErrnoError(1)},unlink:function(a,b){throw new T.ErrnoError(1)},rmdir:function(a,b){throw new T.ErrnoError(1)},readdir:function(b){var c=[".",".."];for(var a in b.contents){if(!Object.prototype.hasOwnProperty.call(b.contents,a))continue;c.push(a)}return c},symlink:function(a,b,c){throw new T.ErrnoError(1)},readlink:function(a){throw new T.ErrnoError(1)}},stream_ops:{read:function(b,a,c,d,e){if(e>=b.node.size)return 0;b=b.node.contents.slice(e,e+d);e=S.reader.readAsArrayBuffer(b);a.set(new Uint8Array(e),c);return b.size},write:function(b,a,c,d,e){throw new T.ErrnoError(5)},llseek:function(a,b,c){b=b;c===1?b+=a.position:c===2&&(T.isFile(a.node.mode)&&(b+=a.node.size));if(b<0)throw new T.ErrnoError(22);return b}}},T={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(a){if(!(a instanceof T.ErrnoError))throw a+" : "+pa();return M(a.errno)},lookupPath:function(b,c){b=O.resolve(T.cwd(),b);c=c||{};if(!b)return{path:"",node:null};var d={follow_mount:!0,recurse_count:0};for(var a in d)c[a]===void 0&&(c[a]=d[a]);if(c.recurse_count>8)throw new T.ErrnoError(40);d=N.normalizeArray(b.split("/").filter(function(a){return!!a}),!1);b=T.root;var e="/";for(var f=0;f<d.length;f++){var g=f===d.length-1;if(g&&c.parent)break;b=T.lookupNode(b,d[f]);e=N.join2(e,d[f]);T.isMountpoint(b)&&((!g||g&&c.follow_mount)&&(b=b.mounted.root));if(!g||c.follow){g=0;while(T.isLink(b.mode)){var h=T.readlink(e);e=O.resolve(N.dirname(e),h);h=T.lookupPath(e,{recurse_count:c.recurse_count});b=h.node;if(g++>40)throw new T.ErrnoError(40)}}}return{path:e,node:b}},getPath:function(a){var b;while(!0){if(T.isRoot(a)){var c=a.mount.mountpoint;return!b?c:c[c.length-1]!=="/"?c+"/"+b:c+b}b=b?a.name+"/"+b:a.name;a=a.parent}},hashName:function(a,b){var c=0;for(var d=0;d<b.length;d++)c=(c<<5)-c+b.charCodeAt(d)|0;return(a+c>>>0)%T.nameTable.length},hashAddNode:function(a){var b=T.hashName(a.parent.id,a.name);a.name_next=T.nameTable[b];T.nameTable[b]=a},hashRemoveNode:function(a){var b=T.hashName(a.parent.id,a.name);if(T.nameTable[b]===a)T.nameTable[b]=a.name_next;else{b=T.nameTable[b];while(b){if(b.name_next===a){b.name_next=a.name_next;break}b=b.name_next}}},lookupNode:function(b,c){var a=T.mayLookup(b);if(a)throw new T.ErrnoError(a,b);a=T.hashName(b.id,c);for(var a=T.nameTable[a];a;a=a.name_next){var d=a.name;if(a.parent.id===b.id&&d===c)return a}return T.lookup(b,c)},createNode:function(a,b,c,d){if(!T.FSNode){T.FSNode=function(a,b,c,d){a||(a=this),this.parent=a,this.mount=a.mount,this.mounted=null,this.id=T.nextInode++,this.name=b,this.mode=c,this.node_ops={},this.stream_ops={},this.rdev=d};T.FSNode.prototype={};var e=292|73,f=146;Object.defineProperties(T.FSNode.prototype,{read:{get:function(){return(this.mode&e)===e},set:function(a){a?this.mode|=e:this.mode&=~e}},write:{get:function(){return(this.mode&f)===f},set:function(a){a?this.mode|=f:this.mode&=~f}},isFolder:{get:function(){return T.isDir(this.mode)}},isDevice:{get:function(){return T.isChrdev(this.mode)}}})}a=new T.FSNode(a,b,c,d);T.hashAddNode(a);return a},destroyNode:function(a){T.hashRemoveNode(a)},isRoot:function(a){return a===a.parent},isMountpoint:function(a){return!!a.mounted},isFile:function(a){return(a&61440)===32768},isDir:function(a){return(a&61440)===16384},isLink:function(a){return(a&61440)===40960},isChrdev:function(a){return(a&61440)===8192},isBlkdev:function(a){return(a&61440)===24576},isFIFO:function(a){return(a&61440)===4096},isSocket:function(a){return(a&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(a){var b=T.flagModes[a];if(typeof b==="undefined")throw new Error("Unknown file open mode: "+a);return b},flagsToPermissionString:function(a){var b=["r","w","rw"][a&3];a&512&&(b+="w");return b},nodePermissions:function(a,b){if(T.ignorePermissions)return 0;if(b.indexOf("r")!==-1&&!(a.mode&292))return 13;else if(b.indexOf("w")!==-1&&!(a.mode&146))return 13;else if(b.indexOf("x")!==-1&&!(a.mode&73))return 13;return 0},mayLookup:function(b){var a=T.nodePermissions(b,"x");if(a)return a;return!b.node_ops.lookup?13:0},mayCreate:function(a,b){try{T.lookupNode(a,b);return 17}catch(a){}return T.nodePermissions(a,"wx")},mayDelete:function(a,b,c){try{b=T.lookupNode(a,b)}catch(a){return a.errno}a=T.nodePermissions(a,"wx");if(a)return a;if(c){if(!T.isDir(b.mode))return 20;if(T.isRoot(b)||T.getPath(b)===T.cwd())return 16}else if(T.isDir(b.mode))return 21;return 0},mayOpen:function(a,b){if(!a)return 2;if(T.isLink(a.mode))return 40;else if(T.isDir(a.mode)&&(T.flagsToPermissionString(b)!=="r"||b&512))return 21;return T.nodePermissions(a,T.flagsToPermissionString(b))},MAX_OPEN_FDS:4096,nextfd:function(a,b){a=a||0;b=b||T.MAX_OPEN_FDS;for(var a=a;a<=b;a++)if(!T.streams[a])return a;throw new T.ErrnoError(24)},getStream:function(a){return T.streams[a]},createStream:function(a,b,c){T.FSStream||(T.FSStream=function(){},T.FSStream.prototype={},Object.defineProperties(T.FSStream.prototype,{object:{get:function(){return this.node},set:function(a){this.node=a}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}}));var d=new T.FSStream();for(var e in a)d[e]=a[e];a=d;d=T.nextfd(b,c);a.fd=d;T.streams[d]=a;return a},closeStream:function(a){T.streams[a]=null},chrdev_stream_ops:{open:function(a){var b=T.getDevice(a.node.rdev);a.stream_ops=b.stream_ops;a.stream_ops.open&&a.stream_ops.open(a)},llseek:function(){throw new T.ErrnoError(29)}},major:function(a){return a>>8},minor:function(a){return a&255},makedev:function(a,b){return a<<8|b},registerDevice:function(a,b){T.devices[a]={stream_ops:b}},getDevice:function(a){return T.devices[a]},getMounts:function(a){var b=[];a=[a];while(a.length){var c=a.pop();b.push(c);a.push.apply(a,c.mounts)}return b},syncfs:function(a,b){typeof a==="function"&&(b=a,a=!1);T.syncFSRequests++;T.syncFSRequests>1;var c=T.getMounts(T.root.mount),d=0;function e(a){T.syncFSRequests--;return b(a)}function f(a){if(a){if(!f.errored){f.errored=!0;return e(a)}return}++d>=c.length&&e(null)}c.forEach(function(b){if(!b.type.syncfs)return f(null);b.type.syncfs(b,a,f)})},mount:function(a,b,c){var d=c==="/",e=!c,f;if(d&&T.root)throw new T.ErrnoError(16);else if(!d&&!e){e=T.lookupPath(c,{follow_mount:!1});c=e.path;f=e.node;if(T.isMountpoint(f))throw new T.ErrnoError(16);if(!T.isDir(f.mode))throw new T.ErrnoError(20)}e={type:a,opts:b,mountpoint:c,mounts:[]};b=a.mount(e);b.mount=e;e.root=b;d?T.root=b:f&&(f.mounted=e,f.mount&&f.mount.mounts.push(e));return b},unmount:function(a){a=T.lookupPath(a,{follow_mount:!1});if(!T.isMountpoint(a.node))throw new T.ErrnoError(22);a=a.node;var b=a.mounted,c=T.getMounts(b);Object.keys(T.nameTable).forEach(function(a){a=T.nameTable[a];while(a){var b=a.name_next;c.indexOf(a.mount)!==-1&&T.destroyNode(a);a=b}});a.mounted=null;b=a.mount.mounts.indexOf(b);a.mount.mounts.splice(b,1)},lookup:function(a,b){return a.node_ops.lookup(a,b)},mknod:function(b,c,d){var e=T.lookupPath(b,{parent:!0});e=e.node;b=N.basename(b);if(!b||b==="."||b==="..")throw new T.ErrnoError(22);var a=T.mayCreate(e,b);if(a)throw new T.ErrnoError(a);if(!e.node_ops.mknod)throw new T.ErrnoError(1);return e.node_ops.mknod(e,b,c,d)},create:function(a,b){b=b!==void 0?b:438;b&=4095;b|=32768;return T.mknod(a,b,0)},mkdir:function(a,b){b=b!==void 0?b:511;b&=511|512;b|=16384;return T.mknod(a,b,0)},mkdirTree:function(a,b){a=a.split("/");var c="";for(var d=0;d<a.length;++d){if(!a[d])continue;c+="/"+a[d];try{T.mkdir(c,b)}catch(a){if(a.errno!=17)throw a}}},mkdev:function(a,b,c){typeof c==="undefined"&&(c=b,b=438);b|=8192;return T.mknod(a,b,c)},symlink:function(b,c){if(!O.resolve(b))throw new T.ErrnoError(2);var d=T.lookupPath(c,{parent:!0});d=d.node;if(!d)throw new T.ErrnoError(2);c=N.basename(c);var a=T.mayCreate(d,c);if(a)throw new T.ErrnoError(a);if(!d.node_ops.symlink)throw new T.ErrnoError(1);return d.node_ops.symlink(d,c,b)},rename:function(a,b){var c=N.dirname(a),d=N.dirname(b),e=N.basename(a),f=N.basename(b),g,h;try{g=T.lookupPath(a,{parent:!0}),h=g.node,g=T.lookupPath(b,{parent:!0}),g=g.node}catch(a){throw new T.ErrnoError(16)}if(!h||!g)throw new T.ErrnoError(2);if(h.mount!==g.mount)throw new T.ErrnoError(18);var i=T.lookupNode(h,e);d=O.relative(a,d);if(d.charAt(0)!==".")throw new T.ErrnoError(22);d=O.relative(b,c);if(d.charAt(0)!==".")throw new T.ErrnoError(39);try{c=T.lookupNode(g,f)}catch(a){}if(i===c)return;d=T.isDir(i.mode);e=T.mayDelete(h,e,d);if(e)throw new T.ErrnoError(e);e=c?T.mayDelete(g,f,d):T.mayCreate(g,f);if(e)throw new T.ErrnoError(e);if(!h.node_ops.rename)throw new T.ErrnoError(1);if(T.isMountpoint(i)||c&&T.isMountpoint(c))throw new T.ErrnoError(16);if(g!==h){e=T.nodePermissions(h,"w");if(e)throw new T.ErrnoError(e)}try{T.trackingDelegate.willMovePath&&T.trackingDelegate.willMovePath(a,b)}catch(a){}T.hashRemoveNode(i);try{h.node_ops.rename(i,g,f)}catch(a){throw a}finally{T.hashAddNode(i)}try{T.trackingDelegate.onMovePath&&T.trackingDelegate.onMovePath(a,b)}catch(a){}},rmdir:function(b){var c=T.lookupPath(b,{parent:!0});c=c.node;var d=N.basename(b),e=T.lookupNode(c,d),a=T.mayDelete(c,d,!0);if(a)throw new T.ErrnoError(a);if(!c.node_ops.rmdir)throw new T.ErrnoError(1);if(T.isMountpoint(e))throw new T.ErrnoError(16);try{T.trackingDelegate.willDeletePath&&T.trackingDelegate.willDeletePath(b)}catch(a){}c.node_ops.rmdir(c,d);T.destroyNode(e);try{T.trackingDelegate.onDeletePath&&T.trackingDelegate.onDeletePath(b)}catch(a){}},readdir:function(a){a=T.lookupPath(a,{follow:!0});a=a.node;if(!a.node_ops.readdir)throw new T.ErrnoError(20);return a.node_ops.readdir(a)},unlink:function(b){var c=T.lookupPath(b,{parent:!0});c=c.node;var d=N.basename(b),e=T.lookupNode(c,d),a=T.mayDelete(c,d,!1);if(a)throw new T.ErrnoError(a);if(!c.node_ops.unlink)throw new T.ErrnoError(1);if(T.isMountpoint(e))throw new T.ErrnoError(16);try{T.trackingDelegate.willDeletePath&&T.trackingDelegate.willDeletePath(b)}catch(a){}c.node_ops.unlink(c,d);T.destroyNode(e);try{T.trackingDelegate.onDeletePath&&T.trackingDelegate.onDeletePath(b)}catch(a){}},readlink:function(a){a=T.lookupPath(a);a=a.node;if(!a)throw new T.ErrnoError(2);if(!a.node_ops.readlink)throw new T.ErrnoError(22);return O.resolve(T.getPath(a.parent),a.node_ops.readlink(a))},stat:function(a,b){a=T.lookupPath(a,{follow:!b});b=a.node;if(!b)throw new T.ErrnoError(2);if(!b.node_ops.getattr)throw new T.ErrnoError(1);return b.node_ops.getattr(b)},lstat:function(a){return T.stat(a,!0)},chmod:function(a,b,c){if(typeof a==="string"){c=T.lookupPath(a,{follow:!c});c=c.node}else c=a;if(!c.node_ops.setattr)throw new T.ErrnoError(1);c.node_ops.setattr(c,{mode:b&4095|c.mode&-4096,timestamp:Date.now()})},lchmod:function(a,b){T.chmod(a,b,!0)},fchmod:function(a,b){a=T.getStream(a);if(!a)throw new T.ErrnoError(9);T.chmod(a.node,b)},chown:function(a,b,c,d){if(typeof a==="string"){b=T.lookupPath(a,{follow:!d});c=b.node}else c=a;if(!c.node_ops.setattr)throw new T.ErrnoError(1);c.node_ops.setattr(c,{timestamp:Date.now()})},lchown:function(a,b,c){T.chown(a,b,c,!0)},fchown:function(a,b,c){a=T.getStream(a);if(!a)throw new T.ErrnoError(9);T.chown(a.node,b,c)},truncate:function(a,b){if(b<0)throw new T.ErrnoError(22);if(typeof a==="string"){var c=T.lookupPath(a,{follow:!0});c=c.node}else c=a;if(!c.node_ops.setattr)throw new T.ErrnoError(1);if(T.isDir(c.mode))throw new T.ErrnoError(21);if(!T.isFile(c.mode))throw new T.ErrnoError(22);a=T.nodePermissions(c,"w");if(a)throw new T.ErrnoError(a);c.node_ops.setattr(c,{size:b,timestamp:Date.now()})},ftruncate:function(a,b){a=T.getStream(a);if(!a)throw new T.ErrnoError(9);if((a.flags&2097155)===0)throw new T.ErrnoError(22);T.truncate(a.node,b)},utime:function(a,b,c){a=T.lookupPath(a,{follow:!0});a=a.node;a.node_ops.setattr(a,{timestamp:Math.max(b,c)})},open:function(a,b,c,d,e){if(a==="")throw new T.ErrnoError(2);b=typeof b==="string"?T.modeStringToFlags(b):b;c=typeof c==="undefined"?438:c;b&64?c=c&4095|32768:c=0;var g;if(typeof a==="object")g=a;else{a=N.normalize(a);try{var h=T.lookupPath(a,{follow:!(b&131072)});g=h.node}catch(a){}}h=!1;if(b&64)if(g){if(b&128)throw new T.ErrnoError(17)}else g=T.mknod(a,c,0),h=!0;if(!g)throw new T.ErrnoError(2);T.isChrdev(g.mode)&&(b&=-513);if(b&65536&&!T.isDir(g.mode))throw new T.ErrnoError(20);if(!h){c=T.mayOpen(g,b);if(c)throw new T.ErrnoError(c)}b&512&&T.truncate(g,0);b&=~(128|512);h=T.createStream({node:g,path:T.getPath(g),flags:b,seekable:!0,position:0,stream_ops:g.stream_ops,ungotten:[],error:!1},d,e);h.stream_ops.open&&h.stream_ops.open(h);f.logReadFiles&&!(b&1)&&(T.readFiles||(T.readFiles={}),a in T.readFiles||(T.readFiles[a]=1));try{if(T.trackingDelegate.onOpenFile){c=0;(b&2097155)!==1&&(c|=T.tracking.openFlags.READ);(b&2097155)!==0&&(c|=T.tracking.openFlags.WRITE);T.trackingDelegate.onOpenFile(a,c)}}catch(a){}return h},close:function(a){if(T.isClosed(a))throw new T.ErrnoError(9);a.getdents&&(a.getdents=null);try{a.stream_ops.close&&a.stream_ops.close(a)}catch(a){throw a}finally{T.closeStream(a.fd)}a.fd=null},isClosed:function(a){return a.fd===null},llseek:function(a,b,c){if(T.isClosed(a))throw new T.ErrnoError(9);if(!a.seekable||!a.stream_ops.llseek)throw new T.ErrnoError(29);if(c!=0&&c!=1&&c!=2)throw new T.ErrnoError(22);a.position=a.stream_ops.llseek(a,b,c);a.ungotten=[];return a.position},read:function(b,a,c,d,e){if(d<0||e<0)throw new T.ErrnoError(22);if(T.isClosed(b))throw new T.ErrnoError(9);if((b.flags&2097155)===1)throw new T.ErrnoError(9);if(T.isDir(b.node.mode))throw new T.ErrnoError(21);if(!b.stream_ops.read)throw new T.ErrnoError(22);var f=typeof e!=="undefined";if(!f)e=b.position;else if(!b.seekable)throw new T.ErrnoError(29);a=b.stream_ops.read(b,a,c,d,e);f||(b.position+=a);return a},write:function(b,a,c,d,e,f){if(d<0||e<0)throw new T.ErrnoError(22);if(T.isClosed(b))throw new T.ErrnoError(9);if((b.flags&2097155)===0)throw new T.ErrnoError(9);if(T.isDir(b.node.mode))throw new T.ErrnoError(21);if(!b.stream_ops.write)throw new T.ErrnoError(22);b.flags&1024&&T.llseek(b,0,2);var g=typeof e!=="undefined";if(!g)e=b.position;else if(!b.seekable)throw new T.ErrnoError(29);a=b.stream_ops.write(b,a,c,d,e,f);g||(b.position+=a);try{b.path&&T.trackingDelegate.onWriteToFile&&T.trackingDelegate.onWriteToFile(b.path)}catch(a){}return a},allocate:function(a,b,c){if(T.isClosed(a))throw new T.ErrnoError(9);if(b<0||c<=0)throw new T.ErrnoError(22);if((a.flags&2097155)===0)throw new T.ErrnoError(9);if(!T.isFile(a.node.mode)&&!T.isDir(a.node.mode))throw new T.ErrnoError(19);if(!a.stream_ops.allocate)throw new T.ErrnoError(95);a.stream_ops.allocate(a,b,c)},mmap:function(b,a,c,d,e,f,g){if((f&2)!==0&&(g&2)===0&&(b.flags&2097155)!==2)throw new T.ErrnoError(13);if((b.flags&2097155)===1)throw new T.ErrnoError(13);if(!b.stream_ops.mmap)throw new T.ErrnoError(19);return b.stream_ops.mmap(b,a,c,d,e,f,g)},msync:function(b,a,c,d,e){return!b||!b.stream_ops.msync?0:b.stream_ops.msync(b,a,c,d,e)},munmap:function(a){return 0},ioctl:function(a,b,c){if(!a.stream_ops.ioctl)throw new T.ErrnoError(25);return a.stream_ops.ioctl(a,b,c)},readFile:function(a,b){b=b||{};b.flags=b.flags||"r";b.encoding=b.encoding||"binary";if(b.encoding!=="utf8"&&b.encoding!=="binary")throw new Error('Invalid encoding type "'+b.encoding+'"');var c,d=T.open(a,b.flags);a=T.stat(a);a=a.size;var e=new Uint8Array(a);T.read(d,e,0,a,0);b.encoding==="utf8"?c=u(e,0):b.encoding==="binary"&&(c=e);T.close(d);return c},writeFile:function(a,b,c){c=c||{};c.flags=c.flags||"w";a=T.open(a,c.flags,c.mode);if(typeof b==="string"){var d=new Uint8Array(x(b)+1),e=w(b,d,0,d.length);T.write(a,d,0,e,void 0,c.canOwn)}else if(ArrayBuffer.isView(b))T.write(a,b,0,b.byteLength,void 0,c.canOwn);else throw new Error("Unsupported data type");T.close(a)},cwd:function(){return T.currentPath},chdir:function(b){b=T.lookupPath(b,{follow:!0});if(b.node===null)throw new T.ErrnoError(2);if(!T.isDir(b.node.mode))throw new T.ErrnoError(20);var a=T.nodePermissions(b.node,"x");if(a)throw new T.ErrnoError(a);T.currentPath=b.path},createDefaultDirectories:function(){T.mkdir("/tmp"),T.mkdir("/home"),T.mkdir("/home/web_user")},createDefaultDevices:function(){T.mkdir("/dev");T.registerDevice(T.makedev(1,3),{read:function(){return 0},write:function(b,a,c,d,e){return d}});T.mkdev("/dev/null",T.makedev(1,3));P.register(T.makedev(5,0),P.default_tty_ops);P.register(T.makedev(6,0),P.default_tty1_ops);T.mkdev("/dev/tty",T.makedev(5,0));T.mkdev("/dev/tty1",T.makedev(6,0));var a;if(typeof crypto==="object"&&typeof crypto.getRandomValues==="function"){var b=new Uint8Array(1);a=function(){crypto.getRandomValues(b);return b[0]}}a||(a=function(){$("random_device")});T.createDevice("/dev","random",a);T.createDevice("/dev","urandom",a);T.mkdir("/dev/shm");T.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){T.mkdir("/proc"),T.mkdir("/proc/self"),T.mkdir("/proc/self/fd"),T.mount({mount:function(){var a=T.createNode("/proc/self","fd",16384|511,73);a.node_ops={lookup:function(a,b){a=+b;var c=T.getStream(a);if(!c)throw new T.ErrnoError(9);b={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return c.path}}};b.parent=b;return b}};return a}},{},"/proc/self/fd")},createStandardStreams:function(){f.stdin?T.createDevice("/dev","stdin",f.stdin):T.symlink("/dev/tty","/dev/stdin"),f.stdout?T.createDevice("/dev","stdout",null,f.stdout):T.symlink("/dev/tty","/dev/stdout"),f.stderr?T.createDevice("/dev","stderr",null,f.stderr):T.symlink("/dev/tty1","/dev/stderr"),T.open("/dev/stdin","r"),T.open("/dev/stdout","w"),T.open("/dev/stderr","w")},ensureErrnoError:function(){if(T.ErrnoError)return;T.ErrnoError=function(a,b){this.node=b,this.setErrno=function(a){this.errno=a},this.setErrno(a),this.message="FS error",this.stack&&Object.defineProperty(this,"stack",{value:new Error().stack,writable:!0})};T.ErrnoError.prototype=new Error();T.ErrnoError.prototype.constructor=T.ErrnoError;[2].forEach(function(a){T.genericErrors[a]=new T.ErrnoError(a),T.genericErrors[a].stack="<generic error, no stack>"})},staticInit:function(){T.ensureErrnoError(),T.nameTable=new Array(4096),T.mount(Q,{},"/"),T.createDefaultDirectories(),T.createDefaultDevices(),T.createSpecialDirectories(),T.filesystems={MEMFS:Q,IDBFS:R,WORKERFS:S}},init:function(a,b,c){T.init.initialized=!0,T.ensureErrnoError(),f.stdin=a||f.stdin,f.stdout=b||f.stdout,f.stderr=c||f.stderr,T.createStandardStreams()},quit:function(){T.init.initialized=!1;var a=f._fflush;a&&a(0);for(var a=0;a<T.streams.length;a++){var b=T.streams[a];if(!b)continue;T.close(b)}},getMode:function(a,b){var c=0;a&&(c|=292|73);b&&(c|=146);return c},joinPath:function(a,b){a=N.join.apply(null,a);b&&a[0]=="/"&&(a=a.substr(1));return a},absolutePath:function(a,b){return O.resolve(b,a)},standardizePath:function(a){return N.normalize(a)},findObject:function(a,b){a=T.analyzePath(a,b);if(a.exists)return a.object;else{M(a.error);return null}},analyzePath:function(a,b){try{var c=T.lookupPath(a,{follow:!b});a=c.path}catch(a){}var d={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var c=T.lookupPath(a,{parent:!0});d.parentExists=!0;d.parentPath=c.path;d.parentObject=c.node;d.name=N.basename(a);c=T.lookupPath(a,{follow:!b});d.exists=!0;d.path=c.path;d.object=c.node;d.name=c.node.name;d.isRoot=c.path==="/"}catch(a){d.error=a.errno}return d},createFolder:function(a,b,c,d){a=N.join2(typeof a==="string"?a:T.getPath(a),b);b=T.getMode(c,d);return T.mkdir(a,b)},createPath:function(a,b,c,d){a=typeof a==="string"?a:T.getPath(a);c=b.split("/").reverse();while(c.length){d=c.pop();if(!d)continue;var e=N.join2(a,d);try{T.mkdir(e)}catch(a){}a=e}return e},createFile:function(a,b,c,d,e){c=N.join2(typeof a==="string"?a:T.getPath(a),b);a=T.getMode(d,e);return T.create(c,a)},createDataFile:function(a,b,c,d,e,f){b=b?N.join2(typeof a==="string"?a:T.getPath(a),b):a;a=T.getMode(d,e);d=T.create(b,a);if(c){if(typeof c==="string"){e=new Array(c.length);for(var b=0,g=c.length;b<g;++b)e[b]=c.charCodeAt(b);c=e}T.chmod(d,a|146);b=T.open(d,"w");T.write(b,c,0,c.length,0,f);T.close(b);T.chmod(d,a)}return d},createDevice:function(a,b,c,d){a=N.join2(typeof a==="string"?a:T.getPath(a),b);b=T.getMode(!!c,!!d);T.createDevice.major||(T.createDevice.major=64);var e=T.makedev(T.createDevice.major++,0);T.registerDevice(e,{open:function(a){a.seekable=!1},close:function(a){d&&d.buffer&&d.buffer.length&&d(10)},read:function(b,a,d,e,f){f=0;for(var g=0;g<e;g++){var h;try{h=c()}catch(a){throw new T.ErrnoError(5)}if(h===void 0&&f===0)throw new T.ErrnoError(11);if(h===null||h===void 0)break;f++;a[d+g]=h}f&&(b.node.timestamp=Date.now());return f},write:function(b,a,c,e,f){for(var f=0;f<e;f++)try{d(a[c+f])}catch(a){throw new T.ErrnoError(5)}e&&(b.node.timestamp=Date.now());return f}});return T.mkdev(a,b,e)},createLink:function(a,b,c,d,e){d=N.join2(typeof a==="string"?a:T.getPath(a),b);return T.symlink(c,d)},forceLoadFile:function(a){if(a.isDevice||a.isFolder||a.link||a.contents)return!0;var b=!0;if(typeof XMLHttpRequest!=="undefined")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");else if(f.read)try{a.contents=Rb(f.read(a.url),!0),a.usedBytes=a.contents.length}catch(a){b=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");b||M(5);return b},createLazyFile:function(a,b,c,d,e){function f(){this.lengthKnown=!1,this.chunks=[]}f.prototype.get=function(a){if(a>this.length-1||a<0)return void 0;var b=a%this.chunkSize;a=a/this.chunkSize|0;return this.getter(a)[b]};f.prototype.setDataGetter=function(a){this.getter=a};f.prototype.cacheLength=function(){var a=new XMLHttpRequest();a.open("HEAD",c,!1);a.send(null);if(!(a.status>=200&&a.status<300||a.status===304))throw new Error("Couldn't load "+c+". Status: "+a.status);var b=Number(a.getResponseHeader("Content-length")),d,e=(d=a.getResponseHeader("Accept-Ranges"))&&d==="bytes";a=(d=a.getResponseHeader("Content-Encoding"))&&d==="gzip";var f=1024*1024;e||(f=b);var g=function(d,e){if(d>e)throw new Error("invalid range ("+d+", "+e+") or no bytes requested!");if(e>b-1)throw new Error("only "+b+" bytes available! programmer error!");var a=new XMLHttpRequest();a.open("GET",c,!1);b!==f&&a.setRequestHeader("Range","bytes="+d+"-"+e);typeof Uint8Array!="undefined"&&(a.responseType="arraybuffer");a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined");a.send(null);if(!(a.status>=200&&a.status<300||a.status===304))throw new Error("Couldn't load "+c+". Status: "+a.status);if(a.response!==void 0)return new Uint8Array(a.response||[]);else return Rb(a.responseText||"",!0)},h=this;h.setDataGetter(function(a){var c=a*f,d=(a+1)*f-1;d=Math.min(d,b-1);typeof h.chunks[a]==="undefined"&&(h.chunks[a]=g(c,d));if(typeof h.chunks[a]==="undefined")throw new Error("doXHR failed!");return h.chunks[a]});(a||!b)&&(f=b=1,b=this.getter(0).length,f=b);this._length=b;this._chunkSize=f;this.lengthKnown=!0};if(typeof XMLHttpRequest!=="undefined"){if(!l)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";f=new f();Object.defineProperties(f,{length:{get:function(){this.lengthKnown||this.cacheLength();return this._length}},chunkSize:{get:function(){this.lengthKnown||this.cacheLength();return this._chunkSize}}});f={isDevice:!1,contents:f}}else var f={isDevice:!1,url:c};var g=T.createFile(a,b,f,d,e);f.contents?g.contents=f.contents:f.url&&(g.contents=null,g.url=f.url);Object.defineProperties(g,{usedBytes:{get:function(){return this.contents.length}}});var h={};a=Object.keys(g.stream_ops);a.forEach(function(a){var b=g.stream_ops[a];h[a]=function(){if(!T.forceLoadFile(g))throw new T.ErrnoError(5);return b.apply(null,arguments)}});h.read=function(b,a,c,d,e){if(!T.forceLoadFile(g))throw new T.ErrnoError(5);b=b.node.contents;if(e>=b.length)return 0;d=Math.min(b.length-e,d);if(b.slice)for(var f=0;f<d;f++)a[c+f]=b[e+f];else for(var f=0;f<d;f++)a[c+f]=b.get(e+f);return d};g.stream_ops=h;return g},createPreloadedFile:function(a,b,c,d,e,g,h,i,j,k){Browser.init();var l=b?O.resolve(N.join2(a,b)):a,m=Na("cp "+l);function n(c){function n(c){k&&k(),i||T.createDataFile(a,b,c,d,e,j),g&&g(),Pa(m)}var o=!1;f.preloadPlugins.forEach(function(a){if(o)return;a.canHandle(l)&&(a.handle(c,l,n,function(){h&&h(),Pa(m)}),o=!0)});o||n(c)}Oa(m);typeof c=="string"?Browser.asyncLoad(c,function(a){n(a)},h):n(c)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(a,b,c){b=b||function(){};c=c||function(){};var d=T.indexedDB();try{var e=d.open(T.DB_NAME(),T.DB_VERSION)}catch(a){return c(a)}e.onupgradeneeded=function(){var a=e.result;a.createObjectStore(T.DB_STORE_NAME)};e.onsuccess=function(){var d=e.result;d=d.transaction([T.DB_STORE_NAME],"readwrite");var f=d.objectStore(T.DB_STORE_NAME),g=0,h=0,i=a.length;function j(){h==0?b():c()}a.forEach(function(a){a=f.put(T.analyzePath(a).object.contents,a);a.onsuccess=function(){g++,g+h==i&&j()};a.onerror=function(){h++,g+h==i&&j()}});d.onerror=c};e.onerror=c},loadFilesFromDB:function(a,b,c){b=b||function(){};c=c||function(){};var d=T.indexedDB();try{var e=d.open(T.DB_NAME(),T.DB_VERSION)}catch(a){return c(a)}e.onupgradeneeded=c;e.onsuccess=function(){var d=e.result;try{d=d.transaction([T.DB_STORE_NAME],"readonly")}catch(a){c(a);return}var f=d.objectStore(T.DB_STORE_NAME),g=0,h=0,i=a.length;function j(){h==0?b():c()}a.forEach(function(a){var b=f.get(a);b.onsuccess=function(){T.analyzePath(a).exists&&T.unlink(a),T.createDataFile(N.dirname(a),N.basename(a),b.result,!0,!0,!0),g++,g+h==i&&j()};b.onerror=function(){h++,g+h==i&&j()}});d.onerror=c};e.onerror=c}},U={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(a,b){if(b[0]!=="/"){var c;if(a===-100)c=T.cwd();else{a=T.getStream(a);if(!a)throw new T.ErrnoError(9);c=a.path}b=N.join2(c,b)}return b},doStat:function(a,b,c){try{a=a(b)}catch(a){if(a&&a.node&&N.normalize(b)!==N.normalize(T.getPath(a.node)))return-20;throw a}B[c>>2]=a.dev;B[c+4>>2]=0;B[c+8>>2]=a.ino;B[c+12>>2]=a.mode;B[c+16>>2]=a.nlink;B[c+20>>2]=a.uid;B[c+24>>2]=a.gid;B[c+28>>2]=a.rdev;B[c+32>>2]=0;I=[a.size>>>0,(p=a.size,+Ia(p)>=1?p>0?(La(+Ka(p/4294967296),4294967295)|0)>>>0:~~+Ja((p-+(~~p>>>0))/4294967296)>>>0:0)],B[c+40>>2]=I[0],B[c+44>>2]=I[1];B[c+48>>2]=4096;B[c+52>>2]=a.blocks;B[c+56>>2]=a.atime.getTime()/1e3|0;B[c+60>>2]=0;B[c+64>>2]=a.mtime.getTime()/1e3|0;B[c+68>>2]=0;B[c+72>>2]=a.ctime.getTime()/1e3|0;B[c+76>>2]=0;I=[a.ino>>>0,(p=a.ino,+Ia(p)>=1?p>0?(La(+Ka(p/4294967296),4294967295)|0)>>>0:~~+Ja((p-+(~~p>>>0))/4294967296)>>>0:0)],B[c+80>>2]=I[0],B[c+84>>2]=I[1];return 0},doMsync:function(a,b,c,d){a=new Uint8Array(A.subarray(a,a+c));T.msync(b,a,0,c,d)},doMkdir:function(a,b){a=N.normalize(a);a[a.length-1]==="/"&&(a=a.substr(0,a.length-1));T.mkdir(a,b,0);return 0},doMknod:function(a,b,c){switch(b&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-22}T.mknod(a,b,c);return 0},doReadlink:function(a,b,c){if(c<=0)return-22;a=T.readlink(a);var d=Math.min(c,x(a)),e=z[b+d];ia(a,b,c+1);z[b+d]=e;return d},doAccess:function(a,b){if(b&-8)return-22;a=T.lookupPath(a,{follow:!0});a=a.node;var c="";b&4&&(c+="r");b&2&&(c+="w");b&1&&(c+="x");return c&&T.nodePermissions(a,c)?-13:0},doDup:function(a,b,c){var d=T.getStream(c);d&&T.close(d);return T.open(a,b,0,c,c).fd},doReadv:function(a,b,c,d){var e=0;for(var f=0;f<c;f++){var g=B[b+f*8>>2],h=B[b+(f*8+4)>>2];g=T.read(a,z,g,h,d);if(g<0)return-1;e+=g;if(g<h)break}return e},doWritev:function(a,b,c,d){var e=0;for(var f=0;f<c;f++){var g=B[b+f*8>>2],h=B[b+(f*8+4)>>2];g=T.write(a,z,g,h,d);if(g<0)return-1;e+=g}return e},varargs:0,get:function(a){U.varargs+=4;a=B[U.varargs-4>>2];return a},getStr:function(){var a=v(U.get());return a},getStreamFromFD:function(){var a=T.getStream(U.get());if(!a)throw new T.ErrnoError(9);return a},get64:function(){var a=U.get();U.get();return a},getZero:function(){U.get()}};function nb(a,b){U.varargs=b;try{a=U.getStreamFromFD();b=U.get();var c=U.get(),d=U.get(),e=U.get(),f=4294967296;b=b*f+(c>>>0);f=9007199254740992;if(b<=-f||b>=f)return-75;T.llseek(a,b,e);I=[a.position>>>0,(p=a.position,+Ia(p)>=1?p>0?(La(+Ka(p/4294967296),4294967295)|0)>>>0:~~+Ja((p-+(~~p>>>0))/4294967296)>>>0:0)],B[d>>2]=I[0],B[d+4>>2]=I[1];a.getdents&&b===0&&e===0&&(a.getdents=null);return 0}catch(a){(typeof T==="undefined"||!(a instanceof T.ErrnoError))&&$(a);return-a.errno}}function ob(a,b){U.varargs=b;try{a=U.getStreamFromFD();b=U.get();var c=U.get();return U.doWritev(a,b,c)}catch(a){(typeof T==="undefined"||!(a instanceof T.ErrnoError))&&$(a);return-a.errno}}function pb(a,b){U.varargs=b;try{a=U.getStreamFromFD();T.close(a);return 0}catch(a){(typeof T==="undefined"||!(a instanceof T.ErrnoError))&&$(a);return-a.errno}}function qb(a,b){if(a==-1||b==0)return-22;var c=U.mappings[a];if(!c)return 0;if(b===c.len){var d=T.getStream(c.fd);U.doMsync(a,d,b,c.flags);T.munmap(d);U.mappings[a]=null;c.allocated&&wc(c.malloc)}return 0}function rb(a,b){U.varargs=b;try{a=U.get();b=U.get();return qb(a,b)}catch(a){(typeof T==="undefined"||!(a instanceof T.ErrnoError))&&$(a);return-a.errno}}function sb(){}function tb(){f.abort()}function ub(){$()}function vb(){return typeof performance==="object"&&performance&&typeof performance.now==="function"}function wb(a,b){var c;if(a===0)c=Date.now();else if(a===1&&vb())c=ub();else{M(22);return-1}B[b>>2]=c/1e3|0;B[b+4>>2]=c%1e3*1e3*1e3|0;return 0}function xb(){return z.length}function yb(a){cd(a)}function V(a){if(a===0)return 0;a=v(a);if(!Object.prototype.hasOwnProperty.call(J,a))return 0;V.ret&&wc(V.ret);V.ret=ja(J[a]);return V.ret}function zb(a){return a}function Ab(a){return Math.pow(2,a)}function Bb(a){return Ab(a)}function Cb(a){var b=Db,c=b.LLVM_SAVEDSTACKS[a];b.LLVM_SAVEDSTACKS.splice(a,1);Y(c)}function Db(){var a=Db;a.LLVM_SAVEDSTACKS||(a.LLVM_SAVEDSTACKS=[]);a.LLVM_SAVEDSTACKS.push(Z());return a.LLVM_SAVEDSTACKS.length-1}function Eb(){$("trap!")}function Fb(a,b,c){A.set(A.subarray(b,b+c),a)}function Gb(){return 0}function Hb(a){$("OOM")}function Ib(a){var b=65536;a=qa(a,b);b=y.byteLength;try{a=r.grow((a-b)/65536);if(a!==(-1|0)){y=r.buffer;return!0}else return!1}catch(a){return!1}}function Jb(a){var b=xb(),c=65536,d=2147483648-c;if(a>d)return!1;var e=16777216;b=Math.max(b,e);while(b<a)b<=536870912?b=qa(2*b,c):b=Math.min(qa((3*b+2147483648)/4,c),d);if(!Ib(b))return!1;ua();return!0}function Kb(a){return a%4===0&&(a%100!==0||a%400===0)}function Lb(a,b){var c=0;for(var d=0;d<=b;c+=a[d++]);return c}var Mb=[31,29,31,30,31,30,31,31,30,31,30,31],Nb=[31,28,31,30,31,30,31,31,30,31,30,31];function Ob(a,b){a=new Date(a.getTime());while(b>0){var c=Kb(a.getFullYear()),d=a.getMonth();c=(c?Mb:Nb)[d];if(b>c-a.getDate())b-=c-a.getDate()+1,a.setDate(1),d<11?a.setMonth(d+1):(a.setMonth(0),a.setFullYear(a.getFullYear()+1));else{a.setDate(a.getDate()+b);return a}}return a}function Pb(a,b,c,d){var e=B[d+40>>2];d={tm_sec:B[d>>2],tm_min:B[d+4>>2],tm_hour:B[d+8>>2],tm_mday:B[d+12>>2],tm_mon:B[d+16>>2],tm_year:B[d+20>>2],tm_wday:B[d+24>>2],tm_yday:B[d+28>>2],tm_isdst:B[d+32>>2],tm_gmtoff:B[d+36>>2],tm_zone:e?v(e):""};e=v(c);c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var f in c)e=e.replace(new RegExp(f,"g"),c[f]);var g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["January","February","March","April","May","June","July","August","September","October","November","December"];function i(a,b,c){a=typeof a==="number"?a.toString():a||"";while(a.length<b)a=c[0]+a;return a}function j(a,b){return i(a,b,"0")}function k(a,b){function c(a){return a<0?-1:a>0?1:0}var d;(d=c(a.getFullYear()-b.getFullYear()))===0&&((d=c(a.getMonth()-b.getMonth()))===0&&(d=c(a.getDate()-b.getDate())));return d}function l(a){switch(a.getDay()){case 0:return new Date(a.getFullYear()-1,11,29);case 1:return a;case 2:return new Date(a.getFullYear(),0,3);case 3:return new Date(a.getFullYear(),0,2);case 4:return new Date(a.getFullYear(),0,1);case 5:return new Date(a.getFullYear()-1,11,31);case 6:return new Date(a.getFullYear()-1,11,30)}}function m(a){a=Ob(new Date(a.tm_year+1900,0,1),a.tm_yday);var b=new Date(a.getFullYear(),0,4),c=new Date(a.getFullYear()+1,0,4);b=l(b);c=l(c);if(k(b,a)<=0)if(k(c,a)<=0)return a.getFullYear()+1;else return a.getFullYear();else return a.getFullYear()-1}c={"%a":function(a){return g[a.tm_wday].substring(0,3)},"%A":function(a){return g[a.tm_wday]},"%b":function(a){return h[a.tm_mon].substring(0,3)},"%B":function(a){return h[a.tm_mon]},"%C":function(a){a=a.tm_year+1900;return j(a/100|0,2)},"%d":function(a){return j(a.tm_mday,2)},"%e":function(a){return i(a.tm_mday,2," ")},"%g":function(a){return m(a).toString().substring(2)},"%G":function(a){return m(a)},"%H":function(a){return j(a.tm_hour,2)},"%I":function(a){a=a.tm_hour;a==0?a=12:a>12&&(a-=12);return j(a,2)},"%j":function(a){return j(a.tm_mday+Lb(Kb(a.tm_year+1900)?Mb:Nb,a.tm_mon-1),3)},"%m":function(a){return j(a.tm_mon+1,2)},"%M":function(a){return j(a.tm_min,2)},"%n":function(){return"\n"},"%p":function(a){if(a.tm_hour>=0&&a.tm_hour<12)return"AM";else return"PM"},"%S":function(a){return j(a.tm_sec,2)},"%t":function(){return"\t"},"%u":function(a){return a.tm_wday||7},"%U":function(a){var b=new Date(a.tm_year+1900,0,1),c=b.getDay()===0?b:Ob(b,7-b.getDay());a=new Date(a.tm_year+1900,a.tm_mon,a.tm_mday);if(k(c,a)<0){var d=Lb(Kb(a.getFullYear())?Mb:Nb,a.getMonth()-1)-31,e=31-c.getDate();e=e+d+a.getDate();return j(Math.ceil(e/7),2)}return k(c,b)===0?"01":"00"},"%V":function(a){var b=new Date(a.tm_year+1900,0,4),c=new Date(a.tm_year+1901,0,4);b=l(b);c=l(c);var d=Ob(new Date(a.tm_year+1900,0,1),a.tm_yday);if(k(d,b)<0)return"53";if(k(c,d)<=0)return"01";b.getFullYear()<a.tm_year+1900?c=a.tm_yday+32-b.getDate():c=a.tm_yday+1-b.getDate();return j(Math.ceil(c/7),2)},"%w":function(a){return a.tm_wday},"%W":function(a){var b=new Date(a.tm_year,0,1),c=b.getDay()===1?b:Ob(b,b.getDay()===0?1:7-b.getDay()+1);a=new Date(a.tm_year+1900,a.tm_mon,a.tm_mday);if(k(c,a)<0){var d=Lb(Kb(a.getFullYear())?Mb:Nb,a.getMonth()-1)-31,e=31-c.getDate();e=e+d+a.getDate();return j(Math.ceil(e/7),2)}return k(c,b)===0?"01":"00"},"%y":function(a){return(a.tm_year+1900).toString().substring(2)},"%Y":function(a){return a.tm_year+1900},"%z":function(a){a=a.tm_gmtoff;var b=a>=0;a=Math.abs(a)/60;a=a/60*100+a%60;return(b?"+":"-")+String("0000"+a).slice(-4)},"%Z":function(a){return a.tm_zone},"%%":function(){return"%"}};for(var f in c)e.indexOf(f)>=0&&(e=e.replace(new RegExp(f,"g"),c[f](d)));c=Rb(e,!1);if(c.length>b)return 0;ka(c,a);return c.length-1}function Qb(a,b,c,d){return Pb(a,b,c,d)}T.staticInit();typeof dateNow!=="undefined"?ub=dateNow:typeof performance==="object"&&performance&&typeof performance.now==="function"?ub=function(){return performance.now()}:ub=Date.now;function Rb(a,b,c){c=c>0?c:x(a)+1;c=new Array(c);a=w(a,c,0,c.length);b&&(c.length=a);return c}function Sb(a,b,c,d){var e=Z();try{return zc(a,b,c,d)}catch(a){Y(e);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function Tb(a,b,c,d){var e=Z();try{return Ac(a,b,c,d)}catch(a){Y(e);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function Ub(a){var b=Z();try{return Bc(a)}catch(a){Y(b);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function Vb(a,b){var c=Z();try{return Cc(a,b)}catch(a){Y(c);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function Wb(a,b,c){var d=Z();try{return Dc(a,b,c)}catch(a){Y(d);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function Xb(a,b,c,d){var e=Z();try{return Ec(a,b,c,d)}catch(a){Y(e);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function Yb(a,b,c,d){var e=Z();try{return Fc(a,b,c,d)}catch(a){Y(e);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function Zb(a,b,c,d,e){var f=Z();try{return Gc(a,b,c,d,e)}catch(a){Y(f);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function $b(a,b,c,d,e,f){var g=Z();try{return Hc(a,b,c,d,e,f)}catch(a){Y(g);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function ac(a,b,c,d,e,f,g){var h=Z();try{return Ic(a,b,c,d,e,f,g)}catch(a){Y(h);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function bc(a,b,c,d,e,f,g,h){var i=Z();try{return Jc(a,b,c,d,e,f,g,h)}catch(a){Y(i);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function cc(a,b,c,d,e,f,g,h,i){var j=Z();try{return Kc(a,b,c,d,e,f,g,h,i)}catch(a){Y(j);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function dc(a,b,c,d,e,f,g,h,i,j,k){var l=Z();try{return Lc(a,b,c,d,e,f,g,h,i,j,k)}catch(a){Y(l);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function ec(a,b,c,d,e,f,g,h,i,j,k,l){var m=Z();try{return Mc(a,b,c,d,e,f,g,h,i,j,k,l)}catch(a){Y(m);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function fc(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=Z();try{return Nc(a,b,c,d,e,f,g,h,i,j,k,l,m)}catch(a){Y(n);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function gc(a,b,c,d,e){var f=Z();try{return Oc(a,b,c,d,e)}catch(a){Y(f);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function hc(a){var b=Z();try{Pc(a)}catch(a){Y(b);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function ic(a,b){var c=Z();try{Qc(a,b)}catch(a){Y(c);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function jc(a,b,c){var d=Z();try{Rc(a,b,c)}catch(a){Y(d);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function kc(a,b,c,d,e,f,g,h){var i=Z();try{Sc(a,b,c,d,e,f,g,h)}catch(a){Y(i);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function lc(a,b,c,d){var e=Z();try{Tc(a,b,c,d)}catch(a){Y(e);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function mc(a,b,c,d,e){var f=Z();try{Uc(a,b,c,d,e)}catch(a){Y(f);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function nc(a,b,c,d,e,f){var g=Z();try{Vc(a,b,c,d,e,f)}catch(a){Y(g);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function oc(a,b,c,d,e,f,g){var h=Z();try{Wc(a,b,c,d,e,f,g)}catch(a){Y(h);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function pc(a,b,c,d,e,f,g){var h=Z();try{Xc(a,b,c,d,e,f,g)}catch(a){Y(h);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function qc(a,b,c,d,e,f,g,h){var i=Z();try{Yc(a,b,c,d,e,f,g,h)}catch(a){Y(i);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function rc(a,b,c,d,e,f,g,h,i,j,k){var l=Z();try{Zc(a,b,c,d,e,f,g,h,i,j,k)}catch(a){Y(l);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function sc(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,aa){var p=Z();try{$c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,aa)}catch(a){Y(p);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}D={};i={s:$,Y:q,b:m,L:Sb,T:Tb,t:Ub,f:Vb,i:Wb,G:Xb,r:Yb,q:Zb,N:$b,B:ac,W:bc,V:cc,w:dc,M:ec,F:fc,X:gc,l:hc,m:ic,e:jc,I:kc,g:lc,k:mc,j:nc,U:oc,K:pc,y:qc,E:rc,J:sc,ma:Va,n:Wa,u:$a,v:cb,c:fb,h:gb,p:ab,la:hb,S:ib,o:jb,ka:kb,ja:lb,ia:mb,d:db,R:M,ha:nb,Q:ob,ga:pb,fa:rb,P:sb,O:tb,ea:wb,da:xb,ca:Fb,ba:Jb,aa:yb,H:V,C:zb,D:Bb,A:Cb,z:Db,x:Eb,$:Gb,_:Qb,Z:Hb,a:C};E=f.asm(D,i,y);f.asm=E;var W=f.__ZSt18uncaught_exceptionv=function(){return f.asm.na.apply(null,arguments)},tc=f.___cxa_can_catch=function(){return f.asm.oa.apply(null,arguments)},uc=f.___cxa_is_pointer_type=function(){return f.asm.pa.apply(null,arguments)},vc=f.___emscripten_environ_constructor=function(){return f.asm.qa.apply(null,arguments)};f.___errno_location=function(){return f.asm.ra.apply(null,arguments)};var wc=f._free=function(){return f.asm.sa.apply(null,arguments)},xc=f._malloc=function(){return f.asm.ta.apply(null,arguments)};f._resizeJpeg=function(){return f.asm.ua.apply(null,arguments)};var X=f._setThrew=function(){return f.asm.va.apply(null,arguments)},yc=f.stackAlloc=function(){return f.asm.Ya.apply(null,arguments)},Y=f.stackRestore=function(){return f.asm.Za.apply(null,arguments)},Z=f.stackSave=function(){return f.asm._a.apply(null,arguments)},zc=f.dynCall_diii=function(){return f.asm.wa.apply(null,arguments)},Ac=f.dynCall_fiii=function(){return f.asm.xa.apply(null,arguments)},Bc=f.dynCall_i=function(){return f.asm.ya.apply(null,arguments)},Cc=f.dynCall_ii=function(){return f.asm.za.apply(null,arguments)},Dc=f.dynCall_iii=function(){return f.asm.Aa.apply(null,arguments)},Ec=f.dynCall_iiif=function(){return f.asm.Ba.apply(null,arguments)},Fc=f.dynCall_iiii=function(){return f.asm.Ca.apply(null,arguments)},Gc=f.dynCall_iiiii=function(){return f.asm.Da.apply(null,arguments)},Hc=f.dynCall_iiiiii=function(){return f.asm.Ea.apply(null,arguments)},Ic=f.dynCall_iiiiiii=function(){return f.asm.Fa.apply(null,arguments)},Jc=f.dynCall_iiiiiiii=function(){return f.asm.Ga.apply(null,arguments)},Kc=f.dynCall_iiiiiiiii=function(){return f.asm.Ha.apply(null,arguments)},Lc=f.dynCall_iiiiiiiiiii=function(){return f.asm.Ia.apply(null,arguments)},Mc=f.dynCall_iiiiiiiiiiii=function(){return f.asm.Ja.apply(null,arguments)},Nc=f.dynCall_iiiiiiiiiiiii=function(){return f.asm.Ka.apply(null,arguments)},Oc=f.dynCall_jiiii=function(){return f.asm.La.apply(null,arguments)},Pc=f.dynCall_v=function(){return f.asm.Ma.apply(null,arguments)},Qc=f.dynCall_vi=function(){return f.asm.Na.apply(null,arguments)},Rc=f.dynCall_vii=function(){return f.asm.Oa.apply(null,arguments)},Sc=f.dynCall_viifiiii=function(){return f.asm.Pa.apply(null,arguments)},Tc=f.dynCall_viii=function(){return f.asm.Qa.apply(null,arguments)},Uc=f.dynCall_viiii=function(){return f.asm.Ra.apply(null,arguments)},Vc=f.dynCall_viiiii=function(){return f.asm.Sa.apply(null,arguments)},Wc=f.dynCall_viiiiif=function(){return f.asm.Ta.apply(null,arguments)},Xc=f.dynCall_viiiiii=function(){return f.asm.Ua.apply(null,arguments)},Yc=f.dynCall_viiiiiii=function(){return f.asm.Va.apply(null,arguments)},Zc=f.dynCall_viiiiiiiiii=function(){return f.asm.Wa.apply(null,arguments)},$c=f.dynCall_viiiiiiiiiiiiiii=function(){return f.asm.Xa.apply(null,arguments)};f.asm=E;f.ccall=ea;f.cwrap=fa;f.getMemory=ga;f.then=function(a){if(f.calledRun)a(f);else{var b=f.onRuntimeInitialized;f.onRuntimeInitialized=function(){b&&b(),a(f)}}return f};function ad(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}ad.prototype=new Error();ad.prototype.constructor=ad;G=function a(){f.calledRun||bd(),f.calledRun||(G=a)};function bd(a){a||f.arguments;if(F>0)return;Ba();if(F>0)return;if(f.calledRun)return;function b(){if(f.calledRun)return;f.calledRun=!0;if(s)return;Ca();Da();f.onRuntimeInitialized&&f.onRuntimeInitialized();Fa()}f.setStatus?(f.setStatus("Running..."),setTimeout(function(){setTimeout(function(){f.setStatus("")},1),b()},1)):b()}f.run=bd;function cd(a,b){if(b&&f.noExitRuntime&&a===0)return;f.noExitRuntime||(s=!0,a,Ea(),f.onExit&&f.onExit(a));f.quit(a,new ad(a))}function $(a){f.onAbort&&f.onAbort(a);a!==void 0?(n(a),o(a),a='"'+a+'"'):a="";s=!0;throw"abort("+a+"). Build with -s ASSERTIONS=1 for more info."}f.abort=$;if(f.preInit){typeof f.preInit=="function"&&(f.preInit=[f.preInit]);while(f.preInit.length>0)f.preInit.pop()()}f.noExitRuntime=!0;bd();return d}}();typeof f==="object"&&typeof e==="object"?e.exports=h:typeof define==="function"&&define.amd?define([],function(){return h}):typeof f==="object"&&(f.SpectrumWasm=h)}),null);
__d("SpectrumImageResizer",["invariant","Promise","BlobFactory","FBLogger","SpectrumWasm","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=2048,i=2048,j=85,k=null,l=null;a=function(){a.isSupported=function(){try{if(typeof WebAssembly==="object"&&typeof WebAssembly.instantiate==="function"){var a=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(a instanceof WebAssembly.Module)return new WebAssembly.Instance(a)instanceof WebAssembly.Instance}}catch(a){b("FBLogger")("spectrum").catching(a).mustfix("Instantiating empty WebAssembly module threw an error")}return!1};a.getSingleton=function(){k||(k=new a());return k};function a(){this.$1=h,this.$2=i,this.$3=j,l=b("SpectrumWasm")()}var c=a.prototype;c.setEncodeQuality=function(a){this.$3=a;return this};c.setMaxWidth=function(a){this.$2=a;return this};c.setMaxHeight=function(a){this.$1=a;return this};c.resizeBlob=function(a,b){return this.$4(a,this.$2,this.$1,this.$3,b)};c.resize360Blob=function(a,b,c){var d,e;c===void 0||c===null?(d=this.$2*4,e=this.$1*4):(d=c,e=c);return this.$4(a,d,e,this.$3,b)};c.$4=function(a,c,d,e,f){var h=new FileReader();h.onload=function(h){var i=new Uint8Array(this.result);i.length>0||g(0,18539);function j(a){return new(b("Promise"))(function(b,c){var d=new Image();d.onload=function(){URL.revokeObjectURL(d.src),b({width:d.width,height:d.height})};d.onerror=function(a){URL.revokeObjectURL(d.src),c(a)};d.src=URL.createObjectURL(a)})}return j(a).then(function(a){l!=null||g(0,18573);return l.then(function(g){var h=g.cwrap("resizeJpeg","number",["number","number","number","number","number","number"]);function k(a){var b=g.getMemory(a.length);g.HEAP8.set(a,b);return b}var l=0,m=0;try{var n=function(a,b){var c=new Int8Array(b);c.set(g.HEAP8.subarray(a,a+b));return c};l=g.getMemory(i.length);m=k(i);k=h(m,i.length,l,c,d,e);h=n(l,k);var o=b("BlobFactory").getBlob([h],{type:"image/jpeg",done:!0});b("promiseDone")(j(o).then(function(b){f(null,o,!1,a.width,a.height,b.width,b.height)}))}finally{m!==0&&g._free(m),l!==0&&g._free(l)}})})["catch"](function(a){f(a,null,!0,null,null,null,null)})};h.readAsArrayBuffer(a);return this};return a}();e.exports=a}),null);
__d("useOzImplementationData_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useOzImplementationData_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_use_oz",storageKey:null},{alias:"playable_url_dash",args:[{kind:"Literal",name:"scrubbing_preference",value:"MPEG_DASH"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(scrubbing_preference:"MPEG_DASH")'},{alias:null,args:null,kind:"ScalarField",name:"dash_manifest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_quality_preference",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useProgressiveImplementationData_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useProgressiveImplementationData_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_quality_preference",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"playable_url",storageKey:null},{alias:"playable_url_quality_hd",args:[{kind:"Literal",name:"quality",value:"HD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"HD")'},{alias:null,args:null,concreteType:"SphericalVideoFallbackUrls",kind:"LinkedField",name:"spherical_video_fallback_urls",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sd",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useShakaImplementationData_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useShakaImplementationData_video",selections:[{alias:null,args:null,concreteType:"VideoPlayerShakaLiveP2PInit",kind:"LinkedField",name:"video_player_shaka_live_p2p_init",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"json_encoded_video_data",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerRelay_init.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerRelay_init",selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"VideoPlayerShakaPerformanceLoggerInit",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerRelay_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerRelay_video",selections:[{alias:null,args:null,concreteType:"VideoPlayerShakaPerformanceLoggerInit",kind:"LinkedField",name:"video_player_shaka_performance_logger_init",plural:!1,selections:[{documentName:"useVideoPlayerShakaPerformanceLoggerRelay_video",fragmentName:"useVideoPlayerShakaPerformanceLoggerRelay_init",fragmentPropName:"init",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoImplementations_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoImplementations_video",selections:[{args:null,kind:"FragmentSpread",name:"useOzImplementationData_video"},{args:null,kind:"FragmentSpread",name:"useShakaImplementationData_video"},{args:null,kind:"FragmentSpread",name:"useProgressiveImplementationData_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaConfig_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaConfig_video",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},action:"THROW",path:"id"},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_gaming_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_latency_menu_enabled",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"selected_latency_setting",storageKey:null}]}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("OzOneSemanticHandler",["ConstUriUtils","handleOzManifestFetchErrorEvent","handleOzStreamErrorEvent","qex","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";f.handleManifestFetchErrorEvent=a;f.handleStreamErrorEvent=c;function g(a){var c=a.error;c=c.getExtra();c=c.code;c==null&&b("recoverableViolation")("A ONE Semantic error response must have an error code.","comet_video_player");switch(c){case"410":a.endStream();break;default:}}function h(a){var b=!1;switch(a){case"410":b=!0;break;default:}return b}function i(a){if(a!=null){a=b("ConstUriUtils").getUri(a);if(a){a=a.getQueryParam("os_param");return!!a}}return!1}function j(a){var c=k(a);if(c){c=a.getExtra();a=c.code;c=c.url;if(a==null){b("recoverableViolation")("A ONE Semantic error response must have an error code.","comet_video_player");return!1}return h(a)&&(i(c)||!!b("qex")._("1809475"))}return!1}function k(a){a=a.getExtra();a=a.headers;return a?a.has("x-fb-one"):!1}function a(a,c){var d=c.error;!!b("qex")._("1840705")&&j(d)?g(c):b("handleOzManifestFetchErrorEvent")(a,c)}function c(a,c){var d=c.error;!!b("qex")._("1840705")&&j(d)?g(c):b("handleOzStreamErrorEvent")(a,c)}}),null);
__d("VideoPlayerWithVideoHomeLogging.react",["React","VideoPlayerHooks"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.feedAggregationType,d=a.reactionVideoChannelType,e=b("VideoPlayerHooks").useController();g.useEffect(function(){d!=null&&e.setAdditionalLogData("reaction_video_channel_type",d),c!=null&&e.setAdditionalLogData("feed_aggregation_type",c)},[e,c,d]);return null}}),null);
__d("useVideoPlayerClickToPauseInteraction",["fbt","React","VideoPlayerHooks","gkx"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(){var a=b("VideoPlayerHooks").usePlaying(),c=b("VideoPlayerHooks").useController(),d=b("VideoPlayerHooks").useIsLive(),e=h.useCallback(function(){c.pause("user_initiated")},[c]);a=a&&!(b("gkx")("1269128")&&d);return a?{ariaLabel:g._("\u1017\u102e\u1012\u102e\u101a\u102d\u102f\u1000\u102d\u102f \u1001\u1031\u1010\u1039\u1010\u101b\u1015\u103a\u1019\u101a\u103a"),handler:e,overlayLabel:""}:null}}),null);
__d("VideoPlayerOzImplementationData",[],(function(a,b,c,d,e,f){"use strict";f.makeOzImplementationData=a;function a(a){var b=a.canUseOz,c=a.dashManifest,d=a.dashUrl,e=a.experimentationConfig,f=a.minQualityPreference,g=a.ozQuickStarterData;a=a.videoFBID;if(b!==!0||a==null)return null;b=c==null||c===""?null:c;a=d==null||d===""?null:d;if(b==null&&a==null)return null;return e==null?null:{experimentationConfig:e,manifest:b,manifestUrl:a,minQualityPreference:(c=f)!=null?c:null,ozQuickStarterData:(d=g)!=null?d:null}}}),null);
__d("handleVideoPlayerLatencyLevelChange",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b,c,d){if(a&&b&&c){a.setContext("latency_level",d);d=(d=c.getSelectedVideoRepresentation())==null?void 0:(c=d.getEndingSegment())==null?void 0:c.getTimeRange().endTime;c=d!=null?d+a.getNumber("live_initial_playback_position",0):null;c!=null&&c>b.getPlayheadPosition()&&b.setPlayheadPosition(c)}}}),null);
__d("VideoPlayerOzImplementationEngineExtrasAPI",["VideoPlayerOzWWWGlobalConfig","emptyFunction","gkx","handleVideoPlayerLatencyLevelChange","oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f){"use strict";f.createVideoPlayerOzImplementationEngineExtrasAPI=a;c=b("emptyFunction");function g(a){return a.getSelectedVideoQuality()}function h(a){a=a.getCurrentVideoRepresentation();return a==null?"":a.getQualityLabel()}function i(a){a=a.getIsVideoQualityAdaptationEnabled()?"auto":a.getSelectedVideoQuality();return a}function j(a){return(a=(a=a.getMpd())==null?void 0:a.getCustomField("fbProjection"))!=null?a:null}function k(a,b){var c=i(a);if(b==="notselected"||b===c)return!1;else if(b==="auto"){a.enableVideoQualityAdaptation();return!0}else if(b!==a.getSelectedVideoQuality()){c=b;a.switchToVideoQuality(c);return!0}else return!1}function a(a){var c=a.getConfig,d=a.getOzPlayer,e=a.getOzQuickStarter,f=a.getVideoElementAPI;a={getApproximateFBLSToPlayerDisplayLatency:function(){var a;return(a=(a=d())==null?void 0:a.getApproximateFBLSToPlayerDisplayLatency())!=null?a:null},getAudioRepresentationIDAtTime:function(a){var b,c;b=(b=d())==null?void 0:b.getAudioRepresentationIDAtTime(a);c=(c=e())==null?void 0:c.getAudioRepresentationIDAtTime(a);return(b=(a=b)!=null?a:c)!=null?b:null},getAvailableVideoQualities:function(){var a;return(a=(a=d())==null?void 0:a.getVideoQualities())!=null?a:[]},getCurrentAudioRepresentation:function(){var a;return(a=(a=d())==null?void 0:a.getCurrentAudioRepresentation())!=null?a:null},getCurrentPlayingVideoQuality:function(){var a=d();return a?h(a):""},getCurrentTargetVideoQuality:function(){var a=d();return a?g(a):""},getCurrentVideoRepresentation:function(){var a;return(a=(a=d())==null?void 0:a.getCurrentVideoRepresentation())!=null?a:null},getEstimatedBandwidth:function(){return b("oz-player/networks/OzBandwidthEstimator").getBandwidth(b("VideoPlayerOzWWWGlobalConfig"))},getInbandCaptionsAutogeneratedFromManifest:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))},getInbandCaptionsExpectedFromManifest:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))||Boolean(a==null?void 0:a.getCustomField("hasInbandCaptionsFromAccessibility"))},getStreamType:function(){return"dash"},getUserSelectedVideoQuality:function(){var a=d();return a?i(a):""},getVideoProjectionType:function(){var a=d();return a!=null?j(a):null},getVideoRepresentationIDAtTime:function(a){var b,c;b=(b=d())==null?void 0:b.getVideoRepresentationIDAtTime(a);c=(c=e())==null?void 0:c.getVideoRepresentationIDAtTime(a);return(b=(a=b)!=null?a:c)!=null?b:null},getVideoRepresentations:function(){var a;return(a=(a=d())==null?void 0:(a=a.getMpd())==null?void 0:a.getVideoRepresentations())!=null?a:null},isDrm:function(){var a;return Boolean((a=d())==null?void 0:a.isDrm())},isFBIsLiveTemplated:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("isLiveTemplated"))},isFBMS:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("isFBMS"))},isFBWasLive:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("isFBWasLive"))},isPredictiveDash:function(){var a;a=(a=(a=d())==null?void 0:(a=a.getMpd())==null?void 0:a.getVideoRepresentations()[0])!=null?a:null;return a!==null&&a.canPredict()},setDimensions:function(a){},setEnableLiveheadCatchup:function(a){var b=d();b!=null&&b.setEnableLiveheadCatchup(a)},setLatencyLevel:function(a){b("handleVideoPlayerLatencyLevelChange")(c(),f(),d(),a)},setUserSelectedVideoQuality:function(a){var b=d();b!=null&&k(b,a)}};return a}}),null);
__d("oz-player/shims/ozvariant",["requireCond","cr:1615806"],(function(a,b,c,d,e,f){a=b("cr:1615806");e.exports=a}),null);
__d("oz-player/utils/OzNumericalHelper",[],(function(a,b,c,d,e,f){"use strict";f.equalTo=h;f.greaterThan=i;f.lessThan=j;f.lessThanOrEqual=a;f.greaterThanOrEqual=b;var g=1e-5;function h(a,b,c){c===void 0&&(c=g);return Math.abs(b-a)<=c}function i(a,b,c){c===void 0&&(c=g);return a>b&&!h(a,b,c)}function j(a,b,c){c===void 0&&(c=g);return a<b&&!h(a,b,c)}function a(a,b,c){c===void 0&&(c=g);return j(a,b,c)||h(a,b,c)}function b(a,b,c){c===void 0&&(c=g);return i(a,b,c)||h(a,b,c)}}),null);
__d("oz-player/utils/OzNumericalRangeUtil",["oz-player/utils/OzNumericalHelper"],(function(a,b,c,d,e,f){"use strict";var g=.01;function h(a,b){b=b.rangeEnd;return b===null||b===void 0?!1:Math.abs(a.rangeStart-b)>g&&a.rangeStart>b}function i(a,b){a=a.rangeEnd;b=b.rangeEnd;if(a===null||a===void 0)return!0;return b===null||b===void 0?!1:Math.abs(a-b)>g&&a>b}function j(a,b){b=b.rangeEnd;return b===null||b===void 0?!1:Math.abs(a-b)>g&&a>b}function k(a,b){return a>b-g}a=function(){function a(){}var c=a.prototype;c.mergeSortedRanges=function(a){if(!a.length)return[];var b=[],c=a[0];b.push(c);for(var d=1;d<a.length;d++){var e=a[d];if(!i(e,c))continue;else h(e,c)?(c={rangeStart:e.rangeStart,rangeEnd:e.rangeEnd},b.push(c)):c.rangeEnd=e.rangeEnd}return b};c.diffSortedRanges=function(a,b){return a.reduceRight(function(a,c){j(c.rangeStart,b)||j(b.rangeStart,c)?a.push(c):(b.rangeEnd!=null&&(c.rangeEnd==null||j(c.rangeEnd,b))&&a.push({rangeStart:b.rangeEnd,rangeEnd:c.rangeEnd}),k(b.rangeStart,c.rangeStart)&&a.push({rangeStart:c.rangeStart,rangeEnd:b.rangeStart}));return a},[]).filter(function(a){return a.rangeEnd==null||a.rangeStart<a.rangeEnd}).reverse()};c.findCurrentRangeIndex=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.rangeStart;if(k(a,e)&&!j(a,d))return c}return-1};c.findNextRangeIndex=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d=d.rangeStart;if(!k(a,d))return c}return-1};c.findDiffCoveredByRanges=function(a,b,c){return a>=b?0:c.reduceRight(function(c,d){var e=d.rangeStart;d=d.rangeEnd;if(b<e||d!=null&&a>d)return c;else if(d==null||b<=d)return Math.min(b-e,b-a)+c;else if(a>=e)return Math.min(d-a,b-a)+c;else return d-e+c},0)};c.firstAddedInSortedRanges=function(a,c){var d=null;for(var e=0;e<a.length;e++){var f=a[e];for(var g=e;g<c.length;g++){var h=c[g];if(b("oz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)&&f.rangeEnd!=null&&h.rangeEnd!=null&&b("oz-player/utils/OzNumericalHelper").equalTo(f.rangeEnd,h.rangeEnd))break;else if(h.rangeEnd!=null&&f.rangeEnd!=null&&!b("oz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)){d={rangeStart:h.rangeStart,rangeEnd:h.rangeEnd};break}else if(h.rangeEnd!=null&&f.rangeEnd!=null&&b("oz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)&&!b("oz-player/utils/OzNumericalHelper").equalTo(f.rangeEnd,h.rangeEnd)){d={rangeStart:f.rangeEnd,rangeEnd:h.rangeEnd};break}}if(d!==null)break}return d};c.convertFromTimeRanges=function(a){var b=[];for(var c=0;c<a.length;c++)b.push({rangeStart:a[c].startTime,rangeEnd:a[c].endTime});return b};return a}();e.exports=a}),null);
__d("TimeRanges",["invariant"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this.$1=[],this.$1=a}var b=a.prototype;b.start=function(a){this.$1[a]||g(0,2205);return this.$1[a].startTime};b.end=function(a){this.$1[a]||g(0,2205);return this.$1[a].endTime};b.length=function(){return this.$1.length};return a}();e.exports=a}),null);
__d("oz-player/drm/OzDrmUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return Uint8Array.from(window.atob(a),function(a){return a.charCodeAt(0)})};f.base64ToUint8Array=a;b=function(a){return window.btoa(String.fromCharCode.apply(null,new Uint8Array(a)))};f.arrayBufferToBase64=b}),null);
__d("OzWidevineDrmProvider",["URI","oz-player/drm/OzDrmUtils"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a,c,d,e,f){this.$2=[];this.$4=!0;this.$5=!1;f!==void 0&&f!==null&&f!==""&&(this.$1=b("oz-player/drm/OzDrmUtils").base64ToUint8Array(f));if(c!==null&&c!==void 0&&e!==null&&e!==void 0){f=new(g||(g=b("URI")))(c);f.addQueryData("access_token",e);this.$3=f.toString();this.$5=!0;this.$4=!1}else{c=d["0"];if(c===void 0||c===null){c="/video/drm/getlicense";e=new(g||(g=b("URI")))(c);e.addQueryData("video_id",a);this.$3=e.toString()}else this.$3=c}}var c=a.prototype;c.getKeySystem=function(){return"com.widevine.alpha"};c.getSchemeId=function(){return"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};c.getInitDatas=function(){return this.$2};c.setInitDatas=function(a){this.$2=a};c.getRequireDistinctiveIdentifier=function(){return"optional"};c.getRequirePersistentState=function(){return"optional"};c.getInitDataTypes=function(){return};c.getDrmSessionTypes=function(){return["temporary"]};c.getAudioRobustness=function(){return""};c.getVideoRobustness=function(){return""};c.getServerCertificate=function(){return this.$1};c.getLicenseRequestInfo=function(a){var c={url:this.$3,method:"POST",body:"",headers:{}};this.$4&&(c.credentials="include");a=b("oz-player/drm/OzDrmUtils").arrayBufferToBase64(a);if(this.$5){var d={request:a};c.body=JSON.stringify(d);c.headers["Content-Type"]="application/json"}else c.body=a,c.headers["Content-Type"]="application/text";return c};c.parseLicenseResponse=function(a){a=String.fromCharCode.apply(null,a);var c;try{c=JSON.parse(a)}catch(a){c=void 0}var d;if(c!==void 0&&c.data!==void 0&&c.data.length===1){c=c.data[0];c.error!==null&&c.error!==void 0||(d=c.license)}else d=a;return d!==void 0&&d!==null&&d!==""?b("oz-player/drm/OzDrmUtils").base64ToUint8Array(d):null};return a}();e.exports=a}),null);
__d("oz-player/shims/OzDOMEventListener",["requireCond","cr:1615796"],(function(a,b,c,d,e,f){"use strict";a=b("cr:1615796");e.exports=a}),null);
__d("oz-player/shims/OzSubscriptionsHandler",["requireCond","cr:1615800"],(function(a,b,c,d,e,f){"use strict";a=b("cr:1615800");e.exports=a}),null);
__d("VideoPlayerOzImplementationEnginePartsImplUtils",["OzWidevineDrmProvider","gkx","oz-player/strategies/OzBufferingDetector","qex"],(function(a,b,c,d,e,f){"use strict";f.checkShouldIncludeOsParam=a;f.checkShouldIncludeCredentials=c;f.createOzBufferingDetector=d;f.createOzDrmProviders=e;f.createOzPerfLoggerProviders=i;f.calculateInitialPlaybackPositionForDynamicMpd=j;f.calculateLiveheadFallBehindBlockThreshold=k;f.calculateLiveheadFallBehindBlockMargin=l;var g=/(livestream-)?lookaside\.(facebook|workplace)\.com$/,h=b("qex")._("1770917");function a(a){return h!==null&&h!==void 0&&h!==""?{os_param:h}:null}function c(a){return g.test(a.getDomain())}function d(a,c,d,e,f){if(f.current!=null)return;var g=!0,h=function(){if(g)return!1;var a=f.current!==i;return a&&b("gkx")("1508440")?!0:!1},i=new(b("oz-player/strategies/OzBufferingDetector"))(a,d,function(){var a=e.getCurrentState();a=a.controlledState;return a.streamEnded?c.getDuration():Infinity});f.current=i;g=!1;a=function(){if(h())return;if(b("gkx")("1235655"))return;e.dispatch({type:"buffering_begin_requested"})};d=function(){if(h())return;e.dispatch({type:"buffering_end_requested"})};i.addListener("enterBuffering",a);i.addListener("leaveBuffering",d)}function e(a){var c=a.accessToken,d=a.graphQLVideoDRMInfo;a=a.videoFBID;var e=[];d&&a!=null&&e.push(new(b("OzWidevineDrmProvider"))(a,d.graphApiVideoLicenseUri,d.videoLicenseUriMap,c,null));return e}function i(a){var b=a.VideoPlayerShakaPerformanceLoggerClass,c=a.accessToken,d=a.getApproximateFBLSToPlayerDisplayLatency,e=a.getBandwidthEstimate,f=a.playbackIsLiveStreaming,g=a.playerInstanceCount,h=a.playerInstanceKey,i=a.playerSuborigin,j=a.playerVersion,k=a.videoElement;a=a.videoFBID;if(!b||!b.shouldInitialize())return[];d={accessToken:c,getApproximateFBLSToPlayerDisplayLatency:d,getBandwidthEstimate:e,isLive:f,isServableViaFbms:!1,playerInstanceCount:g,playerOrigin:null,playerSuborigin:i,playerVersion:j,representationId:null,uniqueID:h,video:k,videoID:(c=a)!=null?c:""};return[new b(d)]}function j(a,b){return b>0?b/1e3*-1:a.getNumber("live_initial_playback_position",0)}function k(a,b,c){return b>0&&c>0?(b+c)/1e3:a.getNumber("livehead_fall_behind_block_threshold",0)}function l(a,b){return b>0?b/2/1e3:a.getNumber("live_time_range_block_margin",0)}}),null);
__d("MosUtils",[],(function(a,b,c,d,e,f){"use strict";f.getQualityLabel=g;f.getMosValue=h;f.parsePlaybackMos=a;f.filterTracksWithExpensiveMos=b;function g(a,b){if(a===0||b===0)return 0;if(a<b){var c=a;a=b;b=c}c=a/b;return c>16/9?Math.round(a/(16/9)):b}function h(a,b){var c=null,d=null,e=null,f=null;for(var g=0;g<a.length;g++){var h=a[g].qualityLabel;if(h<=b)e=a[g].mosValue,c=h;else{f=a[g].mosValue;d=h;break}}if(c===null&&d===null)return 0;else if(c===null&&f!==null)return f;else if(d===null&&e!==null)return e;else if(f!==null&&e!==null&&c!==null&&d!==null){h=e+(b-c)*(f-e)/(d-c);return h<0?0:h>100?100:h}return 0}function a(a){a=a.split(",");var b=[];for(var c=0;c<a.length;c++){var d=a[c].split(":");if(d.length!==2)return null;var e=Number(d[0]);d=Number(d[1]);if(isNaN(e)||isNaN(d))return null;b.push({qualityLabel:e,mosValue:d})}return b}function b(a,b,c,d,e,f){if(a.length<2)return a;var i=a.map(function(a){return{track:a,mosValue:a.playbackResolutionMos?h(a.playbackResolutionMos,g(b,c)):-1}}),j=[],k=e;for(var l=i.length-1;l>0;l--){if(i[l].mosValue===-1||i[l-1].mosValue===-1)return a;var m=i[l].track.bandwidth||-1,n=i[l-1].track.bandwidth||-1;if(m===-1||n===-1)return a;if(i[l].mosValue<i[l-1].mosValue&&m>=n)continue;m=i[l-1].track.bandwidth!==null?i[l].mosValue-i[l-1].mosValue:Infinity;if(m<=k&&i[l].track.bandwidth&&d/i[l].track.bandwidth<=f){k-=m;continue}else k=e;j.push(i[l].track)}j.push(i[0].track);j.reverse();return j}}),null);
__d("oz-player/configs/OzPlayerConfigDefaults",[],(function(a,b,c,d,e,f){a={abr_use_download_time:!1,allow_queueing_end_of_stream_when_update:!1,append_last_segment_if_beyond_end:!0,back_off_pdash_504_retry:!0,bandwidth_ignore_on_stream_write_samples:!1,bandwidth_use_response_time_adjustment:!1,buffer_when_waiting:!1,call_end_of_stream_in_quick_starter:!0,cancel_tracker_on_append_error:!0,check_buffer_range_once_for_playhead_update:!1,cleanup_video_node_on_destroy:!0,clear_buffer_when_switch_representation_initiator_is_user:!0,convert_dom_exception_to_oz_error:!1,copy_new_manifest:!0,delay_stream_end_for_sourceended:!0,detach_media_source_manager:!0,disable_audio_scheduler:!1,emit_stream_error_event:!0,enable_abr_for_first_request:!1,enable_adaptation:!0,enable_appends_on_wait_update_end_failure:!1,enable_network_manager_error:!1,enable_quickdashv2:!0,estimate_video_bandwidth_only:!0,exclude_prefetch_bandwidth_samples:!0,fallback_on_append_error:!1,fix_abr_default_representation:!0,fix_buffer_ahead_priority_strategy:!0,fix_prepended_segments_tagging:!0,fix_quick_starter_overhead:!0,fix_reload_manifest_retry:!0,fix_seek_performance:!1,fix_setup_video_duration_on_representation_switch:!0,fix_source_buffer_error_logging:!0,fix_stream_deferred_cancel:!0,fix_template_duration_artifact_in_manifest:!0,generate_mos_segment_buffer_diff:!1,handle_mpd_retries_outside_oz_mpd_updater:!0,handle_switch_to_unparsed_representation_sidx:!0,ignore_time_to_response_start:!1,lazy_parse_sidx:!1,listen_for_canplay_in_buffering_detector:!0,live_audio_ibr:!0,live_catch_up_only_when_paused:!1,live_disable_mpd_updates_when_paused:!0,live_gracefully_handle_410:!0,live_gracefully_handle_mpd_errors:!0,live_gracefully_handle_no_network:!0,live_no_segment_when_playhead_is_before_first_segment:!0,live_playhead_catch_up:!1,live_query_time_in_range:!0,load_video_node_on_unload:!0,log_appended_secs:!1,maybe_end_stream_if_prepended_segments:!0,media_source_is_available_in_ended_state:!1,mpd_update_cancel_current_request_tracker:!0,no_new_loop_body_promise_when_stream_ongoing:!0,pausable_stream_throws_error_when_aborted:!0,pdash_download_cursor_catchup_skip_totalbufer:!0,pdash_use_pdash_segmentlocator:!1,playhead_manager_handle_timerange_update_on_timeupdate:!0,prevent_unnecessary_seek_stream_anchor_reset:!1,queue_data_with_error_handling:!1,reach_end_only_when_video_ended:!1,remove_src_attr_on_unload:!0,respect_initial_representation_on_setup:!1,retry_fetch_on_prefetch_error:!1,sbm_abort_on_readable_stream_error:!0,sbm_check_source_buffer_ready_state_on_cancel:!1,sbm_recursively_waits_for_update_end:!1,sbm_waits_for_update_end:!0,seek_ahead_use_native_current_time:!0,seek_to_start_quick_starter:!0,set_source_buffer_append_window_end:!1,set_stream_anchor_only_on_done_status:!0,skip_videobuffer_gaps:!1,skip_videobuffer_gaps_on_buffer_updated:!1,stable_buffered_timeranges_in_observedsourcebufferstate:!0,stop_manifest_update_when_static:!0,suppress_playing_event_while_buffering:!1,throw_network_error_during_stream:!1,throw_on_non_zero_r_d_mismatch:!0,touch_cb_key:!1,update_bandwidth_cache_on_sample:!1,update_duration_when_init_appended:!0,update_live_video_config_on_representation_switch:!0,update_media_source_duration:!0,use_abr_for_missing_default_representation:!0,use_deferred_streaming_task:!0,use_loose_manifest_updates:!1,use_performance_entry_on_stream_close:!1,use_scf_timebased_segments:!1,use_scheduler:!0,use_sc_timebased_segments:!1,use_segment_request_cache:!1,use_stream_end_time_in_segment_locator:!1,use_templated_pdash_segments:!1,xmlparser_use_domparser:!1};b={abr_confidence_threshold:.9,abr_eval_buffer_threshold:0,abr_min_bandwidth_samples:0,abr_prevent_down_switch_buffer_threshold:11,abr_restrict_from_index:0,abr_restrict_to_index:0,append_byte_target_without_range:1e5,appends_per_segment:3,auto_seek_playhead_slack:.5,bandwidth_boundary_standard_deviation_factor:1,bandwidth_estimator_half_life:6,bandwidth_estimator_outlier_exclusion_factor:50,bandwidth_estimator_std_dev_penalty_factor:0,bandwidth_estimator_variance_penalty_down_factor:0,bandwidth_estimator_variance_penalty_half_life:0,bandwidth_estimator_variance_penalty_up_factor:0,bandwidth_penalty_additional_video_start:0,bandwidth_penalty_per_additional_video:0,bandwidth_response_time_handicap:0,buffer_ahead_target:22,byte_count_per_sample:2e5,default_bandwidth_estimate:1e6,download_time_buffer_delta_penalty_factor:0,initial_manifest_request_retry_count:3,initial_switch_interval:0,in_play_buffer_overflow_target:1,in_play_buffer_underflow_target:.1,live_audio_ibr_bandwidth_percentage:.05,live_catch_up_fall_behind_threshold:20,live_catch_up_live_head_delta:6,live_max_try_attempts_on_404:2,live_numerical_error_epsilon:1e-4,low_buffer_bandwidth_target_increase_factor:0,low_buffer_bandwidth_target_threshold:10,low_segment_stream_playhead_threshold:0,max_bandwidth_sample_count:30,maximum_bandwidth_sample_bandwidth:2e6,max_start_eme_attempts:3,min_block_time_range_interval_ms:0,min_eval_interval:100,minimum_bandwidth_sample_duration:30,minimum_bytes_to_sample_on_close:25e3,minimum_download_additional_buffer_ms:0,min_switch_interval:100,network_seg_timeout_ms:0,partial_playback_buffer_overflow:0,paused_stream_segments_count:2,pdash_download_cursor_catchup_threshold_sec:0,pdash_download_cursor_catchup_tolerance_sec:0,per_stream_duration_target:0,pixels_above_viewport_to_observe:0,pixels_below_viewport_to_observe:0,playhead_manager_timeupdate_throttle_ms:1e3,playhead_nudge_slack:.1,pre_start_buffer_ahead_target:16.924449682236,prioritize_by_viewport_static_penalty:0,resolution_constraint_factor:2,sbm_read_timeout_ms:0,seconds_to_stream:10,seconds_to_stream_near_bandwidth_boundary:10,seek_ahead_epsilon:.05,segments_to_stream:5,segments_to_stream_near_bandwidth_boundary:5,segments_to_stream_under_playhead_threshold:0,skip_videobuffer_gaps_max_gap_size_sec:0,start_buffer_underflow_target:.1,stream_interrupt_check_mpd_stale_count_threshold:3,tagged_time_range_per_append_throttle:0,timeline_offset_threshold:10,time_to_first_byte_estimate_half_life_ms:500};c={bandwidth_cache_key:"bandwidthEstimate",network_end_broadcasts_json:'["410"]',network_reload_mpd_json:"[]",network_retry_intervals_json:'{"0": 1000, "404": 2000, "502": 1000, "503": 1000, "504": 1000, "429": 2000, "20": 1000}',network_skip_json:"[]",stream_types_eligible_for_partial_playback:""};e.exports={defaultBools:a,defaultNumbers:b,defaultStrings:c}}),null);
__d("oz-player/configs/OzPlayerConfig",["oz-player/configs/OzPlayerConfigDefaults"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var c=a.prototype;c.getBool=function(a){return b("oz-player/configs/OzPlayerConfigDefaults").defaultBools[a]};c.getNumber=function(a){return b("oz-player/configs/OzPlayerConfigDefaults").defaultNumbers[a]};c.getString=function(a){return b("oz-player/configs/OzPlayerConfigDefaults").defaultStrings[a]};c.getLegacyConfig=function(){return{getBool:function(a,c){return(a=b("oz-player/configs/OzPlayerConfigDefaults").defaultBools[a])!=null?a:c},getNumber:function(a,c){return(a=b("oz-player/configs/OzPlayerConfigDefaults").defaultNumbers[a])!=null?a:c},getString:function(a,c){return(a=b("oz-player/configs/OzPlayerConfigDefaults").defaultStrings[a])!=null?a:c}}};return a}();e.exports=a}),null);
__d("oz-player/configs/OzConfigUtils",["oz-player/configs/OzPlayerConfig"],(function(a,b,c,d,e,f){"use strict";var g=new(b("oz-player/configs/OzPlayerConfig"))();a=function(a){return{getBool:function(b){return a.getBool(b,g.getBool(b))},getNumber:function(b){return a.getNumber(b,g.getNumber(b))},getString:function(b){return a.getString(b,g.getString(b))},getLegacyConfig:function(){return a}}};f.provideConfigWithDefaults=a}),null);
__d("VideoPlayerOzImplementationEnginePartsImplFunction",["Promise","CometThrottle","ConstUriUtils","OzActiveActiveFailoverNetworkRequestStreamHandler","OzConfigurableRequestImplementation","OzCustomParsers","OzCustomRepresentationParsers","OzDashPrefetchCache","OzOneSemanticHandler","OzPredictedSegmentTimelineParser","OzVideoLiveTraceNetworkRequestStreamHandler","P2PPlaybackSessionLogger","TimeRanges","VideoPlayerConnectionQuality","VideoPlayerOzImplementationEnginePartsImplUtils","getOzPlaybackRestrictions","gkx","oz-player/configs/OzConfigUtils","oz-player/networks/OzBandwidthEstimator","requireCond","unrecoverableViolation","cr:1836349","cr:1836099"],(function(a,b,c,d,e,f){"use strict";f.proceedWithOzPlayerCreation=a;var g=null,h=null;b("cr:1836099")&&(g=b("cr:1836099").HiveConfig,h=b("cr:1836099").HiveOz);function a(a){var c=a.OzPlayerClass,d=a.callChain,e=a.destroyOzPlayerPartsRef,f=a.engineDebugAPI,i=a.engineExtrasAPI,j=a.getCaptionsInfo,k=a.getOzQuickStarter,l=a.getVideoLiveTrace,m=a.handleCaptionsInfoChange,n=a.handleFatalImplementationError,o=a.hivePluginRef,p=a.initialProps,q=a.logger,r=a.machine,s=a.overrideOzRequestImplementationRef,t=a.ozBufferingDetectorRef,u=a.ozPlayerRef,v=a.p2pSessionLoggerRef,w=a.playerVersion,x=a.resolvedVideoInfo,y=a.videoElement;a=a.videoElementAPI;var z={current:null},A={current:null};e.current=function(a){var c=t.current;c&&(t.current=null,c.destroy());c=u.current;c&&(f&&f.handleOzPlayerChanged(null),u.current=null,c.destroy(b("gkx")("1435909")?[].concat(a,["destroyOzPlayerParts"]).join(":"):null));c=z.current;c&&(z.current=null,c());a=A.current;a&&(A.current=null);U();o.current&&(o.current=null);v.current&&(v.current=null);s.current&&(s.current=null)};e=x.VideoPlayerShakaPerformanceLoggerClass;var B=x.accessToken,C=x.experimentationConfig,D=x.graphQLVideoDRMInfo,E=x.graphQLVideoP2PSettings,F=x.manifestUrl,G=x.manifestXmlStringResolved,H=x.minQualityPreference;x=x.videoFBID;k=k();var I=Boolean(p.loggingMetaData.coreVideoPlayerMetaData.isLiveStreaming),J=function(a){return i.getEstimatedBandwidth()},K=function(){return i.getApproximateFBLSToPlayerDisplayLatency()},L=function(){C.setContext("connection_quality",b("VideoPlayerConnectionQuality").evaluate(function(){return J(I)}))},M=function(){var a=C.getNumber("connection_quality_context_throttle_frequency",0);if(a===0)return null;var c=b("CometThrottle")(L,a),d=b("oz-player/networks/OzBandwidthEstimator").addListener("bandwidth_sampled",c);return function(){d.remove(),c.cancel()}};z.current=M();M=b("VideoPlayerOzImplementationEnginePartsImplUtils").createOzDrmProviders({accessToken:B,graphQLVideoDRMInfo:D,videoFBID:x});D=b("VideoPlayerOzImplementationEnginePartsImplUtils").createOzPerfLoggerProviders({VideoPlayerShakaPerformanceLoggerClass:e,accessToken:B,getApproximateFBLSToPlayerDisplayLatency:K,getBandwidthEstimate:J,playbackIsLiveStreaming:I,playerInstanceCount:p.loggingMetaData.playerImplementationInstanceCountRef.current,playerInstanceKey:p.loggingMetaData.instanceKey,playerSuborigin:p.loggingMetaData.coreVideoPlayerMetaData.subOrigin,playerVersion:w,videoElement:y,videoFBID:x});b("cr:1836349")!=null&&A.current==null&&(A.current=new(b("cr:1836349"))());if(E&&x!=null){B=E.hive_initialization_options;w=v.current=(K=v.current)!=null?K:new(b("P2PPlaybackSessionLogger"))(x);try{if(!o.current){w.logEnableP2P();K=function(a){v.current&&v.current.logHiveError(a)};x=function(b){var a=u.current;a&&a.injectExternalDebugEvent("P2PTech",b.tech);v.current&&v.current.logSessionActive(b.tech)};var N=function(b){var a=u.current;a&&a.injectExternalDebugEvent("P2PStats",b);v.current&&v.current.setCurrentHiveStats(b)};N={HiveJS:{renderStatsCallback:N},HiveJava:{},debugLevel:"off",hiveTechOrder:["HiveJS","StatsJS"],onActiveSession:x,onError:K,telemetryId:w.getSessionID()};if(B){x=B.HiveJava;K=B.debugLevel;B=B.hiveTechOrder;N.hiveTechOrder=B.slice();N.HiveJava=x?{minVersion:x.minVersion}:{};N.debugLevel=(B=K)!=null?B:N.debugLevel}if(g)g.SensitiveInfo.restrictedConnectivityInfo=!0;else throw b("unrecoverableViolation")("HiveConfig does not exist","comet_video_player");if(h)o.current=new h(N);else throw b("unrecoverableViolation")("HiveOz does not exist","comet_video_player");o.current&&(s.current=b("OzConfigurableRequestImplementation")(o.current.getRequestImplementation()))}}catch(a){w.logError(a),U()}}x=[new(b("OzVideoLiveTraceNetworkRequestStreamHandler"))(function(a,b){var c=l();c!=null&&c.handleHeaders(a,b)})];b("OzActiveActiveFailoverNetworkRequestStreamHandler")&&x.push(new(b("OzActiveActiveFailoverNetworkRequestStreamHandler"))(function(a,c){if(b("gkx")("1664503")){var d=u.current,e=a.headers;if(d&&e){e=parseInt(e.get("x-fb-video-replica"),10);q.logVPLEvent({eventType:"replica_switch",logDataOverrides:{error_code:a.status.toString(),error_user_info:JSON.stringify({failover_response_code:a.status.toString(),replica:e,url:c})},state:r.getCurrentState()});a=d.getMpdUrl();if(a!=null){c=b("ConstUriUtils").getUri(a);c&&(c.addQueryParam("replica",e),d.updatePlayerRunTimeConfig({manifestUrl:c.toString()}))}}}}));K={config:b("oz-player/configs/OzConfigUtils").provideConfigWithDefaults(C),customParsers:b("OzCustomParsers").createOzCustomParser(),customRepresentationParsers:b("OzCustomRepresentationParsers").createOzCustomRepresentationParsers({ozConfig:C}),customSegmentTimelineParser:C.getBool("enable_predictive_dash",!1)?new(b("OzPredictedSegmentTimelineParser"))():void 0,debugCreateInitiator:b("gkx")("1435909")?[].concat(d,["proceedWithOzPlayerCreation"]).join(":"):null,drmProviders:M,getCustomRequestParametersForURI:function(a){var c=a.getQueryData(),d;I&&(d=babelHelpers["extends"]({},b("VideoPlayerOzImplementationEnginePartsImplUtils").checkShouldIncludeOsParam(a)));if(b("gkx")("1836350")){c.uss!=null&&c.odm!=null&&(d=babelHelpers["extends"]({},d,{manual_redirect:"1"}));c=A.current;if(c!=null){a=a.getDomain()+a.getPath();c=c.get(a);if(c!=null)for(var e in c){d=babelHelpers["extends"]({},d,(a={},a[e]=c[e],a))}}}return d},getOverrideOzRequestImplementation:function(){return s.current},getShouldIncludeCredentials:C.getBool("use_oz_credentials_provider",!1)?b("VideoPlayerOzImplementationEnginePartsImplUtils").checkShouldIncludeCredentials:null,getVideoDimensions:function(){return r.getCurrentState().controlledState.dimensions},initialPlaybackPositionForDynamicMpd:b("VideoPlayerOzImplementationEnginePartsImplUtils").calculateInitialPlaybackPositionForDynamicMpd(C,(K=p.initialDesiredLatencyMs)!=null?K:0),initialRepresentationIDs:(B=p.initialRepresentationIds)!=null?B:[],liveheadFallBehindBlockMargin:b("VideoPlayerOzImplementationEnginePartsImplUtils").calculateLiveheadFallBehindBlockMargin(C,(N=p.initialDesiredLatencyMs)!=null?N:0),liveheadFallBehindBlockThreshold:b("VideoPlayerOzImplementationEnginePartsImplUtils").calculateLiveheadFallBehindBlockThreshold(C,(w=p.initialDesiredLatencyMs)!=null?w:0,(d=p.initialLatencyToleranceMs)!=null?d:0),loggerConfig:{isOzDevConsoleEnabled:b("gkx")("722076"),observedOperationLoggers:k&&e&&e.shouldInitialize()?k.getObservedOperationLoggers():[],perfLoggerProviders:D},mpdUrl:F,networkRequestStreamHandlers:x,networkRequestStreamRetryHandler:b("gkx")("1836350")?function(a,c){var d=a.headers,e=d==null?void 0:d.get("x-fb-url-refresh");d=A.current;if(d!=null&&a.status===403&&e!=null){q.logVPLEvent({eventType:"video_cdn_url_expired",state:r.getCurrentState()});return d.refresh(e).then(function(){q.logVPLEvent({eventType:"video_cdn_url_refreshed",state:r.getCurrentState()});return c()})["catch"](function(a){q.logVPLEvent({eventType:"video_cdn_url_refresh_error",logDataOverrides:{error_description:a.message,resource_url:e},state:r.getCurrentState()});throw a})}return b("Promise").resolve(a)}:null,prefetchCache:C.getBool("use_prefetch_cache",!1)?new(b("OzDashPrefetchCache"))():null,rawMpdXml:G,seekHandler:b("gkx")("1482680")?function(a){var b=y.currentTime;r.dispatch({payload:{seekSourcePosition:b},type:"implementation_seek_requested"});y.currentTime=a}:null,startTimeStamp:C.getBool("fix_start_timestamp",!1)?p.startTimestamp:0,videoNodeOrQuickStarter:(M=k)!=null?M:y,videoPlaybackRestrictions:b("getOzPlaybackRestrictions")(H,C)};var O=new c(K);u.current=O;B=p.loggingMetaData.playerImplementationInstanceCountRef;B.current++;O.onError(function(a){n(a,"oz_player_error")});O.addListener("switchVideoRepresentation",function(){r.dispatch({payload:{targetVideoQuality:i.getCurrentTargetVideoQuality()},type:"representation_changed"})});O.addListener("manifestFetchError",function(a){b("OzOneSemanticHandler").handleManifestFetchErrorEvent(C,a)});O.addListener("streamError",function(a){return b("OzOneSemanticHandler").handleStreamErrorEvent(C,a)});O.addListener("streamInterruptAt",function(){r.dispatch({type:"stream_interrupted"})});O.addListener("streamResumedAt",function(){r.dispatch({type:"stream_resumed"})});O.addListener("streamEnd",function(){U(),r.dispatch({type:"stream_ended"})});k==null?(O.addListener("enterBuffering",function(){if(b("gkx")("1235655"))return;r.dispatch({type:"buffering_begin_requested"})}),O.addListener("leaveBuffering",function(){r.dispatch({type:"buffering_end_requested"})})):b("VideoPlayerOzImplementationEnginePartsImplUtils").createOzBufferingDetector(y,a,C,r,t);f&&f.handleOzPlayerChanged(O);var P=function(){var a=j();a={inbandCaptionsAutogeneratedFromManifest:i.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:i.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:a==null?void 0:a.inbandCaptionsExpectedFromProps,sideLoadCaptionsExpectedFromProps:a==null?void 0:a.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:a==null?void 0:a.sideLoadCaptionsUrlFromProps};var b=r.getCurrentState();b=b.controlledState;(a.inbandCaptionsExpectedFromManifest!==b.captionsLoaded||a.inbandCaptionsAutogeneratedFromManifest!==b.inbandCaptionsAutogenerated)&&m(a)},Q=function(a,b){a=a.getCustomField("timescale")||0;r.dispatch({payload:{timescale:a,videoBytes:b},type:"cea608_bytes_received"})},R=function(){var a=i.getVideoRepresentations();if(a!=null&&a.length>0){a=a[0].getTimeRanges();if(a!=null&&a.length>0){var c=a[0].startTime;a=Math.max(a[a.length-1].endTime-C.getNumber("live_rewind_seek_to_live_delta",8),c);r.dispatch({payload:{seekableRanges:new(b("TimeRanges"))([{endTime:a,startTime:c}])},type:"seekable_ranges_changed"})}}},S=function(){var a=O.getMpd();if(!a)return;a=a.getCustomField("loapStreamType");var b=l();typeof a==="number"&&b!=null&&b.setStreamType(a)},T=function(a){var c=function(){R(),P(),S()};a.addListener("updated",c);b("gkx")("1656434")&&c();O.updatePlayerRunTimeConfig({videoStreamDataHandler:Q});i.isPredictiveDash()&&(C.setContext("latency_level","predictive"),C.setContext("streaming_implementation","pdash"));a=j();m({inbandCaptionsAutogeneratedFromManifest:i.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:i.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:a==null?void 0:a.inbandCaptionsExpectedFromProps,sideLoadCaptionsExpectedFromProps:a==null?void 0:a.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:a==null?void 0:a.sideLoadCaptionsUrlFromProps})};O.addListener("mpdReady",function(a){T(a);r.dispatch({payload:{availableQualities:i.getAvailableVideoQualities(),selectedVideoQuality:i.getUserSelectedVideoQuality(),targetVideoQuality:i.getCurrentTargetVideoQuality(),videoProjection:(a=i.getVideoProjectionType())!=null?a:null},type:"implementation_engine_initialized"})});function U(){var a=o.current,b=v.current;try{a&&a.closeHiveSession(),b&&b.logEndSession()}catch(a){b&&b.logHiveError(a)}s.current=null}N=o.current;if(F!=null&&E&&N){w=E.ticket;if(w!=null){d=F.substring(F.indexOf("?"));e=N.initSession(w+d,O,y);e.then(function(a){var b=a.manifest;a=a.tech;var c=v.current;b!==F&&c&&c.logManifestMismatch(b,F);c&&c.logSessionInit(a,b);O.load(b)})["catch"](function(a){var b=v.current;b&&b.logError(a);U();O.load(F)})}}else C.getBool("live_use_inline_manifest_after_request_manifest",!1)&&I&&F!=null&&G!=null?O.loadMpdUrlButUseInlinedManifestForExperimentingOnly_DO_NOT_USE(F):O.load(F)}}),null);
__d("VideoPlayerOzQuickStarterUtils",["VideoDashPrefetchCache"],(function(a,b,c,d,e,f){"use strict";f.createPrefetchDataForTrack=a;function g(a,c,d){c=b("VideoDashPrefetchCache").createQueryStringURL(c);c=b("VideoDashPrefetchCache").getCacheValue(c);if(!c){a.push(d);return null}return c}function h(a,b){return a.find(function(a){return a.segmentType===b})}function a(a,b,c){var d=h(b,"init");b=h(b,"data");if(d){var e=g(a,d,c+" init");if(!e)return null;var f;b&&(f=g(a,b,c+" data"));return{initializationPromise:e,mimeCodec:d.mimeCodec,representationID:d.representationID,segmentPromise:f}}return null}}),null);
__d("VideoPlayerOzImplementationEngine",["VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerODS","VideoPlayerOzImplementationEngineExtrasAPI","VideoPlayerOzImplementationEnginePartsImplFunction","VideoPlayerOzImplementationEnginePartsImplUtils","VideoPlayerOzQuickStarterUtils","emptyFunction","gkx","oz-player/utils/OzError","promiseDone","requireCond","unrecoverableViolation","cr:1494458","cr:1473549","cr:1534629","cr:1494460"],(function(a,b,c,d,e,f){"use strict";f.createVideoPlayerOzImplementationEngine=a;c=!1;var g=b("emptyFunction");function h(a,c){if(a instanceof b("oz-player/utils/OzError")){var d=a,e=d.getExtra();d={createdTimestamp:Date.now(),errorCode:e.code,errorDescription:d.getDescription(),errorLocation:c,errorName:d.getType(),stack:d.stack,url:e.url};return d}else return b("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError("OZ_JAVASCRIPT_NATIVE",a,c)}function a(a){var c=a.debugLogId,d=a.handleFatalError,e=a.initialProps;a=a.setExposedStateInReact;var f={current:null},i={current:null},j={current:null},k={current:null},l={current:null},m={current:null},n={current:null},o={current:null},p={current:null},q={current:null},r={current:null},s={current:null};function t(){var a;return(a=o.current)!=null?a:null}function u(){var a;return(a=n.current)!=null?a:null}function v(){return m.current}function w(){var a;return(a=(a=i.current)==null?void 0:a.experimentationConfig)!=null?a:null}function x(){var a;return(a=U.current)!=null?a:null}var y;b("cr:1473549")&&(y=new(b("cr:1473549"))());var z="comet_oz",A=function(a,b){return b.manifestXmlStringInitial!==null?a.manifestXmlStringInitial!==b.manifestXmlStringInitial:a.manifestUrl!==b.manifestUrl},B=function(a,b){return a.videoFBID!==b.videoFBID},C=function(a){return a.getBool("use_full_player_if_cached",!1)&&b("cr:1534629")?b("cr:1534629")().getModuleIfRequireable():null},D=function(a,b,c){b!=null?i.current=babelHelpers["extends"]({},a,{manifestXmlStringResolved:b}):i.current=a,T.dispatch({type:"implementation_engine_oz_manifest_downloading"}),l.current=C(a.experimentationConfig),H(l.current,[].concat(c,["proceedWithOzManifestDownloading"]))},E=function(a){var c;c={VideoPlayerShakaPerformanceLoggerClass:a.VideoPlayerShakaPerformanceLoggerClass,accessToken:a.loggingMetaData.accessToken,experimentationConfig:a.experimentationConfig,graphQLVideoDRMInfo:a.graphQLVideoDRMInfo,graphQLVideoP2PSettings:a.graphQLVideoP2PSettings,manifestUrl:(c=a.manifestUrl)!=null?c:null,manifestXmlStringInitial:(c=a.manifest)!=null?c:null,minQualityPreference:a.minQualityPreference,ozQuickStarterData:a.ozQuickStarterData,videoFBID:a.videoFBID};a=f.current;var d=!1;if(a==null)d=!0;else if(a!=null&&!B(c,a)&&A(c,a)){var e=14;b("VideoPlayerODS").bumpEntityKey("OzImplementation","manifest_reloaded",e);d=!1}else if(a!=null&&B(c,a))throw b("unrecoverableViolation")("videoFBID changed after player initialization","comet_video_player");if(!d)return!1;e=c.manifestUrl;a=c.manifestXmlStringInitial;if(a==null&&e==null)throw b("unrecoverableViolation")("Empty manifestXmlStringInitial and manifestUrl","comet_video_player");f.current=c;D(c,a,["handleVideoInfoChangeForOzImplementation","downloadManifestInOz_EXPERIMENTAL"]);return!0},F=function(a,c,d,e,f){var g=function(b){if(k.current!==a)return;l.current=b;H(b,[].concat(f,["handleOzPlayerModuleLoadSuccess"]))},h=function(b){if(k.current!==a)return;R(b,"oz_player_module_load_failed")};k.current=a;if(m.current==null&&c!=null&&e!=null){c=new c(d,e.experimentationConfig);b("gkx")("1494163")&&(m.current=c);d=e.ozQuickStarterData;if(d!=null){e=[];var i=b("VideoPlayerOzQuickStarterUtils").createPrefetchDataForTrack(e,d.video,"video");if(i){c.addPrefetchTrack(i);i=b("VideoPlayerOzQuickStarterUtils").createPrefetchDataForTrack(e,d.audio,"audio");i&&c.addPrefetchTrack(i)}}c.addListener("streamEnd",function(){T.dispatch({type:"stream_ended"})});b("gkx")("1494163")||(m.current=c)}b("promiseDone")(a,g,h)},G=function(a){a=b("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(a);U.current=a;return a},H=function(a,c){var d=O(),e=i.current;if(d==null||e==null)return;var f=G(d),g=e.experimentationConfig;a?I(a,d,f,e,[].concat(c,["proceedWithResolvedVideoInfo","OzPlayerModuleFromRef"])):b("cr:1494460")?I(b("cr:1494460")(),d,f,e,[].concat(c,["proceedWithResolvedVideoInfo","VideoPlayerOzPlayerModuleLoaderSync"])):b("cr:1534629")?(g.getBool("instantiate_buffering_detector_before_quick_starter",!1)&&b("VideoPlayerOzImplementationEnginePartsImplUtils").createOzBufferingDetector(d,f,e.experimentationConfig,T,o),F(b("cr:1534629")().load(),b("cr:1494458"),d,e,[].concat(c,["proceedWithResolvedVideoInfo","VideoPlayerOzPlayerModuleLoaderAsync"]))):R(new Error("Neither of OzPlayerModuleLoader is available."),"oz_player_module_loaders_missing")},I=function(a,c,d,f,g){try{a={OzPlayerClass:a,callChain:[].concat(g,["proceedWithResolvedVideoInfoAndOzPlayerModuleSync"]),destroyOzPlayerPartsRef:s,engineDebugAPI:y,engineExtrasAPI:M,getCaptionsInfo:N,getOzQuickStarter:v,getVideoLiveTrace:P,handleCaptionsInfoChange:Q,handleFatalImplementationError:R,initialProps:e,logger:S,machine:T,ozBufferingDetectorRef:o,playerVersion:z,resolvedVideoInfo:f,videoElement:c,videoElementAPI:d};b("VideoPlayerOzImplementationEnginePartsImplFunction").proceedWithOzPlayerCreation(babelHelpers["extends"]({},a,{hivePluginRef:p,overrideOzRequestImplementationRef:r,ozPlayerRef:n,p2pSessionLoggerRef:q}));j.current=f}catch(a){R(a,"oz_player_create_exception")}};function J(a){b("gkx")("1494163")&&(j.current=null);var c=s.current;c!=null&&(s.current=null,c(a));c=m.current;c&&(m.current=null);b("gkx")("1494163")&&(m.current=null)}function K(){if(b("gkx")("1494163"))f.current=null,i.current=null,j.current=null;else{if(b("gkx")("1431367"))return;f.current=null;i.current=null;j.current=null}}function L(){k.current=null,l.current=null}var M=b("VideoPlayerOzImplementationEngineExtrasAPI").createVideoPlayerOzImplementationEngineExtrasAPI({getConfig:w,getOzPlayer:u,getOzQuickStarter:v,getVideoElementAPI:x});w=b("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({createDebugAPI:function(b){var a=b.getVideoElementAPI;b=b.logger;return y?y.createDebugAPI({engineExtrasAPI:M,getConfig:function(){var a;return(a=(a=j.current)==null?void 0:a.experimentationConfig)!=null?a:null},getManifest:function(){var a;return(a=(a=j.current)==null?void 0:a.manifestXmlStringResolved)!=null?a:null},getManifestUrl:function(){var a;return(a=(a=j.current)==null?void 0:a.manifestUrl)!=null?a:null},getOzBufferingDetector:t,getOzPlayer:u,getVideoElementAPI:a,logger:b}):null},createVideoPlayerError:h,debugLog:g,debugLogId:c,destroyEngineParts:function(a){J([].concat(a,["destroyEngineParts"])),K(),L()},engineExtrasAPI:M,engineMetadata:{isAbrEnabled:!0,playerImplementationName:"oz_v2",playerVersion:z,streamingFormat:"dash"},handleFatalError:d,handleVideoElementMounted:function(a){var b=O();H(l.current,[].concat(a,["handleVideoElementMounted"]))},handleVideoElementUnmounted:function(a){(b("gkx")("1494163")||b("gkx")("1380112"))&&J([].concat(a,["handleVideoElementUnmounted"]))},handleVideoInfoChange:E,initialProps:e,setExposedStateInReact:a});x=w.engine;var N=w.getCaptionsInfo,O=w.getVideoElement,P=w.getVideoLiveTrace,Q=w.handleCaptionsInfoChange,R=w.handleFatalImplementationError,S=w.logger,T=w.machine,U=w.videoElementAPIRef;return x}}),null);
__d("VideoPlayerOzImplementationV2.react",["React","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationReactVideoElement.react","VideoPlayerOzImplementationEngine"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=b("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(a,b("VideoPlayerOzImplementationEngine").createVideoPlayerOzImplementationEngine),d=c[0];c=c[1];return g.jsx(b("VideoPlayerImplementationReactVideoElement.react"),{implementationController:c.implementationController,implementationExposedState:d,renderWithVideoImplementationStates:a.renderWithVideoImplementationStates,videoElementCallbacks:c.videoElementCallbacks,videoElementRefCallback:c.videoElementRefCallback})}}),null);
__d("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay",["requireDeferredForDisplay"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("requireDeferredForDisplay")("oz-player");function a(){return{getModuleIfRequireable:function(){return g.getModuleIfRequireable()||null},load:function(){return g.load()}}}}),null);
__d("VideoPlayerShakaImplementationData",[],(function(a,b,c,d,e,f){"use strict";f.makeShakaImplementationData=a;function a(a){var b=a.videoData;a=a.videoPlayerShakaConfig;return b==null?null:{videoData:b,videoPlayerShakaConfig:a}}}),null);
__d("useOzImplementationData",["CometRelay","React","VideoPlayerOzImplementationData","VideoPlayerOzWWWConfig","useOzImplementationData_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a,c){var d=c.manifestURL_DO_NOT_USE,e=c.ozQuickStarterData,f=c.videoPlayerShakaConfig,i=h.useMemo(function(){return f==null?null:new(b("VideoPlayerOzWWWConfig"))(f)},[f]),j=b("CometRelay").useFragment(g!==void 0?g:g=b("useOzImplementationData_video.graphql"),a);return h.useMemo(function(){return b("VideoPlayerOzImplementationData").makeOzImplementationData({canUseOz:j.can_use_oz,dashManifest:d!=null?null:j.dash_manifest,dashUrl:d!=null?d:j.playable_url_dash,experimentationConfig:i,minQualityPreference:j.min_quality_preference,ozQuickStarterData:d!=null?null:e,videoFBID:j.id})},[j,d,i,e])}}),null);
__d("useProgressiveImplementationData",["CometRelay","VideoPlayerProgressiveImplementationData","useProgressiveImplementationData_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g;function a(a,c){var d,e;c=c.initialForceHD;c=c===void 0?!1:c;a=b("CometRelay").useFragment(g!==void 0?g:g=b("useProgressiveImplementationData_video.graphql"),a);d=a.is_spherical===!0?(d=(d=a.spherical_video_fallback_urls)==null?void 0:d.hd)!=null?d:a.playable_url_quality_hd:a.playable_url_quality_hd;e=a.is_spherical===!0?(e=(e=a.spherical_video_fallback_urls)==null?void 0:e.sd)!=null?e:a.playable_url:a.playable_url;return b("VideoPlayerProgressiveImplementationData").makeProgressiveImplementationData({hdSrc:d,hdSrcPreferred:c===!0||a.min_quality_preference==="HD"||a.min_quality_preference==="UHD",sdSrc:e})}}),null);
__d("useShakaImplementationData",["CometRelay","React","VideoPlayerShakaImplementationData","recoverableViolation","requireCond","cr:1604324","useShakaImplementationData_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a,c){var d=c.videoPlayerShakaConfig,e=b("CometRelay").useFragment(g!==void 0?g:g=b("useShakaImplementationData_video.graphql"),a);return h.useMemo(function(){var a;a=(a=e.video_player_shaka_live_p2p_init)==null?void 0:a.json_encoded_video_data;if(a==null)return null;if(b("cr:1604324")==null)return b("recoverableViolation")("VideoData is not supported","comet_video_player");var c=null;try{c=new(b("cr:1604324"))(JSON.parse(a))}catch(a){b("recoverableViolation")("VideoData JSON is broken","comet_video_player")}return b("VideoPlayerShakaImplementationData").makeShakaImplementationData({videoData:c,videoPlayerShakaConfig:d})},[e,d])}}),null);
__d("useVideoPlayerShakaPerformanceLoggerRelay",["CometRelay","useVideoPlayerShakaPerformanceLoggerRelay_init.graphql","useVideoPlayerShakaPerformanceLoggerRelay_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h;g!==void 0?g:g=b("useVideoPlayerShakaPerformanceLoggerRelay_init.graphql");function a(a){a=b("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerShakaPerformanceLoggerRelay_video.graphql"),a);a=a.video_player_shaka_performance_logger_init?b("CometRelay").ModuleResource.read(a.video_player_shaka_performance_logger_init):null;a!=null&&a.forceShouldInitialize();return a}}),null);
__d("useVideoImplementations",["CometRelay","ErrorMetadata","VideoPlayerOzImplementationV2.react","VideoPlayerProgressiveImplementationV2.react","err","gkx","manifestHasUnsupportedCodecs","recoverableViolation","requireCond","useOzImplementationData","useProgressiveImplementationData","useShakaImplementationData","cr:1604325","useVideoImplementations_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g;function a(a,c){var d=[],e=c.forceProgressiveImpl;e=e===void 0?!1:e;var f=c.initialForceHD;f=f===void 0?!1:f;var h=c.manifestURL_DO_NOT_USE,i=c.ozQuickStarterData,j=c.videoFBID;c=c.videoPlayerShakaConfig;a=b("CometRelay").useFragment(g!==void 0?g:g=b("useVideoImplementations_video.graphql"),a);var k=b("useShakaImplementationData")(a,{videoPlayerShakaConfig:c});k!=null&&(b("cr:1604325")==null?b("recoverableViolation")("VideoPlayerShakaImplementation is not supported","comet_video_player"):d.push({Component:b("cr:1604325"),data:k,typename:"VideoPlayerShakaImplementation"}));k=b("useOzImplementationData")(a,{manifestURL_DO_NOT_USE:h,ozQuickStarterData:i,videoPlayerShakaConfig:c});h=k!=null&&b("manifestHasUnsupportedCodecs")(k.manifest);!e&&k!=null&&(k.manifest!=null&&!h||k.manifestUrl!=null)&&d.push({Component:b("VideoPlayerOzImplementationV2.react"),data:k,typename:"VideoPlayerOzImplementation"});i=b("useProgressiveImplementationData")(a,{initialForceHD:f});b("VideoPlayerProgressiveImplementationV2.react")!=null&&i!=null&&d.push({Component:b("VideoPlayerProgressiveImplementationV2.react"),data:i,typename:"VideoPlayerProgressiveImplementation"});if(d.length===0&&b("gkx")("1611172")){c=b("err")("Cannot play video: No matching video player implementations");a={forced_progressive:e,has_oz_data:k!=null,has_oz_manifest:(k==null?void 0:k.manifest)!=null,has_oz_manifest_url:(k==null?void 0:k.manifestUrl)!=null,has_oz_unsupported_codecs:h,has_progressive_data:i!=null};c.metadata=new(b("ErrorMetadata"))();c.metadata.addEntries(["COMET_VIDEO","VIDEO_ID",String(j)],["COMET_VIDEO","VIDEO_IMPLEMENTATION_DEBUG_DATA",JSON.stringify(a)]);b("recoverableViolation")("useVideoImplementations: No matching video player implementations","comet_video_player",{error:c})}return d}}),null);
__d("VideoPlayerShakaBandwidthEstimator",["CacheStorage","Run","VideoPlayerShakaGlobalConfig","requireWeak"],(function(a,b,c,d,e,f){var g;b("requireWeak")("Shaka",function(a){g=a.util.EWMACacheBandwidthEstimator});var h=null,i=!1;a=function(){function a(){var a=this,c=new(b("CacheStorage"))("localstorage","_video_"),d=c.get("bandwidthEstimate");this.$1={isMockObject:!0,getBandwidth:function(a){return d},getFastMovingBandwidth:function(){return d}};g&&(this.$1=new g(b("VideoPlayerShakaGlobalConfig").getNumber("cache_delay",30),b("VideoPlayerShakaGlobalConfig").getNumber("cache_bandwidth",2e6),function(){b("VideoPlayerShakaGlobalConfig").getBool("shaka_update_bandwidth_cache_on_sample",!1)&&c.set("bandwidthEstimate",a.$1.getBandwidth())},d),this.$1.isMockObject=!1);b("Run").onUnload(function(){c.set("bandwidthEstimate",a.$1.getBandwidth())})}var c=a.prototype;c.getEstimator=function(){return this.$1};a.getInstance=function(){(h===null||h.getEstimator().isMockObject&&g)&&(h=new a());return h};a.getEstimator=function(){return a.getInstance().getEstimator()};a.getBandwidth=function(b){var c=a.getEstimator();return c.getBandwidth(b)};a.getBandwidthByVideoType=function(b){return a.getBandwidth(a.getBandwidthModel(b))};a.getBandwidthModel=function(a){return a?"aggressive":"conservative"};a.isAutoplayBandwidthRestrained=function(c){var d=a.getEstimator(),e;b("VideoPlayerShakaGlobalConfig").getBool("block_autoplay_use_fast_moving_average",!0)&&i?e=d.getFastMovingBandwidth():e=d.getBandwidth();d=c?b("VideoPlayerShakaGlobalConfig").getNumber("live_block_autoplay_bandwidth_threshold",25e4):b("VideoPlayerShakaGlobalConfig").getNumber("block_autoplay_bandwidth_threshold",123034);e===null||e>=d?i=!1:i=!0;return i};return a}();e.exports=a}),null);
__d("VideoPlayerShakaConfigContextProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var b=a.prototype;b.setContext=function(a,b){if(this.$1[a]!==b){var c;this.$1=Object.assign({},this.$1,(c={},c[a]=b,c))}};b.setAllContexts=function(a){this.$1=a};b.getAllContexts=function(){return this.$1};return a}();e.exports=a}),null);
__d("VideoPlayerShakaConfig",["VideoPlayerContextSensitiveConfigResolver","VideoPlayerShakaConfigContextProvider"],(function(a,b,c,d,e,f){var g={};a=function(){function a(a,c,d){this.$1=new(b("VideoPlayerShakaConfigContextProvider"))(),this.$2=c||null,this.$3=new(b("VideoPlayerContextSensitiveConfigResolver"))(d),this.$3.setContexts(a||{}),a&&this.$1.setAllContexts(a)}a.setGlobalOverrideConfig=function(a){g=a};var c=a.prototype;c.setContext=function(a,b){var c=this.$1.getAllContexts();this.$1.setContext(a,b);a=this.$1.getAllContexts();c!==a&&this.$3.setContexts(a)};c.setOverrideConfig=function(a){this.$2=a};c.getBool=function(a,b){a=this.$4(a,b);return typeof a==="boolean"?a:b};c.getNumber=function(a,b){a=this.$4(a,b);return typeof a==="number"?a:b};c.getString=function(a,b){a=this.$4(a,b);return typeof a==="string"?a:b};c.getAllContexts=function(){return this.$1.getAllContexts()};c.$4=function(a,b){if(!!g&&typeof g[a]===typeof b)return g[a];if(typeof this.$3.getValue(a)===typeof b)return this.$3.getValue(a);return!!this.$2&&typeof this.$2[a]===typeof b?this.$2[a]:null};return a}();e.exports=a}),null);
__d("useVideoPlayerShakaConfig",["CometRelay","React","VideoPlayerConnectionQuality","VideoPlayerShakaBandwidthEstimator","VideoPlayerShakaConfig","useSelectedLatencySetting","useVideoPlayerShakaConfig_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a,c){c=c.adClientToken;var d=b("CometRelay").useFragment(g!==void 0?g:g=b("useVideoPlayerShakaConfig_video.graphql"),a),e=c!=null,f=d.is_spherical===!0,i=d.is_gaming_video===!0;a=b("useSelectedLatencySetting")(d.id,d.selected_latency_setting);var j=a[0];c=h.useState(function(){return new(b("VideoPlayerShakaConfig"))({connection_quality:b("VideoPlayerConnectionQuality").evaluate(b("VideoPlayerShakaBandwidthEstimator").getBandwidth),content_category:i?"gaming":"general",is_ad:e,is_live:!1,is_spherical:f,latency_level:d.is_latency_menu_enabled===!0?j:"normal",player_format:"inline",servable_via_fmbs:!1,streaming_implementation:"default"})});var k=c[0];h.useEffect(function(){k.setContext("is_ad",e)},[k,e]);h.useEffect(function(){k.setContext("is_spherical",f)},[k,f]);return k}}),null);
__d("OzDOMEventListenerImpl",["requireCond","cr:1351686"],(function(a,b,c,d,e,f){"use strict";a={listenDOMEvent:b("cr:1351686").listen,captureDOMEvent:b("cr:1351686").capture,suppressDOMEvent:b("cr:1351686").suppress};c=a;e.exports=c}),null);
__d("oz-player/loggings/OzLoggingUtils",[],(function(a,b,c,d,e,f){"use strict";f.executeOperationAndLog=a;f.monitorPromiseAndLogOperation=b;function a(a,b,c){a=a.getOperationLogger(b).start();try{b=c(a);return b}catch(b){a.setError(b);throw b}finally{a.log()}}function b(a,b,c,d,e){d===void 0&&(d=function(){});e===void 0&&(e=function(){});var f=b.getOperationLogger(c).start();d(f);return a.then(function(a){e(f);f.log();return a})["catch"](function(a){e(f);f.setError(a);f.log();throw a})}}),null);
__d("oz-player/loggings/OzOperationLoggerBase",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.start=function(){this.getClientTimeBegin()||this.setClientTimeBegin(Date.now());return this};b.log=function(){this.getClientTimeEnd()||this.setClientTimeEnd(Date.now())};b.setError=function(a){this.$2=a;return this};b.setResult=function(a){this.$3=a;return this};b.setType=function(a){this.$4=a;return this};b.setClientTimeBegin=function(a){this.$5=a;return this};b.setClientTimeEnd=function(a){this.$6=a;return this};b.setSegmentCount=function(a){this.$13=a;return this};b.setTimeToFirstByte=function(a){this.$7=a;return this};b.setTimeToLastByte=function(a){this.$8=a;return this};b.setTimeToRequestStart=function(a){this.$9=a;return this};b.setTimeToRequestSent=function(a){this.$10=a;return this};b.setReason=function(a){this.$11=a;return this};b.setResource=function(a){this.$12=a;return this};b.setSegmentStartTime=function(a){this.$14=a;return this};b.setSegmentEndTime=function(a){this.$15=a;return this};b.setLength=function(a){this.$16=a;return this};b.setLiveheadPosition=function(a){this.$17=a;return this};b.setLiveheadSeqNumHeader=function(a){this.$18=a;return this};b.setLiveheadSeqNumMpd=function(a){this.$19=a;return this};b.setManifestType=function(a){this.$20=a;return this};b.setPriorityFloat=function(a){this.$21=a;return this};b.setAppendedBufferMs=function(a){this.$22=a;return this};b.setInitiator=function(a){this.$23=a;return this};b.setPreloadTime=function(a){this.$24=a;return this};b.setConcluder=function(a){this.$25=a;return this};b.setPreviousRepresentationID=function(a){this.$26=a;return this};b.setRepresentationID=function(a){this.$27=a;return this};b.setStreamSwitchReason=function(a){this.$28=a;return this};b.setState=function(a){this.$29=a;return this};b.setContentLengthHeader=function(a){this.$30=a;return this};b.setOriginHitHeader=function(a){this.$32=a;return this};b.setEdgeHitHeader=function(a){this.$33=a;return this};b.setCode=function(a){this.$31=a;return this};b.setResponseTimeMsHeader=function(a){this.$34=a;return this};b.getError=function(){return this.$2};b.getResult=function(){return this.$3};b.getType=function(){return this.$4};b.getClientTimeBegin=function(){return this.$5};b.getClientTimeEnd=function(){return this.$6};b.getTimeToRequestStart=function(){return this.$9};b.getTimeToRequestSent=function(){return this.$10};b.getReason=function(){return this.$11};b.getResource=function(){return this.$12};b.getOperationName=function(){return this.$1};b.getSegmentStartTime=function(){return this.$14};b.getSegmentEndTime=function(){return this.$15};b.getLength=function(){return this.$16};b.getLiveheadPosition=function(){return this.$17};b.getManifestType=function(){return this.$20};b.getPriorityFloat=function(){return this.$21};b.getAppendedBufferMs=function(){return this.$22};b.getInitiator=function(){return this.$23};b.getPreloadTime=function(){return this.$24};b.getConcluder=function(){return this.$25};b.getContentLengthHeader=function(){return this.$30};b.getOriginHitHeader=function(){return this.$32};b.getEdgeHitHeader=function(){return this.$33};b.getCode=function(){return this.$31};b.getResponseTimeMsHeader=function(){return this.$34};return a}();e.exports=a}),null);
__d("oz-player/loggings/OzMultiDestinationPerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzMultiDestinationPerfLoggerProvider1=b;return c}var c=b.prototype;c.createOperationLogger=function(a){var b=new g(a,this.$OzMultiDestinationPerfLoggerProvider1.map(function(b){return b.getOperationLogger(a)}));return b};c.createLoggerProvider=function(){return new b(this.$OzMultiDestinationPerfLoggerProvider1)};return b}(b("oz-player/loggings/OzPerfLoggerProviderBase"));f.OzMultiDestinationPerfLoggerProvider=a;var g=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.$OzMultiDestinationOperationLogger1=c;return a}var c=a.prototype;c.start=function(){b.prototype.start.call(this);this.$OzMultiDestinationOperationLogger1.forEach(function(a){return a.start()});return this};c.setResult=function(a){b.prototype.setResult.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setResult(a)});return this};c.setError=function(a){b.prototype.setError.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setError(a)});return this};c.setType=function(a){b.prototype.setType.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setType(a)});return this};c.setClientTimeEnd=function(a){b.prototype.setClientTimeEnd.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setClientTimeEnd(a)});return this};c.setClientTimeBegin=function(a){b.prototype.setClientTimeBegin.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setClientTimeBegin(a)});return this};c.setSegmentCount=function(a){b.prototype.setSegmentCount.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setSegmentCount(a)});return this};c.setTimeToFirstByte=function(a){b.prototype.setTimeToFirstByte.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToFirstByte(a)});return this};c.setTimeToLastByte=function(a){b.prototype.setTimeToLastByte.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToLastByte(a)});return this};c.setTimeToRequestStart=function(a){b.prototype.setTimeToRequestStart.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToRequestStart(a)});return this};c.setTimeToRequestSent=function(a){b.prototype.setTimeToRequestSent.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToRequestSent(a)});return this};c.setReason=function(a){b.prototype.setReason.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setReason(a)});return this};c.setResource=function(a){b.prototype.setResource.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setResource(a)});return this};c.setSegmentStartTime=function(a){b.prototype.setSegmentStartTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setSegmentStartTime(a)});return this};c.setSegmentEndTime=function(a){b.prototype.setSegmentEndTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setSegmentEndTime(a)});return this};c.setAppendedBufferMs=function(a){b.prototype.setAppendedBufferMs.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setAppendedBufferMs(a)});return this};c.setLength=function(a){b.prototype.setLength.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLength(a)});return this};c.setLiveheadPosition=function(a){b.prototype.setLiveheadPosition.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLiveheadPosition(a)});return this};c.setLiveheadSeqNumHeader=function(a){b.prototype.setLiveheadSeqNumHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLiveheadSeqNumHeader(a)});return this};c.setLiveheadSeqNumMpd=function(a){b.prototype.setLiveheadSeqNumMpd.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLiveheadSeqNumMpd(a)});return this};c.setManifestType=function(a){b.prototype.setManifestType.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setManifestType(a)});return this};c.setPriorityFloat=function(a){b.prototype.setPriorityFloat.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPriorityFloat(a)});return this};c.setInitiator=function(a){b.prototype.setInitiator.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setInitiator(a)});return this};c.setPreloadTime=function(a){b.prototype.setPreloadTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPreloadTime(a)});return this};c.setConcluder=function(a){b.prototype.setConcluder.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setConcluder(a)});return this};c.setPreviousRepresentationID=function(a){b.prototype.setPreviousRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPreviousRepresentationID(a)});return this};c.setRepresentationID=function(a){b.prototype.setRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setRepresentationID(a)});return this};c.setState=function(a){b.prototype.setState.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setState(a)});return this};c.setContentLengthHeader=function(a){b.prototype.setContentLengthHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setContentLengthHeader(a)});return this};c.setEdgeHitHeader=function(a){b.prototype.setEdgeHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setEdgeHitHeader(a)});return this};c.setOriginHitHeader=function(a){b.prototype.setOriginHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setOriginHitHeader(a)});return this};c.setCode=function(a){b.prototype.setCode.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setCode(a)});return this};c.setResponseTimeMsHeader=function(a){b.prototype.setResponseTimeMsHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setResponseTimeMsHeader(a)});return this};c.log=function(){b.prototype.log.call(this),this.$OzMultiDestinationOperationLogger1.forEach(function(a){return a.log()})};return a}(b("oz-player/loggings/OzOperationLoggerBase"))}),null);
__d("oz-player/loggings/OzPreInitLogger",["oz-player/shims/OzEventEmitter","oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f){"use strict";var g=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.$OzPreInitOperationLogger1=c;return a}var c=a.prototype;c.log=function(){b.prototype.log.call(this),this.$OzPreInitOperationLogger1(this)};return a}(b("oz-player/loggings/OzOperationLoggerBase"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$OzPreInitLoggerProvider1=!1,d.$OzPreInitLoggerProvider2=[],d.$OzPreInitLoggerProvider3=new(b("oz-player/shims/OzEventEmitter"))(),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.deactivate=function(){this.$OzPreInitLoggerProvider1=!1};d.activate=function(){var a=this;this.$OzPreInitLoggerProvider1=!0;this.$OzPreInitLoggerProvider2.forEach(function(b){a.$OzPreInitLoggerProvider3.emit("operation_logged",b)});this.$OzPreInitLoggerProvider2=[]};d.setOperationLoggedListener=function(a){return this.$OzPreInitLoggerProvider3.addListener("operation_logged",function(b){a(b)})};d.createOperationLogger=function(a){var b=this;a=new g(a,function(a){b.$OzPreInitLoggerProvider1?b.$OzPreInitLoggerProvider3.emit("operation_logged",a):b.$OzPreInitLoggerProvider2.push(a)});return a};d.createLoggerProvider=function(){return new c()};return c}(b("oz-player/loggings/OzPerfLoggerProviderBase"));f.OzPreInitLoggerProvider=a}),null);
__d("oz-player/media_source/OzMediaErrorProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.hasError=function(){return this.$1.error!==null};b.getMediaErrorName=function(){var a=this.$1.error;return a&&a.message?this.$2(a.message):null};b.getErrorCode=function(){var a=this.$1.error;return a&&a.code?a.code:null};b.getVideoNode=function(){return this.$1};b.$2=function(a){a=a.split(":")[0];return a||""};return a}();e.exports=a}),null);
__d("oz-player/shims/ozClearTimeout",["requireCond","cr:1615802"],(function(a,b,c,d,e,f){"use strict";a=b("cr:1615802");e.exports=a}),null);
__d("oz-player/states/OzObservedSourceBufferState",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";var g=b("oz-player/shims/OzDOMEventListener").listenDOMEvent;a=function(){function a(a,c){var d=this;this.$2=new(b("oz-player/shims/OzSubscriptionsHandler"))();this.$3=[];this.$5=function(){if(d.$4.getBool("stable_buffered_timeranges_in_observedsourcebufferstate")){var a=d.$1.buffered,b=[];for(var c=0;c<a.length;c++)b.push({startTime:a.start(c),endTime:a.end(c)});d.$3=b}else{a=[];for(var c=0;c<d.$1.buffered.length;c++)a.push({startTime:d.$1.buffered.start(c),endTime:d.$1.buffered.end(c)});d.$3=a}};this.$1=a;this.$4=c;this.$2.addSubscriptions(g(this.$1,"updateend",this.$5),g(this.$1,"error",this.$5))}var c=a.prototype;c.getBufferedRanges=function(){return this.$3};c.addEventListener=function(a,b){return g(this.$1,"updateend",b)};c.destroy=function(){this.$2.release(),this.$2.engage()};return a}();e.exports=a}),null);
__d("oz-player/utils/OzCustomErrorCode",[],(function(a,b,c,d,e,f){"use strict";a={SOURCE_BUFFER_UNKNOWN_ERROR:"21539",SOURCE_BUFFER_HAS_BEEN_REMOVED:"21540",SOURCE_BUFFER_ERROR_ATTRIBUTE_NOT_NULL:"21541",SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:"21542"};b=a;e.exports=b}),null);
__d("oz-player/utils/OzSourceBufferUtil",[],(function(a,b,c,d,e,f){"use strict";f.getTotalBufferedTime=a;f.getEndBufferedTime=b;function a(a){var b=0;for(var c=0;c<a.buffered.length;c++)b+=a.buffered.end(c)-a.buffered.start(c);return b}function b(a){return a.buffered.length==0?0:a.buffered.end(a.buffered.length-1)}}),null);
__d("oz-player/utils/ozConcatArrayBuffer",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);c.set(new Uint8Array(a),0);c.set(new Uint8Array(b),a.byteLength);return c.buffer}}),null);
__d("oz-player/media_source/SourceBufferManager",["oz-player/loggings/OzLoggingUtils","oz-player/shims/ozClearTimeout","oz-player/shims/OzDeferred","oz-player/shims/OzDOMEventListener","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzReadableStream","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzObservedSourceBufferState","oz-player/utils/OzCustomErrorCode","oz-player/utils/ozConcatArrayBuffer","oz-player/utils/OzError","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f){"use strict";var g=b("oz-player/shims/OzDOMEventListener").listenDOMEvent,h=b("oz-player/shims/ozSetTimeoutAcrossTransitions");a=function(){function a(a,c,d,e){var f=this;this.$2=null;this.$3=new(b("oz-player/shims/OzSubscriptionsHandler"))();this.$6=!1;this.$7=[];this.$12=!1;this.$13=!1;this.$24=function(){if(f.$9.hasError()){f.$13=!1;f.$12=!1;var a=f.$9.getMediaErrorName();a=a!==null&&a!==void 0?a:"An unknown source buffer error occurred.";var c=f.$9.getErrorCode();c=c!==null&&c!==void 0?c:b("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_UNKNOWN_ERROR;a=new(b("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:a,extra:{code:c.toString()}});f.$2&&f.$2.reject(a);f.$2=null;f.cancelOperationAndCleanQueue()}else f.$13||(f.$13=!0,f.$3.addSubscriptions(g(f.$9.getVideoNode(),"error",f.$24)))};this.$15=function(){var a=f.$2;a&&(f.$12?f.$24():(a.resolve(),f.$2&&(f.$2=null)))};this.$16=function(){f.$10.getBool("fix_source_buffer_error_logging")?f.$12=!0:f.$25()};this.$1=a;this.$10=c;this.$3.addSubscriptions(g(this.$1,"updateend",this.$15),g(this.$1,"error",this.$16));this.$8=new(b("oz-player/states/OzObservedSourceBufferState"))(this.$1,this.$10);this.$9=d;this.$14=e}var c=a.prototype;c.queueData=function(a,c,d,e){c===void 0&&(c=null);d===void 0&&(d=0);e===void 0&&(e=null);var f=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));this.$7.push({data:a,deferred:f,loggerProvider:c,appendTarget:d,onDataAppend:e});a=f.getPromise();this.$6||(this.$10.getBool("queue_data_with_error_handling")?this.$17():this.$18());return a};c.cancelOperationAndCleanQueue=function(){var a=this.$19();this.$7.forEach(function(b){b=b.deferred;b.reject(a)});this.$7=[];this.$10.getBool("sbm_check_source_buffer_ready_state_on_cancel")?this.$1&&this.$14()&&this.$1.abort():this.$1.abort();var c=b("oz-player/shims/OzMaybeNativePromise").resolve(),d=this.$2;d&&(d.reject(a),c=d.getPromise()["catch"](function(){}));this.$4&&(this.$4.reject(a),this.$4=null);return c};c.getSourceBufferState=function(){return this.$8};c.clearRange=function(a,b){this.$1.remove(a,b)};c.$20=function(a){var c=this.$2=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));c=c.getPromise();a&&b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(c,a,"wait_for_source_buffer");return c};c.$21=function(a,c,d){var e=this;if(this.$2!==null)return b("oz-player/shims/OzMaybeNativePromise").reject(this.$22("cannot have concurrent appends"));var f=function f(){if(e.$10.getBool("sbm_recursively_waits_for_update_end")&&e.$1.updating)return e.$20(c).then(f)["catch"](function(a){if(e.$10.getBool("enable_appends_on_wait_update_end_failure"))return f();throw a});var g=e.$2=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise")),h=!1;try{h=e.$1.updating,e.$1.appendBuffer(a)}catch(a){var i=b("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_HAS_BEEN_REMOVED;e.$9.hasError()?i=b("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_ERROR_ATTRIBUTE_NOT_NULL:h&&(i=b("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE);h=new(b("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:a.message,extra:{originalError:a,code:i.toString()}});e.$2=null;g.reject(h)}i=g.getPromise();c&&b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(i,c,"append",function(b){b.setLength(a.byteLength)});var j=e.$10.getBool("log_appended_secs")?b("oz-player/utils/OzSourceBufferUtil").getTotalBufferedTime(e.$1):0;return i.then(function(){d&&d();return e.$10.getBool("log_appended_secs")?b("oz-player/utils/OzSourceBufferUtil").getTotalBufferedTime(e.$1)-j:0})};if(!this.$10.getBool("sbm_waits_for_update_end"))return f();return!this.$10.getBool("sbm_recursively_waits_for_update_end")&&this.$1.updating?this.$20(c).then(f)["catch"](function(a){if(e.$10.getBool("enable_appends_on_wait_update_end_failure"))return f();throw a}):f()};c.$18=function(){var a=this;if(this.$6)return b("oz-player/shims/OzMaybeNativePromise").reject(this.$22("Another unit of queued data is being appended."));var c=this.$7.shift();if(!c){this.$6=!1;return b("oz-player/shims/OzMaybeNativePromise").resolve()}var d=c.data,e=c.deferred,f=c.loggerProvider,g=c.appendTarget;c=c.onDataAppend;this.$6=!0;g=d instanceof b("oz-player/shims/OzReadableStream")?this.$23(d,f,g,c):this.$21(d,f,c);var h=NaN,i;this.$10.getBool("generate_mos_segment_buffer_diff")?i=new(b("oz-player/utils/OzNumericalRangeUtil"))().convertFromTimeRanges(this.$8.getBufferedRanges()):h=b("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(this.$1);return g["catch"](function(a){e.reject(a);return 0}).then(function(c){if(a.$10.getBool("generate_mos_segment_buffer_diff")){c=new(b("oz-player/utils/OzNumericalRangeUtil"))().firstAddedInSortedRanges(i,new(b("oz-player/utils/OzNumericalRangeUtil"))().convertFromTimeRanges(a.$8.getBufferedRanges()));h=(c==null?void 0:c.rangeStart)||0;c=(c==null?void 0:c.rangeEnd)||0}else c=b("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(a.$1);e.resolve({startTime_UNSAFE:h,endTime_UNSAFE:c,appendedSec:c-h});a.$6=!1;a.$18()})};c.$17=function(){var a=this;try{if(this.$6)throw this.$22("Another unit of queued data is being appended.");var c=this.$7.shift();if(!c){this.$6=!1;return}var d=c.data,e=c.deferred,f=c.loggerProvider;c=c.appendTarget;this.$6=!0;c=d instanceof b("oz-player/shims/OzReadableStream")?this.$23(d,f,c):this.$21(d,f);var g=b("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(this.$1);c.then(function(c){c=b("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(a.$1);e.resolve({startTime_UNSAFE:g,endTime_UNSAFE:c,appendedSec:c-g})},function(a){e.reject(a)})["finally"](function(){a.$6=!1,a.$17()})}catch(a){new(b("oz-player/utils/OzError"))({type:"OZ_JAVASCRIPT_NATIVE",description:a.message,extra:{originalError:a,code:"0"}})}};c.$23=function(a,c,d,e){var f=this,g=new ArrayBuffer(0),i=a.getReader();a=function a(){var j=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));f.$4=j;var k=null;f.$10.getNumber("sbm_read_timeout_ms")>0&&(k=h(function(){var a=new(b("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:"ReadableStreamReader.read() timed out.",extra:{}});j.reject(a);f.$4=null;f.$5=k=null},f.$10.getNumber("sbm_read_timeout_ms")));i.read().then(function(a){j.resolve(a),f.$4=null,k&&(b("oz-player/shims/ozClearTimeout")(k),f.$5=k=null)})["catch"](function(a){j.reject(a),f.$4=null,k&&(b("oz-player/shims/ozClearTimeout")(k),f.$5=k=null)});return j.getPromise().then(function(h){var i=h.done;h=h.value;if(i)return g.byteLength>0?f.$21(g,c,e):b("oz-player/shims/OzMaybeNativePromise").resolve(0);i=h;d>0&&(h instanceof Uint8Array&&(h=h.buffer),g=b("oz-player/utils/ozConcatArrayBuffer")(g,h),i=g);if(i&&i.byteLength>=d){g=new ArrayBuffer(0);return f.$21(i,c,e).then(function(b){return a().then(function(a){return a+b})})}return a()},function(a){f.$10.getBool("sbm_abort_on_readable_stream_error")&&f.$1.abort();return b("oz-player/shims/OzMaybeNativePromise").reject(a)})};return a()};c.$25=function(){var a=this,c=this.$2;c&&(b("oz-player/shims/ozClearTimeout")(this.$11),this.$11=h(function(){a.$11=null;var d=a.$9.getErrorCode(),e=a.$9.getMediaErrorName(),f={};f.code=d!==null&&d!==void 0?d.toString():e!=null?e:"OZ_SB-1";d=new(b("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:e!==null&&e!==void 0?e:"Unknown SourceBuffer Append Error",extra:f});c.reject(d);a.$2=null},0))};c.$22=function(a){a=new Error(a);a.name="invariant_violation";return a};c.$19=function(){var a=new Error("operation is cancelled");a.name="cancelled";return a};c.destroy=function(){var a=this;this.$5&&b("oz-player/shims/ozClearTimeout")(this.$5);this.$5=null;b("oz-player/shims/ozClearTimeout")(this.$11);this.$11=null;var c=this.$2;c&&(!this.$13?(c.reject(this.$19()),this.$2=null,this.$3.release(),this.$3=new(b("oz-player/shims/OzSubscriptionsHandler"))()):c.getPromise()["catch"](function(){a.$2=null,a.$3.release(),a.$3=new(b("oz-player/shims/OzSubscriptionsHandler"))()}));this.$8.destroy()};c.getDebug=function(){return{SourceBuffer:this.$1}};return a}();e.exports=a}),null);
__d("oz-player/media_source/MediaSourceManager",["oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/shims/OzDeferred","oz-player/shims/OzDOMEventListener","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/media_source/OzMediaErrorProvider","oz-player/media_source/SourceBufferManager"],(function(a,b,c,d,e,f){"use strict";var g=b("oz-player/shims/OzDOMEventListener").listenDOMEvent;a=function(){function a(a,c,d){var e=this;d===void 0&&(d=new(b("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]));this.$3=new(b("oz-player/shims/OzSubscriptionsHandler"))();this.$5=[];this.$6=[];this.$8=!1;this.$10=!1;this.$12=function(){e.$13()||(e.$8=!1);if(!e.$14())return;var a=e.$6.shift();a&&(a(e.$2),e.$8=!0)};this.$4=d;this.$9=c;this.$1=a;this.$2=new MediaSource();this.$1.src=window.URL.createObjectURL(this.$2);this.$7=new(b("oz-player/media_source/OzMediaErrorProvider"))(this.$1);b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(this.$11(),this.$4,"media_source_open")}var c=a.prototype;c.$11=function(){var a=this;if(this.$2.readyState==="open")return b("oz-player/shims/OzMaybeNativePromise").resolve();var c=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(g(this.$2,"sourceopen",function(){c.resolve(),a.$12()}));return c.getPromise()};c.createSourceBufferManager=function(a,c){var d=this;c===void 0&&(c=!1);return this.$11().then(function(){var e=d.$2.addSourceBuffer(a);c&&!isNaN(d.$2.duration)&&(e.appendWindowEnd=d.$2.duration);d.$5.push(e);d.$3.addSubscriptions(g(e,"updateend",d.$12));return new(b("oz-player/media_source/SourceBufferManager"))(e,d.$9,d.$7,function(){var a=d.$2;if(a){a=d.$9.getBool("media_source_is_available_in_ended_state")?a.readyState!=="closed":a.readyState==="open";return a}return!1})})};c.getMediaSource=function(){return this.$2};c.notifyEndOfStream=function(){var a=this,c=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(g(this.$2,"sourceended",function(){c.resolve()}));this.$6.push(function(b){a.$4.getOperationLogger("end_of_stream").log(),b.endOfStream()});this.$12();return c.getPromise()};c.updateDuration=function(a){this.$6.push(function(b){b.duration=a}),this.$12()};c.detach=function(){this.$1.removeAttribute("src");for(var a=0;a<this.$2.sourceBuffers.length;a++){var b=this.$2.sourceBuffers[a];this.$2.removeSourceBuffer(b)}this.$3.release();this.$3.engage();this.$6=[];this.$8=!1;this.$10=!0};c.$14=function(){return!this.$13()&&this.$2.readyState==="open"&&!this.$8&&!this.$10};c.$13=function(){return this.$5.some(function(a){return a.updating})};return a}();e.exports=a}),null);
__d("oz-player/utils/OzErrorEmitter",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;c===void 0&&(c=!1);d=a.call(this)||this;d.$OzErrorEmitter1=!1;d.$OzErrorEmitter2=!1;d.$OzErrorEmitter3=[];d.emitError=function(a){!d.$OzErrorEmitter1?d.$OzErrorEmitter2?d.$OzErrorEmitter3.push(a):d.$OzErrorEmitter1||b("oz-player/shims/ozvariant")(0,14038):d.emit("error",a)};d.$OzErrorEmitter2=c;return d}var d=c.prototype;d.onError=function(a){this.$OzErrorEmitter1=!0;a=this.addListener("error",a);this.$OzErrorEmitter2&&this.$OzErrorEmitter3.length>0&&this.$OzErrorEmitter3.forEach(this.emitError);return a};return c}(b("oz-player/shims/OzEventEmitter"));e.exports=a}),null);
__d("oz-player/utils/maybeConvertReadableStreamToOzReadableStream",["regeneratorRuntime","oz-player/shims/OzReadableStream"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){if(!b("oz-player/shims/OzReadableStream").isPolyfilled)return a;var c=a.getReader();return new(b("oz-player/shims/OzReadableStream"))({start:function(a){var d,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=3;return b("regeneratorRuntime").awrap(c.read());case 3:d=g.sent;e=d.done;f=d.value;if(!e){g.next=8;break}return g.abrupt("break",11);case 8:a.enqueue(f);g.next=0;break;case 11:a.close();case 12:case"end":return g.stop()}},null,this)}})}}),null);
__d("oz-player/utils/convertPrefetchCacheEntryToReadableStream",["oz-player/shims/OzReadableStream","oz-player/utils/maybeConvertReadableStreamToOzReadableStream","oz-player/utils/OzError"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){var c=new(b("oz-player/shims/OzReadableStream"))({start:function(c){a.then(function(a){switch(a.initiator){case"XHR_REQUEST":var d=new Uint8Array(a.response);c.enqueue(d);c.close();break;case"FETCH":d=a.response.body;if(d!=null){var e=function a(){f.read().then(function(b){var d=b.done;b=b.value;if(d){c.close();return}c.enqueue(b);a()})["catch"](function(a){c.err(a)})},f=b("oz-player/utils/maybeConvertReadableStreamToOzReadableStream")(d).getReader();e()}else a.response.arrayBuffer().then(function(a){a=new Uint8Array(a);c.enqueue(a);c.close()})["catch"](function(a){c.err(a)});break;default:a.initiator,c.error(new(b("oz-player/utils/OzError"))({type:"OZ_UNEXPECTED_CACHE_INITIATOR",description:"Unable to handle request initiator: "+a.initiator}))}})["catch"](function(a){c.error(a)})}});return c}}),null);
__d("oz-player/media_source/OzQuickStarter",["oz-player/configs/OzConfigUtils","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzPreInitLogger","oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant","oz-player/utils/convertPrefetchCacheEntryToReadableStream","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/media_source/MediaSourceManager"],(function(a,b,c,d,e,f){"use strict";var g=.1;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){var f;e===void 0&&(e=[]);f=a.call(this)||this;f.$OzQuickStarter5=new Map();f.$OzQuickStarter6=[];f.$OzQuickStarter8=new Map();f.$OzQuickStarter9=new Map();f.$OzQuickStarter10=new(b("oz-player/utils/OzErrorEmitter"))(!0);f.$OzQuickStarter13=function(a){a instanceof b("oz-player/utils/OzError")||(a=new(b("oz-player/utils/OzError"))({type:"OZ_QUICKSTARTER",description:a.message,extra:{originalError:a}})),f.$OzQuickStarter10.emitError(a)};f.$OzQuickStarter3=c;f.$OzQuickStarter1=b("oz-player/configs/OzConfigUtils").provideConfigWithDefaults(d);f.$OzQuickStarter7=new(b("oz-player/loggings/OzPreInitLogger").OzPreInitLoggerProvider)();f.$OzQuickStarter7.setInitiator("quick_starter");f.$OzQuickStarter6.push(f.$OzQuickStarter7);f.$OzQuickStarter2=new(b("oz-player/media_source/MediaSourceManager"))(f.$OzQuickStarter3,f.$OzQuickStarter1,f.$OzQuickStarter7);f.$OzQuickStarter4=new Map();e.forEach(function(a){return f.addPrefetchTrack(a)});return f}var d=c.prototype;d.addPrefetchTrack=function(a){var c=this,d=a.mimeCodec,e=this.$OzQuickStarter11(d);if(!e)return;var f=this.$OzQuickStarter11(d),g=this.$OzQuickStarter12(this.$OzQuickStarter7).setType(f),h=this.$OzQuickStarter12(this.$OzQuickStarter7).setType(f+";init");this.$OzQuickStarter5.set(e,a.segmentPromise?1:0);f=this.$OzQuickStarter2.createSourceBufferManager(d).then(function(d){var f=b("oz-player/utils/convertPrefetchCacheEntryToReadableStream")(a.initializationPromise);b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a.initializationPromise,h,"fetch_stream");d.queueData(f,h)["catch"](c.$OzQuickStarter13);f=a.segmentPromise;if(f){var i=b("oz-player/utils/convertPrefetchCacheEntryToReadableStream")(f);b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(f,g,"fetch_stream");d.queueData(i,g).then(function(a){c.$OzQuickStarter8.set(e,a.appendedSec),c.$OzQuickStarter1.getBool("call_end_of_stream_in_quick_starter")&&c.$OzQuickStarter8.size===c.$OzQuickStarter4.size&&c.$OzQuickStarter14()&&(c.$OzQuickStarter2.notifyEndOfStream(),c.emit("streamEnd")),c.$OzQuickStarter1.getBool("seek_to_start_quick_starter")&&c.$OzQuickStarter8.size===c.$OzQuickStarter4.size&&c.$OzQuickStarter15()})["catch"](c.$OzQuickStarter13)}return d});this.$OzQuickStarter4.set(e,f);a.representationID&&this.$OzQuickStarter9.set(e,a.representationID)};d.onError=function(a){return this.$OzQuickStarter10.onError(a)};d.$OzQuickStarter15=function(){var a=this.$OzQuickStarter3.buffered.length>0?this.$OzQuickStarter3.buffered.start(0):null;a!==null&&this.$OzQuickStarter3.currentTime<a&&(this.$OzQuickStarter3.currentTime=a+g)};d.$OzQuickStarter14=function(){var a=this;if(Number.isNaN(this.$OzQuickStarter3.duration))return!1;var b=!0;this.$OzQuickStarter8.forEach(function(c){Math.abs(c-a.$OzQuickStarter3.duration)>g&&(b=!1)});return b};d.getSourceBufferManagerPromise=function(a){a=this.$OzQuickStarter11(a);return this.$OzQuickStarter4.get(a)};d.getPrependedSegmentsCount=function(a){var b=this.$OzQuickStarter11(a);if(!b)return 0;b=this.$OzQuickStarter5.get(b)||0;return this.getSourceBufferManagerPromise(a)?b:0};d.getRepresentationId=function(a){a=this.$OzQuickStarter11(a);return!a?null:this.$OzQuickStarter9.get(a)||null};d.getAudioRepresentationIDAtTime=function(a){return this.$OzQuickStarter16("audio",a)};d.getVideoRepresentationIDAtTime=function(a){return this.$OzQuickStarter16("video",a)};d.getVideoNode=function(){return this.$OzQuickStarter3};d.getMediaSourceManager=function(){return this.$OzQuickStarter2};d.getObservedOperationLoggers=function(){return this.$OzQuickStarter6};d.$OzQuickStarter16=function(a,b){var c=this.$OzQuickStarter8.get(a);return c!=null&&b<=c?this.$OzQuickStarter9.get(a):null};d.$OzQuickStarter12=function(a){a=a.cloneContext();a instanceof b("oz-player/loggings/OzPreInitLogger").OzPreInitLoggerProvider||b("oz-player/shims/ozvariant")(0,5677);this.$OzQuickStarter6.push(a);return a};d.$OzQuickStarter11=function(a){return(a.split("/")[0]||"").trim()};return c}(b("oz-player/shims/OzEventEmitter"));e.exports=a}),null);
__d("oz-player/shims/www/OzDOMEventListenerWWW",["OzDOMEventListenerImpl"],(function(a,b,c,d,e,f){"use strict";a=b("OzDOMEventListenerImpl");e.exports=a}),null);
__d("oz-player/shims/www/OzSubscriptionsHandlerWWW",["SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";a=b("SubscriptionsHandler");e.exports=a}),null);
__d("oz-player/shims/www/OzURIWWW",["URI"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a){this.$1=new(g||(g=b("URI")))(a)}var c=a.prototype;c.addQueryData=function(a,b){this.$1.addQueryData(a,b);return this};c.getQueryData=function(){return this.$1.getQueryData()};c.getDomain=function(){return this.$1.getDomain()};c.toString=function(){return this.$1.toString()};c.getPath=function(){return this.$1.getPath()};return a}();e.exports=a}),null);
__d("oz-player/shims/www/ozClearTimeoutWWW",["clearTimeout"],(function(a,b,c,d,e,f){"use strict";a=b("clearTimeout");e.exports=a}),null);
__d("oz-player/shims/www/ozThrottleWWW",["throttle"],(function(a,b,c,d,e,f){"use strict";a=b("throttle");e.exports=a}),null);
__d("oz-player/shims/www/ozvariantWWW",["invariant"],(function(a,b,c,d,e,f,g){a=g;e.exports=a}),null);
__d("XVideoUnifiedCVCControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f){a=b("jsRouteBuilder")("/video/unified_cvc/",Object.freeze({}),void 0);c=a;e.exports=c}),null);
__d("usePremiumMusicVideoInterruptionSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"PremiumMusicVideoInterruptionSubscribeResponsePayload",kind:"LinkedField",name:"premium_music_video_interruption_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"disable_autoplay",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"usePremiumMusicVideoInterruptionSubscription",selections:b,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"usePremiumMusicVideoInterruptionSubscription",selections:b},params:{id:"3656947831001794",metadata:{subscriptionName:"premium_music_video_interruption_subscribe"},name:"usePremiumMusicVideoInterruptionSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("VideoPlayerRelay_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},{defaultValue:null,kind:"LocalArgument",name:"playerSuborigin"},{defaultValue:"DEFAULT",kind:"LocalArgument",name:"videoPlayerContext"}],kind:"Fragment",metadata:null,name:"VideoPlayerRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcaster_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_streaming",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_trace_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_looping",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_video_broadcast",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"loop_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical_enabled",storageKey:null},{alias:null,args:null,concreteType:"MusicVideoMetadata",kind:"LinkedField",name:"pmv_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"permalink_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_url",storageKey:null},{alias:null,args:[{kind:"Variable",name:"player_origin",variableName:"playerOrigin"},{kind:"Variable",name:"player_suborigin",variableName:"playerSuborigin"}],kind:"ScalarField",name:"dash_prefetch_experimental",storageKey:null},{alias:null,args:null,concreteType:"VideoCaptionLocale",kind:"LinkedField",name:"video_available_captions_locales",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"localized_creation_method",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"SphericalVideoRenderer",kind:"LinkedField",name:"spherical_video_renderer",plural:!1,selections:[{documentName:"VideoPlayerRelay_video_spherical_video_renderer",fragmentName:"VideoPlayerSphericalRelay_sphericalVideoRenderer",fragmentPropName:"sphericalVideoRenderer",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreaks",kind:"LinkedField",name:"instream_video_ad_breaks_comet",plural:!1,selections:[{documentName:"VideoPlayerRelay_video_instream_video_ad_breaks_comet",fragmentName:"InstreamVideoAdBreaksPlayer_adBreaks",fragmentPropName:"adBreaks",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_premium_music_video",storageKey:null},{args:[{kind:"Variable",name:"playerOrigin",variableName:"playerOrigin"},{kind:"Variable",name:"playerSuborigin",variableName:"playerSuborigin"}],kind:"FragmentSpread",name:"useOzQuickStarterData_video"},{args:[{kind:"Variable",name:"videoPlayerContext",variableName:"videoPlayerContext"}],kind:"FragmentSpread",name:"useRelay3DVideoImplementations_video"},{args:null,kind:"FragmentSpread",name:"useVideoImplementations_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaConfig_video"},{args:null,kind:"FragmentSpread",name:"useResolvedVideoPlayerConfigs_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaPerformanceLoggerRelay_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoAutoplayGatingResult_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoDRMInfo_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoP2PSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAudioSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerCaptionsSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerLiveLatencyKnobSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAudioAvailabilityInfoRelay_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerAudioSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerAudioSettings_video",selections:[{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"video_volume_setting",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerAudioAvailabilityInfoRelay_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerAudioAvailabilityInfoRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_availability",storageKey:null},{alias:null,args:null,concreteType:"VideoMutedSegment",kind:"LinkedField",name:"muted_segments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"mute_start_time_in_sec",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mute_end_time_in_sec",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useGraphQLVideoAutoplayGatingResult_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoAutoplayGatingResult_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"autoplay_gating_result",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_autoplay_setting",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_autoplay",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useGraphQLVideoDRMInfo_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoDRMInfo_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"drm_info",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useOzQuickStarterData_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"start",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"representation_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mime_codec",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"segment_type",storageKey:null}];return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},{defaultValue:null,kind:"LocalArgument",name:"playerSuborigin"}],kind:"Fragment",metadata:null,name:"useOzQuickStarterData_video",selections:[{alias:null,args:[{kind:"Variable",name:"player_origin",variableName:"playerOrigin"},{kind:"Variable",name:"player_suborigin",variableName:"playerSuborigin"}],concreteType:"VideoPrefetchResources",kind:"LinkedField",name:"dash_prefetch_resources",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoPrefetchResource",kind:"LinkedField",name:"audio",plural:!0,selections:a,storageKey:null},{alias:null,args:null,concreteType:"VideoPrefetchResource",kind:"LinkedField",name:"video",plural:!0,selections:a,storageKey:null}],storageKey:null}],type:"Video",abstractKey:null}}();e.exports=a}),null);
__d("useGraphQLVideoP2PSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoP2PSettings_video",selections:[{alias:null,args:null,concreteType:"VideoP2PSettings",kind:"LinkedField",name:"p2p_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ticket",storageKey:null},{alias:null,args:null,concreteType:"VideoP2PSettingsConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"delay_p2p_until_play",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"disable_hivejava_for_livevc",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoHiveInitializationOptions",kind:"LinkedField",name:"hive_initialization_options",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoHiveInitializationOptionHiveJava",kind:"LinkedField",name:"hive_java",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"min_version",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hive_tech_order",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"debug_level",storageKey:null}],storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerCaptionsSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerCaptionsSettings_video",selections:[{alias:null,args:null,concreteType:"CaptionsSettings",kind:"LinkedField",name:"captions_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"always_show_captions",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerLiveLatencyKnobSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerLiveLatencyKnobSettings_video",selections:[{alias:null,args:null,concreteType:"VideoBroadcastLowLatencyConfig",kind:"LinkedField",name:"broadcast_low_latency_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ll_desired_latency_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ll_latency_tolerance_ms",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useRouteProductAttribution",["CometRouterRouteInfoContext","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){var a=g.useContext(b("CometRouterRouteInfoContext"));return a==null?void 0:a.productAttribution}}),null);
__d("usePremiumMusicVideoInterruptionSubscription",["CometRelay","React","RelayRTIGraphQLSubscriptionTopicProvider","usePremiumMusicVideoInterruptionSubscription.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i=g!==void 0?g:g=b("usePremiumMusicVideoInterruptionSubscription.graphql");b("RelayRTIGraphQLSubscriptionTopicProvider").registerProviderForQuery(i,function(a){a=a.input;return"gqls/premium_music_video_interruption_subscribe/user_id_"+a.user_id});function a(a){var c=b("CometRelay").useRelayEnvironment();h.useEffect(function(){if(a==null)return;var d=b("CometRelay").requestSubscription(c,{subscription:i,variables:{input:{user_id:a}}});return function(){d.dispose()}},[a,c])}}),null);
__d("useEventCallbackOn",["React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a,b,c){g.useEffect(function(){a.addEventListener(b,c);return function(){a.removeEventListener(b,c)}},[a,b,c])}}),null);
__d("useIsBackgrounded",["React","VideoPlayerShakaGlobalConfig","useEventCallbackOn"],(function(a,b,c,d,e,f){"use strict";e.exports=d;var g=b("React");function c(){var b=a.document;if(typeof b.hidden!=="undefined")return"visibilitychange";else if(typeof b.mozHidden!=="undefined")return"mozvisibilitychange";else if(typeof b.msHidden!=="undefined")return"msvisibilitychange";else if(typeof b.webkitHidden!=="undefined")return"webkitvisibilitychange";return"visibilitychange"}function h(){var b=a.document;if(typeof b.hidden!=="undefined")return b.hidden;else if(typeof b.mozHidden!=="undefined")return b.mozHidden;else if(typeof b.msHidden!=="undefined")return b.msHidden;else if(typeof b.webkitHidden!=="undefined")return b.webkitHidden;return!1}var i=c();function j(){var c=a.document.hasFocus?a.document.hasFocus():!0,d=h(),e=b("VideoPlayerShakaGlobalConfig").getBool("comet_www_no_pause_on_blur_or_focus_events",!1);return d||(e?!1:!c)}function d(c){var d=g.useState(function(){return j()}),e=d[0],f=d[1],h=!!c&&c.scrollTerminatesBackgrounded===!0;d=g.useCallback(function(){f(j())},[f,j]);c=d;var k=g.useCallback(function(){var a=j();a&&h&&e&&f(!1)},[e,h,f]);b("VideoPlayerShakaGlobalConfig").getBool("comet_www_no_pause_on_blur_or_focus_events",!1)&&(c=function(){});b("useEventCallbackOn")(a.window,"blur",c);b("useEventCallbackOn")(a.window,"focus",c);b("useEventCallbackOn")(a.document,i,d);b("useEventCallbackOn")(a.window,"scroll",k);return e}}),null);
__d("VideoPlayerViewabilityProvider.react",["React","VideoPlayerViewabilityContexts"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.children,d=a.isFullscreen;a=a.videoPlayerPassiveViewabilityInfo;return g.jsx(b("VideoPlayerViewabilityContexts").VideoPlayerPassiveViewabilityInfoContext.Provider,{value:a,children:g.jsx(b("VideoPlayerViewabilityContexts").VideoPlayerFullscreenContext.Provider,{value:d,children:c})})}}),null);
__d("wrapWithContextProviders",["React"],(function(a,b,c,d,e,f){"use strict";f.wrapWithContextProviders=a;f.makeRenderProviderFn=c;var g=b("React");function a(a,b){return b.reduceRight(function(a,b){return b(a)},a)}function c(a,b){return function(c){return g.jsx(a.Provider,{value:b,children:c})}}}),null);
__d("VideoPlayerComponentContainer.react",["CometVisualCompletionAttributes","React","VideoPlayerContexts","VideoPlayerHooks","VideoPlayerViewabilityProvider.react","clearTimeout","requireCond","setTimeout","stylex","wrapWithContextProviders","cr:1269159"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a){var c=g.useRef(a);g.useEffect(function(){c.current=a},[a]);var d=g.useState(!1),e=d[0],f=d[1];d=g.useState(function(){var a=null;return{cleanup:function(){a&&a()},pingNotIdle:function(){a&&a();f(!1);var d=b("setTimeout")(function(){f(!0)},c.current);a=function(){b("clearTimeout")(d),a=null}}}});d=d[0];var h=d.cleanup;d=d.pingNotIdle;g.useEffect(function(){return h},[h]);return{isIdle:e,pingNotIdle:d}}function i(){var a=g.useState(!1),b=a[0],c=a[1];a=3e3;a=h(a);var d=a.isIdle,e=a.pingNotIdle;a=g.useCallback(function(){c(!0),e()},[e]);var f=g.useCallback(function(){c(!1),e()},[e]),i=g.useCallback(function(){c(!0),e()},[e]),j=g.useCallback(function(){e()},[e]),k=g.useCallback(function(){e()},[e]);return{isHovering:b,isIdle:d,onMouseDown:j,onMouseEnter:a,onMouseLeave:f,onMouseMove:i,onMouseUp:k}}function j(a){var c=i(),d=c.isHovering,e=c.isIdle,f=c.onMouseDown,h=c.onMouseEnter,j=c.onMouseLeave,k=c.onMouseMove;c=c.onMouseUp;var l=b("VideoPlayerHooks").useIsFullscreen();return g.jsx("div",babelHelpers["extends"]({className:"k4urcfbm kr520xx4 pmk7jnqg datstx6m"+(l&&e?" sorcqhzv":"")},b("CometVisualCompletionAttributes").IGNORE,{onMouseDown:f,onMouseEnter:h,onMouseLeave:j,onMouseMove:k,onMouseUp:c,children:g.jsx(b("VideoPlayerContexts").VideoPlayerMouseHoverContext.Provider,{value:d,children:g.jsx(b("VideoPlayerContexts").VideoPlayerMouseIdleContext.Provider,{value:e,children:a.children})})}))}function a(a){var c=a.children;a=babelHelpers.objectWithoutPropertiesLoose(a,["children"]);var d=a.adClientToken,e=a.audioAvailabilityInfo,f=a.autoplayGatingResult,h=a.broadcastStatus,i=a.canAutoplay,k=a.controller,l=a.dimensions,m=a.initialTracePolicy,n=a.instanceKey,o=a.isFullscreen,p=a.isPremiumMusicVideo,q=a.lastMuteReason,r=a.lastPauseReason,s=a.lastPlayReason,t=a.originalHeight,u=a.originalWidth,v=a.videoFBID,w=a.videoPlayerPassiveViewabilityInfo,x=a.videoState,y=a.volumeSetting,z=x.activeCaptions,A=x.availableVideoQualities,B=x.bufferEnd,C=x.captionsLoaded,D=x.captionsVisible,E=x.currentVideoQuality,F=x.duration,G=x.ended,H=x.error,I=x.inbandCaptionsAutogenerated,J=x.inPlayStalling,K=x.isAbrEnabled,L=x.isLiveRewindActive,M=x.lastPlayedTimeMs,N=x.loopCount,O=x.loopCurrent,P=x.muted,Q=x.paused,R=x.playerImplementationName,S=x.playing,T=x.seekableRanges,U=x.seeking,V=x.selectedVideoQuality,W=x.stalling,X=x.streamInterrupted,Y=x.targetAudioQuality,Z=x.targetPlaybackRate,$=x.targetVideoQuality,aa=x.volume;x=x.watchTimeMs;c=g.jsx(j,{children:c});b("cr:1269159")(n,{controller:k,coreVideoStates:a,videoPlayerPassiveViewabilityInfo:w});v=(a=b("wrapWithContextProviders")).wrapWithContextProviders(c,[a.makeRenderProviderFn((c=b("VideoPlayerContexts")).VideoFBIDContext,v),a.makeRenderProviderFn(c.StallingContext,W),a.makeRenderProviderFn(c.PlayingContext,S),a.makeRenderProviderFn(c.InPlayStallingContext,J),a.makeRenderProviderFn(c.BufferEndContext,B),a.makeRenderProviderFn(c.LastMuteReasonContext,q),a.makeRenderProviderFn(c.LastPlayReasonContext,s),a.makeRenderProviderFn(c.LastPauseReasonContext,r),a.makeRenderProviderFn(c.PausedContext,Q),a.makeRenderProviderFn(c.CurrentVideoQualityContext,E),a.makeRenderProviderFn(c.MutedContext,P),a.makeRenderProviderFn(c.VolumeContext,aa),a.makeRenderProviderFn(c.SelectedVideoQualityContext,V),a.makeRenderProviderFn(c.SeekingContext,U),a.makeRenderProviderFn(c.DurationContext,F),a.makeRenderProviderFn(c.EndedContext,G),a.makeRenderProviderFn(c.ErrorContext,H),a.makeRenderProviderFn(c.DimensionsContext,l||null),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").InstanceKeyContext,n),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").ControllerContext,k),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").AvailableVideoQualitiesContext,A),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").PlayerImplementationNameContext,R),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").IsAbrEnabledContext,K),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").TargetAudioQualityContext,Y),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").TargetVideoQualityContext,$),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").PlaybackRateContext,Z),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").CanAutoplayContext,i),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").VolumeSettingContext,y),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").AutoplayGatingResultContext,f),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").BroadcastStatusContext,h),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").LoopCountContext,N),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").LoopCurrentContext,O),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").AdClientTokenContext,d),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").ActiveCaptionsContext,z),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").CaptionsVisibleContext,D),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").CaptionsLoadedContext,C),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").InbandCaptionsAutogeneratedContext,I),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").StreamInterruptedContext,X),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").WatchTimeContext,x),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").LastPlayedTimeContext,M),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").SeekableRangesContext,T),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").IsLiveRewindActiveContext,L),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").AudioAvailabilityInfoContext,e),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").IsPremiumMusicVideoContext,p),b("wrapWithContextProviders").makeRenderProviderFn(b("VideoPlayerContexts").InitialTracePolicyContext,m),function(a){return g.jsx(b("VideoPlayerContexts").VideoOriginalDimensionsContextMemoProvider,{originalHeight:t,originalWidth:u,children:a})},function(a){return g.jsx(b("VideoPlayerViewabilityProvider.react"),{isFullscreen:o,videoPlayerPassiveViewabilityInfo:w,children:a})}]);return g.jsx("div",{"data-instancekey":n,"data-testid":void 0,children:v})}c=g.memo(a);e.exports=c}),null);
__d("GlobalVideoPortsID",["cometUniqueID","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";f.makeVideoID=a;f.ensureVideoID=c;f.makePlaceID=d;function a(){return"id-pv-"+b("cometUniqueID")()}function c(a){if(typeof a==="string"){var c="id-pv-";if(a.indexOf(c)===0&&a.length>c.length)return a;else throw b("unrecoverableViolation")('Expected a GlobalVideoPortsVideoID, got a string that does not look like it: "'+a+'"',"comet_video_player")}else return null}function d(){return"id-pp-"+b("cometUniqueID")()}}),null);
__d("VideoPlayerFullscreenController",["CometFullScreen","removeFromArray","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";f.createFullscreenController=a;function g(a){return a.current!=null&&b("CometFullScreen").getFullScreenElement()===a.current}function a(a){var c=[];function d(){c.forEach(function(a){a()})}var e=null;return{getIsFullscreen:function(){return g(a)},requestSetIsFullscreen:function(c){var d=a.current;if(d==null)throw b("unrecoverableViolation")("Requested full screen while the element is not present","comet_video_player");c!==g(a)&&(c===!0?b("CometFullScreen").requestFullScreen(d):c===!1&&b("CometFullScreen").exitFullScreen())},subscribe:function(a){c.length===0&&e==null&&(e=b("CometFullScreen").subscribeToFullScreenChangeEvent(d));c.push(a);return{remove:function(){b("removeFromArray")(c,a),c.length===0&&e!=null&&(e(),e=null)}}}}}}),null);
__d("VideoPlayerPortalingPlaceState",["GlobalVideoPortsContexts","GlobalVideoPortsID","React","gkx","usePrevious"],(function(a,b,c,d,e,f){"use strict";f.useVideoPlayerPortalingPlaceState=a;var g=b("React");c=function(a,c){var d=b("usePrevious")(a);g.useEffect(function(){a!==d&&(d!==null&&d&&!a&&c(b("GlobalVideoPortsID").makeVideoID()))},[a,d,c])};d=function(a,c){var d=g.useState(null),e=d[0];d=d[1];a!==e&&(e!==null&&e&&!a&&c(b("GlobalVideoPortsID").makeVideoID()),d(a))};var h=b("gkx")("1375802")?d:c;f.useRegenerateUniqueVideoID_exportedForTest=h;function a(a){var c=a.portalingEnabled;a=a.portalingFromVideoID;var d=b("GlobalVideoPortsContexts").useGlobalVideoPortsLoader(),e=b("GlobalVideoPortsContexts").useGlobalVideoPortsManager(),f=b("GlobalVideoPortsContexts").useGlobalVideoPortsState(),i=e!=null&&f!=null,j=(i||d!=null)&&(c||a!=null),k=g.useState(function(){return b("GlobalVideoPortsID").makePlaceID()});k=k[0];var l=g.useState(function(){return b("GlobalVideoPortsID").makeVideoID()}),m=l[0];l=l[1];c=j&&c&&a!=null;a=c&&a!=null?a:m;h(c,l);g.useEffect(function(){j&&!i&&d&&d()},[i,j,d]);return{canBecomePortableLater:j,currentVideoID:a,globalVideoPortsManager:e,globalVideoPortsState:f,thisPlaceID:k}}}),null);
__d("VideoPlayerPortalingPlaceWithPortaling.react",["CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsRenderers.react","React","getOwnObjectValues","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.coreVideoPlayerMetaData,d=a.currentVideoID,e=a.fullscreenController,f=a.globalVideoPortsManager,h=a.globalVideoPortsState,i=a.implementations,j=a.isFullscreen,k=a.portablePlaceMetaData,l=a.renderComponents,m=a.renderPlaceholder,n=a.thisPlaceID,o=a.trackingDataEncrypted,p=a.trackingNodes,q=a.viewportMarginsForViewability;a=g.useState(function(){return b("CoreVideoPlayerFitParentContainer.react").createFitParentContainerDiv({debugRole:null})});var r=a[0],s=g.useRef(null);b("useLayoutEffect_SAFE_FOR_SSR")(function(){f.addOrUpdatePlace({coreVideoPlayerMetaData:c,fullscreenController:e,implementations:i,injectCoreVideoStatesRef:s,isFullscreen:j,portablePlaceContainer:r,portablePlaceID:n,portablePlaceMetaData:k,portableVideoID:d,renderComponents:l,renderPlaceholder:m,trackingDataEncrypted:o,trackingNodes:p,viewportMarginsForViewability:q})},[].concat(b("getOwnObjectValues")(c),[d,e,j,f,r],b("getOwnObjectValues")(k||{}),[l,m,n,o,p,q]));b("useLayoutEffect_SAFE_FOR_SSR")(function(){return function(){f.removePlace({portablePlaceID:n})}},[f,n]);a=f.getPortableVideoState(h,d);return g.jsxs(g.Fragment,{children:[g.jsx(b("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentDOMContainer,{debugRole:null,domElement:r},n),g.jsx(b("GlobalVideoPortsRenderers.react").GlobalVideoPortsVideoComponentsRenderer,{currentPlaceID:(h=(h=f.getCurrentPlaceStateForVideo(h,d))==null?void 0:h.portablePlaceID)!=null?h:null,currentVideoID:d,injectCoreVideoStatesRef:s,previousPlaceMetaData:(h=a==null?void 0:a.previousPlaceMetaData)!=null?h:null,renderComponents:l,thisPlaceID:n})]})}}),null);
__d("VideoPlayerPortalingPlace.react",["CometTrackingCodeContext","CometTrackingNodesContext","CometViewportMarginsContext","CoreVideoPlayer.react","CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsID","GlobalVideoPortsRenderers.react","React","VideoPlayerFullscreenController","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerPortalingPlaceState","VideoPlayerPortalingPlaceWithPortaling.react","recoverableViolation","useStable"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h={bottom:0,left:0,right:0,top:0},i=g.forwardRef(function(a,c){var d=a.children;a=a.debugRole;return g.jsx(b("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentContainer,{debugRole:a,ref:c,children:d})});function a(a){var c=a.implementations,d=a.portalingEnabled,e=a.portalingFromVideoID,f=a.portalingPlaceMetaData,j=a.renderComponents,k=a.renderPlaceholder;a=babelHelpers.objectWithoutPropertiesLoose(a,["implementations","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","renderComponents","renderPlaceholder"]);g.useEffect(function(){return function(){}},[]);var l=e!=null?b("GlobalVideoPortsID").ensureVideoID(e):null;e!=null&&l==null&&b("recoverableViolation")("The provided portalingFromVideoID ("+String(e)+") does not look like such an ID. The video player will not use portaling until a valid ID is provided","comet_video_player");e=b("VideoPlayerPortalingPlaceState").useVideoPlayerPortalingPlaceState({portalingEnabled:d,portalingFromVideoID:l});d=e.canBecomePortableLater;l=e.currentVideoID;var m=e.globalVideoPortsManager,n=e.globalVideoPortsState;e=e.thisPlaceID;var o=g.useContext(b("CometViewportMarginsContext")),p=g.useRef(null),q=b("useStable")(function(){return b("VideoPlayerFullscreenController").createFullscreenController(p)}),r=g.useState(q.getIsFullscreen()),s=r[0],t=r[1];g.useEffect(function(){var a=q.subscribe(function(){var a=q.getIsFullscreen();t(a)});t(q.getIsFullscreen());return function(){a.remove()}},[q,t]);r=g.useContext(b("CometTrackingNodesContext"));r=r.join("");var u=g.useContext(b("CometTrackingCodeContext"));u=(u=u.encrypted_tracking[0])!=null?u:"";o=s?h:o;if(!d)return g.jsx(i,{debugRole:null,ref:p,children:g.jsx(b("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:e,currentVideoID:l,portalingEnabled:!1,previousPlaceMetaData:null,thisPlaceID:e,children:g.jsx(b("CoreVideoPlayer.react"),babelHelpers["extends"]({},a,{fullscreenController:q,implementations:c,isFullscreen:s,renderWithCoreVideoStates:j,trackingDataEncrypted:u,trackingNodes:r,viewportMarginsForViewability:o}))})});if(m&&n)return g.jsx(i,{debugRole:null,ref:p,children:g.jsx(b("VideoPlayerPortalingPlaceWithPortaling.react"),{coreVideoPlayerMetaData:a,currentVideoID:l,fullscreenController:q,globalVideoPortsManager:m,globalVideoPortsState:n,implementations:c,isFullscreen:s,portablePlaceMetaData:f,renderComponents:j,renderPlaceholder:k,thisPlaceID:e,trackingDataEncrypted:u,trackingNodes:r,viewportMarginsForViewability:o})});else return g.jsx(i,{debugRole:null,ref:p,children:g.jsx(b("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlaceholderRenderer,{currentPlaceID:null,currentVideoID:l,originalHeight:a.originalHeight,originalWidth:a.originalWidth,previousPlaceMetaData:null,renderPlaceholder:k,thisPlaceID:e})})}}),null);
__d("VideoPlayerTracePolicyProvider.react",["React","VideoPlayerTracePolicyContext"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.children,d=a.initialTracePolicy,e=a.routeTracePolicy;a=g.useState(d);var f=a[0],h=a[1];a=g.useState(e);var i=a[0],j=a[1];g.useEffect(function(){f!==d&&h(d),i!==e&&j(e)},[d,e,f,i]);return g.jsx(b("VideoPlayerTracePolicyContext").VideoPlayerTracePolicyContext.Provider,{value:{initialTracePolicy:f,routeTracePolicy:i},children:c})}}),null);
__d("CoreVideoPlayerWithComponents.react",["React","VideoPlayerComponentContainer.react","VideoPlayerPortalingPlace.react","VideoPlayerTracePolicyProvider.react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.children,d=a.implementations,e=a.portalingEnabled,f=a.portalingFromVideoID,h=a.portalingPlaceMetaData,i=a.portalingRenderPlaceholder;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","implementations","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","portalingRenderPlaceholder"]);var j=g.useCallback(function(a){return g.jsx(b("VideoPlayerComponentContainer.react"),babelHelpers["extends"]({},a,{children:c}))},[c]);return g.jsx(b("VideoPlayerTracePolicyProvider.react"),{initialTracePolicy:a.initialTracePolicy,routeTracePolicy:a.routeTracePolicy,children:g.jsx(b("VideoPlayerPortalingPlace.react"),babelHelpers["extends"]({},a,{implementations:d,portalingEnabled:e,portalingFromVideoID:f,portalingPlaceMetaData:h,renderComponents:j,renderPlaceholder:i}))})}}),null);
__d("VideoPlayerErrorBoundary.react",["FBLogger","React","getErrorSafe"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={error:null},c.suppressReactDefaultErrorLogging=!0,b)||babelHelpers.assertThisInitialized(c)}c.getDerivedStateFromError=function(a){return{error:b("getErrorSafe")(a)}};var d=c.prototype;d.componentDidCatch=function(a,c){c=c.componentStack;a=b("getErrorSafe")(a);a.componentStack=c;c=this.props;var d=c.description,e=c.onError;c=c.project;var f="ErrorBoundary caught an Error";d!=null&&(f=f+" ("+d+")");d=["OZ_NETWORK","BUFFERING_TIMEOUT","MEDIA_ERR_DECODE"];var g=!0;for(var h=0;h<d.length;h++)a.message.includes(d[h])&&(g=!1);d=b("FBLogger")(c==null?"comet_video_player":c).catching(a);g?d.fatal(f):d.warn(f);e!=null&&e(a)};d.render=function(){var a=this.props,b=a.children;a=a.fallback;var c=this.state.error;return c?typeof a==="function"?a(c):a:b};return c}(a.PureComponent);e.exports=c}),null);
__d("VideoPlayerRetryableErrorBoundary.react",["React","VideoPlayerErrorBoundary.react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.children,d=a.description,e=a.fallback;a=g.useState(0);var f=a[0],h=a[1],i=g.useCallback(function(){h(function(a){return a+1})},[]);a=g.useCallback(function(a){return f>=3?e({error:a,retry:null}):e({error:a,retry:i})},[e,i,f]);return g.jsx(b("VideoPlayerErrorBoundary.react"),{description:d,fallback:a,project:"comet_video_player",children:c},f)}}),null);
__d("VideoPlayerAutoplayHooks",["React","VideoPlayerAutoplayContexts","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";f.useAutoplayApi=a;f.useVideoAutoplayLocalScope=c;var g=b("React");function a(){var a=g.useContext(b("VideoPlayerAutoplayContexts").AutoplayApiContext);if(a==null)throw b("unrecoverableViolation")("Empty AutoplayApiContext. Are you rendering useAutoplayApi outside of VideoAutoplayManagerX?","comet_video_player");return a}function c(){return g.useContext(b("VideoPlayerAutoplayContexts").VideoAutoplayLocalScopeContext)}}),null);
__d("VideoPlayerDebugAutoplayAPI",["emptyFunction","requireCond","cr:1453865"],(function(a,b,c,d,e,f){"use strict";c=(a=b("cr:1453865"))!=null?a:{useVideoPlayerDebugAPI:b("emptyFunction").thatReturns(null),useVideoPlayerDebugAPIDefinition:b("emptyFunction"),useVideoPlayerDebugInfo:b("emptyFunction").thatReturns(null)};e.exports=c}),null);
__d("evaluateVideoAutoplayDefaultAllowRule",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(){return"ALLOW"}a.displayName="evaluateVideoAutoplayDefaultRule"}),null);
__d("evaluateVideoAutoplayDefaultIgnoreRule",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(){return"IGNORE"}a.displayName="evaluateVideoAutoplayDefaultIgnoreRule"}),null);
__d("makeSelectedAutoplayVideoSymbol",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){b=b+"::"+a;return b}}),null);
__d("AutoplayRulesEngine",[],(function(a,b,c,d,e,f){"use strict";var g=-2,h=-1;a=function(){function a(a){this.$1=g,this.$2=a}var b=a.prototype;b.evaluateAutoplay=function(a,b){b=b();var c=h;if(a)for(var d=0;d<this.$2.length;d++){var e=this.$2[d](a);if(e!=="SKIP"){b=e;c=d;break}}this.$1=c;return b};b.getIndexOfLastWinningRule=function(){return this.$1};b.getRules=function(){return this.$2};return a}();e.exports=a}),null);
__d("useAutoplayRulesEngine",["AutoplayRulesEngine","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=g.useRef(a),d=g.useState(function(){return new(b("AutoplayRulesEngine"))(a)}),e=d[0],f=d[1];g.useEffect(function(){c.current!==a&&f(function(){return new(b("AutoplayRulesEngine"))(a)})},[a]);g.useEffect(function(){c.current=e.getRules()},[e]);return e}}),null);
__d("useConcurrentAutoplayManagementAPI",["React","removeFromArray","useCometUniqueID"],(function(a,b,c,d,e,f){"use strict";f.useAutoplayControlID=a;f.createConcurrentAutoplayManagementAPI=h;f.useConcurrentAutoplayManagementAPI=c;var g=b("React");function a(){var a=b("useCometUniqueID")();return a}function h(){var a=[];return{isControllingComponent:function(b){var c=a.length;return a[c-1]===b},registerControllingComponent:function(c){b("removeFromArray")(a,c),a.push(c)},unregisterControllingComponent:function(c){var d=a.length;d>1&&b("removeFromArray")(a,c);return d>1}}}function c(){var a=g.useState(function(){return h()});a=a[0];return a}}),null);
__d("VideoPlayerOzWWWGlobalConfig",["VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f){"use strict";f.getBool=a;f.getNumber=c;f.getString=d;var g="oz_www_";function a(a,c){return b("VideoPlayerShakaGlobalConfig").getBool(g+a,c)}function c(a,c){return b("VideoPlayerShakaGlobalConfig").getNumber(g+a,c)}function d(a,c){return b("VideoPlayerShakaGlobalConfig").getString(g+a,c)}}),null);
__d("oz-player/configs/OzGlobalConfig",[],(function(a,b,c,d,e,f){"use strict";var g=null;a=function(a,b){return g?g.getBool(a,b):b};f.getBool=a;b=function(a,b){return g?g.getNumber(a,b):b};f.getNumber=b;c=function(a,b){return g?g.getString(a,b):b};f.getString=c;d=function(a){g=a};f.setGlobalConfig=d}),null);
__d("oz-player/shims/www/OzCacheStorageWWW",["CacheStorage","gkx"],(function(a,b,c,d,e,f){a="localstorage";c=b("gkx")("1621546")?"_oz_":"_video_";var g=new(b("CacheStorage"))(a,c);d={get:function(a){return g.get(a)},set:function(a,b){g.set(a,b)}};f=d;e.exports=f}),null);
__d("oz-player/shims/OzCacheStorage",["oz-player/shims/www/OzCacheStorageWWW"],(function(a,b,c,d,e,f){a=b("oz-player/shims/www/OzCacheStorageWWW");e.exports=a}),null);
__d("oz-player/shims/www/OzWindowEventsWWW",["Run"],(function(a,b,c,d,e,f){"use strict";a={onUnload:function(a){b("Run").onUnload(a)}};c=a;e.exports=c}),null);
__d("oz-player/shims/OzWindowEvents",["oz-player/shims/www/OzWindowEventsWWW"],(function(a,b,c,d,e,f){"use strict";a=b("oz-player/shims/www/OzWindowEventsWWW");e.exports=a}),null);
__d("oz-player/networks/OzBandwidthCache",["oz-player/shims/OzCacheStorage","oz-player/shims/OzWindowEvents"],(function(a,b,c,d,e,f){a=function(){function a(a,c){var d=this;this.$1=a;this.$2=c;b("oz-player/shims/OzWindowEvents").onUnload(function(){d.updateCachedBandwidth()})}var c=a.prototype;c.getCachedBandwidth=function(){var a=b("oz-player/shims/OzCacheStorage").get(this.$1);if(a==null)return null;a=Number(a);return isNaN(a)?null:a};c.updateCachedBandwidth=function(){b("oz-player/shims/OzCacheStorage").set(this.$1,String(this.$2()))};return a}();e.exports=a}),null);
__d("oz-player/networks/OzBandwidthUtils",[],(function(a,b,c,d,e,f){"use strict";f.getMeanBandwidth=g;f.getStandardDeviationOfBandwidth=h;f.getExponentiallyWeightedMovingAverage=i;f.getExponentiallyWeightedMovingAverageOfBandwidth=j;f.getBandwidthSamplesWithinRangeOfMean=k;f.getBandwidthEstimate=a;function g(a){var b=0;for(var c=0;c<a.length;c++)b+=a[c].bytes*8e3/a[c].timeInMs;return b/a.length}function h(a){var b=g(a),c=0;for(var d=0;d<a.length;d++)c+=Math.pow(a[d].bytes*8e3/a[d].timeInMs-b,2);return Math.round(Math.sqrt(c/a.length))}function i(a,b){b=Math.exp(Math.log(.5)/b);var c=0,d=0;for(var e=0;e<a.length;e++){var f=Math.pow(b,a[e].weight);c=a[e].value*(1-f)+c*f;d+=a[e].weight}return Math.round(c/(1-Math.pow(b,d)))}function j(a,b){return i(a.map(function(a){return{value:a.bytes*8e3/a.timeInMs,weight:a.timeInMs/1e3}}),b)}function k(a,b){var c=g(a),d=[];for(var e=0;e<a.length;e++)Math.abs(c-a[e].bytes*8e3/a[e].timeInMs)<b&&d.push(a[e]);return d}function a(a,b,c,d){var e=h(a);a=k(a,e*c);c=j(a,b);return c-e*d}}),null);
__d("oz-player/shims/OzEventEmitter",["requireCond","cr:1615798"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new(b("cr:1615798"))()}var c=a.prototype;c.addListener=function(a,b){return this.$1.addListener(a,b)};c.emit=function(a){var b;for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];(b=this.$1).emit.apply(b,[a].concat(d))};c.removeAllListeners=function(a){this.$1.removeAllListeners(a)};return a}();e.exports=a}),null);
__d("oz-player/shims/OzReadableStream",["requireCond","cr:1621176"],(function(a,b,c,d,e,f){"use strict";a=b("cr:1621176");e.exports=a}),null);
__d("oz-player/shims/OzWritableStream",["requireCond","cr:1621177"],(function(a,b,c,d,e,f){"use strict";a=b("cr:1621177");e.exports=a}),null);
__d("oz-player/networks/OzTransformStream",["oz-player/shims/OzEventEmitter","oz-player/shims/OzReadableStream","oz-player/shims/OzWritableStream","oz-player/utils/OzError"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.$OzTransformStream3=function(a){return a};c=c||{};c=c.errorTransform;(c===void 0||c===null)&&(c=d.$OzTransformStream3);var e=c||d.$OzTransformStream3;d.writable=new(b("oz-player/shims/OzWritableStream"))({start:function(a){d.$OzTransformStream2=a},write:function(a){d.emit("writableWrite",a);try{d.onDataWritten(a)}catch(a){d.$OzTransformStream1.error(new(b("oz-player/utils/OzError"))({type:"OZ_STREAM",description:"Error from write handler: "+d.constructor.name,extra:{code:"OZ_S-0",originalError:a}}))}d.$OzTransformStream1.enqueue(a)},close:function(){d.emit("writableClose");try{d.onClose()}catch(a){d.$OzTransformStream1.error(new(b("oz-player/utils/OzError"))({type:"OZ_STREAM",description:"Error from close handler: "+d.constructor.name,extra:{code:"OZ_S-1",originalError:a}}))}d.$OzTransformStream1.close()},abort:function(a){a=e(a);d.$OzTransformStream1.error(a)}});d.readable=new(b("oz-player/shims/OzReadableStream"))({start:function(a){d.$OzTransformStream1=a},cancel:function(a){d.emit("readableCancel",a),d.$OzTransformStream2.error(a)}});return d}var d=c.prototype;d.onDataWritten=function(a){};d.onClose=function(){};return c}(b("oz-player/shims/OzEventEmitter"));e.exports=a}),null);
__d("oz-player/shims/OzNetworkDiagnostics",["requireCond","cr:1615799"],(function(a,b,c,d,e,f){"use strict";a=b("cr:1615799");e.exports=a}),null);
__d("oz-player/utils/OzResourceTimingUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){if(!performance.getEntriesByName)return null;a=performance.getEntriesByName(a,"resource");return a.reduce(function(a,b){if(a==null)return b;return typeof b.responseEnd==="number"&&typeof b.responseStart==="number"&&typeof b.startTime==="number"&&typeof a.responseEnd==="number"&&typeof a.responseStart==="number"&&typeof a.requestStart==="number"&&typeof a.startTime==="number"?b.responseEnd<a.responseEnd?a:b:null},null)};f.getLatestResourceTimingEntry=a}),null);
__d("oz-player/networks/OzNetworkRequestStreamBandwidthReporter",["oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzResourceTimingUtils","oz-player/networks/OzTransformStream"],(function(a,b,c,d,e,f){"use strict";var g=b("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs;a=function(){function a(a){this.$10=Date.now();this.$11=0;this.$12=0;this.$13=function(){};this.$14=function(){};this.$15=new(b("oz-player/networks/OzTransformStream"))();var c=a.stream,d=a.loggerProvider,e=a.byteCountPerSample,f=a.minimumBytesToSampleOnClose,g=a.minimumSampleDuration,h=a.maximumSampleBandwidth,i=a.usePerformanceEntryOnClose,j=a.useResponseTimeMs,k=a.responseTimeHandicapMs,l=a.ignoreTimeToResponseStart;a=a.ignoreOnStreamWriteSamples;this.$1=c;this.$16=d;this.$2=e;this.$3=f;this.$4=g;this.$5=h;this.$6=i;this.$7=j;this.$8=k;this.$9=l;this.$17=a;this.$15.addListener("writableWrite",this.$18.bind(this));this.$15.addListener("writableClose",this.$19.bind(this))}var c=a.prototype;c.getTransformStream=function(){return this.$15};c.onBandwidthSample=function(a){this.$13=a};c.onTimeToFirstByteMsSample=function(a){this.$14=a};c.$20=function(a,b,c){b=b-c;if(this.$16){c=Date.now();this.$16&&this.$16.getOperationLogger("bandwidth_sampled").setLength(a).setClientTimeEnd(c).setClientTimeBegin(c-b).log()}this.$13(a,b)};c.$18=function(a){a.length!=void 0&&(this.$12+=a.length);if(this.$17)return;this.$21()};c.$19=function(){var a=Date.now()-this.$10,c=this.$1.getLastRequestUrl();c=c!=null?b("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(c):null;c&&this.$14(c.responseStart-c.requestStart);if(this.$3>0&&a>0&&this.$11===0&&this.$12>=this.$3){if(this.$6&&c&&c.responseEnd&&c.startTime){c=this.$9?c.responseEnd-c.responseStart:c.responseEnd-c.startTime;a=c>0?c:a}c=this.$1.getLastResponse();c=this.$7?g(c==null?void 0:c.headers)||0:0;this.$22(a,c)||this.$20(this.$12,a,Math.max(c-this.$8,0))}};c.$22=function(a,b){if(a-b<=0)return!0;b=this.$12*8/(a/1e3);return a<this.$4&&b>this.$5};c.$21=function(){var a=Date.now(),b=a-this.$10;this.$2>0&&this.$12>=this.$11+this.$2&&!this.$22(b,0)&&(this.$20(this.$12-this.$11,b,0),this.$10=a,this.$11=this.$12)};return a}();e.exports=a}),null);
__d("oz-player/shims/www/OzDeferredWWW",["Deferred"],(function(a,b,c,d,e,f){"use strict";a=b("Deferred");e.exports=a}),null);
__d("oz-player/shims/OzDeferred",["oz-player/shims/www/OzDeferredWWW"],(function(a,b,c,d,e,f){"use strict";a=b("oz-player/shims/www/OzDeferredWWW");e.exports=a}),null);
__d("oz-player/shims/www/OzMaybeNativePromiseWWW",["MaybeNativePromise"],(function(a,b,c,d,e,f){"use strict";a=b("MaybeNativePromise");e.exports=a}),null);
__d("oz-player/shims/OzMaybeNativePromise",["oz-player/shims/www/OzMaybeNativePromiseWWW"],(function(a,b,c,d,e,f){"use strict";a=b("oz-player/shims/www/OzMaybeNativePromiseWWW");e.exports=a}),null);
__d("oz-player/scheduling/OzRoundRobinPriorityTaskQueue",["oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){b===void 0&&(b=-1),this.$3=function(){},this.$4=[],this.$5=new Map(),this.$6=new Map(),this.$1=a,this.$2=b}var c=a.prototype;c.getHighestPriority=function(){return Math.max.apply(Math,this.$4.map(function(a){return a.queue.length?a.priority:-Infinity}))};c.enqueue=function(a,b){b=this.$7(b);var c=this.$5.get(a),d=this.$8(a);if(c===b)return d;this.$5.has(a)&&this.remove(a);c=this.$9(b);var e=this.$4[c];e&&e.priority===b||(e={priority:b,queue:[]},this.$4.splice(c,0,e));this.$5.set(a,b);e.queue.push(a);this.$3(a,b>=this.$1?"immediate":"normal");return d};c.updatePriority=function(a,b){if(!this.$5.has(a))return;this.enqueue(a,b)};c.dequeue=function(){for(var a=0;a<this.$4.length;a++){var b=this.$4[a];if(b.queue.length){b=b.queue.shift();this.$6["delete"](b);this.$5["delete"](b);return b}}return null};c.remove=function(a){this.$6["delete"](a);var b=this.$5.get(a);if(b!==void 0){b=this.$9(b);b=this.$4[b];if(b&&b.queue){var c=b.queue.findIndex(function(b){return b===a});c>-1&&b.queue.splice(c,1)}this.$5["delete"](a)}};c.setOnTaskUpdated=function(a){this.$3=a};c.clearOnTaskUpdated=function(){this.setOnTaskUpdated(function(){})};c.getLength=function(){return this.$5.size};c.test_isEmpty=function(){return this.$5.size===0&&this.$6.size===0&&this.$4.every(function(a){return a.queue.length===0})};c.$8=function(a){var c=this,d=this.$6.get(a);if(!d){var e=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));d=e.getPromise();this.$6.set(a,d);var f=a.run;a.run=function(){return f.call(a).then(function(b){c.remove(a);e.resolve(b);return b})["catch"](function(b){c.remove(a);e.reject(b);throw b})}}return d};c.$9=function(a){a=this.$7(a);var b;for(b=0;b<this.$4.length;b++)if(a>=this.$4[b].priority)return b;return b};c.$7=function(a){this.$2>=0&&(a=Number.parseFloat(a.toFixed(this.$2)));return a};return a}();e.exports=a}),null);
__d("oz-player/shims/ozSetTimeoutAcrossTransitions",["requireCond","cr:1615804"],(function(a,b,c,d,e,f){"use strict";a=b("cr:1615804");e.exports=a}),null);
__d("oz-player/scheduling/OzSequentialTaskScheduler",["oz-player/shims/OzMaybeNativePromise","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$3=0;this.$1=a;a=b||{};b=a.taskTimeout;this.$4=b||0}var c=a.prototype;c.start=function(){this.$1.setOnTaskUpdated(this.$5.bind(this));var a=this.$1.dequeue();a&&this.$6(a,"immediate")};c.destroy=function(){this.$2&&this.$2.cancel(),this.$1.clearOnTaskUpdated()};c.$5=function(a,b){b=this.$6(a,b);b&&this.$1.remove(a)};c.$6=function(a,c){var d=this;if(this.$2&&c!=="immediate")return!1;this.$2&&this.$2.cancel();c=a.run()["catch"](function(a){});this.$4>0&&(c=b("oz-player/shims/OzMaybeNativePromise").race([c,new(b("oz-player/shims/OzMaybeNativePromise"))(function(a,c){b("oz-player/shims/ozSetTimeoutAcrossTransitions")(a,d.$4)})]));this.$3++;this.$2=a;c=c.then(function(){d.$3--;d.$2===a&&(d.$2=null);if(d.$3===0){var b=d.$1.dequeue();b&&d.$6(b,"immediate")}});return!0};return a}();e.exports=a}),null);
__d("oz-player/networks/OzStreamingTaskQueueProvider",["oz-player/scheduling/OzRoundRobinPriorityTaskQueue","oz-player/scheduling/OzSequentialTaskScheduler"],(function(a,b,c,d,e,f){"use strict";f.getQueue=a;var g=new Map(),h=new Map(),i=2;f.OZ_QUEUE_MAX_PRIORITY=i;var j=2,k=6e4;function a(a){var c=g.get(a);if(!c){c=new(b("oz-player/scheduling/OzRoundRobinPriorityTaskQueue"))(i,j);var d=new(b("oz-player/scheduling/OzSequentialTaskScheduler"))(c,{taskTimeout:k});g.set(a,c);h.set(a,d);d.start()}return c}}),null);
__d("oz-player/networks/OzBandwidthEstimator",["oz-player/configs/OzGlobalConfig","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/shims/OzEventEmitter","oz-player/networks/OzBandwidthCache","oz-player/networks/OzBandwidthUtils","oz-player/networks/OzNetworkRequestStreamBandwidthReporter"],(function(a,b,c,d,e,f){"use strict";var g=(a=b("oz-player/networks/OzBandwidthUtils")).getBandwidthEstimate,h=a.getExponentiallyWeightedMovingAverage,i=a.getExponentiallyWeightedMovingAverageOfBandwidth,j=a.getStandardDeviationOfBandwidth,k=.9,l=5e5,m=2e4;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$OzBandwidthEstimator1=[];c.$OzBandwidthEstimator2=[];c.$OzBandwidthEstimator3=new(b("oz-player/networks/OzBandwidthCache"))(b("oz-player/configs/OzGlobalConfig").getString("bandwidth_cache_key","bandwidthEstimate"),function(){return c.getAdjustedBandwidth(b("oz-player/configs/OzGlobalConfig"))});return c}var d=c.prototype;d.getBandwidth=function(a){var b=g(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_half_life",6),a.getNumber("bandwidth_estimator_outlier_exclusion_factor",2),a.getNumber("bandwidth_estimator_std_dev_penalty_factor",.1));return b>0?b:this.$OzBandwidthEstimator4(a)};d.getEstimatedTimeToFirstByteMs=function(a){return this.$OzBandwidthEstimator2.length>0?h(this.$OzBandwidthEstimator2.map(function(a){return{value:a,weight:1}}),a.getNumber("time_to_first_byte_estimate_half_life_ms",500)):null};d.$OzBandwidthEstimator4=function(a){var b=this.$OzBandwidthEstimator3.getCachedBandwidth();return typeof b==="number"&&b>0?b:a.getNumber("default_bandwidth_estimate",l)};d.getStandardDeviationOfBandwidth=function(){return j(this.$OzBandwidthEstimator1)};d.getSampleCount=function(){return this.$OzBandwidthEstimator1.length};d.getAdjustedBandwidth=function(a){if(this.$OzBandwidthEstimator1.length===0)return this.$OzBandwidthEstimator4(a);var b=a.getNumber("bandwidth_estimator_variance_penalty_half_life",0)>0?this.$OzBandwidthEstimator5(a):this.$OzBandwidthEstimator6(a);return this.$OzBandwidthEstimator7(a,b)};d.$OzBandwidthEstimator7=function(a,c){var d=Math.max(0,b("oz-player/networks/OzStreamingTaskQueueProvider").getQueue("video").getLength()-a.getNumber("bandwidth_penalty_additional_video_start",0));a=a.getNumber("bandwidth_penalty_per_additional_video",0);d=Math.min(k,d*a);return c*(1-d)};d.$OzBandwidthEstimator5=function(a){var b=i(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_half_life",6)),c=i(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_variance_penalty_half_life",0));a=c<b?a.getNumber("bandwidth_estimator_variance_penalty_down_factor",0):a.getNumber("bandwidth_estimator_variance_penalty_up_factor",0);c=Math.abs(b-c)*a;return b-c};d.$OzBandwidthEstimator6=function(a){return this.getBandwidth(a)};d.pipeThroughReporter=function(a,c,d){var e=this;return{startStream:function(f){var g=new(b("oz-player/networks/OzNetworkRequestStreamBandwidthReporter"))({stream:c,loggerProvider:d,byteCountPerSample:a.getNumber("byte_count_per_sample",m),minimumBytesToSampleOnClose:a.getNumber("minimum_bytes_to_sample_on_close",0),minimumSampleDuration:a.getNumber("minimum_bandwidth_sample_duration",0),maximumSampleBandwidth:a.getNumber("maximum_bandwidth_sample_bandwidth",999999999),usePerformanceEntryOnClose:a.getBool("use_performance_entry_on_stream_close",!1),useResponseTimeMs:a.getBool("bandwidth_use_response_time_adjustment",!1),responseTimeHandicapMs:a.getNumber("bandwidth_response_time_handicap",0),ignoreTimeToResponseStart:a.getBool("ignore_time_to_response_start",!1),ignoreOnStreamWriteSamples:a.getBool("bandwidth_ignore_on_stream_write_samples",!1)});g.onBandwidthSample(function(b,c){e.$OzBandwidthEstimator8(b,c),a.getBool("update_bandwidth_cache_on_sample",!1)&&e.$OzBandwidthEstimator3.updateCachedBandwidth()});g.onTimeToFirstByteMsSample(e.$OzBandwidthEstimator9.bind(e));return c.startStream(f).then(function(b){return c.retrievedFromCache()&&a.getBool("exclude_prefetch_bandwidth_samples",!1)?b:b.pipeThrough(g.getTransformStream())})}}};d.$OzBandwidthEstimator8=function(a,c){this.$OzBandwidthEstimator1.push({bytes:a,timeInMs:c}),this.$OzBandwidthEstimator1.length>b("oz-player/configs/OzGlobalConfig").getNumber("max_bandwidth_sample_count",15)&&this.$OzBandwidthEstimator1.shift(),this.emit("bandwidth_sampled")};d.$OzBandwidthEstimator9=function(a){this.$OzBandwidthEstimator2.push(a),this.$OzBandwidthEstimator2.length>b("oz-player/configs/OzGlobalConfig").getNumber("max_bandwidth_sample_count",15)&&this.$OzBandwidthEstimator2.splice(0,1)};return c}(b("oz-player/shims/OzEventEmitter"));e.exports=new c()}),null);
__d("useVideoPlayerBandwidthEstimate",["React","VideoPlayerOzWWWGlobalConfig","oz-player/networks/OzBandwidthEstimator","useInterval"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=5e3;function a(){var a=function(){return b("oz-player/networks/OzBandwidthEstimator").getBandwidth(b("VideoPlayerOzWWWGlobalConfig"))},c=g.useState(a()),d=c[0],e=c[1];b("useInterval")(function(){return e(a())},h);return d}}),null);
__d("useVideoAutoplayState",["HiddenSubtreePassiveContext","React","VideoPlayerHooks","VideoPlayerViewabilityHooks","gkx","useIsBackgrounded","useVideoPlayerBandwidthEstimate"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){var a=g.useTransition(),c=a[0],d=(a=b("VideoPlayerHooks")).useAdClientToken(),e=a.useAutoplayGatingResult(),f=a.useBroadcastStatus(),h=a.useEnded(),i=a.useIsFrozenPassive(),j=a.useLastPauseReason(),k=a.useLastPlayReason(),l=a.useMuted(),m=a.usePaused(),n=g.useContext(b("HiddenSubtreePassiveContext"));a=!d;var o=b("useIsBackgrounded")({scrollTerminatesBackgrounded:a}),p=b("useVideoPlayerBandwidthEstimate")(),q=b("VideoPlayerViewabilityHooks").useVideoPlayerPassiveViewabilityInfo(),r=b("VideoPlayerViewabilityHooks").useVideoPlayerExtendedPassiveViewabilityInfo();a=g.useState(n.getCurrentState().backgrounded);var s=a[0],t=a[1];a=g.useState(n.getCurrentState().hidden);var u=a[0],v=a[1];g.useEffect(function(){function a(a,b){v(a),t(b)}var d=n.subscribeToChanges(function(d){b("gkx")("1500552")?c(function(){var b=n.getCurrentState();a(b.hidden,b.backgrounded)}):a(d.hidden,d.backgrounded)}),e=n.getCurrentState().hidden,f=n.getCurrentState().backgrounded;b("gkx")("1500552")?c(function(){var b=n.getCurrentState();a(b.hidden,b.backgrounded)}):a(e,f);return function(){d.remove()}},[n,t,v]);a=g.useState(function(){return i.getCurrentState()});var w=a[0],x=a[1];g.useEffect(function(){var a=i.subscribeToChanges(function(a){x(a)}),b=i.getCurrentState();x(b);return function(){a.remove()}},[i,x]);var y=g.useMemo(function(){return{adClientToken:d,autoplayGatingResult:e,bandwidthEstimate:p,broadcastStatus:f,controllerIsFrozen:w,currentSubtreeIsBackgrounded:s,currentSubtreeIsHidden:u,ended:h,hiddenSubtreePassive:n,isBackgrounded:o,isFrozenPassive:i,lastPauseReason:j,lastPlayReason:k,muted:l,paused:m,videoPlayerExtendedPassiveViewabilityInfo:r,videoPlayerPassiveViewabilityInfo:q}},[d,e,p,f,w,s,u,h,n,o,i,j,k,l,m,r,q]);a=g.useState(y);var z=a[0],A=a[1],B=g.useRef(z);g.useEffect(function(){B.current=z},[z]);g.useEffect(function(){var a=!1;for(var b in y)if(Object.prototype.hasOwnProperty.call(y,b)&&y[b]!==B.current[b]){a=!0;break}a&&A(y)},[y,A]);return z}}),null);
__d("CoreVideoPlayerAutoplayClient.react",["CoreVideoPlayerAutoplayClientUtils","HiddenSubtreePassiveContext","React","VideoPlayerAutoplayHooks","VideoPlayerDebugAutoplayAPI","VideoPlayerHooks","VideoPlayerViewabilityConstants","WwwCometVideoAutoplayFalcoEvent","evaluateVideoAutoplayDefaultAllowRule","evaluateVideoAutoplayDefaultIgnoreRule","makeSelectedAutoplayVideoSymbol","qex","useAutoplayRulesEngine","useCometUniqueID","useConcurrentAutoplayManagementAPI","useVideoAutoplayState"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){var a,c=b("useCometUniqueID")(),d=(a=b("VideoPlayerHooks")).useCanAutoplay(),e=a.useInstanceKey(),f=g.useMemo(function(){return b("makeSelectedAutoplayVideoSymbol")(c,e)},[c,e]),h=g.useRef(f);g.useEffect(function(){h.current=f},[f]);var i=g.useContext(b("HiddenSubtreePassiveContext")),j=a.useController(),k=g.useRef(!1),l=b("useConcurrentAutoplayManagementAPI").useAutoplayControlID();g.useEffect(function(){b("CoreVideoPlayerAutoplayClientUtils").log(h.current,"[ASSUME CONTROL] "+l),j.registerControllingComponent(l)},[j,l]);var m=a.useVideoPlayerPassiveViewabilityInfo();a=j.getCurrentState();a=a.paused;var n=g.useRef(a),o=b("VideoPlayerAutoplayHooks").useVideoAutoplayLocalScope(),p=g.useRef(o);g.useEffect(function(){p.current=o},[o]);var q=g.useCallback(function(){if(b("qex")._("1696068")){var a=j.getCurrentState(),c=a.lastPlayReason;a=a.paused;var d=n.current;n.current=a;var e=m==null?void 0:m.getCurrent();if(e){e=e.visiblePercentage;a=!a&&a!==d;d=e<b("VideoPlayerViewabilityConstants").DEFAULT_VIEWABILITY_PERCENTAGE_FOR_PAUSE&&e>0;p.current.disableScrollBeforePlayWhenOffscreen!==!0&&a&&c==="user_initiated"&&d&&(k.current=!0)}}},[j,m]),r=g.useRef(q);g.useEffect(function(){r.current=q},[q]);g.useEffect(function(){var a=j.subscribe(function(){q()});return function(){a.remove()}},[j,q]);var s=b("useVideoAutoplayState")(),t=b("useAutoplayRulesEngine")(o.autoplayLocalRules),u=d==="allow"?b("evaluateVideoAutoplayDefaultAllowRule"):b("evaluateVideoAutoplayDefaultIgnoreRule");a=g.useState(function(){return u});var v=a[0],w=a[1];a=g.useState(null);var x=a[0],y=a[1];a=g.useState(function(){return t.evaluateAutoplay(s,u)});var z=a[0],A=a[1];a=g.useState(null);var B=a[0],C=a[1],D=g.useRef(z),E=b("VideoPlayerAutoplayHooks").useAutoplayApi(),F=g.useRef(E);g.useEffect(function(){F.current=E},[E]);var G=d!=="dangerously_disable_autoplay_management";g.useEffect(function(){E.register(f,e,o,j,i,G);b("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"register",autoplay_scope_id:p.current.autoplayScopeID,event_creation_time:Date.now(),initiator:h.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:E.getAutoplayManagerDebugInfo(p.current).selectedAutoplayVideoSymbol,target:h.current,target_current_autoplay_decision:D.current}});return function(){E.unregister(f),b("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"unregister",autoplay_scope_id:p.current.autoplayScopeID,event_creation_time:Date.now(),initiator:h.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:E.getAutoplayManagerDebugInfo(p.current).selectedAutoplayVideoSymbol,target:h.current,target_current_autoplay_decision:D.current}})}},[E,o,j,i,e,G,f]);g.useEffect(function(){var a=function(){var c=t.evaluateAutoplay(s,u);D.current=c;var d=t.getRules(),e=t.getIndexOfLastWinningRule(),a=e>=0?d[e]:u;d=m&&m.getCurrent();e=j.getCurrentState();e=e.paused;(B===null||B!==c)&&(A(c),C(c));if(c==="PAUSE"&&!e&&j.isControllingComponent(l)){e=!0;r.current();if(k.current){k.current=!1;var g=d==null?void 0:d.positionToViewport;g&&j.scrollIntoView(g.top<0);e=!1}if(e){g="[PAUSE] via short-circuit on "+a.name+".";b("CoreVideoPlayerAutoplayClientUtils").log(h.current,g);j.pause("autoplay_initiated");b("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:p.current.autoplayScopeID,event_creation_time:Date.now(),initiator:h.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:E.getAutoplayManagerDebugInfo(p.current).selectedAutoplayVideoSymbol,target:h.current,target_current_autoplay_decision:c}})}}(x===null||x!==a)&&(w(function(){return a}),y(function(){return a}),b("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"rule_changed",autoplay_scope_id:p.current.autoplayScopeID,event_creation_time:Date.now(),initiator:h.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:E.getAutoplayManagerDebugInfo(p.current).selectedAutoplayVideoSymbol,target:h.current,target_current_autoplay_decision:c}}));b("CoreVideoPlayerAutoplayClientUtils").log(h.current,"[DECISION: "+c+"] from "+a.name);d&&E.update(f,c,d)},c=i.subscribeToChanges(function(a){i.getCurrentState().hidden||i.getCurrentState().backgrounded?j.isControllingComponent(l)||j.unregisterControllingComponent(l):j.registerControllingComponent(l)}),d=m?m.subscribe(function(){i.getCurrentState().hidden||i.getCurrentState().backgrounded?j.isControllingComponent(l)||j.unregisterControllingComponent(l):j.registerControllingComponent(l),a()}):null;a();return function(){c.remove(),d&&d.remove()}},[E,l,t,j,u,i,x,B,w,A,y,C,f,s,m]);g.useEffect(function(){var a=j.isControllingComponent(l),c=j.getCurrentState();c=c.paused;b("CoreVideoPlayerAutoplayClientUtils").componentShouldPause(z,D.current,c,a)&&(b("CoreVideoPlayerAutoplayClientUtils").log(h.current,"[PAUSE] the video for "+z),j.pause("autoplay_initiated"),b("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:p.current.autoplayScopeID,event_creation_time:Date.now(),initiator:h.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:F.current.getAutoplayManagerDebugInfo(p.current).selectedAutoplayVideoSymbol,target:h.current,target_current_autoplay_decision:z}}))},[z,j,l]);g.useEffect(function(){return function(){b("CoreVideoPlayerAutoplayClientUtils").log(h.current,"[RELEASE CONTROL] "+l),j.unregisterControllingComponent(l)}},[j,l]);b("VideoPlayerDebugAutoplayAPI").useVideoPlayerDebugAPIDefinition({applicableRule:v,autoplayApiRef:F,autoplayDecision:z,autoplayLocalScope:o,symbol:f});return null}}),null);
__d("VideoPlayerCaptionsAreaDeferred.react",["React","deferredLoadComponent","requireDeferredForDisplay"],(function(a,b,c,d,e,f){"use strict";b("React");a=b("deferredLoadComponent")(b("requireDeferredForDisplay")("VideoPlayerCaptionsArea.react"));e.exports=a}),null);
__d("WebSessionExtensionTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:WebSessionExtensionLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:WebSessionExtensionLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:WebSessionExtensionLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setClientTime=function(a){this.$1.client_time=a;return this};c.setReason=function(a){this.$1.reason=a;return this};c.setWebsessionID=function(a){this.$1.websession_id=a;return this};return a}();c={client_time:!0,reason:!0,websession_id:!0};e.exports=a}),null);
__d("WebSessionExtender",["WebSession","WebSessionExtensionTypedLogger","clearInterval","gkx","setInterval"],(function(a,b,c,d,e,f){"use strict";f.subscribe=a;f.unsubscribe=c;var g=2e4,h=new Set(),i=null;function a(a,c){c===void 0&&(c="extender");h.add(a);var d=b("gkx")("1252196");i==null&&(b("WebSession").extend(Date.now()+g+2e3),i=b("setInterval")(function(){b("WebSession").extend(Date.now()+g+2e3),d&&new(b("WebSessionExtensionTypedLogger"))().setClientTime(Date.now()).setWebsessionID(b("WebSession").getId()).setReason(c).log()},g))}function c(a){h["delete"](a);a=h.size;a===0&&i!=null&&(b("clearInterval")(i),i=null)}}),null);
__d("VideoPlayerWebSessionExtender.react",["React","VideoPlayerHooks","WebSessionExtender","useCometUniqueID"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){var a=b("VideoPlayerHooks").usePlaying(),c=b("useCometUniqueID")();g.useEffect(function(){if(a){b("WebSessionExtender").subscribe(c,"video");return function(){b("WebSessionExtender").unsubscribe(c)}}},[a,c]);return null}}),null);
__d("useVideoPlayerDefaultLoadingIndicatorsLogic",["VideoPlayerHooks"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(){var a=b("VideoPlayerHooks").useStalling(),c=b("VideoPlayerHooks").useStreamInterrupted(),d=b("VideoPlayerHooks").useIsLiveRewindActive();c=c&&!d;d=a;a=c?"live_video_interrupted_overlay":d?"spinner":"none";return{liveVideoInterruptedOverlayVisible:c,loadingIndicatorType:a,spinnerVisible:d}}}),null);
__d("useVideoPlayerDefaultLoadingIndicators",["CometPlaceholder.react","React","deferredLoadComponent","requireDeferred","requireDeferredForDisplay","useVideoPlayerDefaultLoadingIndicatorsLogic"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=b("deferredLoadComponent")(b("requireDeferredForDisplay")("VideoPlayerSpinner.react")),i=b("deferredLoadComponent")(b("requireDeferred")("VideoPlayerWithLiveVideoInterruptedOverlay.react"));function a(){var a=b("useVideoPlayerDefaultLoadingIndicatorsLogic")(),c=a.loadingIndicatorType;a=a.spinnerVisible;var d=g.jsx(b("CometPlaceholder.react"),{fallback:null,children:g.jsx(i,{})});a=g.jsx(h,{isVisible:a});var e=null;switch(c){case"spinner":e=a;break;case"live_video_interrupted_overlay":e=d;break;case"none":default:e=a}return{loadingIndicatorElement:e,loadingIndicatorType:c}}}),null);
__d("CVCv3DisabledPlayerOrigins",[],(function(a,b,c,d,e,f){a=Object.freeze({BEEPER:"beeper",FB_STORIES:"fb_stories"});e.exports=a}),null);
__d("CVCv3DisabledPlayerSubOrigins",[],(function(a,b,c,d,e,f){a=Object.freeze({LIVE_BEEPER:"live_beeper"});e.exports=a}),null);
__d("CVCv3SubscriptionHelper",["DateConsts","guid"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d){this.$1=a;this.$2=b("guid")();this.$3=((a=c)!=null?a:"null")+"::"+((c=d)!=null?c:"null");this.$4=null;this.$5=null}var c=a.prototype;c.isValidSubscription=function(){return!!this.$1};c.makeCVCv3StateUpdate=function(a,c,d,e){var f=null;a!=null&&!Number.isNaN(a)&&c!=null&&!Number.isNaN(c)&&(f={m:e,pf:Math.floor((c-a)*b("DateConsts").MS_PER_SEC),s:d,sa:Math.floor(a*b("DateConsts").MS_PER_SEC)});e={pps:this.$4,ps:f,si:this.$2,so:this.$3,vi:this.$1};this.$4=f;return e};c.makeUnifiedVideoCVCUpdate=function(a,b,c,d,e){a=this.makeCVCv3StateUpdate(a,b,c,d);this.$5!=null&&(a.tk=this.$5);return Object.assign({},a,e)};c.processUnifiedResponse=function(a){a=a;this.$5=a.tk;return a};c.clearAnyPreviousContext=function(){this.$4=null};return a}();e.exports=a}),null);
__d("UnifiedVideoCVCSubscription",["CVCv3DisabledPlayerOrigins","CVCv3DisabledPlayerSubOrigins","CVCv3SubscriptionHelper","DateConsts","XVideoUnifiedCVCControllerRouteBuilder","clearTimeout","cometAsyncFetch","emptyFunction","gkx","promiseDone","setTimeout"],(function(a,b,c,d,e,f){"use strict";var g=Object.values(b("CVCv3DisabledPlayerOrigins")),h=Object.values(b("CVCv3DisabledPlayerSubOrigins")),i=10;a=function(){function a(a,c,d,e,f,i,j){var k=this;this.$17=function(){k.$10=null,k.$16(),k.$15(0)};this.$1=new(b("CVCv3SubscriptionHelper"))(a,c,d);this.$5=f;this.$6=null;this.$7=j;this.$10=null;this.$11=!this.$1.isValidSubscription();this.$3=null;this.$2=null;a=c!=null?g.includes(c):!1;f=d!=null?h.includes(d):!1;!a&&!f&&(this.$3=e,this.$12=i,this.$4=e.subscribe(function(){if(k.$3==null)return;var a=k.$3.getCurrentState();a.playing?k.$13(a):k.$14()}))}var c=a.prototype;c.$13=function(a){if(this.$3==null)return;var c=!1;this.$7!=null&&(c=b("gkx")("1113562"));c||(c=this.$5?!0:b("gkx")("1124976"));if(!c)return;if(a.playing){if(this.$2==null){c=this.$3.getPlayheadPosition();c>=0&&(this.$2=c)}}else this.$2=null;this.$15(0)};c.stopUnifiedCVC=function(){this.$14()};c.destroy=function(){this.$14(),this.$4!=null&&this.$4.remove(),this.$4=null,this.$3=null};c.$14=function(){b("clearTimeout")(this.$9),b("clearTimeout")(this.$8),this.$9=null,this.$8=null,this.$2=null,this.$1.clearAnyPreviousContext(),this.$10=null};c.$16=function(){b("clearTimeout")(this.$8),this.$8=null};c.$15=function(a){var c=this;if(this.$3==null||this.$9!=null||this.$10!=null||this.$11)return;this.$9=b("setTimeout")(function(){c.$9=null;var a=c.$18();if(a==null)return;c.$10=a;b("promiseDone")(a,function(b){if(a!==c.$10)return;c.$10=null;if(b!=null){b=c.$1.processUnifiedResponse(b);c.$19(b)}},b("emptyFunction"));c.$8=b("setTimeout")(c.$17,i*b("DateConsts").MS_PER_SEC)},a)};c.$19=function(a){this.$16();a.d!=null&&this.$12!=null&&this.$12(a.d);if(a.a!=null){var c=a.a.t;switch(c){case"p":c=a.a.pi;c==null&&(c=i);this.$15(c*b("DateConsts").MS_PER_SEC);break;case"s":this.$11=!0;break}}};c.$18=function(){var a=this.$20();if(a==null)return null;a={d:JSON.stringify(a)};return b("cometAsyncFetch")(b("XVideoUnifiedCVCControllerRouteBuilder").buildURL({}),{data:a,method:"POST"})};c.$20=function(){if(this.$3==null)return null;var a={};this.$7!=null&&(a.lr=this.$7);this.$6!=null&&(a.lc=this.$6);this.$5&&(a.ls=!0);var b=0,c=0;this.$2!=null&&(b=this.$2,c=this.$3.getPlayheadPosition());var d=this.$3.getCurrentState();b=this.$1.makeUnifiedVideoCVCUpdate(b,c,this.$21(d),d.muted,a);return b};c.$21=function(a){if(a.playing||a.seeking)return"playing";else if(a.ended)return"ended";else if(a.paused)return"paused";else return"unknown"};c.testing_setLastStartPosition=function(a){this.$2=a};c.testing_makeUnifiedStateUpdate=function(){return this.$20()};c.testing_handleUnifiedResponse=function(a){return this.$19(a)};return a}();e.exports=a}),null);
__d("getPlayerFormatForLogData",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){return a===!0?"full_screen":b!=null?b:"inline"}}),null);
__d("useVideoPlayerUnifiedCVCProvider",["UnifiedVideoCVCSubscription","VideoPlayerHooks","createVideoStateHook","getPlayerFormatForLogData","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f){"use strict";f.useVideoPlayerUnifiedCVCProvider=a;c=b("createVideoStateHook").createVideoStateHook(null);var g=c.setterHook;d=b("createVideoStateHook").createVideoStateHook(null);var h=d.setterHook;e=d.valueHook;function a(a){var c=a.livingRoomID,d=a.playerFormat,e=a.subOrigin,f=a.videoFBID,i=b("VideoPlayerHooks").useIsLive(),j=b("VideoPlayerHooks").useIsFullscreen(),k=b("VideoPlayerHooks").useController(),l=g(),m=h();b("useLayoutEffect_SAFE_FOR_SSR")(function(){var a=new(b("UnifiedVideoCVCSubscription"))(f,b("getPlayerFormatForLogData")(j,d),e,k,i,function(a){m(a)},c);l(a);return function(){a.destroy()}},[c,j,i,d,m,l,e,k,f])}a=e;f.useVideoPlayerUnifiedCVCData=a}),null);
__d("VideoPlayerXImplSurface.react",["CoreVideoPlayerAutoplayClient.react","React","VideoPlayerCaptionsAreaDeferred.react","VideoPlayerInteractionOverlay.react","VideoPlayerWebSessionExtender.react","gkx","requireCond","useVideoPlayerDefaultLoadingIndicators","useVideoPlayerUnifiedCVCProvider","cr:1583596","cr:946298"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.children,d=a.disableLoadingIndicator;d=d===void 0?!1:d;var e=a.instreamVideoAdBreaksPlayer,f=a.livingRoomID,h=a.playerFormat,i=a.subOrigin,j=a.videoFBID;a=a.videoPlayerSpherical;b("useVideoPlayerUnifiedCVCProvider").useVideoPlayerUnifiedCVCProvider({livingRoomID:f,playerFormat:h,subOrigin:i,videoFBID:j});f=b("useVideoPlayerDefaultLoadingIndicators")();h=f.loadingIndicatorElement;return g.jsxs(g.Fragment,{children:[a,d?null:h,b("gkx")("1586633")?g.jsx(b("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{}):null,g.jsx(b("VideoPlayerCaptionsAreaDeferred.react"),{children:c}),g.jsx(b("CoreVideoPlayerAutoplayClient.react"),{}),b("cr:1583596")?g.jsx(b("cr:1583596"),{}):null,b("cr:946298")?g.jsx(b("cr:946298"),{subOrigin:i}):null,e,g.jsx(b("VideoPlayerWebSessionExtender.react"),{})]})}}),null);
__d("normalizeVideoPlayerLoopCount",["unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c,d){c===void 0&&(c=null);d===void 0&&(d=null);if(a==null){d=((c=c)!=null?c:!1)?(c=d)!=null?c:0:0;d===-1?c=-1:d<0||!Number.isFinite(d)||Math.floor(d)!==d?c=0:c=d}else if(a===-1||a===Number.POSITIVE_INFINITY)c=-1;else if(a<0||!Number.isFinite(a)||Math.floor(a)!==a)throw b("unrecoverableViolation")("Invalid loopingCount: "+a,"comet_video_player");else c=a;return c}}),null);
__d("VideoPlayerXImpl.react",["CoreVideoPlayerWithComponents.react","React","VideoPlayerXImplSurface.react","gkx","normalizeVideoPlayerLoopCount","usePlayerOriginRouteTracePolicy","useRouteProductAttribution"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.children,d=a.disableLoadingIndicator,e=a.implementations,f=a.instreamVideoAdBreaksPlayer,h=a.portalingEnabled,i=a.portalingFromVideoID,j=a.portalingPlaceMetaData,k=a.portalingRenderPlaceholder,l=a.videoPlayerSpherical;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","disableLoadingIndicator","implementations","instreamVideoAdBreaksPlayer","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","portalingRenderPlaceholder","videoPlayerSpherical"]);var m=b("usePlayerOriginRouteTracePolicy")(),n=b("useRouteProductAttribution")(),o=a.loopCount,p=a.playerFormat,q=a.subOrigin,r=a.videoFBID;o=b("normalizeVideoPlayerLoopCount")(o);return g.jsx(b("CoreVideoPlayerWithComponents.react"),babelHelpers["extends"]({},a,{implementations:e,loopCount:o,portalingEnabled:h,portalingFromVideoID:i,portalingPlaceMetaData:j,portalingRenderPlaceholder:k,productAttribution:b("gkx")("1759997")?n:null,routeTracePolicy:m,children:g.jsx(b("VideoPlayerXImplSurface.react"),{children:c,disableLoadingIndicator:d,instreamVideoAdBreaksPlayer:f,livingRoomID:a.livingRoomID,playerFormat:p,subOrigin:q,videoFBID:r,videoPlayerSpherical:l})}))}}),null);
__d("VideoPlayerFallbackCover.react",["fbt","React","requireCond","cr:1405514"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(a){var c;c=(c=a.message)!=null?c:g._("\u101d\u1019\u103a\u1038\u1014\u100a\u103a\u1038\u1015\u102b\u101e\u100a\u103a\u104a \u1024\u1017\u102e\u1012\u102e\u101a\u102d\u102f\u1000\u102d\u102f \u1016\u103d\u1004\u1037\u103a\u101b\u1014\u103a \u1021\u1001\u1000\u103a\u1021\u1001\u1032\u1016\u103c\u1005\u103a\u1014\u1031\u101e\u100a\u103a\u104b");return h.jsx(b("cr:1405514"),{debugError:a.debugError,message:c,onRetry:a.onRetry})}}),null);
__d("defaultErrorBoundaryFallback",["fbt","React","VideoPlayerFallbackCover.react","gkx"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function i(a){return a&&b("gkx")("1792489")?a.message.toLowerCase().indexOf("audio_renderer_error")>=0:!1}function a(a){var c=a.error;a=a.retry;var d=i(c),e=null;a=a;d&&(e=g._("\u1021\u101e\u1036\u1011\u102f\u1010\u103a\u1015\u1031\u1038\u1010\u1032\u1037 \u101c\u102f\u1015\u103a\u1006\u1031\u102c\u1004\u103a\u1001\u103b\u1000\u103a \u1021\u1019\u103e\u102c\u1038\u1021\u101a\u103d\u1004\u103a\u1038 \u101b\u103e\u102d\u1014\u1031\u1015\u102b\u1010\u101a\u103a \u2212 \u101e\u1004\u1037\u103a\u1000\u103d\u1014\u103a\u1015\u103b\u1030\u1010\u102c\u1000\u102d\u102f \u1015\u102d\u1010\u103a\u1015\u103c\u102e\u1038 \u1015\u103c\u1014\u103a\u1016\u103d\u1004\u1037\u103a\u1015\u1031\u1038\u1015\u102b\u104b"),a=null);return h.jsx(b("VideoPlayerFallbackCover.react"),{debugError:c,message:e,onRetry:a})}}),null);
__d("getVideoPlayerAutoplayProps",["gkx"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c,d){c=c!=null?c:"respect_user_settings";var e=c==="dangerously_always_autoplay";d=d!=null?d:"unknown";var f=b("gkx")("1454109")?a.autoplaySetting||"default_autoplay":a.autoplaySetting,g=b("gkx")("1454109")?f==="off":!1;e=e||c==="respect_user_settings"&&!g&&a.canAutoplay;g=c==="do_not_autoplay"?d:a.autoplayGatingResult;d=e?"allow":c==="dangerously_disable_autoplay_management"?"dangerously_disable_autoplay_management":"deny";return{autoplayGatingResult:g,autoplaySetting:f,canAutoplay:d}}}),null);
__d("GraphQLVideoAutoplayGatingResult",[],(function(a,b,c,d,e,f){"use strict";f.makeGraphQLVideoAutoplayGatingResult=a;function a(a,b,c){a=a!=null?a:"unknown";b=b?b:null;a={autoplayGatingResult:a,autoplaySetting:b,canAutoplay:c!=null?c:!1};return a}}),null);
__d("useGraphQLVideoAutoplayGatingResult",["CometRelay","GraphQLVideoAutoplayGatingResult","useGraphQLVideoAutoplayGatingResult_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g;function a(a){a=b("CometRelay").useFragment(g!==void 0?g:g=b("useGraphQLVideoAutoplayGatingResult_video.graphql"),a);return b("GraphQLVideoAutoplayGatingResult").makeGraphQLVideoAutoplayGatingResult(a.autoplay_gating_result,a.viewer_autoplay_setting,a.can_autoplay)}}),null);
__d("isEmptyObject",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){for(var b in a)return!1;return!0}}),null);
__d("GraphQLVideoDRMInfo",["isEmptyObject"],(function(a,b,c,d,e,f){"use strict";f.makeGraphQLVideoDRMInfo=a;function a(a){var c=a.fairplay_cert,d=a.graph_api_video_license_uri,e=a.video_license_uri_map;a=a.widevine_cert;d={fairplayCert:c,graphApiVideoLicenseUri:(c=d)!=null?c:null,videoLicenseUriMap:e,widevineCert:a};return d.graphApiVideoLicenseUri===null&&b("isEmptyObject")(d.videoLicenseUriMap)?null:d}}),null);
__d("useGraphQLVideoDRMInfo",["CometRelay","GraphQLVideoDRMInfo","React","gkx","useGraphQLVideoDRMInfo_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function i(a){if(a!=null){a=j(a);return b("GraphQLVideoDRMInfo").makeGraphQLVideoDRMInfo(a)}return null}function j(a){a=JSON.parse(a)||{};var b=a.fairplay_cert,c=a.graph_api_video_license_uri,d=a.video_license_uri_map;a=a.widevine_cert;return{fairplay_cert:b,graph_api_video_license_uri:c,video_license_uri_map:d,widevine_cert:a}}function a(a){a=b("CometRelay").useFragment(g!==void 0?g:g=b("useGraphQLVideoDRMInfo_video.graphql"),a);var c=a.drm_info,d=h.useState(c),e=d[0],f=d[1];h.useEffect(function(){f(c)},[c]);d=h.useState(function(){return i(e)});var j=d[0],k=d[1];h.useEffect(function(){k(i(e))},[e]);d=h.useRef(null);var l=i(a.drm_info),m=h.useRef(null);d.current!==a.drm_info&&(d.current=a.drm_info,m.current=l);return b("gkx")("1718203")?m.current:j}}),null);
__d("GraphQLVideoP2PSettings",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";f.hiveTechOrderOrNull=a;var g=b("$InternalEnum").Mirrored(["HiveJava","HiveJS","StatsJS"]);f.HiveTechOrder=g;function a(a){return(a=g.cast(a))!=null?a:null}}),null);
__d("useGraphQLVideoP2PSettings",["CometRelay","GraphQLVideoP2PSettings","React","recoverableViolation","useGraphQLVideoP2PSettings_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function i(a){var c=null;if(a){var d,e,f,g,h;d={delay_p2p_until_play:(d=(d=a.config)==null?void 0:d.delay_p2p_until_play)!=null?d:!1,disable_hivejava_for_livevc:(d=(d=a.config)==null?void 0:d.disable_hivejava_for_livevc)!=null?d:!1};var i=a.ticket;e=(e=a.hive_initialization_options)==null?void 0:e.debug_level;f=(f=(f=a.hive_initialization_options)==null?void 0:f.hive_tech_order.map(function(a){var c=b("GraphQLVideoP2PSettings").hiveTechOrderOrNull(a);c==null&&a!=null&&b("recoverableViolation")("Invalid hive tech order: '"+a+"'","comet_video_player");return c}).filter(Boolean))!=null?f:[];g=(g=a.hive_initialization_options)==null?void 0:(g=g.hive_java)==null?void 0:g.min_version;h=((h=a.hive_initialization_options)==null?void 0:h.hive_java)?{minVersion:g}:null;g=a.hive_initialization_options?{HiveJava:h,debugLevel:e,hiveTechOrder:f}:null;c={config:d,hive_initialization_options:g,ticket:i}}return c}function a(a){a=b("CometRelay").useFragment(g!==void 0?g:g=b("useGraphQLVideoP2PSettings_video.graphql"),a);var c=h.useRef(null),d=h.useRef(null);a=i((a=a.p2p_settings)!=null?a:null);var e=JSON.stringify(a);if(c.current!==e){c.current=(c=e)!=null?c:null;d.current=(e=a)!=null?e:null}return d.current}}),null);
__d("useOzQuickStarterData",["CometRelay","useOzQuickStarterData_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g;function h(a){return a.url!=null&&a.start!=null&&a.end!=null&&a.representation_id!=null&&a.mime_codec!=null&&a.segment_type!=null?{end:a.end,mimeCodec:a.mime_codec,representationID:a.representation_id,segmentType:a.segment_type,start:a.start,url:a.url}:null}function a(a){a=b("CometRelay").useFragment(g!==void 0?g:g=b("useOzQuickStarterData_video.graphql"),a);a=a.dash_prefetch_resources;return a==null?null:{audio:a.audio.map(h).filter(Boolean),video:a.video.map(h).filter(Boolean)}}}),null);
__d("VideoPlayerAudioAvailabilityInfo",[],(function(a,b,c,d,e,f){"use strict";f.makeVideoPlayerAudioAvailabilityInfo=a;function a(a){var b=a.audioAvailability;a=a.mutedSegments;b={hasNoAudio:g(b),hasPartialNoAudio:h(b,a),mutedSegments:a};return b}function g(a){return a==="UNAVAILABLE"||a==="AVAILABLE_BUT_SILENT"}function h(a,b){return a==="AVAILABLE_BUT_MUTED"&&b.length>0}}),null);
__d("useVideoPlayerAudioAvailabilityInfoRelay",["CometRelay","VideoPlayerAudioAvailabilityInfo","useVideoPlayerAudioAvailabilityInfoRelay_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g;function a(a){a=b("CometRelay").useFragment(g!==void 0?g:g=b("useVideoPlayerAudioAvailabilityInfoRelay_video.graphql"),a);return b("VideoPlayerAudioAvailabilityInfo").makeVideoPlayerAudioAvailabilityInfo({audioAvailability:a.audio_availability,mutedSegments:(a=(a=a.muted_segments)==null?void 0:a.map(function(a){return{muteEndTimeInSec:a.mute_end_time_in_sec,muteStartTimeInSec:a.mute_start_time_in_sec}}))!=null?a:[]})}}),null);
__d("AudioSettingsVolumeSetting",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:"default",QUIET:"quiet"});e.exports=a}),null);
__d("useVideoPlayerAudioSettings",["AudioSettingsVolumeSetting","CometRelay","React","useVideoPlayerAudioSettings_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i=1;c=.5;var j=new Map([["default",i],["quiet",c]]);function a(a){a=b("CometRelay").useFragment(g!==void 0?g:g=b("useVideoPlayerAudioSettings_video.graphql"),a);a=(a=a.audio_settings)==null?void 0:a.video_volume_setting;var c="DEFAULT";switch(a){case"DEFAULT":case"QUIET":c=a;break;default:break}a=b("AudioSettingsVolumeSetting")[c];var d=(c=j.get(a))!=null?c:i;a=h.useMemo(function(){return{preferredVolumeSetting:d}},[d]);return a}}),null);
__d("useVideoPlayerCaptionsSettings",["CometRelay","useVideoPlayerCaptionsSettings_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g;function a(a){a=b("CometRelay").useFragment(g!==void 0?g:g=b("useVideoPlayerCaptionsSettings_video.graphql"),a);return{alwaysShowCaptions:(a=(a=a.captions_settings)==null?void 0:a.always_show_captions)!=null?a:!1}}}),null);
__d("useVideoPlayerLiveLatencyKnobSettings",["CometRelay","useVideoPlayerLiveLatencyKnobSettings_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g;function a(a){var c;a=b("CometRelay").useFragment(g!==void 0?g:g=b("useVideoPlayerLiveLatencyKnobSettings_video.graphql"),a);return{desiredLatencyMs:(c=(c=a.broadcast_low_latency_config)==null?void 0:c.ll_desired_latency_ms)!=null?c:0,latencyToleranceMs:(a=(c=a.broadcast_low_latency_config)==null?void 0:c.ll_latency_tolerance_ms)!=null?a:0}}}),null);
__d("VideoPlayerRelay.react",["CometPlaceholder.react","CometRelay","CometTrackingNodeProvider.react","CurrentUser","ErrorMetadata","React","VideoPlayerRetryableErrorBoundary.react","VideoPlayerXImpl.react","defaultErrorBoundaryFallback","deferredLoadComponent","err","getVideoPlayerAutoplayProps","gkx","normalizeVideoPlayerLoopCount","requireCond","requireDeferredForDisplay","unrecoverableViolation","useGraphQLVideoAutoplayGatingResult","useGraphQLVideoDRMInfo","useGraphQLVideoP2PSettings","useOzQuickStarterData","usePremiumMusicVideoInterruptionSubscription","useVideoPlayerAudioAvailabilityInfoRelay","useVideoPlayerAudioSettings","useVideoPlayerCaptionsSettings","useVideoPlayerLiveLatencyKnobSettings","cr:1701936","cr:1694452","cr:1694453","cr:1446473","VideoPlayerRelay_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=c;var g,h=b("React"),i=b("deferredLoadComponent")(b("requireDeferredForDisplay")("VideoPlayerSphericalFallbackCover.react")),j=(d=b("cr:1694452"))!=null?d:a,k=(f=b("cr:1694453"))!=null?f:a;function l(a){var c,d=a.accessToken,e=a.adClientToken,f=a.autoplayGatingResult,l=a.canAutoplay,m=a.children,n=a.disableLoadingIndicator;n=n===void 0?!1:n;var o=a.externalLogID,p=a.externalLogType,q=a.initialForceHD,r=q===void 0?!1:q;q=a.initialTracePolicy;var s=a.livingRoomID,t=a.loopCount,u=a.manifestURL_DO_NOT_USE,v=a.playerFormat;v=v===void 0?"inline":v;var w=a.playerOriginOverride,x=a.portalingEnabled,y=a.portalingFromVideoID,z=a.portalingPlaceMetaData,A=a.portalingRenderPlaceholder,B=a.source_VPL_LOGGING_HACK,C=a.startTimestamp,D=a.subOrigin;a=a.video;b("usePremiumMusicVideoInterruptionSubscription")(b("CurrentUser").getID());var E=b("CometRelay").useFragment(g!==void 0?g:g=b("VideoPlayerRelay_video.graphql"),a);a=E.dash_prefetch_experimental;c=((c=E.video_available_captions_locales)!=null?c:[]).find(function(a){a=a.localized_creation_method;return a!=null})!=null;var F=b("cr:1701936")(E,{adClientToken:e}),G=b("useGraphQLVideoP2PSettings")(E),H=b("useGraphQLVideoDRMInfo")(E),I=!!(H&&H.fairplayCert!==null),J=b("useOzQuickStarterData")(E),K=h.useMemo(function(){return{forceProgressiveImpl:I,initialForceHD:r,manifestURL_DO_NOT_USE:u,ozQuickStarterData:J,videoFBID:E.id,videoPlayerShakaConfig:F}},[I,r,u,J,E.id,F]),L=j(E,K);K=k(E,K);L=b("gkx")("1669200")?L:K;K=b("useVideoPlayerCaptionsSettings")(E);var M=b("useVideoPlayerAudioSettings")(E),N=b("useVideoPlayerLiveLatencyKnobSettings")(E),O=N.desiredLatencyMs;N=N.latencyToleranceMs;var P=b("useVideoPlayerAudioAvailabilityInfoRelay")(E),Q=b("useGraphQLVideoAutoplayGatingResult")(E);Q=b("getVideoPlayerAutoplayProps")(Q,l,f);l=b("cr:1446473")(E);f=E.instream_video_ad_breaks_comet;var R=E.is_premium_music_video;f=f?h.jsx(b("CometPlaceholder.react"),{fallback:null,children:h.jsx(b("CometRelay").MatchContainer,{match:f,props:{instreamVideoAdBreaksComet:f,isPmv:R,playerFormat:v,subOrigin:D,videoFBID:E.id}})}):null;R=E.id;if(R==null)throw b("unrecoverableViolation")("Cannot play video: Empty video ID","comet_video_player");if(!L.length){var S=b("err")("Cannot play video: No matching video player implementations");S.metadata=new(b("ErrorMetadata"))();S.metadata.addEntry("COMET_VIDEO","VIDEO_ID",R);throw b("unrecoverableViolation")("Cannot play video: No matching video player implementations","comet_video_player",{error:S})}S=E.permalink_url;var T=E.spherical_video_renderer;T=T?h.jsx(b("CometRelay").MatchContainer,{match:T,props:{playerFormat:v,sphericalVideoRenderer:T,subOrigin:D,videoTahoeUrl:S}}):null;S=E.is_spherical;var U=E.is_spherical_enabled,V=E.permalink_url;if(S===!0&&U!==!0){if(V==null||V==="")throw b("unrecoverableViolation")("Cannot play video: Empty permalink URL for a spherical video","comet_video_player");return h.jsx(i,{videoTahoeUrl:V})}S=b("gkx")("1477051")?!1:e!=null;U=b("normalizeVideoPlayerLoopCount")(t,E.is_looping,E.loop_count);return h.jsx(b("VideoPlayerXImpl.react"),{VideoPlayerShakaPerformanceLoggerClass:l,accessToken:d,adClientToken:e,alwaysShowCaptions:K.alwaysShowCaptions,areCaptionsAutogenerated:c,audioAvailabilityInfo:P,autoplayGatingResult:Q.autoplayGatingResult,autoplaySetting:Q.autoplaySetting,broadcastId:E.broadcast_id,broadcastStatus:E.broadcast_status,broadcasterOrigin:E.broadcaster_origin,canAutoplay:Q.canAutoplay,captionsUrl:E.captions_url,children:m,desiredLatencyMs:O,disableLoadingIndicator:n,externalLogID:o,externalLogType:p,graphQLVideoDRMInfo:H,graphQLVideoP2PSettings:G,implementations:L,initialRepresentationIds:a,initialTracePolicy:q,instreamVideoAdBreaksPlayer:f,isLiveStreaming:E.is_live_streaming,isLiveTraceEnabled:E.is_live_trace_enabled,isPremiumMusicVideo:E.pmv_metadata!=null,isVideoBroadcast:E.is_video_broadcast,latencyToleranceMs:N,livingRoomID:s,loopCount:U,originalHeight:E.original_height,originalWidth:E.original_width,playerFormat:v,playerOriginOverride:w,portalingEnabled:x&&!S,portalingFromVideoID:y,portalingPlaceMetaData:z,portalingRenderPlaceholder:A,source_VPL_LOGGING_HACK:B,startTimestamp:C,subOrigin:D,videoFBID:R,videoPlayerSpherical:T,volumeSetting:M.preferredVolumeSetting},R)}function a(a,b){return[]}function c(a){var c=a.doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn;c=c===void 0?!1:c;var d=a.errorBoundaryFallback;a=babelHelpers.objectWithoutPropertiesLoose(a,["doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn","errorBoundaryFallback"]);a=h.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:13,children:h.jsx(l,babelHelpers["extends"]({},a))});return c?a:h.jsx(b("VideoPlayerRetryableErrorBoundary.react"),{description:"VideoPlayerRelayBoundary",fallback:(c=d)!=null?c:b("defaultErrorBoundaryFallback"),children:a})}}),null);
__d("CometAudioManagerHooks",["CometAudioManagerContexts","React","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";f.useAudioApi=a;var g=b("React");function a(){var a=g.useContext(b("CometAudioManagerContexts").AudioApiContext);return a}}),null);
__d("makeAudioSymbol",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){b=b+"::"+a;return b}}),null);
__d("CoreVideoPlayerAudioClient.react",["CometAudioManagerContexts","CometAudioManagerHooks","CometThrottle","React","VideoPlayerHooks","VideoPlayerPortalingPlaceInfoProvider.react","makeAudioSymbol","useCometUniqueID","usePrevious"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){var a,c=b("useCometUniqueID")(),d=(a=b("VideoPlayerHooks")).useInstanceKey(),e=g.useMemo(function(){return b("makeAudioSymbol")(c,d)},[c,d]),f=b("CometAudioManagerHooks").useAudioApi(),h=g.useRef(f);g.useEffect(function(){h.current=f},[f]);var i=a.useController(),j=200,k=a.useLastPlayReason(),l=a.useLastMuteReason(),m=a.useMuted();j=b("CometThrottle")(a.useVolume,j,{trailing:!0});j=j();var n=b("usePrevious")(j),o=a.usePaused(),p=g.useContext(b("CometAudioManagerContexts").CometAudioLocalScopeContext),q=g.useContext(b("CometAudioManagerContexts").CometAudioGroupContext),r=b("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo(),s=a.useVolumeSetting(),t=g.useMemo(function(){return(q==null?void 0:q.groupID)||b("CometAudioManagerContexts").makeAudioGroupID()},[q==null?void 0:q.groupID]);a=g.useState(!0);var u=a[0];a=a[1];var v={audioLocalScope:p,controller:i,groupID:t,instanceKey:d,lastMuteReason:l,lastPlayReason:k,muted:m,paused:o,previousVolume:n,symbol:e,videoPlayerPortalingPlaceInfo:r,volume:j};g.useEffect(function(){s!=null&&i.setVolume(s)},[i,s]);p=q||{allowSound:u,groupID:t,setAllowSound:a};var w=g.useRef(p);g.useEffect(function(){f&&f.register(v,w.current);return function(){f&&f.unregister(e,t)}},[f,v,t,e]);g.useEffect(function(){f&&f.update(v)},[f,v]);g.useEffect(function(){!u&&h.current&&i.setMuted(!0,"audio_manager_initiated")},[u,h,i]);return null}}),null);
__d("VideoPlayerCaptionsController",["JSResource","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";f.createCaptionsController=a;var g=b("JSResource")("VideoPlayerHTML5ApiCea608State").__setRef("VideoPlayerCaptionsController"),h=b("JSResource")("VideoPlayerHTML5ApiWebVttState").__setRef("VideoPlayerCaptionsController");function a(a){var c=a.captionsUrl,d=a.inbandCaptionsExpected,e=a.onCaptionsLoaded,f=null,i=null,j=null,k=null;function l(a){var c=h.load().then(function(b){if(c!==j)return;f=new b({captionsDisplay:null,onCaptionsLoaded:e,onReady:function(b){b.loadFromUrl(a)}})})["catch"](function(a){if(c!==j)return;b("recoverableViolation")("Failed to load the VideoPlayerHTML5ApiWebVttState module: "+a.message,"comet_video_player")});return c}function m(){var a=g.load().then(function(b){if(a!==k)return;i=new b({captionsDisplay:null,onCaptionsLoaded:e,onReady:function(a){a.processQueue()}})})["catch"](function(c){if(a!==k)return;b("recoverableViolation")("Failed to load the VideoPlayerHTML5ApiCea608State module: "+c.message,"comet_video_player")});return a}c!=null?j=l(c):d===!0&&(k=m());return{destroy:function(){f&&(f.destroy(),f=null),i&&(i.destroy(),i=null),j&&(j=null),k&&(k=null)},handleCea608BytesReceived:function(a){i&&i.enqueueBytes(a)},handleTimeUpdate:function(a){if(f){f.source&&f.source.handleTimeUpdate(a);return f.getCurrentScreenRepresentation()}else if(i){i.source&&i.source.handleTimeUpdate(a);return i.getCurrentScreenRepresentation()}return null},updateCaptionsUrl:function(a){f&&(f.destroy(),f=null),a!=null&&(j=l(a))},updateInbandCaptionsExpected:function(a){i&&(i.destroy(),i=null),a&&(k=m())}}}}),null);
__d("VideoPlayerBanzaiLogFlusher",["Banzai","BanzaiConsts","emptyFunction","gkx"],(function(a,b,c,d,e,f){"use strict";var g,h="video_player";a=b("emptyFunction");c=function(){function a(a){this.$1=a}var c=a.prototype;c.flushLogs=function(){var a=this.$1.consumeLoggerEvents();a.forEach(function(a){var c={event:a.eventType,logData:a.logData,routeTracePolicy:a.routeTracePolicy,source:a.source_VPL_LOGGING_HACK};if(a.source_VPL_LOGGING_HACK==="animated_image_share"&&b("gkx")("1710047"))return;a=(a=a.logData)==null?void 0:a.ad_client_token;var d=b("gkx")("1426867")?{batch:1500,delay:(g||(g=b("BanzaiConsts"))).VITAL_WAIT}:{delay:(g||(g=b("BanzaiConsts"))).VITAL_WAIT};b("gkx")("1107827")?b("Banzai").post(h,c,d):a!=null?b("Banzai").post(h,c,b("Banzai").VITAL):(d.delay=(g||(g=b("BanzaiConsts"))).BASIC_WAIT_COMET,b("Banzai").post(h,c,d))})};return a}();e.exports=c}),null);
__d("getErrorMessageFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){switch(a){case 1:return"The fetching process for the media resource was aborted by the user agent at the users request.";case 2:return"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return"The media resource indicated by the src attribute was not suitable."}return null}}),null);
__d("getErrorNameFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"MEDIA_ERR_UNKNOWN_"+((a=a)!=null?a:"UNDEFINED")}}}),null);
__d("VideoPlayerImplementationErrors",["getErrorMessageFromMediaErrorCode","getErrorNameFromMediaErrorCode"],(function(a,b,c,d,e,f){"use strict";f.createVideoPlayerErrorFromHTMLVideoElementError=a;f.createVideoPlayerErrorFromVideoElementPlayPromiseRejectionReason=c;f.createVideoPlayerErrorFromGenericError=d;function a(a){var c=a.errorLocation,d=a.hostCallError,e=a.videoElementError,f=a.videoElementNetworkState;a=a.videoElementReadyState;var g=e==null?void 0:e.code,h=d!=null&&typeof d.message==="string"?d.message:null;h==null&&(h=e==null?void 0:e.message);h==null&&g!=null&&(h=b("getErrorMessageFromMediaErrorCode")(g));e={createdTimestamp:Date.now(),errorDescription:((e=h)!=null?e:"Empty error")+("; code: "+((h=g)!=null?h:"undefined"))+("; readyState: "+a)+("; networkState: "+f),errorLocation:c,errorName:b("getErrorNameFromMediaErrorCode")(g),originalError:d};return e}function c(a,b){if(a==null){var c={createdTimestamp:Date.now(),errorDescription:"Empty rejection reason from video play()",errorLocation:b,errorName:"PlayRejectedError"};return c}c={createdTimestamp:Date.now(),errorCode:typeof a.code==="string"?a.code:typeof a.code==="number"?String(a.code):void 0,errorDescription:typeof a.message==="string"?a.message:String(a),errorLocation:b,errorName:typeof a.name==="string"?a.name:"PlayRejectedError"};return c}function d(a,b,c){var d;d={message:(d=b==null?void 0:b.message)!=null?d:"",name:(d=b==null?void 0:b.name)!=null?d:"UnknownError",stack:(b==null?void 0:b.stack)||new Error().stack};b={createdTimestamp:Date.now(),errorCode:null,errorDescription:d.name+" "+d.message,errorLocation:c,errorName:a,stack:d.stack,url:null};return b}}),null);
__d("VideoPlayerImplementationStateMachine",["VideoPlayerImplementationErrors","gkx","recoverableViolation","shallowEqual","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";f.createVideoPlayerImplementationStateMachine=m;f.createVideoPlayerImplementationStateMachineWithStateTransitionHandlers=a;f.createReactVideoElementCallbacksForStateMachine=c;function g(a){var b=a.bufferingDetected,c=a.seeking;a=a.waitingForDomPlaying;return!b&&!c&&!a}function h(a){var c=a.bufferingDetected,d=a.prevPlaybackState,e=a.seeking;a=a.waitingForDomPlaying;c=g({bufferingDetected:c,seeking:e,waitingForDomPlaying:a});e=d;switch(d){case"stalling":e=c?"playing":"stalling";break;case"ended":case"paused":case"playing":break;default:d;b("recoverableViolation")("unexpected playbackState: "+d,"comet_video_player");break}return e}function i(a,c,d){switch(d.type){case"host_call_pause":case"host_call_play":case"host_call_set_current_time":case"host_call_set_volume":case"host_call_set_muted":case"host_call_set_playback_rate":case"host_call_set_video_quality":return babelHelpers["extends"]({},a,{hostCallQueue:a.hostCallQueue.concat([d])});case"dom_event_ended":return babelHelpers["extends"]({},a,{playbackState:"ended",waitingForDomPlaying:!1});case"dom_event_pause":if(a.playbackState==="ended")return a;if(c.videoElementEnded===!0)return babelHelpers["extends"]({},a,{playbackState:"ended",waitingForDomPlaying:!1});return a.playbackState==="paused"?a:babelHelpers["extends"]({},a,{playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play":var e=a.playbackState,f=e;switch(e){case"playing":case"stalling":case"ended":case"paused":f="stalling";break;default:e;b("recoverableViolation")("unexpected playbackState: "+e,"comet_video_player");break}e=!0;return babelHelpers["extends"]({},a,{playbackState:f,waitingForDomPlaying:e});case"dom_event_playing":f=a.bufferingDetected;e=a.seeking;var g=!1,i=a.playbackState;return babelHelpers["extends"]({},a,{playbackState:h({bufferingDetected:f,prevPlaybackState:i,seeking:e,waitingForDomPlaying:g}),waitingForDomPlaying:g});case"dom_event_timeupdate":if(a.waitingForDomTimeUpdateAfterSeeked){f=a.bufferingDetected;i=a.seeking;e=!1;g=a.playbackState;return babelHelpers["extends"]({},a,{playbackState:h({bufferingDetected:f,prevPlaybackState:g,seeking:i,waitingForDomPlaying:e}),waitingForDomPlaying:e,waitingForDomTimeUpdateAfterSeeked:!1})}return a;case"dom_event_seeking":f=a.playbackState;g=f;switch(f){case"paused":case"ended":break;case"stalling":case"playing":g="stalling";break;default:f,b("recoverableViolation")("unexpected playbackState: "+f,"comet_video_player")}return babelHelpers["extends"]({},a,{playbackState:g,seeking:!0,waitingForDomPlaying:!0});case"dom_event_seeked":i=a.bufferingDetected;e=a.waitingForDomPlaying;f=!1;g=a.playbackState;return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:null,playbackState:h({bufferingDetected:i,prevPlaybackState:g,seeking:f,waitingForDomPlaying:e}),seeking:f,waitingForDomTimeUpdateAfterSeeked:!0});case"dom_event_error":i=b("VideoPlayerImplementationErrors").createVideoPlayerErrorFromHTMLVideoElementError({errorLocation:"dom_event_error",hostCallError:null,videoElementError:d.payload.videoElementError,videoElementNetworkState:d.payload.videoElementNetworkState,videoElementReadyState:d.payload.videoElementReadyState});return babelHelpers["extends"]({},a,{error:i,playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play_promise_created":return babelHelpers["extends"]({},a,{hostCallPlayIDLast:d.payload.hostCallPlayID});case"dom_event_play_promise_resolved":return a.hostCallPlayIDLast!==d.payload.hostCallPlayID?a:babelHelpers["extends"]({},a,{hostCallPlayIDLast:null});case"dom_event_play_promise_rejected":return a.hostCallPlayIDLast!==d.payload.hostCallPlayID?a:babelHelpers["extends"]({},a,{hostCallPlayIDLast:null,playbackState:a.playbackState==="stalling"?"paused":a.playbackState,waitingForDomPlaying:!1});case"implementation_host_call_queue_flushed":return babelHelpers["extends"]({},a,{hostCallQueue:[]});case"implementation_host_call_failed":g=b("VideoPlayerImplementationErrors").createVideoPlayerErrorFromHTMLVideoElementError({errorLocation:d.payload.errorLocation,hostCallError:d.payload.hostCallError,videoElementError:d.payload.videoElementError,videoElementNetworkState:d.payload.videoElementNetworkState,videoElementReadyState:d.payload.videoElementReadyState});return babelHelpers["extends"]({},a,{error:g,playbackState:"paused",waitingForDomPlaying:!1});case"implementation_video_node_unmounted":return a;case"implementation_engine_initialized":return babelHelpers["extends"]({},a,{availableQualities:d.payload.availableQualities,selectedVideoQuality:d.payload.selectedVideoQuality,targetVideoQuality:d.payload.targetVideoQuality,videoProjection:d.payload.videoProjection});case"implementation_engine_destroyed":return a;case"implementation_fatal_error":return babelHelpers["extends"]({},a,{error:d.payload.fatalError,playbackState:"paused",waitingForDomPlaying:!1});case"implementation_seek_requested":return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:d.payload.seekSourcePosition});case"representation_changed":return babelHelpers["extends"]({},a,{targetVideoQuality:d.payload.targetVideoQuality});case"controller_pause_requested":return a.playbackState==="ended"?a:babelHelpers["extends"]({},a,{lastPauseReason:d.payload.reason,lastPausedTimeMs:Date.now(),lastPlayedTimeMs:0,playbackState:"paused",waitingForDomPlaying:!1,watchTimeMs:a.lastPlayedTimeMs>0?a.watchTimeMs+(Date.now()-a.lastPlayedTimeMs):a.watchTimeMs});case"controller_play_requested":if(a.playbackState!=="paused"&&a.playbackState!=="ended")return a;e=a.loopCount>0&&a.loopCurrent<a.loopCount||a.loopCount===-1?d.payload.reason==="loop_initiated"?a.loopCurrent+1:a.loopCurrent:0;return babelHelpers["extends"]({},a,{lastPlayReason:d.payload.reason,lastPlayedTimeMs:a.lastPlayedTimeMs===0?Date.now():a.lastPlayedTimeMs,loopCurrent:e,playbackState:"stalling",waitingForDomPlaying:!0});case"controller_seek_requested":return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:(f=c.videoElementPlayheadPosition)!=null?f:a.implementationSeekSourcePosition,seekTargetPosition:d.payload.seekTargetPosition,seeking:!0});case"controller_quality_requested":return babelHelpers["extends"]({},a,{selectedVideoQuality:d.payload.selectedVideoQuality});case"controller_set_playback_rate":return babelHelpers["extends"]({},a,{targetPlaybackRate:d.payload.playbackRate});case"controller_muted_requested":return babelHelpers["extends"]({},a,{lastMuteReason:d.payload.reason,muted:d.payload.muted});case"controller_volume_requested":return babelHelpers["extends"]({},a,{volume:d.payload.volume});case"controller_scrub_begin_requested":return a.scrubbing?a:babelHelpers["extends"]({},a,{scrubbing:!0,seekTargetPosition:null});case"controller_scrub_end_requested":return!a.scrubbing?a:babelHelpers["extends"]({},a,{implementationSeekSourcePosition:(i=c.videoElementPlayheadPosition)!=null?i:a.implementationSeekSourcePosition,scrubbing:!1,seekTargetPosition:d.payload.seekTargetPosition,seeking:d.payload.seekTargetPosition!=null});case"buffering_begin_requested":g=a.playbackState;e=g;switch(g){case"paused":case"ended":break;case"playing":case"stalling":e="stalling";break;default:g;b("recoverableViolation")("unexpected playbackState: "+g,"comet_video_player");break}return babelHelpers["extends"]({},a,{bufferingDetected:!0,playbackState:e});case"buffering_end_requested":f=a.seeking;c=a.waitingForDomPlaying;i=!1;g=a.playbackState;return babelHelpers["extends"]({},a,{bufferingDetected:i,playbackState:h({bufferingDetected:i,prevPlaybackState:g,seeking:f,waitingForDomPlaying:c})});case"controller_set_captions_visible_requested":e=d.payload.captionsVisible;return a.captionsVisible===e?a:babelHelpers["extends"]({},a,{activeCaptions:e?a.activeCaptions:null,captionsVisible:e});case"controller_set_active_captions_requested":i=d.payload.activeCaptions;f=(g=i==null?void 0:i.rows)!=null?g:[];c=a.activeCaptions;var j=(e=c==null?void 0:c.rows)!=null?e:[];return j.length===f.length&&f.every(function(a,b){return j[b]===a})?a:babelHelpers["extends"]({},a,{activeCaptions:i});case"captions_loaded":return babelHelpers["extends"]({},a,{activeCaptions:a.activeCaptions,captionsLoaded:!0});case"captions_unloaded":return babelHelpers["extends"]({},a,{activeCaptions:null,captionsLoaded:!1});case"inband_captions_autogenerated_changed":g=d.payload.inbandCaptionsAutogenerated;return a.inbandCaptionsAutogenerated===g?a:babelHelpers["extends"]({},a,{inbandCaptionsAutogenerated:g});case"stream_ended":return babelHelpers["extends"]({},a,{streamEnded:!0});case"stream_interrupted":return babelHelpers["extends"]({},a,{streamInterrupted:!0});case"stream_resumed":return babelHelpers["extends"]({},a,{streamInterrupted:!1});case"seekable_ranges_changed":c=d.payload.seekableRanges;return babelHelpers["extends"]({},a,{seekableRanges:c});case"controller_set_is_live_rewind_active_requested":e=d.payload.isLiveRewindActive;return babelHelpers["extends"]({},a,{isLiveRewindActive:e});case"loop_count_change_requested":f=d.payload.loopCount;return f===a.loopCount?a:babelHelpers["extends"]({},a,{loopCount:f,loopCurrent:0});case"player_dimensions_changed":i=d.payload.dimensions;g=i.height;c=i.width;return c===a.dimensions.width&&g===a.dimensions.height?a:babelHelpers["extends"]({},a,{dimensions:{height:g,width:c}});default:return a}}function j(a,c,d){var e=c.type!=="dom_seeking";e=e?d:a.uncontrolledState;d=!b("shallowEqual")(e,a.uncontrolledState);c=i(a.controlledState,e,c);var f=!b("shallowEqual")(c,a.controlledState);return d||f?babelHelpers["extends"]({},a,{controlledState:f?c:a.controlledState,uncontrolledState:d?e:a.uncontrolledState}):a}var k,l;function m(a){var c=a.collectUncontrolledState,d=a.debugLogId;d=a.initialState;var e=a.onDispatched,f=a.onFatalError,g=d,h=g,i=0,k=!1,l=!1,m=!0,n=!0;return{dispatch:function(a){if(!n)return;var d=null,g=null;try{++i;if(i>=10)if(!k){k=!0;throw b("unrecoverableViolation")("Video player state machine loop detected","comet_video_player")}else return;var o=h.uncontrolledState;if(m)try{o=c()}catch(a){m=!1,g=a}var p=h;o=j(p,a,o);h=o;e(p,o,a)}catch(a){n=!1,d=a}finally{if(!l&&(d!=null||g!=null)){l=!0;try{f((p=d)!=null?p:g)}catch(a){}}--i}},getCurrentState:function(){return h},getInitialState:function(){return g}}}var n,o;function a(a){var b=a.collectUncontrolledState,c=a.debugLogId,d=a.initialState,e=a.onFatalError,f=a.stateTransitionHandlers;function g(a,b,c){try{var d=!0,e=0;while(d&&e<f.length){var g=f[e];d=g(a,b,c);++e}}finally{}}return m({collectUncontrolledState:b,debugLogId:c,initialState:d,onDispatched:g,onFatalError:e})}function c(a,b){function c(){}function d(a){return a}function e(c){return function(e){var f=d(e.currentTarget);b(f,["reactEvent("+e.type+")"]);a.dispatch(c)}}return{onAbort:c,onCanPlay:c,onCanPlayThrough:c,onDurationChange:e({type:"dom_event_durationchange"}),onEmptied:c,onEncrypted:c,onEnded:e({type:"dom_event_ended"}),onError:function(c){var e=d(c.currentTarget);b(e,["reactEvent("+c.type+")"]);a.dispatch({payload:{videoElementError:e.error,videoElementNetworkState:e.networkState,videoElementReadyState:e.readyState},type:"dom_event_error"})},onLoadStart:c,onLoadedData:c,onLoadedMetadata:c,onPause:e({type:"dom_event_pause"}),onPlay:e({type:"dom_event_play"}),onPlaying:e({type:"dom_event_playing"}),onProgress:e({type:"dom_event_progress"}),onRateChange:e({type:"dom_event_ratechange"}),onSeeked:e({type:"dom_event_seeked"}),onSeeking:e({type:"dom_event_seeking"}),onStalled:c,onSuspend:c,onTimeUpdate:e({type:"dom_event_timeupdate"}),onVolumeChange:e({type:"dom_event_volumechange"}),onWaiting:e({type:"dom_event_waiting"})}}}),null);
__d("VideoPlayerImplementationStateMachineHostCallQueue",["cometUniqueID","emptyFunction","gkx","promiseDone"],(function(a,b,c,d,e,f){"use strict";f.makeHostCallID=g;f.applyOrQueueHostCall=i;f.flushHostCallQueue=a;c=b("emptyFunction");function g(){return"id-vpdom-"+b("cometUniqueID")()}function h(a){var c=a.engineExtrasAPI,d=a.hostCall,e=a.machine;a=a.videoElementAPI;switch(d.type){case"host_call_play":var f=a.play();f&&(e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID},type:"dom_event_play_promise_created"}),b("promiseDone")(f.then(function(){e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID},type:"dom_event_play_promise_resolved"})},function(a){e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID,playPromiseRejectionReason:a},type:"dom_event_play_promise_rejected"})})));break;case"host_call_pause":a.pause();break;case"host_call_set_playback_rate":a.setPlaybackRate(d.payload.playbackRate);break;case"host_call_set_muted":a.setMuted(d.payload.muted);break;case"host_call_set_volume":a.setVolume(d.payload.volume);break;case"host_call_set_current_time":a.setPlayheadPosition(d.payload.currentTime);break;case"host_call_set_video_quality":c.setUserSelectedVideoQuality(d.payload.selectedVideoQuality);break;case"host_call_set_latency_level":c.setLatencyLevel(d.payload.latencyLevel);break;default:d.type;return!1}return!0}function i(a){var b=a.engineExtrasAPI,c=a.hostCall,d=a.machine;a=a.videoElementAPI;if(!a||!b)d.dispatch(c);else{var e=!1;try{e=h({engineExtrasAPI:b,hostCall:c,machine:d,videoElementAPI:a})}catch(b){d.dispatch({payload:{errorLocation:"apply_host_call_catch",hostCall:c,hostCallError:b,videoElementError:a.getError(),videoElementNetworkState:a.getNetworkState(),videoElementReadyState:a.getReadyState()},type:"implementation_host_call_failed"})}e&&d.dispatch({payload:{hostCall:c},type:"implementation_host_call_applied"})}}function j(a){var b=[];function c(){b=b.filter(function(a){return a.type!=="host_call_play"&&a.type!=="host_call_pause"})}function d(a){b=b.filter(function(b){return b.type!==a})}a.forEach(function(a){switch(a.type){case"host_call_play":c();break;case"host_call_pause":c();break;case"host_call_set_playback_rate":d(a.type);break;case"host_call_set_muted":d(a.type);break;case"host_call_set_volume":d(a.type);break;case"host_call_set_current_time":d(a.type);break;case"host_call_set_video_quality":d(a.type);break;case"host_call_set_latency_level":d(a.type);break;default:a.type}b=b.concat([a])});return b}function a(a){var b=a.engineExtrasAPI,c=a.machine,d=a.reason,e=a.state,f=a.videoElementAPI;a=[{payload:{hostCallID:g(),reason:d,volume:e.controlledState.volume},type:"host_call_set_volume"},{payload:{hostCallID:g(),muted:e.controlledState.muted,reason:d},type:"host_call_set_muted"},{payload:{hostCallID:g(),reason:d,selectedVideoQuality:e.controlledState.selectedVideoQuality},type:"host_call_set_video_quality"}];d=j(e.controlledState.hostCallQueue.concat(a));d.forEach(function(a){i({engineExtrasAPI:b,hostCall:a,machine:c,videoElementAPI:f})});c.dispatch({payload:{hostCallsFlushed:d},type:"implementation_host_call_queue_flushed"})}}),null);
__d("VideoMimeTypes",[],(function(a,b,c,d,e,f){function a(a,b,c){return a+'; codecs="'+b+", "+c+'"'}f="mp4a.40.2";function b(a){return"avc1.42E0"+a.toString(16).toUpperCase()}function c(a){return"avc1.4D40"+a.toString(16).toUpperCase()}function d(a){return"avc1.6400"+a.toString(16).toUpperCase()}var g="video/mp4";b=a(g,b(30),f);var h=a(g,c(30),f);c=a(g,c(31),f);var i=a(g,d(50),f);a=a(g,d(51),f);g={h264baseline:b,h264main30avc:h,h264main31avc:c,h264high50avc:i,h264high51avc:a};e.exports=g}),null);
__d("VideoPlayerConnectionQuality",[],(function(a,b,c,d,e,f){"use strict";var g={POOR:"POOR",MODERATE:"MODERATE",GOOD:"GOOD",EXCELLENT:"EXCELLENT"},h=[{bandwidth:5e5,connectionQuality:g.POOR},{bandwidth:2e6,connectionQuality:g.MODERATE},{bandwidth:1e7,connectionQuality:g.GOOD}],i=100,j=null,k=null;a=function(a){if(j!==null&&k!==null&&j>=Date.now()-i)return k;a=a();var b=null;if(a!=null)for(var c=0;c<h.length;c++)if(a<h[c].bandwidth){b=h[c].connectionQuality;break}b===null&&(b=g.EXCELLENT);j=Date.now();k=b;return b};f.evaluate=a}),null);
__d("VideoPlayerLoggerPlayerStates",[],(function(a,b,c,d,e,f){a="started";b="unpaused";c={STARTED:a,UNPAUSED:b};e.exports=c}),null);
__d("VideoPlayerMutedStateChange",[],(function(a,b,c,d,e,f){"use strict";f.getVideoPlayerMutedStateChange=a;function a(a){var b=a.currMuted,c=a.currVolume,d=a.prevMuted;a=a.prevVolume;b=b||c===0;c=d||a===0;if(c===b)return null;return b?"muted":"unmuted"}}),null);
__d("getVideoBrowserTabId",["guid"],(function(a,b,c,d,e,f){e.exports=a;var g=b("guid")().slice(-8);function a(){return g}}),null);
__d("VideoPlayerImplementationStateMachineLogger",["PlaybackSpeedExperiments","SiteData","VideoMimeTypes","VideoPlayerConnectionQuality","VideoPlayerLoggerPlayerStates","VideoPlayerMutedStateChange","VideoPlayerStateBasedLoggingEvents","emptyFunction","getPlayerFormatForLogData","getVideoBrowserTabId","gkx","mapObject","recoverableViolation","removeFromArray"],(function(a,b,c,d,e,f){"use strict";f.createVideoPlayerImplementationStateMachineLogger=a;var g,h=6e4;f.HEARTBEAT_INTERVAL=h;var i=.5,j=null,k=function(a){var b;j=(b=j)!=null?b:document.createElement("video");return!("canPlayType"in j)?"":j.canPlayType(a)};d=c=b("emptyFunction");e=c;a=c;f=c;var l=(d=b("PlaybackSpeedExperiments").enablePlaybackSpeedLogging())!=null?d:!1;function m(){return{canLogPausedOrFinishedPlaying:!1,canLogPlayingEvent:!0,debugSubscribers:[],dontLogPauseOnUnpausedSeeking:!1,hasLoggedStallData:!1,hasLoggedStartedPlaying:!1,hasPausedOnce:!1,hasPendingRequestedPlaying:!1,initialSuborigin:void 0,interruptCount:0,interruptDuration:0,interruptEndTimestamp:0,interruptStartTimestamp:0,isLoggingScrubbingSequence:!1,lastLoggedError:null,lastLoggedFullscreenState:!1,lastLoggedPlaybackSpeed:null,lastLoggedViewabilityPercentage:void 0,lastStartTimePosition:null,lastTrackedRepresentation:null,nextHeartbeatTime:null,nextPlayedThreeSecondsPlayheadPosition:null,sequenceNumber:0,shouldIgnoreDomPause:!1,shouldIgnoreDomPlay:!1,shouldLogRequestedPlayingForScrub:!1,stallCount:0,stallCount200ms:0,stallDuration:0,stallStartTimestamp:0,stallCountTotal:0,stallDurationTotal:0,startStallCountTotal:0,startStallDurationTotal:0,vplEventSequenceNumber:0}}function n(a,b){return b==="muted"||b==="unmuted"||b==="started_playing"||b==="caption_change"||b==="unpaused"?a.controlledState.captionsVisible?"on":"off":void 0}function a(a){var c=new Map(),d=a.initialLoggingMetaData,e=d,f=[],j=m(),o=new Set(b("VideoPlayerStateBasedLoggingEvents").StateBasedLoggingEventNames);function p(a){j.debugSubscribers.push(a);return function(){b("removeFromArray")(j.debugSubscribers,a)}}function q(a){j.debugSubscribers.forEach(function(b){return b(a)})}function r(a){var b=j.stallStartTimestamp;if(b>0){j.stallCount+=1;j.stallCountTotal+=1;j.hasPendingRequestedPlaying&&(j.startStallCountTotal+=1);a=a-b;j.stallDurationTotal+=a;j.stallDuration+=a;j.stallCount200ms+=a>200?1:0;j.hasPendingRequestedPlaying&&(j.startStallDurationTotal+=a)}}function s(a,b){a=a.uncontrolledState.videoElementPlayheadPosition==null?null:a.uncontrolledState.videoElementPlayheadPosition;var c=null;switch(b){case"paused":case"cancelled_requested_playing":case"finished_playing":case"heart_beat":case"playback_speed_changed":case"representation_ended":c=j.lastStartTimePosition;break;case"scrubbed":c=a;break;default:break}switch(b){case"paused":case"cancelled_requested_playing":case"finished_playing":case"scrubbed":j.lastStartTimePosition=null;break;case"started_playing":case"unpaused":case"heart_beat":case"playback_speed_changed":case"representation_ended":j.lastStartTimePosition=a;break;default:break}return{video_last_start_time_position:c}}function t(a,b){var c=b.uncontrolledState.clockTimestamp;a=a.controlledState.streamInterrupted;b=b.controlledState.streamInterrupted;!a&&b?j.interruptStartTimestamp=c:a&&!b&&j.interruptStartTimestamp>0&&(j.interruptEndTimestamp=c,j.interruptCount+=1,j.interruptDuration+=j.interruptEndTimestamp-j.interruptStartTimestamp)}function u(a,b){var c=b.uncontrolledState.clockTimestamp;a=a.controlledState.playbackState;var d=b.controlledState.playbackState;a!=="stalling"&&d==="stalling"&&(q("stall_start"),j.stallStartTimestamp=c);a==="stalling"&&d!=="stalling"&&(r(b.uncontrolledState.clockTimestamp),j.stallStartTimestamp=0,q("stall_end"))}function v(a,b,c){a=b.uncontrolledState;b=a.videoElementPlayheadPosition;switch(c){case"unpaused":case"started_playing":j.nextPlayedThreeSecondsPlayheadPosition=((a=b)!=null?a:0)+3;break;case"paused":case"finished_playing":j.nextPlayedThreeSecondsPlayheadPosition=null;break;default:break}}function w(a,b,c){if(j.interruptCount>0&&j.interruptDuration>0){a={interrupt_count:j.interruptCount,interrupt_time:j.interruptDuration};j.interruptCount=0;j.interruptDuration=0;j.interruptStartTimestamp=0;j.interruptEndTimestamp=0;return a}return{interrupt_count:null,interrupt_time:null}}function x(a,b,c){var d={stall_count:null,stall_count_200_ms:null,stall_time:null},e=b.uncontrolledState.clockTimestamp,f=function(){var a={stall_count:j.stallCount,stall_count_200_ms:j.stallCount200ms,stall_time:j.stallDuration};j.stallCount=0;j.stallCount200ms=0;j.stallDuration=0;j.stallStartTimestamp=0;return a};a=a.controlledState.playbackState;var g=b.controlledState.playbackState;a!=="stalling"&&g==="stalling"&&(j.stallStartTimestamp=e);switch(c){case"started_playing":case"unpaused":case"finished_playing":case"paused":case"cancelled_requested_playing":case"playback_speed_changed":case"representation_ended":r(b.uncontrolledState.clockTimestamp);d=f();break;case"heart_beat":b.controlledState.playbackState!=="stalling"&&(r(b.uncontrolledState.clockTimestamp),d=f());break;default:break}return d}function y(a,b){a=a?a.getAndFlushTracedFrames():null;switch(b){case"finished_playing":case"paused":case"heart_beat":return a!=null?JSON.stringify(a):null;default:return null}}function z(a){a=a.controlledState.playbackState;switch(a){case"playing":case"stalling":return"playing";case"paused":return"paused";case"ended":return"finished";default:a;return"unknown"}}function A(){return{state:j.hasLoggedStartedPlaying?b("VideoPlayerLoggerPlayerStates").UNPAUSED:b("VideoPlayerLoggerPlayerStates").STARTED}}function B(e){var g=e.eventType,h=e.logDataOverrides,i=e.prevState,k=e.state;e=s(k,g);e=e.video_last_start_time_position;var m=x(i,k,g),p=m.stall_count,q=m.stall_count_200_ms;m=m.stall_time;var r=w(i,k,g),t=r.interrupt_count;r=r.interrupt_time;var u=y(a.initialLoggingMetaData.videoLiveTrace,g),A=[],B=a.initialLoggingMetaData.coreVideoPlayerMetaData.autoplayGatingResult;B&&A.push(B);B=g==="entered_fs"?!0:g==="exited_fs"?!1:j.lastLoggedFullscreenState;var C=b("getPlayerFormatForLogData")(B,d.coreVideoPlayerMetaData.playerFormat),D=k.uncontrolledState.viewabilityPercentage,E=Boolean(k.uncontrolledState.isFBIsLiveTemplated),F=Boolean(k.uncontrolledState.isFBWasLive),G=k.uncontrolledState.videoElementPlaybackRate;G=G==null||G===0?j.lastLoggedPlaybackSpeed:G;var H=a.initialLoggingMetaData.productAttribution;u={access_token:a.initialLoggingMetaData.accessToken,ad_client_token:d.coreVideoPlayerMetaData.adClientToken,attribution_id:H!=null?JSON.stringify(H):null,autoplay_eligible:a.initialLoggingMetaData.coreVideoPlayerMetaData.canAutoplay==="allow",autoplay_failure_reasons:JSON.stringify(A),autoplay_setting:a.initialLoggingMetaData.coreVideoPlayerMetaData.autoplaySetting,broadcaster_origin:a.initialLoggingMetaData.coreVideoPlayerMetaData.broadcasterOrigin,browser_tab_id:b("getVideoBrowserTabId")(),caption_state:n(k,g),current_playback_speed:l?G:null,current_viewability_percentage:D,data_connection_quality:b("VideoPlayerConnectionQuality").evaluate(function(){return k.uncontrolledState.estimatedBandwidth}),dropped_frame_count:k.uncontrolledState.videoElementDroppedFrameCount,external_log_id:d.coreVideoPlayerMetaData.externalLogID,external_log_type:d.coreVideoPlayerMetaData.externalLogType,frame_events:u,interrupt_count:t,interrupt_time:r,is_abr_enabled:k.isAbrEnabled,is_fbms:k.uncontrolledState.isFBMS,is_predictive_playback:k.uncontrolledState.isPredictiveDash,is_sound_on:!k.controlledState.muted,is_live_video_rewound:k.controlledState.isLiveRewindActive,is_templated_manifest:E||F,last_viewability_percentage:j.lastLoggedViewabilityPercentage,living_room_session_id:a.initialLoggingMetaData.coreVideoPlayerMetaData.livingRoomID,playback_is_drm:Boolean(a.initialLoggingMetaData.coreVideoPlayerMetaData.graphQLVideoDRMInfo),playback_duration:k.uncontrolledState.videoElementDuration,playback_is_broadcast:a.initialLoggingMetaData.coreVideoPlayerMetaData.isVideoBroadcast,playback_is_live_streaming:a.initialLoggingMetaData.coreVideoPlayerMetaData.isLiveStreaming,player_format:C,player_instance_key:d.instanceKey,player_origin:d.coreVideoPlayerMetaData.playerOriginOverride,player_state:z(k),player_suborigin:d.coreVideoPlayerMetaData.subOrigin,player_version:k.playerVersion,representation_id:k.uncontrolledState.videoRepresentationID,source_VPL_LOGGING_HACK:d.coreVideoPlayerMetaData.source_VPL_LOGGING_HACK,stall_count:p,stall_count_200_ms:q,stall_time:m,streaming_format:k.streamingFormat,total_frame_count:k.uncontrolledState.videoElementTotalFrameCount,tracking_data_encrypted:a.initialLoggingMetaData.trackingDataEncrypted,tracking_nodes:a.initialLoggingMetaData.trackingNodes,v2_heart_beat:b("gkx")("1434599")&&g==="heart_beat"?!0:null,video_bandwidth:k.uncontrolledState.estimatedBandwidth,video_id:d.coreVideoPlayerMetaData.videoFBID,video_last_start_time_position:e,video_play_reason:k.controlledState.lastPlayReason,video_player_height:(H=d.dimensions)==null?void 0:H.height,video_player_width:(A=d.dimensions)==null?void 0:A.width,video_time_position:k.uncontrolledState.videoElementPlayheadPosition,web_client_revision:b("SiteData").client_revision};t={event_seq_num:++j.vplEventSequenceNumber,seq_num:o.has(g)?++j.sequenceNumber:null,time_ms:Date.now()};var I={};c.forEach(function(a,b){I[b]=a});r=babelHelpers["extends"]({},I,u,h,t);F=(E=j.initialSuborigin)!=null?E:d.coreVideoPlayerMetaData.subOrigin;p=(C=r.source_VPL_LOGGING_HACK)!=null?C:F;m=(q=d.coreVideoPlayerMetaData.initialTracePolicy)!=null?q:d.coreVideoPlayerMetaData.routeTracePolicy;e={eventType:g,logData:r,routeTracePolicy:m,source_VPL_LOGGING_HACK:p};f.push(e);v(i,k,g);j.initialSuborigin==null&&F!=null&&(j.initialSuborigin=F);j.lastLoggedFullscreenState=B;j.lastLoggedPlaybackSpeed=G;g==="viewability_changed"&&(j.lastLoggedViewabilityPercentage=D)}var C={};function D(a,b,c){B({eventType:"requested_playing",logDataOverrides:babelHelpers["extends"]({},c,A()),prevState:a,state:b});j.hasPendingRequestedPlaying=!0;j.canLogPausedOrFinishedPlaying=!0;return C}function E(a,b,c){if(!j.canLogPausedOrFinishedPlaying)return C;else if(j.hasPendingRequestedPlaying){F(a,b,c);j.canLogPausedOrFinishedPlaying=!1;j.hasPendingRequestedPlaying=!1;return C}else{B({eventType:"paused",logDataOverrides:c,prevState:a,state:b});j.canLogPausedOrFinishedPlaying=!1;j.hasPendingRequestedPlaying=!1;return C}}function F(a,b,c){B({eventType:"cancelled_requested_playing",logDataOverrides:babelHelpers["extends"]({},c,A()),prevState:a,state:b});return C}function G(a,b,c){if(c.type==="dom_event_play_promise_rejected"&&j.hasPendingRequestedPlaying){c=c.payload.playPromiseRejectionReason;if(c!=null&&c.name==="NotAllowedError"){F(a,b,{debug_reason:"not_allowed"});return C}else return C}else return C}function H(a,b,c){if((c.type==="controller_play_requested"||c.type==="dom_event_play"&&!j.shouldIgnoreDomPlay)&&a.controlledState.playbackState!==b.controlledState.playbackState){c=b.uncontrolledState.liveTraceContext;c=c?{live_trace_source_id:c.sourceId,live_trace_stream_id:c.streamId,live_trace_stream_type:c.streamType}:null;D(a,b,c);return C}else return C}function I(a,b,c){if(a.controlledState.playbackState==="stalling"&&b.controlledState.playbackState==="playing"&&j.canLogPlayingEvent){B({eventType:j.hasLoggedStartedPlaying?"unpaused":"started_playing",prevState:a,state:b});j.hasLoggedStartedPlaying=!0;j.canLogPlayingEvent=!1;j.hasPendingRequestedPlaying=!1;return C}else return C}function J(a,c,d){var e=c.controlledState.playbackState,f=a.controlledState.playbackState;if(d.type==="controller_scrub_begin_requested"&&!a.controlledState.scrubbing&&e!=="paused"&&e!=="ended"){E(a,c);j.isLoggingScrubbingSequence=!0;return C}else if(!a.controlledState.seeking&&c.controlledState.seeking&&!j.isLoggingScrubbingSequence&&e!=="paused"&&e!=="ended"&&!j.hasPendingRequestedPlaying){E(a,c);j.shouldLogRequestedPlayingForScrub=!0;return C}else if(d.type==="controller_scrub_end_requested"&&a.controlledState.scrubbing&&e!=="paused"&&e!=="ended"){D(a,c,{video_time_position:d.payload.seekTargetPosition});return C}else if(a.controlledState.seeking&&!c.controlledState.seeking){d=c.uncontrolledState.videoElementPlayheadPosition;var g=a.controlledState.implementationSeekSourcePosition;(!b("gkx")("1482680")||g!=null&&d!=null&&Math.abs(g-d)>i)&&(j.shouldLogRequestedPlayingForScrub&&e!=="paused"&&e!=="ended"&&D(a,c),B({eventType:"scrubbed",prevState:a,state:c}),j.isLoggingScrubbingSequence=!1,j.shouldLogRequestedPlayingForScrub=!1,f!=="paused"&&f!=="ended"&&(j.canLogPlayingEvent=!0));return C}else return C}function K(a,b,c){if(a.controlledState.playbackState!==b.controlledState.playbackState&&b.controlledState.playbackState==="ended"&&j.canLogPausedOrFinishedPlaying){B({eventType:"finished_playing",prevState:a,state:b});j.canLogPausedOrFinishedPlaying=!1;return C}else return C}function L(a,b,c){if((c.type==="controller_pause_requested"||c.type==="dom_event_pause"&&!j.shouldIgnoreDomPause)&&a.controlledState.playbackState!==b.controlledState.playbackState){E(a,b);return C}else return C}function M(a,c,d){var e=c.controlledState.playbackState;if(e!=="paused"&&e!=="ended"){b("gkx")("1469813")&&d.type==="implementation_video_node_unmounted"?E(a,a,{debug_reason:"unloaded"}):(d.type==="implementation_unmounted"||d.type==="implementation_engine_destroy_requested")&&E(a,c,{debug_reason:"unloaded"});return C}else return C}function N(a,c,d){d=c.controlledState.muted;var e=c.controlledState.volume,f=a.controlledState.muted,g=a.controlledState.volume;d=b("VideoPlayerMutedStateChange").getVideoPlayerMutedStateChange({currMuted:d,currVolume:e,prevMuted:f,prevVolume:g});f={current_volume:Math.round(e*100)};switch(d){case"muted":B({eventType:"muted",logDataOverrides:f,prevState:a,state:c});return C;case"unmuted":B({eventType:"unmuted",logDataOverrides:f,prevState:a,state:c});return C;case null:if(g<e){B({eventType:"volume_increase",logDataOverrides:f,prevState:a,state:c});return C}else if(g>e){B({eventType:"volume_decrease",logDataOverrides:f,prevState:a,state:c});return C}else return C;default:d;b("recoverableViolation")('Unexpected mutedStateChange "'+d+'"',"comet_video_player");return C}}function O(a,b,c){c=b.uncontrolledState.videoRepresentationID;var d=j.lastTrackedRepresentation,e=b.controlledState.playbackState,f=b.controlledState.seeking;if(!f&&e!=="paused"&&e!=="ended"&&d!=null&&d!==c){B({eventType:"representation_ended",logDataOverrides:{next_representation_id:c,representation_id:d},prevState:a,state:b});j.lastTrackedRepresentation=c;q("quality_change");return C}else if(d==null&&d!==c){j.lastTrackedRepresentation=c;return C}else return C}function P(a,c){var e=a.controlledState.error;return{currentVideo:{audioStreamId:a.uncontrolledState.audioRepresentationID,dashAudioFormat:void 0,hasHD:void 0,hasRateLimit:void 0,hasSubtitles:a.controlledState.captionsLoaded,isDrm:Boolean(d.coreVideoPlayerMetaData.graphQLVideoDRMInfo),isHD:void 0,isLiveStream:d.coreVideoPlayerMetaData.isLiveStreaming,isRateLimited:void 0,liveManifestUrl:void 0,projection:void 0,resourceUrl:void 0,streamId:a.uncontrolledState.videoRepresentationID,streamType:a.streamingFormat,tagHD:void 0,tagSD:void 0,videoID:d.coreVideoPlayerMetaData.videoFBID},player:{canPlayType:(g||(g=b("mapObject")))(b("VideoMimeTypes"),k),dimensions:d.dimensions?{height:d.dimensions.height,width:d.dimensions.width}:null,droppedFrames:a.uncontrolledState.videoElementDroppedFrameCount,inPlayStallCount:void 0,inPlayStallTime:void 0,initializationTime:void 0,initializationTimestamp:void 0,interruptCount:void 0,interruptTime:void 0,lastError:e,loggedError:j.lastLoggedError,stack:e==null?void 0:e.stack,stallCount:j.stallCount,stallTime:j.stallDuration,state:z(a),totalFrames:a.uncontrolledState.videoElementTotalFrameCount,version:a.playerVersion,videoSource:void 0,viewabilityPercentage:a.uncontrolledState.viewabilityPercentage},playerStateMachine:{action:c,state:a}}}function Q(a,c,d){var e=c.controlledState.error;if(e!=null&&e!==j.lastLoggedError&&e.errorCode!=="410"){var f=e.errorDescription,g=e.errorName,h=e.url,i=e.errorCode==null||e.errorCode===""?g:e.errorCode;d=P(c,d);B({eventType:"error",logDataOverrides:babelHelpers["extends"]({},b("gkx")("1565232")?A():null,{error:g,error_code:i,error_description:f,error_domain:g,error_user_info:JSON.stringify(d),resource_url:h}),prevState:a,state:c});j.lastLoggedError=e}return C}function R(a,b,c){if(!l)return C;var d=b.uncontrolledState.videoElementPlaybackRate;c.type==="dom_event_ratechange"&&j.lastLoggedPlaybackSpeed!=null&&d!==0&&d!==j.lastLoggedPlaybackSpeed&&B({eventType:"playback_speed_changed",prevState:a,state:b});return C}function S(a,b,c){c=b.controlledState.playbackState;c==="paused"||c==="ended"?j.nextHeartbeatTime=null:c!=="stalling"&&j.nextHeartbeatTime==null&&(j.nextHeartbeatTime=Date.now()+h);var d=j.nextHeartbeatTime;if(d!=null){var e=Date.now();e>=d&&(c!=="stalling"&&B({eventType:"heart_beat",prevState:a,state:b}),j.nextHeartbeatTime=e+h)}return C}function T(a,b,c){if(c.type==="implementation_mounted"){B({eventType:"player_loaded",prevState:a,state:b});return C}else return C}function U(a,b,c){B({eventType:c?"entered_fs":"exited_fs",prevState:a,state:b})}function V(a,b,c){c=d.coreVideoPlayerMetaData.playerFormat;e.coreVideoPlayerMetaData.playerFormat!==c&&B({eventType:"player_format_changed",prevState:a,state:b});return C}function W(a,b,c){if(c.type==="dom_event_timeupdate"){c=j.nextPlayedThreeSecondsPlayheadPosition;if(c!=null){var d=b.uncontrolledState;d=d.videoElementPlayheadPosition;d!=null&&c<=d&&(B({eventType:"played_for_three_seconds",prevState:a,state:b}),j.nextPlayedThreeSecondsPlayheadPosition=null)}}return C}function X(a,b,c){if(c.type!=="notify_fullscreen_changed")return C;c=j.lastLoggedFullscreenState;var d=b.uncontrolledState.isFullscreen;if(c!==!0&&d===!0){U(a,b,d);return C}else if(c===!0&&d===!1){U(a,b,d);return C}else return C}function Y(a,c,e){e=d.coreVideoPlayerMetaData.adClientToken;if((e==null||e==="")&&b("gkx")("1401747"))return C;e=c.controlledState.playbackState;var f=j.lastLoggedViewabilityPercentage,g=c.uncontrolledState.viewabilityPercentage;if(e!=="paused"&&e!=="ended"&&f!=null&&f!==g){B({eventType:"viewability_changed",prevState:a,state:c});return C}else return C}function Z(a,b,c){if(c.type==="controller_set_captions_visible_requested"){B({eventType:"caption_change",prevState:a,state:b});return C}else return C}function $(a){e=d;if(a.type==="notify_logging_metadata_change"){a=a.payload.loggingMetaData;d=a}}return{addDebugSubscriber:function(a){return p(a)},consumeLoggerEvents:function(){var a=f.splice(0);return a},getLoggerState:function(){return j},handleStateMachine:function(a,b,c){$(c);var d=b.controlledState.playbackState;u(a,b);t(a,b);var e=[V,X,Y,G,H,J,I,K,L,N,M,T,Z,O,Q,S,R,W];e.forEach(function(d){d(a,b,c)});(d==="paused"||d==="ended")&&(j.canLogPlayingEvent=!0);c.type==="controller_pause_requested"&&(j.hasPausedOnce=!0,j.shouldIgnoreDomPause=!0);c.type==="controller_play_requested"&&(j.hasPausedOnce=!0,j.shouldIgnoreDomPlay=!0);c.type==="dom_event_pause"&&(j.shouldIgnoreDomPause=!1);c.type==="dom_event_play"&&(j.shouldIgnoreDomPlay=!1,j.lastLoggedViewabilityPercentage=b.uncontrolledState.viewabilityPercentage)},logVPLEvent:function(a){var b=a.eventType,c=a.logDataOverrides;a=a.state;B({eventType:b,logDataOverrides:c,prevState:a,state:a})},setAdditionalLogData:function(a,b){c.set(a,b)}}}}),null);
__d("convertToViewabilityPercentage",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){if(a>=.99)return 100;else if(a>=.75)return 75;else if(a>=.5)return 50;else if(a>=.25)return 25;else if(a>=0)return 0;else return-2}}),null);
__d("VideoPlayerImplementationStateMachineStateUncontrolledState",["convertToViewabilityPercentage","gkx"],(function(a,b,c,d,e,f){"use strict";f.createVideoPlayerImplementationStateMachineStateUncontrolledState=a;function a(a){var c=a.engineExtrasAPI,d=a.fullscreenControllerRef,e=a.videoElementAPI,f=a.videoLiveTraceRef;a=a.videoPlayerPassiveViewabilityInfoRef;f=f.current;if(e==null){var g={audioRepresentationID:void 0,clockTimestamp:Date.now(),currentPlayingVideoQuality:void 0,estimatedBandwidth:void 0,isFBIsLiveTemplated:void 0,isFBMS:void 0,isFBWasLive:void 0,isFullscreen:d.current?d.current.getIsFullscreen():void 0,isPredictiveDash:void 0,liveTraceContext:f?f.getLiveTraceContext():void 0,videoElementDebugCurrentSrc:void 0,videoElementDebugSrc:void 0,videoElementDroppedFrameCount:void 0,videoElementDuration:void 0,videoElementEnded:void 0,videoElementError:void 0,videoElementLastBufferEndPosition:void 0,videoElementMuted:void 0,videoElementNetworkState:void 0,videoElementPaused:void 0,videoElementPlaybackRate:void 0,videoElementPlayheadPosition:void 0,videoElementReadyState:void 0,videoElementTotalFrameCount:void 0,videoElementVolume:void 0,videoRepresentationID:void 0,viewabilityPercentage:void 0};return g}g=e.getPlayheadPosition();a=a&&a.current;a=a&&a.getCurrent();d={audioRepresentationID:c?c.getAudioRepresentationIDAtTime(g):void 0,clockTimestamp:Date.now(),currentPlayingVideoQuality:c?c.getCurrentPlayingVideoQuality():void 0,estimatedBandwidth:c?c.getEstimatedBandwidth():void 0,isFBIsLiveTemplated:c?c.isFBIsLiveTemplated():void 0,isFBMS:c?c.isFBMS():void 0,isFBWasLive:c?c.isFBWasLive():void 0,isFullscreen:d.current?d.current.getIsFullscreen():void 0,isPredictiveDash:c?c.isPredictiveDash():void 0,liveTraceContext:f?f.getLiveTraceContext():void 0,videoElementDebugCurrentSrc:b("gkx")("1526990")?(d=e.getUnderlyingVideoElement())==null?void 0:d.currentSrc:void 0,videoElementDebugSrc:b("gkx")("1526990")?(f=e.getUnderlyingVideoElement())==null?void 0:f.src:void 0,videoElementDroppedFrameCount:e.getDroppedFrameCount(),videoElementDuration:e.getDuration(),videoElementEnded:e.getEnded(),videoElementError:e.getError(),videoElementLastBufferEndPosition:e.getLastBufferEndPosition(),videoElementMuted:e.getMuted(),videoElementNetworkState:e.getNetworkState(),videoElementPaused:e.getPaused(),videoElementPlaybackRate:e.getPlaybackRate(),videoElementPlayheadPosition:g,videoElementReadyState:e.getReadyState(),videoElementTotalFrameCount:e.getTotalFrameCount(),videoElementVolume:e.getVolume(),videoRepresentationID:c?c.getVideoRepresentationIDAtTime(g):void 0,viewabilityPercentage:a?b("convertToViewabilityPercentage")(a.visiblePercentage):void 0};return d}}),null);
__d("VideoPlayerImplementationStateMachineState",["VideoPlayerImplementationStateMachineStateUncontrolledState"],(function(a,b,c,d,e,f){"use strict";f.createVideoPlayerImplementationStateMachineInitialState=a;function a(a){var c=a.alwaysShowCaptions,d=a.areCaptionsAutogenerated,e=a.dimensions,f=a.isAbrEnabled,g=a.playerImplementationName,h=a.playerVersion;a=a.streamingFormat;var i=!0,j=1,k=b("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState({engineExtrasAPI:null,fullscreenControllerRef:{current:null},videoElementAPI:null,videoLiveTraceRef:{current:null},videoPlayerPassiveViewabilityInfoRef:{current:null}});return{controlledState:{activeCaptions:null,availableQualities:[],bufferingDetected:!1,captionsLoaded:!1,captionsVisible:c,dimensions:e,error:null,hostCallPlayIDLast:null,hostCallQueue:[],implementationSeekSourcePosition:null,inbandCaptionsAutogenerated:d,isLiveRewindActive:!1,lastMuteReason:null,lastPauseReason:null,lastPausedTimeMs:0,lastPlayReason:null,lastPlayedTimeMs:0,latencyLevel:"normal",loopCount:0,loopCurrent:0,muted:i,playbackState:"paused",scrubbing:!1,seekTargetPosition:null,seekableRanges:null,seeking:!1,selectedVideoQuality:"notselected",streamEnded:!1,streamInterrupted:!1,targetAudioQuality:"",targetPlaybackRate:1,targetVideoQuality:"",videoProjection:null,volume:j,waitingForDomPlaying:!1,waitingForDomTimeUpdateAfterSeeked:!1,watchTimeMs:0},isAbrEnabled:f,playerImplementationName:g,playerVersion:h,streamingFormat:a,uncontrolledState:k}}}),null);
__d("VideoPlayerODS",["ODS","Random"],(function(a,b,c,d,e,f){"use strict";a=function(a,c,d){b("Random").coinflip(d)&&b("ODS").bumpEntityKey(2079,a,c,d)};f.bumpEntityKey=a}),null);
__d("VideoPlayerImplementationEngineAPI",["Banzai","ErrorMetadata","FBLogger","PlaybackSpeedExperiments","React","RunComet","SubscriptionsHandler","VideoPlayerBanzaiLogFlusher","VideoPlayerCaptionsController","VideoPlayerImplementationErrors","VideoPlayerImplementationStateMachine","VideoPlayerImplementationStateMachineHostCallQueue","VideoPlayerImplementationStateMachineLogger","VideoPlayerImplementationStateMachineState","VideoPlayerImplementationStateMachineStateUncontrolledState","VideoPlayerODS","clearTimeout","deepEquals","err","gkx","killswitch","recoverableViolation","removeFromArray","requireCond","setTimeout","unrecoverableViolation","useConcurrentAutoplayManagementAPI","useStable","cr:683059"],(function(a,b,c,d,e,f){"use strict";f.internal_createVideoPlayerImplementationControllerImpl=j;f.internal_createVideoPlayerImplementationEngineStateMachineWithEffects=m;f.internal_createVideoPlayerImplementationExposedStateFromStateMachineState=q;f.createVideoPlayerImplementationEngine=a;f.useVideoPlayerImplementationEngine=c;var g=b("React"),h=6e4,i=function(){function a(a){var b=a.pauseRequestCallbacks,c=a.playRequestCallbacks,d=a.scrubBeginRequestCallbacks;a=a.scrubEndRequestCallbacks;this.$1=c;this.$2=b;this.$3=d;this.$4=a}var c=a.prototype;c.playRequest=function(a){var c=this;this.$1.push(a);return function(){b("removeFromArray")(c.$1,a)}};c.pauseRequest=function(a){var c=this;this.$2.push(a);return function(){b("removeFromArray")(c.$2,a)}};c.scrubBeginRequest=function(a){var c=this;this.$3.push(a);return function(){b("removeFromArray")(c.$3,a)}};c.scrubEndRequest=function(a){var c=this;this.$4.push(a);return function(){b("removeFromArray")(c.$4,a)}};return a}();function j(a){var c=a.concurrentAutoplayManagementAPI,d=a.debugAPI,e=a.fullscreenControllerRef,f=a.getCurrentExposedState,g=a.getCurrentIsFullscreen,h=a.getCurrentLiveRewindPlayheadPosition,j=a.getCurrentPlayheadPosition,k=a.loggerAPI,l=a.pauseImpl,m=a.playImpl,n=a.scrubBeginImpl,o=a.scrubEndImpl,p=a.seekImpl,q=a.selectVideoQualityImpl,r=a.setCaptionsVisibleImpl,s=a.setIsLiveRewindActiveImpl,t=a.setLatencyLevelImpl,u=a.setMutedImpl,v=a.setPlaybackRateImpl,w=a.setVolumeImpl,x=a.subscribers,y=a.videoElementAPIRef,z=new Set(),A=!1,B=null,C=[],D=[],E=[],F=[],G=new i({pauseRequestCallbacks:D,playRequestCallbacks:C,scrubBeginRequestCallbacks:E,scrubEndRequestCallbacks:F}),H={freeze:function(){if(!f().paused)throw b("unrecoverableViolation")("Video player must be paused before the controller freeze","comet_video_player");var a={};try{var c=!1;z.size===0&&(c=!0,B={exposedState:f(),isFullscreen:g(),liveRewindPlayheadPosition:h(),playheadPosition:j()});z.add(a);c&&(A=!0,x.forEach(function(a){a()}))}finally{A=!1}return a},isFrozen:function(){return B!=null},unfreeze:function(a){if(!z.has(a))throw b("unrecoverableViolation")("Video player controller unfreeze token not found","comet_video_player");z["delete"](a);z.size===0&&(B=null,x.forEach(function(a){a()}))}},I=babelHelpers["extends"]({},c,H,k,{debugAPI:d,getCurrentState:function(){return B!=null?B.exposedState:f()},getIsFullscreen:function(){return B!=null?B.isFullscreen:g()},getLiveRewindPlayheadPosition:function(){return B!=null?B.liveRewindPlayheadPosition:h()},getPlayheadPosition:function(){return B!=null?B.playheadPosition:j()},internal_getVideoElement:function(){var a=y.current;if(a!=null){a=a.getUnderlyingVideoElement();return a}return null},observeOn:function(){return G},pause:function(a){if(H.isFrozen())return;D.forEach(function(b){return b(a)});l(a)},play:function(a){if(H.isFrozen())return;C.forEach(function(b){return b(a)});m(a)},requestSetIsFullscreen:function(a){if(H.isFrozen())return;var b=e.current;b&&b.requestSetIsFullscreen(a)},scrollIntoView:function(a){var b=I.internal_getVideoElement();b&&b.scrollIntoView(a)},scrubBegin:function(){if(H.isFrozen())return;E.forEach(function(a){return a()});n()},scrubEnd:function(a){if(H.isFrozen())return;F.forEach(function(b){return b(a)});o(a)},seek:function(a){if(H.isFrozen())return;p(a)},selectVideoQuality:function(a){if(H.isFrozen())return;q(a)},setCaptionsVisible:function(a){if(H.isFrozen())return;r(a)},setIsLiveRewindActive:function(a){if(H.isFrozen())return;s(a)},setLatencyLevel:function(a){if(H.isFrozen())return;t(a)},setMuted:function(a,b){if(H.isFrozen())return;u(a,b)},setPlaybackRate:function(a){if(H.isFrozen())return;v(a)},setVolume:function(a){if(H.isFrozen())return;w(a)},subscribe:function(a){var c=function(){if(H.isFrozen()&&!A)return;a()},d=e.current,f=d?d.subscribe(c):null;x.push(c);return{remove:function(){f&&f.remove(),b("removeFromArray")(x,c)}}},videoElementAPIRef:y});return I}function k(a){var b=a.concurrentAutoplayManagementAPI,c=a.createExposedState,d=a.debugAPI,e=a.fullscreenControllerRef,f=a.logger,g=a.machine,h=a.subscribers;a=a.videoElementAPIRef;var i={setAdditionalLogData:function(a,b){f.setAdditionalLogData(a,b)}};return j({concurrentAutoplayManagementAPI:b,debugAPI:d,fullscreenControllerRef:e,getCurrentExposedState:function(){return c(g.getCurrentState())},getCurrentIsFullscreen:function(){var a=e.current;return a?a.getIsFullscreen():!1},getCurrentLiveRewindPlayheadPosition:function(){var a=g.getCurrentState();a=a.controlledState;var b=a.isLiveRewindActive,c=a.seekableRanges;a=a.seekTargetPosition;if(!b||a==null)return null;c=(b=c==null?void 0:c.end(0))!=null?b:0;return a-c},getCurrentPlayheadPosition:function(){var a,b=0;return(a=g.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?a:b},loggerAPI:i,pauseImpl:function(a){g.dispatch({payload:{reason:a},type:"controller_pause_requested"})},playImpl:function(a){g.dispatch({payload:{reason:a},type:"controller_play_requested"})},scrubBeginImpl:function(){g.dispatch({type:"controller_scrub_begin_requested"})},scrubEndImpl:function(a){g.dispatch({payload:{seekTargetPosition:a},type:"controller_scrub_end_requested"})},seekImpl:function(a){g.dispatch({payload:{seekTargetPosition:a},type:"controller_seek_requested"})},selectVideoQualityImpl:function(a){g.dispatch({payload:{selectedVideoQuality:a},type:"controller_quality_requested"})},setCaptionsVisibleImpl:function(a){g.dispatch({payload:{captionsVisible:a},type:"controller_set_captions_visible_requested"})},setIsLiveRewindActiveImpl:function(a){g.dispatch({payload:{isLiveRewindActive:a},type:"controller_set_is_live_rewind_active_requested"})},setLatencyLevelImpl:function(a){g.dispatch({payload:{latencyLevel:a},type:"controller_set_latency_level_requested"})},setMutedImpl:function(a,b){g.dispatch({payload:{muted:a,reason:b},type:"controller_muted_requested"})},setPlaybackRateImpl:function(a){g.dispatch({payload:{playbackRate:a},type:"controller_set_playback_rate"})},setVolumeImpl:function(a){g.dispatch({payload:{volume:a},type:"controller_volume_requested"})},subscribers:h,videoElementAPIRef:a})}function l(a){a=a.current;if(a==null)throw b("unrecoverableViolation")("Attempted to access VideoElementAPI while it is not available.","comet_video_player");return a}function m(a){var c=a.alwaysShowCaptions,d=a.areCaptionsAutogenerated,e=a.captionsControllerRef,f=a.debugLogId,g=a.dimensions,i=a.engineExtrasAPI,j=a.engineMetadata,k=a.fullscreenControllerRef,m=a.handleFatalError,o=a.handleStateMachine,p=a.videoElementAPIRef,q=a.videoLiveTraceRef,r=a.videoPlayerPassiveViewabilityInfoRef;function s(a){b("VideoPlayerImplementationStateMachineHostCallQueue").applyOrQueueHostCall({engineExtrasAPI:i,hostCall:a,machine:u,videoElementAPI:p.current})}var t=null;a=[function(a,c,d){b("cr:683059")&&d.type==="implementation_host_call_applied"&&d.payload.hostCall.type==="host_call_play"&&c.controlledState.lastPlayReason==="autoplay_initiated"?b("cr:683059").addFirstMarkerPoint("firstVideoAutoplayStalling"):b("cr:683059")&&c.controlledState.playbackState!==a.controlledState.playbackState&&c.controlledState.playbackState==="playing"&&c.controlledState.lastPlayReason==="autoplay_initiated"&&b("cr:683059").addFirstMarkerPoint("firstVideoAutoplayPlaying");return!0},function(a,b,c){o(a,b,c);return!0},function(a,c,d){if(b("gkx")("1633455")&&(a.controlledState.streamInterrupted===!1&&c.controlledState.streamInterrupted===!0||a.controlledState.streamInterrupted===!0&&c.controlledState.streamInterrupted===!1)){a=c.controlledState;c=a.bufferingDetected;var e=a.streamInterrupted;a=a.targetPlaybackRate;e?(c&&u.dispatch({type:"buffering_end_requested"}),s({payload:{hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:d.type},type:"host_call_set_playback_rate"})):(s({payload:{hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:a,reason:d.type},type:"host_call_set_playback_rate"}),c&&u.dispatch({type:"buffering_begin_requested"}))}return!0},function(a,c,d){(a.controlledState.bufferingDetected===!1&&c.controlledState.bufferingDetected===!0||a.controlledState.bufferingDetected===!0&&c.controlledState.bufferingDetected===!1)&&(t!==null&&(b("clearTimeout")(t),t=null),c.controlledState.bufferingDetected&&(!b("gkx")("1633455")||!c.controlledState.streamInterrupted)&&(t=b("setTimeout")(function(){t=null;var a=b("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError("BUFFERING_TIMEOUT",b("err")("The video has been in a buffering state for over "+h+" ms."),"buffering_timeout");u.dispatch({payload:{fatalError:a},type:"implementation_fatal_error"})},h)));return!0},function(a,c,d){if(!(d.type==="implementation_engine_destroy_requested"))return!0;t!==null&&b("clearTimeout")(t);t=null;return!1},function(a,c,d){if(!(d.type==="implementation_engine_initialized"))return!0;a=l(p);d=d.type;b("VideoPlayerImplementationStateMachineHostCallQueue").flushHostCallQueue({engineExtrasAPI:i,machine:u,reason:d,state:c,videoElementAPI:a});return!1},function(a,b,c){if(!(c.type==="dom_event_ended"))return!0;a=b.controlledState;(a.loopCount>0&&a.loopCurrent<a.loopCount||a.loopCount===-1)&&u.dispatch({payload:{reason:"loop_initiated"},type:"controller_play_requested"});return!1},function(a,c,d){if(!(d.type==="controller_pause_requested"))return!0;a=c.controlledState.playbackState;if(!(a==="paused"))return!1;s({payload:{hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:d.type},type:"host_call_pause"});return!1},function(a,c,d){if(!(d.type==="controller_play_requested"))return!0;a=c.controlledState.playbackState;if(!(a==="stalling"))return!1;s({payload:{hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:d.type},type:"host_call_play"});return!1},function(a,c,d){if(!(d.type==="controller_seek_requested"))return!0;a=c.controlledState;c=a.seeking;a=a.seekTargetPosition;c&&a!=null&&s({payload:{currentTime:a,hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:d.type},type:"host_call_set_current_time"});return!1},function(a,c,d){if(!(d.type==="controller_muted_requested"))return!0;a=c.controlledState.muted;if(!(a===d.payload.muted))return!1;s({payload:{hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),muted:a,reason:d.type},type:"host_call_set_muted"});return!1},function(a,c,d){if(!(d.type==="controller_scrub_begin_requested"))return!0;s({payload:{hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:d.type},type:"host_call_set_playback_rate"});return!1},function(a,c,d){if(!(d.type==="controller_scrub_end_requested"))return!0;a=c.controlledState;c=a.seeking;var e=a.seekTargetPosition;a=a.targetPlaybackRate;c&&e!=null?(s({payload:{hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:a,reason:d.type+":seek"},type:"host_call_set_playback_rate"}),s({payload:{currentTime:e,hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:d.type+":seek"},type:"host_call_set_current_time"})):s({payload:{hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:a,reason:d.type+":cancel"},type:"host_call_set_playback_rate"});return!1},function(a,c,d){if(!(d.type==="buffering_begin_requested"))return!0;s({payload:{hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:d.type},type:"host_call_set_playback_rate"});return!1},function(a,c,d){if(!(d.type==="controller_set_playback_rate"))return!0;s({payload:{hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:d.payload.playbackRate,reason:d.type},type:"host_call_set_playback_rate"});return!1},function(a,c,d){if(!(d.type==="buffering_end_requested"))return!0;s({payload:{hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:c.controlledState.targetPlaybackRate,reason:d.type},type:"host_call_set_playback_rate"});return!1},function(a,c,d){if(!(d.type==="controller_volume_requested"))return!0;s({payload:{hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:d.type,volume:c.controlledState.volume},type:"host_call_set_volume"});return!1},function(a,c,d){if(!(d.type==="controller_quality_requested"))return!0;s({payload:{hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:d.type,selectedVideoQuality:c.controlledState.selectedVideoQuality},type:"host_call_set_video_quality"});return!1},function(a,c,d){if(!(d.type==="controller_set_latency_level_requested"))return!0;s({payload:{hostCallID:b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),latencyLevel:d.payload.latencyLevel,reason:d.type},type:"host_call_set_latency_level"});return!1},function(a,c,d){if(!(d.type==="dom_event_timeupdate"||d.type==="captions_loaded"))return!0;d=e.current;var f=c.controlledState.captionsVisible,g=p.current;g=g?g.getPlayheadPosition():0;if(b("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&c.controlledState.isLiveRewindActive){var h=c.controlledState.seekableRanges;h=h!=null?(h=h.end(h.length()-1))!=null?h:0:0;g>=h&&u.dispatch({payload:{isLiveRewindActive:!1},type:"controller_set_is_live_rewind_active_requested"})}if(d&&f&&c.controlledState.captionsLoaded){h=d.handleTimeUpdate(g);f=a.controlledState.activeCaptions;n(f,h)&&u.dispatch({payload:{activeCaptions:h},type:"controller_set_active_captions_requested"})}c=q.current;c!=null&&c.onUpdateStatus({position:g});return!1},function(a,b,c){if(!(c.type==="cea608_bytes_received"))return!0;a=e.current;if(a){b=c.payload;c=b.timescale;b=b.videoBytes;a.handleCea608BytesReceived({timescale:c,videoBytes:b})}return!1},function(a,c,d){if(!(d.type==="controller_set_is_live_rewind_active_requested"))return!0;i.setEnableLiveheadCatchup(!d.payload.isLiveRewindActive);!!b("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&!d.payload.isLiveRewindActive&&u.dispatch({payload:{playbackRate:1},type:"controller_set_playback_rate"});return!1}];var u=b("VideoPlayerImplementationStateMachine").createVideoPlayerImplementationStateMachineWithStateTransitionHandlers({collectUncontrolledState:function(){var a=p.current;return b("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState({engineExtrasAPI:i,fullscreenControllerRef:k,videoElementAPI:a,videoLiveTraceRef:q,videoPlayerPassiveViewabilityInfoRef:r})},debugLogId:f,initialState:b("VideoPlayerImplementationStateMachineState").createVideoPlayerImplementationStateMachineInitialState({alwaysShowCaptions:c,areCaptionsAutogenerated:d,dimensions:g,isAbrEnabled:j.isAbrEnabled,playerImplementationName:j.playerImplementationName,playerVersion:j.playerVersion,streamingFormat:j.streamingFormat}),onFatalError:m,stateTransitionHandlers:a});return u}function n(a,b){if(a===null&&b===null)return!1;if(a===null||b===null)return!0;var c=(b=b.rows)!=null?b:[];a=(b=a.rows)!=null?b:[];return a.length!==c.length||a.some(function(a,b){return a!==c[b]})}function o(a,b,c,d){a!==b.current&&(c.current&&(c.current.remove(),c.current=null),b.current=a),b.current&&!c.current&&(c.current=b.current.subscribe(function(){d.dispatch({type:"notify_fullscreen_changed"})}))}function p(a,b,c,d){a!==b.current&&(c.current&&(c.current.remove(),c.current=null),b.current=a),b.current&&!c.current&&(c.current=b.current.subscribe(function(){d.dispatch({type:"notify_viewability_changed"})}))}function q(a){var b=a.engineMetadata;a=a.state;var c=a.controlledState,d=c.activeCaptions,e=c.availableQualities,f=c.captionsLoaded,g=c.captionsVisible,h=c.error,i=c.inbandCaptionsAutogenerated,j=c.isLiveRewindActive,k=c.lastMuteReason,l=c.lastPauseReason,m=c.lastPlayedTimeMs,n=c.lastPlayReason,o=c.latencyLevel,p=c.loopCount,q=c.loopCurrent,r=c.muted,s=c.playbackState,t=c.seekableRanges,u=c.seeking,v=c.seekTargetPosition,w=c.selectedVideoQuality,x=c.streamInterrupted,y=c.targetAudioQuality,z=c.targetPlaybackRate,A=c.targetVideoQuality,B=c.videoProjection,C=c.volume;c=c.watchTimeMs;var D=a.uncontrolledState,E=D.currentPlayingVideoQuality,F=D.videoElementDuration;D=D.videoElementLastBufferEndPosition;var G=s==="ended",H=s==="paused"||G,I=s==="playing",J=s==="inPlayStalling";s=s==="stalling"||J;d={activeCaptions:d,availableVideoQualities:e,bufferEnd:(d=D)!=null?d:0,captionsLoaded:f,captionsVisible:g,currentVideoQuality:(e=E)!=null?e:"",duration:(D=F)!=null?D:0,ended:G,error:h,inPlayStalling:J,inbandCaptionsAutogenerated:i,isAbrEnabled:b.isAbrEnabled,isLiveRewindActive:j,lastMuteReason:k,lastPauseReason:l,lastPlayReason:n,lastPlayedTimeMs:m,latencyLevel:o,loopCount:p,loopCurrent:q,muted:r,paused:H,playerImplementationName:a.playerImplementationName,playerVersion:a.playerVersion,playing:I,seekTargetPosition:v,seekableRanges:t,seeking:u,selectedVideoQuality:w,stalling:s,streamInterrupted:x,targetAudioQuality:y,targetPlaybackRate:z,targetVideoQuality:A,videoProjection:B,volume:C,watchTimeMs:c};return d}function a(a){var c,d=a.createDebugAPI,e=a.createVideoPlayerError,f=a.debugLog;f=a.debugLogId;var g=a.destroyEngineParts,h=a.engineExtrasAPI,i=a.engineMetadata,j=a.handleFatalError,l=a.handleVideoElementMounted,n=a.handleVideoElementUnmounted,r=a.handleVideoInfoChange,s=a.initialProps,t=a.setExposedStateInReact,u=b("VideoPlayerImplementationStateMachineLogger").createVideoPlayerImplementationStateMachineLogger({debugLogId:f,initialLoggingMetaData:s.loggingMetaData}),v=new(b("VideoPlayerBanzaiLogFlusher"))(u),w={current:(a=s.videoPlayerPassiveViewabilityInfo)!=null?a:null},x={current:(a=s.fullscreenController)!=null?a:null},y={current:null},z={current:(a=s.videoLiveTrace)!=null?a:null};a=b("useConcurrentAutoplayManagementAPI").createConcurrentAutoplayManagementAPI();var A=[],B=function(){A.forEach(function(a){a()}),v.flushLogs()},C={current:null},D={current:{inbandCaptionsAutogeneratedFromManifest:!1,inbandCaptionsExpectedFromManifest:!1,inbandCaptionsExpectedFromProps:s.inbandCaptionsExpected,sideLoadCaptionsExpectedFromProps:s.sideLoadCaptionsExpected,sideLoadCaptionsUrlFromProps:(c=s.captionsUrl)!=null?c:null}},E={current:null},F={current:null},G=new(b("SubscriptionsHandler"))(),H="before_mounted";function I(){return H==="mounted"}var J={current:null},K=function(a){a=q({engineMetadata:i,state:a});return a},L={current:null},M={current:null},N=function(a){if(I()){if(a===L.current)return;var c=K(a);if(M.current!=null&&b("deepEquals")(M.current,c))return;L.current=a;M.current=c;t(c)}};c=function(a,b,c){u.handleStateMachine(a,b,c),N(b),B()};var O=function(a,b){},P=function(a){O(a,"state_machine_fatal_error")},Q=m({alwaysShowCaptions:Boolean(s.alwaysShowCaptions),areCaptionsAutogenerated:Boolean(s.areCaptionsAutogenerated),captionsControllerRef:y,debugLogId:f,dimensions:s.dimensions,engineExtrasAPI:h,engineMetadata:i,fullscreenControllerRef:x,handleFatalError:P,handleStateMachine:c,videoElementAPIRef:J,videoLiveTraceRef:z,videoPlayerPassiveViewabilityInfoRef:w}),R=!1,S=function(a){var c=C.current!=null,d=J.current!=null;G.release();Q.dispatch({payload:{reason:a,videoElementAPIExisted:d,videoElementExisted:c},type:"implementation_engine_destroy_requested"});try{b("gkx")("1494163")?g(["destroyEngine("+a+")"]):R||(R=!0,g(["destroyEngine("+a+")"]))}catch(e){if(b("gkx")("1494163"))try{b("FBLogger")("comet_video_player").catching(e).warn("Error thrown by destroyEngineParts: %s %s",e.message,JSON.stringify({playerImplementationName:i.playerImplementationName,reason:a,videoElementAPIExisted:d,videoElementExisted:c}))}catch(a){}}var e=y.current;e!=null&&(Q.getCurrentState().controlledState.captionsLoaded&&Q.dispatch({type:"captions_unloaded"}),y.current=null,e.destroy());e=z.current;e!=null&&(z.current=null);o(null,x,E,Q);p(null,w,F,Q);Q.dispatch({payload:{reason:a,videoElementAPIExisted:d,videoElementExisted:c},type:"implementation_engine_destroyed"})};O=function(a,b){a=e(a,b);Q.dispatch({payload:{fatalError:a},type:"implementation_fatal_error"});S("implementation_fatal_error");j(a)};function T(a){return a.sideLoadCaptionsExpectedFromProps&&a.sideLoadCaptionsUrlFromProps!==null}function U(a){return a.inbandCaptionsExpectedFromProps&&((a=a.inbandCaptionsExpectedFromManifest)!=null?a:!1)}function V(a){return(a=a.inbandCaptionsAutogeneratedFromManifest)!=null?a:!1}var W=function(a){var c=T(a),d=U(a),e=V(a),f=y.current;e!==V(D.current)&&Q.dispatch({payload:{inbandCaptionsAutogenerated:e},type:"inband_captions_autogenerated_changed"});f!=null?d!==U(D.current)&&(f.updateInbandCaptionsExpected(d),!d&&Q.getCurrentState().controlledState.captionsLoaded&&Q.dispatch({type:"captions_unloaded"})):(c||d)&&f==null&&(y.current=b("VideoPlayerCaptionsController").createCaptionsController({captionsUrl:c?a.sideLoadCaptionsUrlFromProps:null,inbandCaptionsExpected:d,onCaptionsLoaded:function(){Q.getCurrentState().controlledState.captionsLoaded||Q.dispatch({type:"captions_loaded"})}}));D.current=a},X=function(a){h!=null&&a&&a.width>0&&a.height>0&&(h.setDimensions(a),Q.dispatch({payload:{dimensions:{height:a.height,width:a.width}},type:"player_dimensions_changed"}))},Y=function(a){a!==Q.getCurrentState().controlledState.loopCount&&Q.dispatch({payload:{loopCount:a},type:"loop_count_change_requested"})},Z=function(a){"srcObject"in a&&(a.srcObject=null)},$=function(a,c){if(C.current===a)return;if(!I()&&b("gkx")("1405244"))return;if(!I()){var d=function(a){switch(a){case"unmounted":return"EngineAPI.handleVideoElement.unmounted";case"before_mounted":return"EngineAPI.handleVideoElement.before_mounted";case"mounted":return null;default:a;return null}}(H);d&&b("VideoPlayerODS").bumpEntityKey("comet_video_player",d,1)}a!=null&&C.current!=null&&C.current!==a&&b("recoverableViolation")("The video element was recreated","comet_video_player");d=C.current;d&&Z(d);C.current=a;b("gkx")("1494163")&&(a==null&&(J.current=null));C.current!=null?(Q.dispatch({type:"implementation_video_node_mounted"}),l([].concat(c,["handleVideoElement(non-null)"]))):(Q.dispatch({type:"implementation_video_node_unmounted"}),n([].concat(c,["handleVideoElement(null)"])))};f=s.loggingMetaData.instanceKey;P=function(a){var b;if(!I())return;o((b=a.fullscreenController)!=null?b:null,x,E,Q);p((b=a.videoPlayerPassiveViewabilityInfo)!=null?b:null,w,F,Q);if(!r(a)){b={inbandCaptionsAutogeneratedFromManifest:D.current.inbandCaptionsAutogeneratedFromManifest,inbandCaptionsExpectedFromManifest:D.current.inbandCaptionsExpectedFromManifest,inbandCaptionsExpectedFromProps:a.inbandCaptionsExpected,sideLoadCaptionsExpectedFromProps:a.sideLoadCaptionsExpected,sideLoadCaptionsUrlFromProps:(b=a.captionsUrl)!=null?b:null};W(b);X(a.dimensions);Y((b=a.loopCount)!=null?b:0)}Q.dispatch({payload:{loggingMetaData:a.loggingMetaData},type:"notify_logging_metadata_change"})};c=function(){if(H!=="before_mounted"){var a=function(a){switch(a){case"before_mounted":return null;case"unmounted":return"EngineAPI.handleReactMount.unmounted";case"mounted":return"EngineAPI.handleReactMount.mounted";default:a;return null}}(H);a&&b("VideoPlayerODS").bumpEntityKey("comet_video_player",a,1)}I()||(H="mounted",G.addSubscriptions(b("RunComet").onUnload(function(){S("page_unload")})),G.addSubscriptions(b("Banzai").subscribe(b("Banzai").SHUTDOWN,function(){S("banzai_shutdown")})),Q.dispatch({type:"implementation_mounted"}),l(["handleReactMount"]))};s=function(){if(!I()){var a=function(a){switch(a){case"unmounted":return"EngineAPI.handleReactUnmount.unmounted";case"before_mounted":return"EngineAPI.handleReactUnmount.before_mounted";case"mounted":return null;default:a;return null}}(H);a&&b("VideoPlayerODS").bumpEntityKey("comet_video_player",a,1)}I()&&(H="unmounted",Q.dispatch({payload:{reason:"react_effect_cleanup"},type:"implementation_unmounted"}),S("implementation_unmounted:react_effect_cleanup"))};f=k({concurrentAutoplayManagementAPI:a,createExposedState:K,debugAPI:d({getVideoElementAPI:function(){return J.current},logger:u}),fullscreenControllerRef:x,logger:u,machine:Q,subscribers:A,videoElementAPIRef:J});a=b("VideoPlayerImplementationStateMachine").createReactVideoElementCallbacksForStateMachine(Q,$);d=K(Q.getInitialState());c={destroy:S,handleReactMount:c,handleReactPropsChanged:P,handleReactUnmount:s,implementationController:f,initialExposedState:d,logFlusher:v,machine:Q,notifySubscribers:B,videoElementCallbacks:a,videoElementRefCallback:function(a){$(a,["videoElementRefCallback"])}};return{engine:c,getCaptionsInfo:function(){return D.current},getVideoElement:function(){return C.current},getVideoLiveTrace:function(){return z.current},handleCaptionsInfoChange:W,handleFatalImplementationError:O,logger:u,machine:Q,videoElementAPIRef:J}}function r(a){var c,d=new Error(a.errorDescription);d.errorName=a.errorName;d.type="error";a.stack!=null&&a.stack!==""&&(d.stack=a.stack);var e=new(b("ErrorMetadata"))();e.addEntries(["COMET_VIDEO","ERROR_LOCATION",a.errorLocation],["COMET_VIDEO","ERROR_CODE",(c=a.errorCode)!=null?c:""],["COMET_VIDEO","ERROR_URL",(c=a.url)!=null?c:""]);c=a.originalError;c!=null&&(typeof c==="string"?e.addEntry("COMET_VIDEO","ORIGINAL_ERROR",c):c instanceof Error&&c.message!=null&&e.addEntry("COMET_VIDEO","ORIGINAL_ERROR",c.message));d.metadata=e;return d}function c(a,c){var d=g.useState(null),e=d[0],f=d[1],h=g.useRef(!1),i=g.useRef(null);d=g.useState(null);var j=d[0],k=d[1];g.useEffect(function(){j||(i.current=null)},[j]);var l=g.useRef(a),m=g.useRef(c),n=b("useStable")(function(){return m.current({debugLogId:String(l.current.loggingMetaData.instanceKey),handleFatalError:function(a){if(h.current&&b("gkx")("1722590"))return;b("gkx")("1444664")?i.current||(i.current=a,k(a)):k(a)},initialProps:l.current,setExposedStateInReact:f})});c=(d=e)!=null?d:n.initialExposedState;d=(e=c.error)!=null?e:j;if(d!=null){if(b("killswitch")("COMET_VIDEO_ERROR_DEAGGREGATION"))throw b("unrecoverableViolation")(d.errorName+": "+d.errorDescription,"comet_video_player",{error:d.originalError instanceof Error?d.originalError:void 0});throw r(d)}g.useEffect(function(){n.handleReactMount();return function(){h.current=!0,n.handleReactUnmount()}},[n]);var o=g.useRef(null);g.useEffect(function(){a!==o.current&&n.handleReactPropsChanged(a),o.current=a});return[c,n]}}),null);
__d("VideoPlayerImplementationEngineVideoElementAPI",["Promise","VideoPlaybackQuality"],(function(a,b,c,d,e,f){"use strict";f.getDurationFromVideoElement=h;f.getLastBufferEndPositionFromVideoElement=i;f.getPlayheadPositionFromVideoElement=j;f.createVideoPlayerImplementationEngineVideoElementAPI=a;function g(a){return isNaN(a)?0:a}function h(a){return g(a.duration)}function i(a){a=a.buffered;return a.length>0?a.end(a.length-1):0}function j(a){return g(a.currentTime)}function a(a){return{getDroppedFrameCount:function(){return b("VideoPlaybackQuality").getDroppedFrames(a)},getDuration:function(){return h(a)},getEnded:function(){return a.ended},getError:function(){return a.error},getLastBufferEndPosition:function(){return i(a)},getMuted:function(){return a.muted},getNetworkState:function(){return a.networkState},getPaused:function(){return a.paused},getPlaybackRate:function(){return a.playbackRate},getPlayheadPosition:function(){return j(a)},getReadyState:function(){return a.readyState},getTotalFrameCount:function(){return b("VideoPlaybackQuality").getTotalFrames(a)},getUnderlyingVideoElement:function(){return a},getVolume:function(){return a.volume},pause:function(){a.pause()},play:function(){var c=a.play();c=c&&typeof c.then==="function"?b("Promise").resolve(c):null;return c},setDuration:function(b){a.duration=b},setMuted:function(b){a.muted=b},setPlaybackRate:function(b){a.playbackRate=b},setPlayheadPosition:function(b){a.currentTime=b},setSrc:function(b){b==null||b===""?a.removeAttribute("src"):a.setAttribute("src",b)},setVolume:function(b){a.volume=b}}}}),null);
__d("VideoPlayerImplementationReactVideoElement.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var b=a.implementationController,c=a.implementationExposedState,d=a.renderWithVideoImplementationStates,e=a.src,f=a.videoElementCallbacks;a=a.videoElementRefCallback;f=g.jsxs(g.Fragment,{children:[g.jsx("video",babelHelpers["extends"]({className:"k4urcfbm datstx6m a8c37x1j",controls:!1,muted:!0},f,{ref:a,src:e})),d({implementationController:b,videoState:c})]});return f}}),null);
__d("VideoPlayerProgressiveImplementationData",[],(function(a,b,c,d,e,f){"use strict";f.makeProgressiveImplementationData=a;function a(a){var b=a.hdSrc,c=a.hdSrcPreferred;a=a.sdSrc;return a==null?null:{hdSrc:b,hdSrcPreferred:c,sdSrc:a}}}),null);
__d("VideoPlayerProgressiveImplementationEngineExtrasAPI",[],(function(a,b,c,d,e,f){"use strict";f.createVideoPlayerProgressiveImplementationEngineExtrasAPI=a;function a(a){var b=a.getPlayingVideoInfo;a=a.setUserSelectedVideoQuality;a={getApproximateFBLSToPlayerDisplayLatency:function(){return null},getAudioRepresentationIDAtTime:function(a){return null},getAvailableVideoQualities:function(){var a;return(a=(a=b())==null?void 0:a.availableQualities)!=null?a:[]},getCurrentAudioRepresentation:function(){return null},getCurrentPlayingVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.targetQuality)!=null?a:""},getCurrentTargetVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.targetQuality)!=null?a:""},getCurrentVideoRepresentation:function(){return null},getEstimatedBandwidth:function(){return null},getInbandCaptionsAutogeneratedFromManifest:function(){return!1},getInbandCaptionsExpectedFromManifest:function(){return!1},getStreamType:function(){return"progressive"},getUserSelectedVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.selectedQuality)!=null?a:"notselected"},getVideoProjectionType:function(){return"cubemap"},getVideoRepresentationIDAtTime:function(a){return"oep_hd"},getVideoRepresentations:function(){return null},isDrm:function(){var a;return((a=b())==null?void 0:a.graphQLVideoDRMInfo)!=null},isFBIsLiveTemplated:function(){return!1},isFBMS:function(){return!1},isFBWasLive:function(){return!1},isPredictiveDash:function(){return!1},setDimensions:function(a){},setEnableLiveheadCatchup:function(){},setLatencyLevel:function(){},setUserSelectedVideoQuality:a};return a}}),null);
__d("VideoPlayerProgressiveImplementationEngineUtils",["gkx"],(function(a,b,c,d,e,f){"use strict";f.createResolvedVideoInfoProgressive=a;f.updatePlayingVideoInfoProgressiveWithUserSelectedQuality=c;f.updatePlayingVideoInfoProgressiveWithCurrentPlayingQuality=d;var g="hd",h="sd";function a(a){var c=[];a.sdSrc!=null&&c.push(h);a.hdSrc!=null&&c.push(g);var d=a.hdSrcPreferred&&a.hdSrc!=null&&b("gkx")("1483656")?g:h;return babelHelpers["extends"]({},a,{availableQualities:c,playingQuality:null,playingSrc:null,selectedQuality:d,targetQuality:d,targetSrc:null})}function c(a,b){var c=a.hdSrc,d=a.sdSrc,e,f;b==="notselected"||b==="auto"?(e=d!=null?h:c!=null?g:h,f=d!=null?d:c!=null?c:null):b===g&&c!=null?(e=g,f=c):b===h&&d!=null?(e=h,f=d):(e=h,f=null);f===""&&(f=null);return babelHelpers["extends"]({},a,{selectedQuality:b,targetQuality:e,targetSrc:f})}function d(a,b,c){return babelHelpers["extends"]({},a,{playingQuality:b,playingSrc:c})}}),null);
__d("VideoPlayerProgressiveImplementationEngine",["FBLogger","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerODS","VideoPlayerProgressiveImplementationEngineExtrasAPI","VideoPlayerProgressiveImplementationEngineUtils","emptyFunction","gkx","requireCond","unrecoverableViolation","cr:1680308","cr:1473550","cr:1512856"],(function(a,b,c,d,e,f){"use strict";f.createVideoPlayerProgressiveImplementationEngine=a;var g=b("emptyFunction");function h(a,c){return b("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError("PROGRESSIVE_JAVASCRIPT_NATIVE",a,c)}function a(a){var c=a.debugLogId,d=a.handleFatalError,e=a.initialProps;a=a.setExposedStateInReact;var f={current:null},i={current:null},j={current:null},k={current:null},l=function(){var a=k.current;a!=null&&(k.current=null,a())},m=function(a){l();var c=u();if(c==null)throw b("unrecoverableViolation")("Need videoElement in startSwitchingSource","comet_video_player");if(b("cr:1512856")==null)throw b("unrecoverableViolation")("Need SourceSwitcher in startSwitchingSource","comet_video_player");k.current=b("cr:1512856").startSwitchingVideoElementSource({getShouldBePlaying:function(){return x.getCurrentState().controlledState.playbackState==="playing"||x.getCurrentState().controlledState.playbackState==="stalling"},onSourceSwitchCancelled:function(){x.dispatch({type:"buffering_end_requested"})},onSourceSwitchFailed:function(a){b("FBLogger")("comet_video_player").catching(a).warn("Progressive source switch failed: %s",String(a)),x.dispatch({type:"buffering_end_requested"})},onSourceSwitchStarted:function(){x.dispatch({type:"buffering_begin_requested"})},onSourceSwitchSucceeded:function(){var a=j.current;a!=null&&a.targetQuality!=null&&(j.current=b("VideoPlayerProgressiveImplementationEngineUtils").updatePlayingVideoInfoProgressiveWithCurrentPlayingQuality(a,a.targetQuality,a.targetSrc));x.dispatch({type:"buffering_end_requested"})},targetSrc:a,videoElement:c})},n={current:null},o=function(){var a=u(),c=i.current;if(a==null||c==null)return;try{var d,f=c.graphQLVideoDRMInfo,g=c.videoFBID;d=f?(d=f.fairplayCert)!=null?d:null:null;b("cr:1680308")&&(n.current=f&&d!=null&&g!=null?new(b("cr:1680308"))(d,a,g,f.videoLicenseUriMap):null);d=b("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(a);y.current=d;j.current=c;g=t();v({inbandCaptionsAutogeneratedFromManifest:r.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:r.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:g==null?void 0:g.inbandCaptionsExpectedFromProps,sideLoadCaptionsExpectedFromProps:g==null?void 0:g.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:g==null?void 0:g.sideLoadCaptionsUrlFromProps});x.dispatch({payload:{availableQualities:r.getAvailableVideoQualities(),selectedVideoQuality:r.getUserSelectedVideoQuality(),targetVideoQuality:r.getCurrentTargetVideoQuality(),videoProjection:r.getVideoProjectionType()},type:"implementation_engine_initialized"});d.setPlayheadPosition(e.startTimestamp)}catch(a){w(a,"progressive_player_create_exception")}},p=function(a,c){if(c==null)return!0;else if(a.videoFBID!==c.videoFBID){var d=14;b("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.video_fbid_changed",d);return!1}else if(a.hdSrc!==c.hdSrc||a.sdSrc!==c.sdSrc){d=14;b("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.src_changed",d);return!1}else return!1},q=function(a){var c;c={graphQLVideoDRMInfo:(c=a.graphQLVideoDRMInfo)!=null?c:null,hdSrc:a.hdSrc===""?null:(c=a.hdSrc)!=null?c:null,hdSrcPreferred:a.hdSrcPreferred,sdSrc:a.sdSrc===""?null:(c=a.sdSrc)!=null?c:null,videoFBID:a.videoFBID};if(!p(c,f.current))return!1;if(c.hdSrc==null&&c.sdSrc==null)throw b("unrecoverableViolation")("Empty hdSrc and sdSrc","comet_video_player");f.current=c;i.current=b("VideoPlayerProgressiveImplementationEngineUtils").createResolvedVideoInfoProgressive(c);o();return!0},r=b("VideoPlayerProgressiveImplementationEngineExtrasAPI").createVideoPlayerProgressiveImplementationEngineExtrasAPI({getPlayingVideoInfo:function(){return j.current},setUserSelectedVideoQuality:function(a){var c=j.current;if(!c)throw b("unrecoverableViolation")("Attempt to switch quality when playingVideoInfo does not exist","comet_video_player");var d=y.current;if(!d)throw b("unrecoverableViolation")("Attempt to switch quality when videoElementAPI does not exist","comet_video_player");var e=c.targetQuality,f=c.targetSrc;j.current=b("VideoPlayerProgressiveImplementationEngineUtils").updatePlayingVideoInfoProgressiveWithUserSelectedQuality(c,a);c=j.current;a=c.targetQuality;c=c.targetSrc;if(b("gkx")("1467411"))c!==f&&(c==null?(l(),d.setSrc(null)):m(c)),e!=null&&a!==e&&a!=null&&x.dispatch({payload:{targetVideoQuality:a},type:"representation_changed"});else{d.setSrc(c);if(c!=null){e=(f=x.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?f:0;e>0&&d.setPlayheadPosition(e);x.getCurrentState().controlledState.playbackState==="playing"&&d.play();x.dispatch({payload:{targetVideoQuality:r.getCurrentTargetVideoQuality()},type:"representation_changed"})}}}}),s=function(){n.current&&(n.current.destroy(),n.current=null)};c=b("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({createDebugAPI:function(a){var c=a.getVideoElementAPI;a=a.logger;return b("cr:1473550")?b("cr:1473550").createVideoPlayerImplementationDebugAPI({engineExtrasAPI:r,getVideoElementAPI:c,logger:a}):null},createVideoPlayerError:h,debugLog:g,debugLogId:c,destroyEngineParts:function(){if(b("gkx")("1467411")){l();var a=y.current;a&&a.setSrc(null);j.current=null}s()},engineExtrasAPI:r,engineMetadata:{isAbrEnabled:!1,playerImplementationName:"progressive_v2",playerVersion:"comet_progressive",streamingFormat:"progressive"},handleFatalError:d,handleVideoElementMounted:o,handleVideoElementUnmounted:function(){b("gkx")("1467411")&&l()},handleVideoInfoChange:q,initialProps:e,setExposedStateInReact:a});d=c.engine;var t=c.getCaptionsInfo,u=c.getVideoElement,v=c.handleCaptionsInfoChange,w=c.handleFatalImplementationError,x=c.machine,y=c.videoElementAPIRef;return d}}),null);
__d("VideoPlayerProgressiveImplementationV2.react",["React","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationReactVideoElement.react","VideoPlayerProgressiveImplementationEngine"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=b("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(a,b("VideoPlayerProgressiveImplementationEngine").createVideoPlayerProgressiveImplementationEngine),d=c[0];c=c[1];return g.jsx(b("VideoPlayerImplementationReactVideoElement.react"),{implementationController:c.implementationController,implementationExposedState:d,renderWithVideoImplementationStates:a.renderWithVideoImplementationStates,videoElementCallbacks:c.videoElementCallbacks,videoElementRefCallback:c.videoElementRefCallback})}}),null);
__d("oz-player/shims/www/OzEventEmitterWWW",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";a=b("EventEmitter");e.exports=a}),null);
__d("oz-player/shims/www/OzNetworkDiagnosticsWWW",[],(function(a,b,c,d,e,f){"use strict";a={getResponseTimeMs:function(a){return a?parseInt(a.get("x-fb-response-time-ms"),10):null}};b=a;e.exports=b}),null);
__d("oz-player/shims/www/OzReadableStreamWWW",["requireCond","cr:927622"],(function(a,b,c,d,e,f){"use strict";b("cr:927622")&&(b("cr:927622").ReadableStream.isPolyfilled=!0);a=b("cr:927622")?b("cr:927622").ReadableStream:window.ReadableStream;c=a;e.exports=c}),null);
__d("oz-player/shims/www/OzWritableStreamWWW",["requireCond","cr:927623"],(function(a,b,c,d,e,f){"use strict";b("cr:927623")&&(b("cr:927623").WritableStream.isPolyfilled=!0);a=b("cr:927623")?b("cr:927623").WritableStream:window.WritableStream;c=a;e.exports=c}),null);
__d("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";a=b("setTimeoutAcrossTransitions");e.exports=a}),null);
__d("DOMControl",["DataStore","$"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.root=b("$").fromIDOrElement(a),this.updating=!1,b("DataStore").set(a,"DOMControl",this)}var c=a.prototype;c.getRoot=function(){return this.root};c.beginUpdate=function(){if(this.updating)return!1;this.updating=!0;return!0};c.endUpdate=function(){this.updating=!1};c.update=function(a){if(!this.beginUpdate())return this;this.onupdate(a);this.endUpdate()};c.onupdate=function(a){};a.getInstance=function(a){return b("DataStore").get(a,"DOMControl")};return a}();e.exports=a}),null);
__d("Input",["CSS","DOMControl","DOMQuery"],(function(a,b,c,d,e,f){f.isWhiteSpaceOnly=g;f.isEmpty=h;f.getValue=a;f.getValueRaw=c;f.setValue=d;f.setPlaceholder=e;f.reset=i;f.setSubmitOnEnter=j;f.getSubmitOnEnter=k;f.setMaxLength=l;function g(a){return!/\S/.test(a||"")}function h(a){return g(a.value)}function a(a){return h(a)?"":a.value}function c(a){return a.value}function d(a,c){a.value=c||"";c=b("DOMControl").getInstance(a);c&&c.resetHeight&&c.resetHeight()}function e(a,b){b||(b=""),a.setAttribute("aria-label",b),a.setAttribute("placeholder",b)}function i(a){a.value="",a.style.height=""}function j(a,c){b("CSS").conditionClass(a,"enter_submit",c)}function k(a){return b("CSS").hasClass(a,"enter_submit")}function l(a,b){b>0?a.setAttribute("maxlength",b.toString()):a.removeAttribute("maxlength")}}),null);
__d("Form",["DataStore","DOM","DOMQuery","DTSG","DTSGUtils","Input","LSD","PHPQuerySerializer","Random","SprinkleConfig","URI","getElementPosition","isFacebookURI","isNode"],(function(a,b,c,d,e,f){var g,h,i="FileList"in window,j="FormData"in window;function k(a){var c={};(g||(g=b("PHPQuerySerializer"))).serialize(a).split("&").forEach(function(a){if(a){a=/^([^=]*)(?:=(.*))?$/.exec(a);var d=(h||(h=b("URI"))).decodeComponent(a[1]),e=a[2]!==void 0;e=e?(h||(h=b("URI"))).decodeComponent(a[2]):null;c[d]=e}});return c}var l={getInputs:function(a){a===void 0&&(a=document);return[].concat(b("DOMQuery").scry(a,"input"),b("DOMQuery").scry(a,"select"),b("DOMQuery").scry(a,"textarea"),b("DOMQuery").scry(a,"button"))},getInputsByName:function(a){var b={};l.getInputs(a).forEach(function(a){var c=b[a.name];b[a.name]=typeof c==="undefined"?a:[a].concat(c)});return b},getSelectValue:function(a){return a.options[a.selectedIndex].value},setSelectValue:function(a,b){for(var c=0;c<a.options.length;++c)if(a.options[c].value==b){a.selectedIndex=c;break}},getRadioValue:function(a){for(var b=0;b<a.length;b++)if(a[b].checked)return a[b].value;return null},getElements:function(a){return a.tagName=="FORM"&&a.elements!=a?Array.from(a.elements):l.getInputs(a)},getAttribute:function(a,b){return(a.getAttributeNode(b)||{}).value||null},setDisabled:function(a,c){l.getElements(a).forEach(function(a){if(a.disabled!==void 0){var d=b("DataStore").get(a,"origDisabledState");c?(d===void 0&&b("DataStore").set(a,"origDisabledState",a.disabled),a.disabled=c):d===!1&&(a.disabled=!1)}})},forEachValue:function(a,c,d){l.getElements(a).forEach(function(a){if(!a.name||a.disabled)return;if(a.type==="submit")return;if(a.type==="reset"||a.type==="button"||a.type==="image")return;if((a.type==="radio"||a.type==="checkbox")&&!a.checked)return;if(a.nodeName==="SELECT"){for(var c=0,e=a.options.length;c<e;c++){var f=a.options[c];f.selected&&d("select",a.name,f.value)}return}if(a.type==="file"){if(i){f=a.files;for(var c=0;c<f.length;c++)d("file",a.name,f.item(c))}return}d(a.type,a.name,b("Input").getValue(a))}),c&&c.name&&c.type==="submit"&&b("DOMQuery").contains(a,c)&&b("DOMQuery").isNodeOfType(c,["input","button"])&&d("submit",c.name,c.value)},createFormData:function(a,c){if(!j)return null;var d=new FormData();if(a)if(b("isNode")(a))l.forEachValue(a,c,function(b,a,c){d.append(a,c)});else{c=k(a);for(var e in c)c[e]==null?d.append(e,""):d.append(e,c[e])}return d},serialize:function(a,b){var c={};l.forEachValue(a,b,function(a,b,d){if(a==="file")return;l._serializeHelper(c,b,d)});return l._serializeFix(c)},_serializeHelper:function(a,b,c){var d=Object.prototype.hasOwnProperty,e=/([^\]]+)\[([^\]]*)\](.*)/.exec(b);if(e){if(!a[e[1]]||!d.call(a,e[1])){a[e[1]]=d={};if(a[e[1]]!==d)return}d=0;if(e[2]==="")while(a[e[1]][d]!==void 0)d++;else d=e[2];e[3]===""?a[e[1]][d]=c:l._serializeHelper(a[e[1]],d.concat(e[3]),c)}else a[b]=c},_serializeFix:function(a){for(var b in a)a[b]instanceof Object&&(a[b]=l._serializeFix(a[b]));var c=Object.keys(a);if(c.length===0||c.some(isNaN))return a;c.sort(function(a,b){return a-b});var d=0,e=c.every(function(a){return+a===d++});return e?c.map(function(b){return a[b]}):a},post:function(a,c,d,e){e===void 0&&(e=!0);a=new(h||(h=b("URI")))(a);var f=document.createElement("form");f.action=a.toString();f.method="POST";f.style.display="none";var g=!b("isFacebookURI")(a);if(d){if(g){f.rel="noopener";if(d==="_blank"){d=btoa(b("Random").uint32());var i=window.open("about:blank",d);i===void 0||(i.opener=null)}}f.target=d}if(e&&(!g&&a.getSubdomain()!=="apps")){i=b("DTSG").getToken();i&&(c.fb_dtsg=i,b("SprinkleConfig").param_name&&(c[b("SprinkleConfig").param_name]=b("DTSGUtils").getNumericValue(i)));b("LSD").token&&(c.lsd=b("LSD").token,b("SprinkleConfig").param_name&&!i&&(c[b("SprinkleConfig").param_name]=b("DTSGUtils").getNumericValue(b("LSD").token)))}l.createHiddenInputs(c,f);b("DOMQuery").getRootElement().appendChild(f);f.submit();return!1},createHiddenInputs:function(a,c,d,e){e===void 0&&(e=!1);d=d||{};a=k(a);for(var f in a){if(a[f]===null)continue;if(d[f]&&e)d[f].value=a[f];else{var g=b("DOM").create("input",{type:"hidden",name:f,value:a[f]});d[f]=g;c.appendChild(g)}}return d},getFirstElement:function(a,c){c===void 0&&(c=['input[type="text"]',"textarea",'input[type="password"]','input[type="button"]','input[type="submit"]']);var d=[];for(var e=0;e<c.length;e++){d=b("DOMQuery").scry(a,c[e]);for(var f=0;f<d.length;f++){var g=d[f];try{var h=b("getElementPosition")(g);if(h.y>0&&h.x>0)return g}catch(a){}}}return null},focusFirst:function(a){a=l.getFirstElement(a);if(a){a.focus();return!0}return!1}};e.exports=l}),null);
__d("AsyncUploadBase",["ArbiterMixin","AsyncRequest","AsyncResponse","BrowserSupport","Form","forEachObject","mixin","removeFromArray"],(function(a,b,c,d,e,f){a=function(a){babelHelpers.inheritsLoose(c,a);c.parseFiles=function(a){var c={};b("forEachObject")(a,function(a,b){if(Array.isArray(a))c[b]=a;else{c[b]=[];if(a instanceof window.FileList)for(var d=0;d<a.length;d++)c[b].push(a.item(d));else(a instanceof window.File||a instanceof window.Blob)&&c[b].push(a)}});return c};function c(b){var c;c=a.call(this)||this;c._allowCrossOrigin=!1;c._allowCrossPageTransition=!1;c._customHeader={};c._inFlight=!1;c._limit=10;c._option={};c._preventDefaultErrorHandler=!1;c._suspended=!1;b&&c.setURI(b);c.setNetworkErrorRetryLimit(0);return c}var d=c.prototype;d.setAllowCrossOrigin=function(a){this._allowCrossOrigin=!!a;return this};d.setAllowCrossPageTransition=function(a){this._allowCrossPageTransition=!!a;return this};d.setCustomHttpHeader=function(a,b){this._customHeader[a]=b;return this};d.setData=function(a){this._data=a;return this};d.setOption=function(a,b){this._option[a]=b;return this};d.setPreventDefaultErrorHandler=function(a){this._preventDefaultErrorHandler=a;return this};d.setLimit=function(a){this._limit=a;return this};d.setNetworkErrorRetryLimit=function(a){this._retryLimit=a;return this};d.setPreprocessHandler=function(a){this._preprocessHandler=a;return this};d.setRelativeTo=function(a){this._relativeTo=a;return this};d.setStatusElement=function(a){this._statusElement=a;return this};d.setURI=function(a){this._uri=a;return this};d.suspend=function(){this._suspended=!0;return this};d.resume=function(){this._suspended=!1;this._processQueue();return this};d.isUploading=function(){return this._inFlight};d._createFileUpload=function(a,b,c){return new g(a,b,c)};d._processQueue=function(){if(this._suspended)return;while(this._pending.length<this._limit){if(!this._waiting.length)break;var a=this._waiting.shift(),b=this._preprocessHandler;b?b(a,this._processUpload.bind(this)):this._processUpload(a);this._pending.push(a)}};d._processUpload=function(a){var c=b("Form").createFormData(a.getData()||this._data);if(a.getFile()){c.append(a.getName(),a.getFile());var d=a.getFile().uploadID;d&&c.append("upload_id",d);a.getAdditionalData().forEach(function(a,b){return c.append(b,a)})}d=new(b("AsyncRequest"))().setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setURI(this._uri).setRawData(c).setStatusElement(this._statusElement).setHandler(this._success.bind(this,a)).setErrorHandler(this._failure.bind(this,a)).setUploadProgressHandler(this._progress.bind(this,a)).setInitialHandler(this._initial.bind(this,a));for(var e in this._option)d.setOption(e,this._option[e]);for(var f in this._customHeader)d.setRequestHeader(f,this._customHeader[f]);this._relativeTo&&d.setRelativeTo(this._relativeTo);d.send();a.setAsyncRequest(d);this._inFlight=!0;a.getRetryCount()||this.inform("start",a)};d._abort=function(a){this._pending.indexOf(a)!==-1&&(b("removeFromArray")(this._pending,a),this._processQueue()),b("removeFromArray")(this._waiting,a),a.abort()};d._initial=function(a){if(a.isAborted())return;this.inform("initial",a)};d._success=function(a,b){if(a.isAborted()){this.inform("success_after_abort",b);return}this._complete(a);this.inform("success",a.handleSuccess(b));this._processQueue()};d._retryUpload=function(a){a.increaseRetryCount(),this._processUpload(a)};d._failure=function(a,c){if(a.isAborted())return;if(c.error===1004&&a.getRetryCount()<(this._retryLimit||0))return this._retryUpload(a);this._complete(a);this.inform("failure",a.handleFailure(c))!==!1&&(this._preventDefaultErrorHandler||b("AsyncResponse").defaultErrorHandler(c));this._processQueue()};d._progress=function(a,b){if(a.isAborted())return;this.inform("progress",a.handleProgress(b))};d._complete=function(a){b("removeFromArray")(this._pending,a),this._pending.length||(this._inFlight=!1)};c.isSupported=function(){return b("BrowserSupport").hasFileAPI()};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a;var g=function(){function a(a,b,c){this._additionalData=new Map(),this._success=null,this._response=null,this._progressEvent=null,this._request=null,this._numRetries=0,this._aborted=!1,this._name=a,this._file=b,this._data=c}var b=a.prototype;b.getName=function(){return this._name};b.getFile=function(){return this._file};b.setFile=function(a){this._file=a};b.getData=function(){return this._data};b.getAdditionalData=function(){return this._additionalData};b.isComplete=function(){return this._success!==null};b.isSuccess=function(){return this._success===!0};b.getResponse=function(){return this._response};b.getProgressEvent=function(){return this._progressEvent};b.setAsyncRequest=function(a){this._request=a;return this};b.increaseRetryCount=function(){this._numRetries++;return this};b.getRetryCount=function(){return this._numRetries};b.isWaiting=function(){return!this._request};b.isAborted=function(){return this._aborted};b.abort=function(){this._request=null,this._aborted=!0};b.handleSuccess=function(a){this._success=!0;this._response=a;this._progressEvent=null;return this};b.handleFailure=function(a){this._success=!1;this._response=a;this._progressEvent=null;return this};b.handleProgress=function(a){this._progressEvent=a;return this};return a}()}),null);
__d("AsyncUploadRequest",["AsyncUploadBase"],(function(a,b,c,d,e,f){a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c._files=null,c._uploads=[],c._fileLessUpload=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.setFiles=function(a){this._files=b("AsyncUploadBase").parseFiles(a);return this};d.setAlwaysReturnResponse=function(a){this._shouldAlwaysReturnResponse=a};d.abort=function(){var a=this;this._uploads.forEach(function(b){return a._abort(b)},this)};d.send=function(){if(this._inFlight)return;this._inFlight=!0;this._uploads=[];for(var a in this._files)this._files[a].forEach(function(b){this._uploads.push(this._createFileUpload(a,b))}.bind(this));this._waiting=this._uploads.slice(0);this._pending=[];this._uploads.length?this._processQueue():(this._fileLessUpload=this._createFileUpload(null,null),this._processUpload(this._fileLessUpload))};d._processQueue=function(){a.prototype._processQueue.call(this);if(!this._pending.length&&!this._waiting.length){var b=this._uploads;b=this._shouldAlwaysReturnResponse?this._fileLessUpload!=null?{response:this._fileLessUpload.getResponse(),uploads:b}:{response:b[0].getResponse(),uploads:b}:b;this.inform("complete",b)}};c.isSupported=function(){return b("AsyncUploadBase").isSupported()};return c}(b("AsyncUploadBase"));e.exports=a}),null);
__d("shield",[],(function(a,b,c,d,e,f){e.exports=a;function a(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];if(typeof a!=="function")throw new TypeError("shield expects a function as the first argument");return function(){return a.apply(b,d)}}}),null);
__d("FileForm",["ArbiterMixin","AsyncRequest","AsyncResponse","AsyncUploadRequest","BehaviorsMixin","CurrentUser","DataStore","DOMQuery","Event","Form","JSONPTransport","Parent","URI","isElementNode","mixin","setTimeout","shield"],(function(a,b,c,d,e,f){var g;function h(a){var c={};a=b("DOMQuery").scry(a,'input[type="file"]');a.forEach(function(a){c[a.name]=a.files});return c}function i(a){a=b("DOMQuery").scry(a,'input[type="file"]');a.forEach(function(a){a.files=null})}a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){var f;f=a.call(this)||this;f._handleSubmit=function(a){if(a.isDefaultPrevented()||a.getTarget()!==f._form)return;if(f.inform("submit")===!1){a.prevent();return}f.submit(a)};f.initial=function(a){return f.inform("initial",{upload:a})};if(c.getAttribute("rel")==="async")throw new Error("FileForm cannot be used with Primer forms.");if((c.getAttribute("method")||"").toUpperCase()!=="POST")throw new Error("FileForm must be used with POST forms.");f._form=c;f._previousEncoding=f._form.enctype;f._form.enctype=f._form.encoding="multipart/form-data";f._files=null;f._customHeader={};d&&f.enableBehaviors(d);f._options=e||{};f.setAllowCrossOrigin(f._options.allowCrossOrigin);f.setAllowCrossPageTransition(f._options.allowCrossPageTransition);f.setUploadInParallel(f._options.uploadInParallel);f.setConcurrentLimit(f._options.concurrentLimit);f.setPreprocessHandler(f._options.preprocessHandler);f.setNetworkErrorRetryLimit(f._options.networkErrorRetryLimit);f._listeners=[b("Event").listen(document.documentElement,"submit",f._handleSubmit),b("Event").listen(f._form,"click",f._click.bind(babelHelpers.assertThisInitialized(f)))];b("DataStore").set(f._form,"FileForm",babelHelpers.assertThisInitialized(f));return f}var d=c.prototype;d.getRoot=function(){return this._form};d.setAllowCrossOrigin=function(a){this._allowCrossOrigin=!!a;return this};d.setAllowCrossPageTransition=function(a){this._allowCrossPageTransition=!!a;return this};d.setUploadInParallel=function(a){this._uploadInParallel=!!a;return this};d.setConcurrentLimit=function(a){this._concurrentLimit=a;return this};d.setCustomHttpHeader=function(a,b){this._customHeader[a]=b;return this};d.setPreprocessHandler=function(a){this._preprocessHandler=a;return this};d.setNetworkErrorRetryLimit=function(a){this._retryLimit=a;return this};d.setFiles=function(a){this._files=a;return this};d.canUseXHR=function(){var a="FormData"in window;a&&(!new(g||(g=b("URI")))(this._form.action).isSameOrigin()&&!this._allowCrossOrigin&&(a=!1));return a};d._click=function(a){a=a.getTarget();while(b("isElementNode")(a)){if(a.type==="submit"){this._clickTarget=a;b("setTimeout")(this._unclick.bind(this),0);break}a=a.parentNode}};d._unclick=function(){this._clickTarget=null};d._sendViaFrame=function(){var a=this._request=new(b("AsyncRequest"))();a.setStatusElement(this._getStatusElement());a.addStatusIndicator();a.setOption("useIframeTransport",!0);var c=a.handleResponse.bind(a);c=new(b("JSONPTransport"))("iframe",this._form.action,c);var d=c.getTransportFrame(),e=c.getRequestURI().addQueryData({__iframe:!0,__user:b("CurrentUser").getID()});this._form.setAttribute("action",e.toString());c.createContinuationForFileForm_DO_NOT_USE();this._form.setAttribute("target",d.name);a.setJSONPTransport(c);a.setURI(e);a.setHandler(this.success.bind(this,null));a.setErrorHandler(this.failure.bind(this,null));a.setInitialHandler(b("shield")(this.initial,this,null))};d._sendViaXHR=function(a){var c=this,d;if(this._uploadInParallel&&b("AsyncUploadRequest").isSupported()){d=new(b("AsyncUploadRequest"))().setPreprocessHandler(this._preprocessHandler).setData(b("Form").serialize(this._form,this._clickTarget)).setNetworkErrorRetryLimit(this._retryLimit);for(var e in this._customHeader)d.setCustomHttpHeader(e,this._customHeader[e]);this._concurrentLimit&&d.setLimit(this._concurrentLimit);this._files?d.setFiles(this._files):d.setFiles(h(this._form));var f=[d.subscribe("progress",function(a,b){this.progress(b,b.getProgressEvent())}.bind(this)),d.subscribe("initial",function(a,b){this.initial(b)}.bind(this)),d.subscribe("success",function(a,b){this.success(b,b.getResponse())}.bind(this)),d.subscribe("start",function(a,b){this.inform("start",{upload:b})}.bind(this)),d.subscribe("failure",function(a,b){this.failure(b,b.getResponse());return!1}.bind(this)),d.subscribe("complete",function(){while(f.length)f.pop().unsubscribe()})]}else{var g,e,i;(function(){var a,f=c._files;if(f){a=b("Form").createFormData(b("Form").serialize(c._form,c._clickTarget));g=b("AsyncUploadRequest").parseFiles(f);for(e in g)i=g[e],i.length===1?a.append(e,i[0]):(e=e+"[]",i.forEach(function(b){a.append(e,b)}))}else a=b("Form").createFormData(c._form,c._clickTarget);d=new(b("AsyncRequest"))().setRawData(a).setHandler(c.success.bind(c,null)).setErrorHandler(c.failure.bind(c,null)).setUploadProgressHandler(c.progress.bind(c,null)).setInitialHandler(b("shield")(c.initial,c,null));c.inform("start",{upload:null})})()}d.setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setRelativeTo(this._form).setStatusElement(this._getStatusElement()).setURI(this._form.action).send();this._request=d;a&&a.prevent()};d.forceSendViaXHR=function(){return this._sendViaXHR(null)};d.success=function(a,c){c={response:c,upload:a};this.inform("success",c)!==!1&&b("Event").fire(this._form,"success",c);this._cleanup()};d.failure=function(a,c){a={response:c,upload:a};this.inform("failure",a)!==!1&&(b("Event").fire(this._form,"error",a)!==!1&&b("AsyncResponse").defaultErrorHandler(c));this._cleanup()};d.progress=function(a,b){this.inform("progress",{event:b,upload:a})};d.abort=function(){this._request&&(this._request.abort(),this._cleanup())};d.clear=function(){i(this._form)};d.destroy=function(){this._cleanup();while(this._listeners&&this._listeners.length)this._listeners.pop().remove();this._listeners=null;this._form.enctype=this._form.encoding=this._previousEncoding;b("DataStore").remove(this._form,"FileForm")};d.submit=function(a){this.canUseXHR()?this._sendViaXHR(a):this._sendViaFrame()};d._cleanup=function(){this._request=null};d._getStatusElement=function(){return b("Parent").byClass(this._form,"stat_elem")||this._form};c.getInstance=function(a){return b("DataStore").get(a,"FileForm")};return c}(b("mixin")(b("ArbiterMixin"),b("BehaviorsMixin")));e.exports=a;Object.assign(a,{EVENTS:["start","submit","initial","progress","success","failure"]})}),null);
__d("FileInputUploader",["ArbiterMixin","DOM","DTSG","FileForm","Form","mixin"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;c._inputElem=b;c._data={};return c}var d=c.prototype;d.setInput=function(a){this._inputElem=a;return this};d.setURI=function(a){this._uri=a;return this};d.setData=function(a){this._data=a;return this};d.setPreprocessHandler=function(a){this._preprocessHandler=a;return this};d.setNetworkErrorRetryLimit=function(a){this._retryLimit=a;return this};d.setFiles=function(a){this._files=a;return this};d.setAllowCrossOrigin=function(a){this._allowCrossOrigin=!!a;return this};d.setAllowCrossPageTransition=function(a){this._allowCrossPageTransition=!!a;return this};d.setUploadInParallel=function(a){this._uploadInParallel=!!a;return this};d.setConcurrentLimit=function(a){this._concurrentLimit=a;return this};d.abort=function(){this._fileForm&&(this._fileForm.abort(),this._destroyFileForm())};d.send=function(){this._createForm();var a=this._inputElem&&!this._inputElem.parentElement;if(!a&&this._inputElem){var c=this._inputElem.cloneNode(!1);b("DOM").replace(this._inputElem,c)}this._inputElem&&b("DOM").appendContent(this._formElem,this._inputElem);b("DOM").appendContent(document.body,this._formElem);this._fileForm.submit();!a&&this._inputElem&&b("DOM").replace(c,this._inputElem);this._removeFormEl()};d._onFileFormEvent=function(a,b){(a==="success"||a==="failure")&&this._destroyFileForm();return this.inform(a,b)};d._createForm=function(){var a;this._destroyFileForm();this._formElem=b("DOM").create("form",{action:this._uri,method:"post"});this._fileForm=new(b("FileForm"))(this._formElem,null,{allowCrossOrigin:!!this._allowCrossOrigin,allowCrossPageTransition:!!this._allowCrossPageTransition,uploadInParallel:!!this._uploadInParallel,concurrentLimit:(a=this._concurrentLimit)!=null?a:0,preprocessHandler:(a=this._preprocessHandler)!=null?a:null,networkErrorRetryLimit:(a=this._retryLimit)!=null?a:0});this._files&&this._fileForm.setFiles(this._files);this._fileForm.subscribe(b("FileForm").EVENTS,this._onFileFormEvent.bind(this));b("Form").createHiddenInputs(babelHelpers["extends"]({fb_dtsg:b("DTSG").getToken()},this._data),this._formElem)};d._removeFormEl=function(){b("DOM").remove(this._formElem),this._formElem=null};d._destroyFileForm=function(){this._fileForm&&(this._fileForm.destroy(),this._fileForm=null)};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("PhotosUploadID",[],(function(a,b,c,d,e,f){f.getNewID=a;var g=1024;function a(){return(g++).toString()}}),null);
__d("XAsyncRequest",["AsyncRequest"],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=new(b("AsyncRequest"))(a)}var c=a.prototype;c.setURI=function(a){this.$1.setURI(a);return this};c.setOption=function(a,b){this.$1.setOption(a,b);return this};c.setMethod=function(a){this.$1.setMethod(a);return this};c.setData=function(a){this.$1.setData(a);return this};c.setHandler=function(a){this.$1.setHandler(a);return this};c.setPayloadHandler=function(a){this.setHandler(function(b){return a(b.payload)});return this};c.setErrorHandler=function(a){this.$1.setErrorHandler(a);return this};c.send=function(){this.$1.send();return this};c.abort=function(){this.$1.abort()};c.setReadOnly=function(a){this.$1.setReadOnly(a);return this};c.setAllowCrossOrigin=function(a){this.$1.setAllowCrossOrigin(a);return this};c.setAllowCredentials=function(a){this.$1.setAllowCredentials(a);return this};c.setAllowCrossPageTransition=function(a){this.$1.setAllowCrossPageTransition(a);return this};return a}();e.exports=a}),null);
__d("curry",["bind"],(function(a,b,c,d,e,f){a=b("bind")(null,b("bind"),null);c=a;e.exports=c}),null);
__d("ReactComposerMediaFilterUtils",["ComposerXNativeAudioUploadsConfig","VideoUploadConfig"],(function(a,b,c,d,e,f){f.hasEditableVideos=a;f.hasVideos=c;f.hasAudioFiles=d;f.filterVideos=e;f.filterNonEditableVideos=g;f.filterAudioFiles=h;f.filterFileOfSupportedType=i;function a(a){var b=this.filterVideos(a).length;a=this.filterNonEditableVideos(a).length;return b>a}function c(a){return this.filterVideos(a).length>0}function d(a){return this.filterAudioFiles(a).length>0}function e(a){return this.filterFileOfSupportedType(a,b("VideoUploadConfig").videoExtensions)}function g(a){var b={gif:!0};return this.filterFileOfSupportedType(a,b)}function h(a){return this.filterFileOfSupportedType(a,b("ComposerXNativeAudioUploadsConfig").audioExtensions)}function i(a,b){return a.filter(function(a){a=a.indexOf(".")!==-1?a.split(".").pop().toLowerCase():"";return b[a]})}}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("exif-js-2.3.0",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g},i;function j(){(function(){var a=!1,b=this,c=function(a){if(a instanceof c)return a;if(!(this instanceof c))return new c(a);this.EXIFwrapped=a};typeof g!=="undefined"?(typeof h!=="undefined"&&h.exports&&(g=h.exports=c),g.EXIF=c):b.EXIF=c;var d=c.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},e=c.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},f=c.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},j=c.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},k=c.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function l(a){return!!a.exifdata}function m(a,b){b||a.match(/^data\:([^\;]+)\;base64,/im)[1]||"";a=a.replace(/^data\:([^\;]+)\;base64,/gim,"");b=atob(a);a=b.length;var c=new ArrayBuffer(a),d=new Uint8Array(c);for(var e=0;e<a;e++)d[e]=b.charCodeAt(e);return c}function n(a,b){var c=new XMLHttpRequest();c.open("GET",a,!0);c.responseType="blob";c.onload=function(a){(this.status==200||this.status===0)&&b(this.response)};c.send()}function o(b,d){function e(a){var e=p(a);b.exifdata=e||{};e=q(a);b.iptcdata=e||{};if(c.isXmpEnabled){e=z(a);b.xmpdata=e||{}}d&&d.call(b)}if(b.src)if(/^data\:/i.test(b.src)){var f=m(b.src);e(f)}else if(/^blob\:/i.test(b.src)){var g=new FileReader();g.onload=function(a){e(a.target.result)};n(b.src,function(a){g.readAsArrayBuffer(a)})}else{var h=new XMLHttpRequest();h.onload=function(){if(this.status==200||this.status===0)e(h.response);else throw"Could not load image";h=null};h.open("GET",b.src,!0);h.responseType="arraybuffer";h.send(null)}else if(self.FileReader&&(b instanceof self.Blob||b instanceof self.File)){var g=new FileReader();g.onload=function(b){a&&!1,e(b.target.result)};g.readAsArrayBuffer(b)}}function p(b){var c=new DataView(b);a&&!1;if(c.getUint8(0)!=255||c.getUint8(1)!=216){a&&!1;return!1}var d=2;b=b.byteLength;var e;while(d<b){if(c.getUint8(d)!=255){a&&!1;return!1}e=c.getUint8(d+1);a&&!1;if(e==225){a&&!1;return y(c,d+4,c.getUint16(d+2)-2)}else d+=2+c.getUint16(d+2)}}function q(b){var c=new DataView(b);a&&!1;if(c.getUint8(0)!=255||c.getUint8(1)!=216){a&&!1;return!1}var d=2,e=b.byteLength,f=function(a,b){return a.getUint8(b)===56&&a.getUint8(b+1)===66&&a.getUint8(b+2)===73&&a.getUint8(b+3)===77&&a.getUint8(b+4)===4&&a.getUint8(b+5)===4};while(d<e){if(f(c,d)){var g=c.getUint8(d+7);g%2!==0&&(g+=1);g===0&&(g=4);var h=d+8+g;g=c.getUint16(d+6+g);return s(b,h,g);break}d++}}var r={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function s(a,b,c){a=new DataView(a);var d={},e,f,g=b;while(g<b+c)a.getUint8(g)===28&&a.getUint8(g+1)===2&&(f=a.getUint8(g+2),f in r&&(e=a.getInt16(g+3),f=r[f],e=x(a,g+5,e),d.hasOwnProperty(f)?d[f]instanceof Array?d[f].push(e):d[f]=[d[f],e]:d[f]=e)),g++;return d}function t(b,c,d,e,f){var g=b.getUint16(d,!f),h={},i,j,k;for(k=0;k<g;k++)i=d+k*12+2,j=e[b.getUint16(i,!f)],!j&&a&&!1,h[j]=u(b,i,c,d,f);return h}function u(a,b,c,d,e){d=a.getUint16(b+2,!e);var f=a.getUint32(b+4,!e);c=a.getUint32(b+8,!e)+c;var g,h,i,j;switch(d){case 1:case 7:if(f==1)return a.getUint8(b+8,!e);else{d=f>4?c:b+8;g=[];for(i=0;i<f;i++)g[i]=a.getUint8(d+i);return g}case 2:d=f>4?c:b+8;return x(a,d,f-1);case 3:if(f==1)return a.getUint16(b+8,!e);else{d=f>2?c:b+8;g=[];for(i=0;i<f;i++)g[i]=a.getUint16(d+2*i,!e);return g}case 4:if(f==1)return a.getUint32(b+8,!e);else{g=[];for(i=0;i<f;i++)g[i]=a.getUint32(c+4*i,!e);return g}case 5:if(f==1){d=a.getUint32(c,!e);j=a.getUint32(c+4,!e);h=new Number(d/j);h.numerator=d;h.denominator=j;return h}else{g=[];for(i=0;i<f;i++)d=a.getUint32(c+8*i,!e),j=a.getUint32(c+4+8*i,!e),g[i]=new Number(d/j),g[i].numerator=d,g[i].denominator=j;return g}case 9:if(f==1)return a.getInt32(b+8,!e);else{g=[];for(i=0;i<f;i++)g[i]=a.getInt32(c+4*i,!e);return g}case 10:if(f==1)return a.getInt32(c,!e)/a.getInt32(c+4,!e);else{g=[];for(i=0;i<f;i++)g[i]=a.getInt32(c+8*i,!e)/a.getInt32(c+4+8*i,!e);return g}}}function v(a,b,c){var d=a.getUint16(b,!c);return a.getUint32(b+2+d*12,!c)}function w(a,b,c,d){c=v(a,b+c,d);if(!c)return{};else if(c>a.byteLength)return{};c=t(a,b,b+c,j,d);if(c.Compression)switch(c.Compression){case 6:if(c.JpegIFOffset&&c.JpegIFByteCount){d=b+c.JpegIFOffset;b=c.JpegIFByteCount;c.blob=new Blob([new Uint8Array(a.buffer,d,b)],{type:"image/jpeg"})}break;case 1:break;default:}else c.PhotometricInterpretation==2;return c}function x(a,b,c){var d="";for(var e=b;e<b+c;e++)d+=String.fromCharCode(a.getUint8(e));return d}function y(b,c){if(x(b,c,4)!="Exif"){a&&!1;return!1}var g,h,i,j;c=c+6;if(b.getUint16(c)==18761)g=!1;else if(b.getUint16(c)==19789)g=!0;else{a&&!1;return!1}if(b.getUint16(c+2,!g)!=42){a&&!1;return!1}var l=b.getUint32(c+4,!g);if(l<8){a&&!1;return!1}h=t(b,c,c+l,e,g);if(h.ExifIFDPointer){j=t(b,c,c+h.ExifIFDPointer,d,g);for(i in j){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":j[i]=k[i][j[i]];break;case"ExifVersion":case"FlashpixVersion":j[i]=String.fromCharCode(j[i][0],j[i][1],j[i][2],j[i][3]);break;case"ComponentsConfiguration":j[i]=k.Components[j[i][0]]+k.Components[j[i][1]]+k.Components[j[i][2]]+k.Components[j[i][3]];break}h[i]=j[i]}}if(h.GPSInfoIFDPointer){j=t(b,c,c+h.GPSInfoIFDPointer,f,g);for(i in j){switch(i){case"GPSVersionID":j[i]=j[i][0]+"."+j[i][1]+"."+j[i][2]+"."+j[i][3];break}h[i]=j[i]}}h.thumbnail=w(b,c,l,g);return h}function z(b){if(!("DOMParser"in self))return;var c=new DataView(b);a&&!1;if(c.getUint8(0)!=255||c.getUint8(1)!=216){a&&!1;return!1}var d=2;b=b.byteLength;var e=new DOMParser();while(d<b-4)if(x(c,d,4)=="http"){var f=d-1,g=c.getUint16(d-2)-1;f=x(c,f,g);g=f.indexOf("xmpmeta>")+8;f=f.substring(f.indexOf("<x:xmpmeta"),g);g=f.indexOf("x:xmpmeta")+10;f=f.slice(0,g)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+f.slice(g);g=e.parseFromString(f,"text/xml");return B(g)}else d++}function A(a){var b={};if(a.nodeType==1){if(a.attributes.length>0){b["@attributes"]={};for(var c=0;c<a.attributes.length;c++){var d=a.attributes.item(c);b["@attributes"][d.nodeName]=d.nodeValue}}}else if(a.nodeType==3)return a.nodeValue;if(a.hasChildNodes())for(var d=0;d<a.childNodes.length;d++){c=a.childNodes.item(d);var e=c.nodeName;if(b[e]==null)b[e]=A(c);else{if(b[e].push==null){var f=b[e];b[e]=[];b[e].push(f)}b[e].push(A(c))}}return b}function B(a){try{var b={};if(a.children.length>0)for(var c=0;c<a.children.length;c++){var d=a.children.item(c),e=d.attributes;for(var f in e){var g=e[f],h=g.nodeName;g=g.nodeValue;h!==void 0&&(b[h]=g)}h=d.nodeName;if(typeof b[h]=="undefined")b[h]=A(d);else{if(typeof b[h].push=="undefined"){g=b[h];b[h]=[];b[h].push(g)}b[h].push(A(d))}}else b=a.textContent;return b}catch(a){}}c.enableXmp=function(){c.isXmpEnabled=!0};c.disableXmp=function(){c.isXmpEnabled=!1};c.getData=function(a,b){if((self.Image&&a instanceof self.Image||self.HTMLImageElement&&a instanceof self.HTMLImageElement)&&!a.complete)return!1;!l(a)?o(a,b):b&&b.call(a);return!0};c.getTag=function(a,b){if(!l(a))return;return a.exifdata[b]};c.getIptcTag=function(a,b){if(!l(a))return;return a.iptcdata[b]};c.getAllTags=function(a){if(!l(a))return{};var b;a=a.exifdata;var c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};c.getAllIptcTags=function(a){if(!l(a))return{};var b;a=a.iptcdata;var c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};c.pretty=function(a){if(!l(a))return"";var b;a=a.exifdata;var c="";for(b in a)a.hasOwnProperty(b)&&(typeof a[b]=="object"?a[b]instanceof Number?c+=b+" : "+a[b]+" ["+a[b].numerator+"/"+a[b].denominator+"]\r\n":c+=b+" : ["+a[b].length+" values]\r\n":c+=b+" : "+a[b]+"\r\n");return c};c.readFromBinaryFile=function(a){return p(a)};typeof i==="function"&&i.amd&&i("exif-js",[],function(){return c})}).call(this)}var k=!1;function l(){k||(k=!0,j());return h.exports}function a(a){switch(a){case void 0:return l()}}e.exports=a}),null);
__d("exif-js",["exif-js-2.3.0"],(function(a,b,c,d,e,f){e.exports=b("exif-js-2.3.0")()}),null);
__d("ImageExif",["exif-js"],(function(a,b,c,d,e,f){b("exif-js").enableXmp();function g(a){var b=function(b){return a.charCodeAt(b)&255};this.getByteAt=b;this.getShortAt=function(a,b){a=this.getSShortAt(a,b);return a>0?a:a+65536};this.getSShortAt=function(a,c){var d=b(a);a=b(a+1);return c?(d<<8)+a:(a<<8)+d};this.getLongAt=function(a,b){a=this.getSLongAt(a,b);return a>0?a:a+4294967296};this.getSLongAt=function(a,c){var d=b(a),e=b(a+1),f=b(a+2);a=b(a+3);return c?(((d<<8)+e<<8)+f<<8)+a:(((a<<8)+f<<8)+e<<8)+d};this.getStringAt=function(b,c){return a.substr(b,c)};this.getLength=function(){return a.length}}a={readFromFile:function(a,b){var c=this,d=new FileReader();d.addEventListener("load",function(a){a=a.target.result;a=a instanceof ArrayBuffer?c.readFromArrayBuffer(a):c.readFromBinaryString(a);b(a)},!1);window.DataView?d.readAsArrayBuffer(a):d.readAsBinaryString(a)},readFromBinaryString:function(a){return b("exif-js").readFromBinaryFile(new g(a))},readFromArrayBuffer:function(a){return b("exif-js").readFromBinaryFile(a)}};e.exports=a}),null);
__d("StringEncoding",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=new Uint8Array(a);var c=0,d=[];while(c<a.length){var e=a[c],f=void 0;if(e>>7===0)f=1;else if(e>>5===6)e&=31,f=2;else if(e>>4===14)e&=15,f=3;else if(e>>3===30)e&=7,f=4;else if(e>>2===62)e&=3,f=5;else if(e>>1===126)e&=1,f=6;else throw new Error("Cannot decode as UTF-8 - unrecognised codepoint header");if(c+f>a.length)throw new Error("Cannot decode as UTF-8 - incomplete codepoint");for(var g=1;g<f;g++){var h=a[c+g];if(h>>6!==2)throw new Error("Cannot decode as UTF-8 - unrecognised codepoint subsequent byte");h&=63;e<<=6;e|=h}if(e>1114111)throw new Error("Cannot decode as UTF-8 - JavaScript doesn't support codepoints over 0x10FFFF");if(!e)switch(b){case"error":throw new Error("Cannot decode as UTF-8 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,d);case"include":break}d.push(e);c+=f}return String.fromCodePoint.apply(String,d)}function g(a){return(a&255)<<8|a>>8}function b(a,b){if(a.byteLength%2!==0)throw new Error("Cannot decode as UTF-16 - data length mod 2 != 0");a=new Uint16Array(a);var c=0,d=[],e=!1;a[0]===65279?++c:a[0]==65534&&(++c,e=!0);while(c<a.length){var f=a[c];e&&(f=g(f));var h=f;if(f>55295&&f<57344){if((f&64512)!==55296)throw new Error("Cannot decode as UTF-16 - incorrect signature for high surrogate");if(c+1>=a.length)throw new Error("Cannot decode as UTF-16 - incomplete codepoint");++c;var i=a[c];e&&(i=g(i));if((i&64512)!==56320)throw new Error("Cannot decode as UTF-16 - incorrect signature for low surrogate");h=((f&1023)<<10|i&1023)+65536}if(!h)switch(b){case"error":throw new Error("Cannot decode as UTF-16 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,d);case"include":break}d.push(h);++c}return String.fromCodePoint.apply(String,d)}function h(a){return(a&255)<<24|(a&255<<8)<<8|(a&255<<16)>>8|a>>>24}function c(a,b){if(a.byteLength%4!==0)throw new Error("Cannot decode as UTF-32 - data length mod 4 != 0");a=new Uint32Array(a);var c=0,d=[],e=!1;a[0]===65279?++c:a[0]==4294836224&&(++c,e=!0);while(c<a.length){var f=a[c];e&&(f=h(f));if(f&2147483648)throw new Error("Cannot decode as UTF-32 - invalid codepoint");if(f>1114111)throw new Error("Cannot decode as UTF-32 - JavaScript doesn't support codepoints over 0x10FFFF");if(!f)switch(b){case"error":throw new Error("Cannot decode as UTF-32 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,d);case"include":break}d.push(f);++c}return String.fromCodePoint.apply(String,d)}var i={"utf-8":a,"utf-16":b,"utf-32":c};d=function(){function a(a,b){a?this.$1=a:this.$1=["utf-8","utf-16","utf-32"];b||(b="error");this.$2=b;for(var a=this.$1,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;this.$3(d)}}var b=a.prototype;b.getPrecedence=function(){return this.$1};b.decode=function(a){var b=[];for(var c=this.$1,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f=this.$3(f);try{return f(a,this.$2)}catch(a){b.push(a)}}throw new Error(b.join(", "))};b.$3=function(a){var b=i[a];if(!b)throw new Error("Unknown encoding "+a);return b};return a}();f.Decoder=d}),null);
__d("ImageMetadata",["regeneratorRuntime","Promise","ImageExif","StringEncoding","emptyFunction"],(function(a,b,c,d,e,f){"use strict";c=function(){function c(a){this.$4="",this.$6=a,this.$7=new Uint8Array(a),this.$8()}var d=c.prototype;d.$8=function(){var a=0;while(a<this.$7.length){a=this.$9(a);if(a===-1)return;var b=this.$7[a+1];b=g[b];if(!b)return;var c=b.length;c===void 0&&(c=this.$7[a+2]*256+this.$7[a+3]);this.$10(a,c,b);if(b.name==="SOS")return;a+=2+c}};d.$10=function(a,b,c){switch(c.name){case"APP1":this.$11(a+4,h)?(this.$1||(this.$1=a,this.$2=b),this.$12(a+4+h.length,b-2-h.length)):this.$11(a+4,i)?(this.$1=a,this.$2=b,this.$13(a+4+i.length,b-2-i.length)):this.$11(a+4,j)&&this.$14(a+4+j.length,b-2-j.length);break;case"SOF0":case"SOF1":case"SOF2":case"SOF3":case"SOF5":case"SOF6":case"SOF7":case"JPG":case"SOF9":case"SOF10":case"SOF11":case"SOF13":case"SOF14":case"SOF15":this.$15(a+4,b-2);break}};d.$15=function(a,b){b=this.$7[a+3]*256+this.$7[a+4];a=this.$7[a+1]*256+this.$7[a+2];b>0&&a>0&&(this.$5={x:b,y:a})};d.$12=function(a,c){a=emptyFunction;try{emptyFunction=b("emptyFunction");c=b("ImageExif").readFromArrayBuffer(this.$6)||{}}finally{emptyFunction=a}a={};for(var d in c){var e=c[d];typeof e==="string"&&(e=e.trim());a[d.trim()]=e}this.$3=a};d.$13=function(a,c){var d=new(b("StringEncoding").Decoder)(null,"truncate");try{d=d.decode(this.$6.slice(a,a+c));this.$4=d}catch(a){return}};d.$14=function(a){};d.$11=function(a,b){var c=this;return b.split("").every(function(b){return c.$7[a++]===b.charCodeAt(0)})};d.$9=function(a){for(var a=a;a+1<this.$7.length;++a)if(this.$7[a]===255&&this.$7[a+1]!==0&&this.$7[a+1]!==255)return a;return-1};d.hasAPP1=function(){return Boolean(this.$1)};d.hasExif=function(){return Boolean(this.$3)};d.hasXMP=function(){return Boolean(this.$4)};d.hasSize=function(){return Boolean(this.$5)};d.getAPP1Location=function(){return!this.hasAPP1()?null:this.$1};d.getAPP1Length=function(){return!this.hasAPP1()?null:this.$2};d.getExif=function(){if(!this.$3)throw new Error("Image has no Exif data");return this.$3};d.getXMPString=function(){return this.$4};d.getSize=function(){if(!this.$5)throw new Error("Could not find size data?!");return this.$5};d.getBufferLength=function(){if(!this.$6)throw new Error("Do not find buffer data!");return this.$6.byteLength};c.genMetadataFromBlob=function(a){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.t0=c;d.next=3;return b("regeneratorRuntime").awrap(c.$16(a));case 3:d.t1=d.sent;return d.abrupt("return",new d.t0(d.t1));case 5:case"end":return d.stop()}},null,this)};c.$16=function(c){return new(b("Promise"))(function(b,d){var e=new a.FileReader();e.onabort=d;e.onerror=d;e.onload=b;e.readAsArrayBuffer(c)})};return c}();e.exports=c;var g=[];g[216]={name:"SOI",length:0};g[192]={name:"SOF0"};g[193]={name:"SOF1"};g[194]={name:"SOF2"};g[195]={name:"SOF3"};g[197]={name:"SOF5"};g[198]={name:"SOF6"};g[199]={name:"SOF7"};g[200]={name:"JPG"};g[201]={name:"SOF9"};g[202]={name:"SOF10"};g[203]={name:"SOF11"};g[205]={name:"SOF13"};g[206]={name:"SOF14"};g[207]={name:"SOF15"};g[196]={name:"DHT"};g[219]={name:"DQT"};g[221]={name:"DRI",length:2};g[218]={name:"SOS"};g[208]={name:"RST0",length:0};g[209]={name:"RST1",length:0};g[210]={name:"RST2",length:0};g[211]={name:"RST3",length:0};g[212]={name:"RST4",length:0};g[213]={name:"RST5",length:0};g[214]={name:"RST6",length:0};g[215]={name:"RST7",length:0};g[224]={name:"APP0"};g[225]={name:"APP1"};g[226]={name:"APP2"};g[227]={name:"APP3"};g[228]={name:"APP4"};g[229]={name:"APP5"};g[230]={name:"APP6"};g[231]={name:"APP7"};g[232]={name:"APP8"};g[233]={name:"APP9"};g[234]={name:"APP10"};g[235]={name:"APP11"};g[236]={name:"APP12"};g[237]={name:"APP13"};g[238]={name:"APP14"};g[239]={name:"APP15"};g[254]={name:"COM"};g[217]={name:"EOI",length:0};var h="Exif\0\0",i="http://ns.adobe.com/xap/1.0/\0",j="http://ns.adobe.com/xmp/extension/\0"}),null);
__d("XSphericalPhotoSphereMetadataAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/spherical_media/photo/metadata/",{})}),null);
__d("SphericalImageUtils",["Promise","ImageMetadata","XAsyncRequest","XSphericalPhotoSphereMetadataAsyncController"],(function(a,b,c,d,e,f){"use strict";f.genArrayBufferFromBlob=c;f.shouldCheckInServer=d;f.genPhotosphereMetadata=e;f.genPhotosphereMetadataFromServer=h;f.getExifString=i;f.getMayContainSphericalMetadata=j;var g=2048;function c(c){return new(b("Promise"))(function(b,d){if(a.FileReader){var e=new a.FileReader();e.onabort=d;e.onerror=d;e.onload=function(a){b(a.target.result)};e.readAsArrayBuffer(c)}else d(new Error("global.FileReader doesn't exit"))})}function d(a){if(!a.hasExif()&&!a.hasXMP()||!a.hasSize())return!1;var b=a.getXMPString();if(this.getMayContainSphericalMetadata(b))return!0;var c=a.getSize(),d=c.x;c=c.y;if(Math.max(d,c)<g||d/c<2&&c/d<2)return!1;c=a.hasExif()?a.getExif():{};return b===""&&(!c.Make||!c.Model)?!1:!0}function e(a){var c=this;return new(b("Promise"))(function(d,e){c.genArrayBufferFromBlob(a).done(function(a){try{var f=new(b("ImageMetadata"))(a);c.shouldCheckInServer(f)?c.genPhotosphereMetadataFromServer(f.hasSize()?f.getSize():{x:0,y:0},f.getXMPString(),f.hasExif()?f.getExif():{}).done(function(a){a=a.payload;d({photoSphereMetadata:a,imageMetadata:f})},e):d({})}catch(a){a.__manual=!0,e(a)}},e)})}function h(a,c,d){var e=this;return new(b("Promise"))(function(f,g){new(b("XAsyncRequest"))(b("XSphericalPhotoSphereMetadataAsyncController").getURIBuilder().getURI()).setMethod("POST").setData({exif_string:e.getExifString(d),height:a.y,width:a.x,xmp:c}).setHandler(f).setErrorHandler(g).send()})}function i(a){return JSON.stringify(a,function(a,b){return a==="FocalLength"&&b.numerator&&b.denominator?b.numerator+"/"+b.denominator:b})}function j(a){return a!==""&&a.indexOf("GPano:")>-1}}),null);
__d("SphericalImage",["regeneratorRuntime","SphericalImageUtils"],(function(a,b,c,d,e,f){"use strict";var g="ProjectionType";a=function(){function a(a){this.props=a}a.createFromBlob=function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(b("SphericalImageUtils").genPhotosphereMetadata(a));case 2:c=d.sent;return d.abrupt("return",new this(c));case 4:case"end":return d.stop()}},null,this)};var c=a.prototype;c.isSpherical=function(){return Boolean(this.props.photoSphereMetadata)};c.getImageMetadata=function(){return this.props.imageMetadata};c.getPhotoSphereMetadata=function(){return this.props.photoSphereMetadata};c.getSize=function(){return this.props.imageMetadata?this.props.imageMetadata.getSize():null};c.getBufferLength=function(){return this.props.imageMetadata?this.props.imageMetadata.getBufferLength():null};c.getProjectionType=function(){var a="";this.props.photoSphereMetadata&&this.props.photoSphereMetadata[g]&&(a=this.props.photoSphereMetadata[g]);return a};return a}();e.exports=a}),null);
__d("SphericalPhotoUploadHelper",[],(function(a,b,c,d,e,f){"use strict";f.shouldResize360=a;f.shouldRecompress360=b;function a(a,b,c){return b&&Math.max(b.x,b.y)<=c||a==="cubestrip"?!1:!0}function b(a,b,c){return b==null||b<=c||a==="cubestrip"?!1:!0}}),null);
__d("XComposerPhotoUploader",["regeneratorRuntime","Promise","AsyncUploadRequest","FileInputUploader","PhotosMimeType","PhotosUploadID","ReactComposerMediaFilterUtils","SphericalImage","SphericalPhotoTypedConfig","SphericalPhotoUploadHelper","curry","emptyFunction","performanceNow","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g,h=a.URL||a.webkitURL||{};c=function(){function a(a){this.$20={},this.$2=a.uploadData||{},this.$1=a.uploadEndpoint,this.$3=a.retryLimit,this.$4=a.concurrentLimit,this.$5=a.resizer,this.$6=a.onUploadEnqueued||b("emptyFunction"),this.$7=a.onUploadsEnqueued||b("emptyFunction"),this.$8=a.onResizeStart||b("emptyFunction"),this.$11=a.onResizeProgress||b("emptyFunction"),this.$9=a.onResizeSuccess||b("emptyFunction"),this.$10=a.onResizeFailure||b("emptyFunction"),this.$12=a.onSphericalCheckFailure||b("emptyFunction"),this.$13=a.onSphericalCheckSuccess||b("emptyFunction"),this.$14=a.onUploadIsSpherical||b("emptyFunction"),this.$15=a.onUploadSent||b("emptyFunction"),this.$16=a.onUploadStart||b("emptyFunction"),this.$17=a.onUploadProgress||b("emptyFunction"),this.$18=a.onUploadSuccess||b("emptyFunction"),this.$19=a.onUploadFailure||b("emptyFunction")}var c=a.prototype;c.setUploadEndpoint=function(a){this.$1=a};c.setOption=function(a,b){this.$20[a]=b;return this};c.getUploadData=function(){return this.$2};c.setUploadData=function(a){this.$2=a};c.upload=function(a,c){var d=this;c||0;c=Object.assign({},this.$2);var e=null;if(!this.$21(a)){var f=b("PhotosUploadID").getNewID();a.uploadID=f;c.upload_id=f;this.$6({uploadID:f,fileName:a.value.split("/").pop().split("\\").pop(),fileURL:h.createObjectURL?h.createObjectURL(a):null})}else{e=Array.from(a.files);e=e.filter(function(a){return!b("ReactComposerMediaFilterUtils").hasVideos([a.name])});if(e.length===0)return;e.forEach(function(a){a.uploadID||(a.uploadID=b("PhotosUploadID").getNewID()),d.$6({uploadID:a.uploadID,fileName:a.name,isSpherical:!1,fileURL:h.createObjectURL?h.createObjectURL(a):null})})}this.$7();f=new(b("FileInputUploader"))(a).setURI(this.$1).setData(c).setAllowCrossOrigin(!0).setNetworkErrorRetryLimit(this.$3).setUploadInParallel(!0);e&&e.length>0&&(f.setFiles({farr:e}),this.$5?f.setPreprocessHandler(this.$22.bind(this)):f.setPreprocessHandler(this.$23.bind(this)),this.$4&&f.setConcurrentLimit(this.$4));f.subscribe("progress",function(b,c){return d.$17(d.$24(c,a),c)});f.subscribe("failure",function(b,c){return d.$19(d.$24(c,a),c,e)});f.subscribe("start",function(b,c){return d.$16(d.$24(c,a),c)});f.subscribe("success",function(b,c){return d.$18(d.$24(c,a),c)});try{f.send(),this.$15(a)}catch(a){throw a}};c.uploadFiles=function(a){var c=this;a=Array.from(a);var d=[];a.forEach(function(a){var e=b("PhotosUploadID").getNewID();a.uploadID||(a.uploadID=e);c.$6({fileName:a.name,fileURL:h.createObjectURL?h.createObjectURL(a):null,isSpherical:!1,uploadID:e});d.push(e)});a=this.getAsyncFileUploadRequest(a,d);a.send()};c.getAsyncFileUploadRequest=function(a,b,c){var d=this;c=this.$25(a,c);c.subscribe("start",function(c,e){c=(c=d.$24({upload:e},{}))!=null?c:d.$26(a,b,e);d.$16(c,{upload:e})});c.subscribe("progress",function(c,e){c=(c=d.$24({upload:e},{}))!=null?c:d.$26(a,b,e);d.$17(c,{upload:e,event:e.getProgressEvent()})});c.subscribe("success",function(c,e){c=(c=d.$24({upload:e},{}))!=null?c:d.$26(a,b,e);d.$18(c,{upload:e,response:e.getResponse()})});c.subscribe("failure",function(c,e){c=(c=d.$24({upload:e},{}))!=null?c:d.$26(a,b,e);return d.$19(c,{upload:e,response:e.getResponse()},a)});return c};c.getAsyncUploadRequest=function(a,b){var c=this;b=this.$25(a,b);b.subscribe("start",function(a,b){return c.$16(b.getFile().uploadID,{upload:b})});b.subscribe("progress",function(a,b){return c.$17(b.getFile().uploadID,{upload:b,event:b.getProgressEvent()})});b.subscribe("success",function(a,b){return c.$18(b.getFile().uploadID,{upload:b,response:b.getResponse()})});b.subscribe("failure",function(b,d){return c.$19(d.getFile().uploadID,{upload:d,response:d.getResponse()},a)});return b};c.$25=function(a,c){c=new(b("AsyncUploadRequest"))().setData(Object.assign({},c&&c.data,this.$2)).setFiles({farr:a}).setAllowCrossOrigin(!0).setURI(this.$1);this.$4&&c.setLimit(this.$4);this.$5&&c.setPreprocessHandler(this.$22.bind(this));for(var d in this.$20)c.setOption(d,this.$20[d]);return c};c.$26=function(a,b,c){c=c.getFile();a=a.indexOf(c);return b[a]};c.$24=function(a,b){if(a.upload)return a.upload.getFile().uploadID;else return b.uploadID};c.$23=function(a,c){var d=this;b("promiseDone")(function(){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(d.$27(a,c));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},null,this)}())};c.$27=function(a,c){var d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:d=a.getFile();f.next=3;return b("regeneratorRuntime").awrap(this.$28(d));case 3:e=f.sent,e&&e.isSpherical()?this.$14(d,e.isSpherical(),e.getProjectionType()):this.$14(d,!1,""),c(a);case 6:case"end":return f.stop()}},null,this)};c.$22=function(a,c){var d=this;b("promiseDone")(function(){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(d.$29(a,c));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},null,this)}())};c.$28=function(a){var c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=(g||(g=b("performanceNow")))();e.prev=1;e.next=4;return b("regeneratorRuntime").awrap(b("SphericalImage").createFromBlob(a));case 4:d=e.sent;this.$13(a,(g||(g=b("performanceNow")))()-c,d);return e.abrupt("return",d);case 9:e.prev=9;e.t0=e["catch"](1);this.$12(a,(g||(g=b("performanceNow")))()-c);return e.abrupt("return",null);case 14:case"end":return e.stop()}},null,this,[[1,9]])};c.$30=function(a){return this.$31(this.$5.resizeBlob.bind(this.$5),a)};c.$32=function(a,c){c===void 0&&(c=b("SphericalPhotoTypedConfig").upload_size_limit);return this.$31(this.$5.resize360Blob.bind(this.$5),a,c)};c.$33=function(a){return new(b("Promise"))(function(b,c){var d=new Image();d.onload=function(){b({width:d.width,height:d.height})};d.onerror=function(a){c(a)};d.src=h.createObjectURL(a)})};c.$31=function(a,c,d){var e=this,f=b("curry")(this.$11,c.uploadID),g=b("curry")(this.$8,c),h=function(){return e.$33(c).then(g)};return new(b("Promise"))(function(b,e){h(),a(c,function(a,c,d,f,g,h,i){a?e(a):d?b({originalWidth:f,originalHeight:g}):b({blob:c,originalWidth:f,originalHeight:g,outputWidth:h,outputHeight:i})},f,d)})};c.$29=function(a,c){var d,e,f,h,i,j,k,l,m,n,o,p;return b("regeneratorRuntime").async(function(q){while(1)switch(q.prev=q.next){case 0:d=a.getFile();if(!(!d||!b("PhotosMimeType").isJpeg(d.type))){q.next=6;break}this.$14(d,!1,"");d&&b("promiseDone")(this.$33(d).then(function(b){a.getAdditionalData().set("js_resized",!1).set("original_file_size",d.size).set("original_width",b==null?void 0:b.width).set("original_height",b==null?void 0:b.height).set("upload_width",b==null?void 0:b.width).set("upload_height",b==null?void 0:b.height)},b("emptyFunction")));c(a);return q.abrupt("return");case 6:e=(g||(g=b("performanceNow")))();q.prev=7;i=null;q.next=11;return b("regeneratorRuntime").awrap(this.$28(d));case 11:i=q.sent;if(!(i&&i.isSpherical())){q.next=32;break}this.$14(d,!0,i.getProjectionType());j=i.getSize();k=b("SphericalPhotoTypedConfig").upload_size_limit;l=i.getProjectionType();m=!1;m=b("SphericalPhotoUploadHelper").shouldRecompress360(l,i.getBufferLength(),b("SphericalPhotoTypedConfig").upload_bytes_limit);n=b("SphericalPhotoUploadHelper").shouldResize360(l,j,k);if(!(j&&(n||m))){q.next=30;break}if(n){q.next=27;break}q.next=24;return b("regeneratorRuntime").awrap(this.$32(d,Math.max(j.x,j.y)-1));case 24:f=q.sent;q.next=30;break;case 27:q.next=29;return b("regeneratorRuntime").awrap(this.$32(d));case 29:f=q.sent;case 30:q.next=36;break;case 32:this.$14(d,!1,"");q.next=35;return b("regeneratorRuntime").awrap(this.$30(d));case 35:f=q.sent;case 36:f&&(f.blob!=null&&(h=f.blob,h.uploadID=d.uploadID,h.name=d.name,a.setFile(h)),a.getAdditionalData().set("js_resized",!0).set("original_file_size",d.size).set("original_width",f.originalWidth).set("original_height",f.originalHeight).set("upload_width",f.outputWidth).set("upload_height",f.outputHeight));o=h===null;a.getFile().filename=d.name;this.$9(d,h||d,o,(g||(g=b("performanceNow")))()-e,a.getAdditionalData().get("original_width"),a.getAdditionalData().get("original_height"),a.getAdditionalData().get("upload_width"),a.getAdditionalData().get("upload_height"));q.next=47;break;case 42:q.prev=42,q.t0=q["catch"](7),p=(g||(g=b("performanceNow")))()-e,this.$10(d,h||d,q.t0,p);case 47:c(a);case 48:case"end":return q.stop()}},null,this,[[7,42]])};c.$21=function(a){return!!a.files&&b("AsyncUploadRequest").isSupported()};return a}();e.exports=c}),null);
__d("WebWorker",["invariant","requireCond","BlobFactory","Bootloader","EventListener","SubscriptionsHandler","URI","WebWorkerConfig","XHRRequest","areSameOrigin","cr:951783","emptyFunction","filterObject","getCrossOriginTransport","gkx","memoize","performanceNow","recoverableViolation"],(function(a,b,c,d,e,f,g){var h,i,j=a.URL||a.webkitURL,k={remove:b("emptyFunction")},l=function(){"use strict";function c(a){var c=this;this.$2=!1;this.$3=null;this.$4=a;this.__worker=null;this.$5=b("emptyFunction");this.$6=b("emptyFunction");this.$7=[];this.$8=[];this.$9=!1;this.$10=new(b("SubscriptionsHandler"))();this.$1=b("cr:951783")!==null?b("cr:951783")(function(){c.$9||c.terminate()}):k;b("gkx")("708253")&&setTimeout(function(){!c.$9&&!c.isCurrentState("terminated")&&b("recoverableViolation")("WebWorker (resource: "+a.name+") allowCrossPageTransitions must be true on Comet, or you must handle cleaning up your worker.","comet_infra")},1e3);this.$11("constructed")}var d=c.prototype;d.setMessageHandler=function(a){this.$5=a||b("emptyFunction");return this};d.setErrorHandler=function(a){this.$6=a||b("emptyFunction");return this};d.postMessage=function(a,b){this.isCurrentState("constructed")&&g(0,5977);this.isCurrentState("terminated")&&g(0,5978);if(this.isCurrentState("preparing")){this.$7.push(this.postMessage.bind(this,a,b));return this}a={type:"message",message:a};b?this.getInterfaceableWorker().postMessage(a,b):this.getInterfaceableWorker().postMessage(a);return this};d.$12=function(){this.isCurrentState("terminated")||(this.$11("terminated"),this.__worker=null,this.$13(),this.$7=[],this.$8=[],this.$1&&this.$1.remove&&this.$1.remove())};d.terminate=function(){this.isCurrentState("executing")&&this.__worker!=null&&this.__worker.terminate();this.$12();return this};d.execute=function(){this.isCurrentState("terminated")&&g(0,5979);if(["preparing","executing"].some(this.isCurrentState,this))return this;this.$11("preparing");c.prepareResource(this.$4,this.$14.bind(this));return this};d.setAllowCrossPageTransition=function(a){b("gkx")("708253")&&!a&&b("recoverableViolation")("allowAcrossPageTransitions must be true because we dont kill these in Comet.","comet_infra");this.$9=a;return this};d.isCurrentState=function(a){c.states.includes(a)||g(0,5980,a);return a===this.$3};d.$14=function(){this.isCurrentState("executing")&&g(0,5981);if(this.isCurrentState("terminated"))return;this.$4.sameOriginURL||this.$4.source||g(0,19837,this.$4.name);this.$4.sameOriginURL?this.__worker=this.constructWorker(this.$4.sameOriginURL):(this.__worker=this.constructWorker(c.evalWorkerURL),this.getInterfaceableWorker().postMessage(this.$4.source));this.$15("ping",Date.now());if(this.$4.dynamicModules)try{this.$15("defineModules",this.$4.dynamicModules)}catch(a){this.terminate();this.$16("define_error",{message:a.message});throw a}this.$17();this.$11("executing");this.$7.forEach(function(a){return a()});this.$7=[];this.$8.forEach(function(a){return a()});this.$8=[]};d.$13=function(){this.$10.release()};d.$15=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.getInterfaceableWorker().postMessage({type:a,args:c})};d.$16=function(a,b){c.$16(a,this.$4.name,babelHelpers["extends"]({},b,{cross_page_transition:!!this.$9,state:this.$3}))};c.$18=function(){return Object.keys(b("filterObject")({object_url:c.$19(),eval_url:q(),data_url:c.$20(),worker:c.isSupported(),transferables:c.areTransferablesSupported()},function(a){return!!a}))};d.$17=function(){this.$10.addSubscriptions(b("EventListener").listen(this.getInterfaceableWorker(),"message",this.$21.bind(this)),b("EventListener").listen(this.getInterfaceableWorker(),"error",this.$22.bind(this)))};d.$22=function(a){var b=this.$6(a);!b&&!a.defaultPrevented&&this.$16("exception",{message:a.message})};d.$21=function(b){b=b.data;switch(b.type){case"message":this.$5(b.message);break;case"pong":this.$2=!0;this.$16("executed",{dt:Math.floor(b.args[1]-b.args[0]),bytes:this.$4.source?this.$4.source.length:-1});break;case"terminate":this.terminate();break;case"haste-error":this.terminate();this.$16("haste_error",{message:b.message});break;case"console":var c=b.args.shift();["log","error","info","debug","warn"].includes(c)||g(0,5983,c);a.console[c].apply(a.console,b.args);break}};d.$11=function(a){c.states.includes(a)||g(0,5984,a),this.$16("transition",{next_state:a}),this.$3=a};c.prepareResource=function(d,e){e===void 0&&(e=b("emptyFunction"));d.sameOriginURL||d.url||d.source||g(0,5985);!c.isSupported()&&g(0,5986);if(d.sameOriginURL)e();else if(d.url&&b("areSameOrigin")(new(h||(h=b("URI")))(d.url),new(h||(h=b("URI")))(a.location.href)))d.sameOriginURL=d.url,e();else if(d.source)c.$23()&&(d.sameOriginURL=c.$24(d.source)),e();else if(!d.loading){var f=(i||(i=b("performanceNow")))();d.loading=[e];c.$25(d.url,function(a){a?(d.source=a,c.$23()&&(d.sameOriginURL=c.$24(a)),c.$16("prepared",d.name,{dt:Math.floor((i||(i=b("performanceNow")))()-f),bytes:a.length})):c.$16("failed",d.name,{dt:Math.floor((i||(i=b("performanceNow")))()-f),bytes:0}),d.loading.forEach(function(a){return a()}),d.loading=!1})}else d.loading.push(e);return d};c.releaseResource=function(a){a.sameOriginURL.indexOf("blob:")===0&&(j.revokeObjectURL&&j.revokeObjectURL(a.sameOriginURL),a.sameOriginURL=null);return a};c.isSupported=function(){return p&&(c.$23()||q())};c.isMessageChannelSupported=function(){return c.areTransferablesSupported()&&!!a.MessageChannel};c.areTransferablesSupported=function(){return c.isSupported()&&r()};c.$25=function(a,c){new(b("XHRRequest"))(a).setTransportBuilder(b("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(a){c(a)}).setErrorHandler(c.bind(null,null)).send()};c.$24=function(a){c.$23()||g(0,5987);if(c.$19()){var d=b("BlobFactory").getBlob([a],{type:"application/javascript"});return j.createObjectURL(d)}if(c.$20())return"data:application/javascript,"+encodeURIComponent(a)};c.$19=function(){return b("BlobFactory").isSupported()&&n()};c.$20=function(){return o()};c.$23=function(){return c.$19()||c.$20()};c.$16=function(a,d,e){if(!b("WebWorkerConfig").logging.enabled)return;b("Bootloader").loadModules(["BanzaiLogger"],function(f){f.log(b("WebWorkerConfig").logging.config,babelHelpers["extends"]({},e,{features_array:c.$18(),event:a,resource:d}))},"WebWorker")};d.constructWorker=function(a){return m(a)};d.$26=function(a,b){if(this.isCurrentState("preparing")){this.$8.push(this.$26.bind(this,a,b));return}this.getInterfaceableWorker().postMessage({type:"port",message:a},b)};d.createMessageChannel=function(a,b){var c=new MessageChannel();this.$26(a,[c.port2].concat(b||[]));c.port1.start();return c.port1};d.getInterfaceableWorker=function(){return this.__worker};return c}();l.states=["constructed","preparing","executing","terminated"];l.evalWorkerURL=b("WebWorkerConfig").evalWorkerURL;function m(b){return new a.Worker(b)}var n=b("memoize")(function(){var a;if(!j||!j.createObjectURL)return!1;try{a=j.createObjectURL(b("BlobFactory").getBlob([""],{type:"application/javascript"}));var c=m(a);c.terminate();c=!0}catch(a){c=!1}finally{j.revokeObjectURL&&j.revokeObjectURL(a)}return c}),o=b("memoize")(function(){try{var a=m("data:application/javascript,");a.terminate();a=!0}catch(b){a=!1}return a}),p=!!a.Worker,q=b("memoize")(function(){try{var a=m(l.evalWorkerURL);a.terminate();a=!0}catch(b){a=!1}return a}),r=b("memoize")(function(){try{var a=m(l.evalWorkerURL),b=new ArrayBuffer(0);a.postMessage({buffer:b},[b]);a.terminate();b=!0}catch(a){b=!1}return b});e.exports=l}),null);
__d("getOpacityStyleName",[],(function(a,b,c,d,e,f){e.exports=a;var g=!1,h=null;function a(){if(!g){if(document.body&&"opacity"in document.body.style)h="opacity";else{var a=document.createElement("div");a.style.filter="alpha(opacity=100)";a.style.filter&&(h="filter")}g=!0}return h}}),null);
__d("StyleCore",["invariant","camelize","containsNode","ex","getOpacityStyleName","getStyleProperty","hyphenate"],(function(a,b,c,d,e,f,g){function h(a,b){a=n.get(a,b);return a==="auto"||a==="scroll"}var i=new RegExp("\\s*([^\\s:]+)\\s*:\\s*([^;('\"]*(?:(?:\\([^)]*\\)|\"[^\"]*\"|'[^']*')[^;(?:'\"]*)*)(?:;|$)","g");function j(a){var b={};a.replace(i,function(a,c,d){b[c]=d;return d});return b}function k(a){var b="";for(var c in a)a[c]&&(b+=c+":"+a[c]+";");return b}function l(a){return a!==""?"alpha(opacity="+a*100+")":""}function m(a,c,d){switch(b("hyphenate")(c)){case"font-weight":case"line-height":case"opacity":case"z-index":case"animation-iteration-count":case"-webkit-animation-iteration-count":break;case"width":case"height":var e=parseInt(d,10)<0;e&&g(0,826,a,c,d);default:isNaN(d)||!d||d==="0"||g(0,827,a,c,d,d+"px");break}}var n={set:function(a,c,d){m("Style.set",c,d);if(a==null)return;a=a.style;switch(c){case"opacity":b("getOpacityStyleName")()==="filter"?a.filter=l(d):a.opacity=d;break;case"float":a.cssFloat=a.styleFloat=d||"";break;default:try{a[b("camelize")(c)]=d}catch(a){throw new Error(b("ex")('Style.set: "%s" argument is invalid: %s',c,d))}}},apply:function(a,c){var d;for(d in c)m("Style.apply",d,c[d]);"opacity"in c&&b("getOpacityStyleName")()==="filter"&&(c.filter=l(c.opacity),delete c.opacity);var e=j(a.style.cssText);for(d in c){var f=c[d];delete c[d];var g=b("hyphenate")(d);for(var h in e)(h===g||h.indexOf(g+"-")===0)&&delete e[h];c[g]=f}Object.assign(e,c);a.style.cssText=k(e)},get:b("getStyleProperty"),getFloat:function(a,b){return parseFloat(n.get(a,b),10)},getOpacity:function(a){if(b("getOpacityStyleName")()==="filter"){var c=n.get(a,"filter");if(c){c=/(\d+(?:\.\d+)?)/.exec(c);if(c)return parseFloat(c.pop())/100}}return n.getFloat(a,"opacity")||1},isFixed:function(a){while(b("containsNode")(document.body,a)){if(n.get(a,"position")==="fixed")return!0;a=a.parentNode}return!1},getScrollParent:function(a){if(!a)return null;while(a&&a!==document.body){if(h(a,"overflow")||h(a,"overflowY")||h(a,"overflowX"))return a;a=a.parentNode}return window}};a=n;e.exports=a}),null);
__d("Style",["StyleCore","$"],(function(a,b,c,d,e,f){a=babelHelpers["extends"]({},b("StyleCore"),{get:function(a,c){typeof a==="string"&&(a=b("$")(a));return b("StyleCore").get(a,c)},getFloat:function(a,c){typeof a==="string"&&(a=b("$")(a));return b("StyleCore").getFloat(a,c)}});c=a;e.exports=c}),null);
__d("installUFI2ComposerInputDecorators",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return babelHelpers["extends"]({},a,{inputDecorators:[].concat(a.inputDecorators,c)})}}),null);
__d("getActiveElement",[],(function(a,b,c,d,e,f){e.exports=a;function a(a){a===void 0&&(a=document);if(a===void 0)return null;try{return a.activeElement||a.body}catch(b){return a.body}}}),null);
__d("getUnboundedScrollPosition",["Scroll"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a===window){var c;return{x:(c=window.pageXOffset)!=null?c:b("Scroll").getLeft(document.documentElement),y:(c=window.pageYOffset)!=null?c:b("Scroll").getTop(document.documentElement)}}return{x:b("Scroll").getLeft(a),y:b("Scroll").getTop(a)}}e.exports=a}),null);
__d("EmojiSpan.react",["cx","FBEmojiResource","React","UnicodeUtils"],(function(a,b,c,d,e,f,g){e.exports=a;var h,i=b("React");function a(a){var c=a.children;a.contentState;var d=a.decoratedText,e=a.dir,f=a.offsetKey;a=a.size;var g=0,j=d.length,k=[];while(g<j){var l=(h||(h=b("UnicodeUtils"))).getUTF16Length(d,g);k.push(d.substr(g,l));g+=l}l=b("FBEmojiResource").fromCodepoints(k);g=l!=null?l.getImageURL(a):null;return g!=null?i.jsx("span",{className:"_3gl1 _5zz4","data-offset-key":f,dir:e,style:{backgroundImage:"url("+g+")",backgroundSize:a+"px "+a+"px",height:a,width:a},children:i.jsx("span",{className:"_ncl",children:c})}):i.jsx("span",{"data-offset-key":f,children:d})}}),null);
__d("getEntityMatcher",[],(function(a,b,c,d,e,f){e.exports=a;function g(a,b){return b.getEntity(a)}function a(a,b){return function(c,d,e){var f=b||g;c.findEntityRanges(function(b){b=b.getEntity();return typeof b==="string"&&a(f(b,e))},d)}}}),null);
__d("DocumentMentionsRegex",[],(function(a,b,c,d,e,f){"use strict";a="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;";b="\\b[A-Z][^\\s"+a+"]";c={PUNCTUATION:a,NAME:b};d=c;e.exports=d}),null);
__d("createMentionEntityForContentState",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){var c=b.getType().toLowerCase();if(c==="hashtag")return a.createEntity("HASHTAG","IMMUTABLE");var d=c==="user"||c==="fb4c"?"SEGMENTED":"IMMUTABLE",e=b.getAuxiliaryData();return a.createEntity("MENTION",d,{id:b.getUniqueID(),uri:b.getURI(),isWeak:e&&e.renderType==="non_member",type:c})}}),null);
__d("immutable",[],(function(a,b,c,d,e,f){(function(b,c){typeof f==="object"&&typeof e!=="undefined"?e.exports=c():typeof define==="function"&&define.amd?define(c):b.Immutable=c()})(this,function(){"use strict";var a=Array.prototype.slice;function b(a,b){b&&(a.prototype=Object.create(b.prototype)),a.prototype.constructor=a}var c="delete",d=5,e=1<<d,f=e-1,g={},h={value:!1},i={value:!1};function j(a){a.value=!1;return a}function k(a){a&&(a.value=!0)}function l(){}function m(a,b){b=b||0;var c=Math.max(0,a.length-b),d=new Array(c);for(var e=0;e<c;e++)d[e]=a[e+b];return d}function n(a){a.size===void 0&&(a.size=a.__iterate(p));return a.size}function o(a,b){return b>=0?+b:n(a)+ +b}function p(){return!0}function q(a,b,c){return(a===0||c!==void 0&&a<=-c)&&(b===void 0||c!==void 0&&b>=c)}function r(a,b){return aa(a,b,0)}function s(a,b){return aa(a,b,b)}function aa(a,b,c){return a===void 0?c:a<0?Math.max(0,b+a):b===void 0?a:Math.min(b,a)}function t(a){return x(a)?a:F(a)}b(u,t);function u(a){return y(a)?a:G(a)}b(v,t);function v(a){return z(a)?a:H(a)}b(w,t);function w(a){return x(a)&&!ba(a)?a:I(a)}function x(a){return!!(a&&a[da])}function y(a){return!!(a&&a[ea])}function z(a){return!!(a&&a[fa])}function ba(a){return y(a)||z(a)}function ca(a){return!!(a&&a[ga])}t.isIterable=x;t.isKeyed=y;t.isIndexed=z;t.isAssociative=ba;t.isOrdered=ca;t.Keyed=u;t.Indexed=v;t.Set=w;var da="@@__IMMUTABLE_ITERABLE__@@",ea="@@__IMMUTABLE_KEYED__@@",fa="@@__IMMUTABLE_INDEXED__@@",ga="@@__IMMUTABLE_ORDERED__@@",ha=0,A=1,B=2,ia=typeof Symbol==="function"&&Symbol.iterator,ja="@@iterator",ka=ia||ja;function C(a){this.next=a}C.prototype.toString=function(){return"[Iterator]"};C.KEYS=ha;C.VALUES=A;C.ENTRIES=B;C.prototype.inspect=C.prototype.toSource=function(){return this.toString()};C.prototype[ka]=function(){return this};function D(a,b,c,d){a=a===0?b:a===1?c:[b,c];d?d.value=a:d={value:a,done:!1};return d}function E(){return{value:void 0,done:!0}}function la(a){return!!oa(a)}function ma(a){return a&&typeof a.next==="function"}function na(a){var b=oa(a);return b&&b.call(a)}function oa(a){a=a&&(ia&&a[ia]||a[ja]);if(typeof a==="function")return a}function pa(a){return a&&typeof a.length==="number"}b(F,t);function F(a){return a===null||a===void 0?xa():x(a)?a.toSeq():Aa(a)}F.of=function(){return F(arguments)};F.prototype.toSeq=function(){return this};F.prototype.toString=function(){return this.__toString("Seq {","}")};F.prototype.cacheResult=function(){!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length);return this};F.prototype.__iterate=function(a,b){return Ca(this,a,b,!0)};F.prototype.__iterator=function(a,b){return Da(this,a,b,!0)};b(G,F);function G(a){return a===null||a===void 0?xa().toKeyedSeq():x(a)?y(a)?a.toSeq():a.fromEntrySeq():ya(a)}G.prototype.toKeyedSeq=function(){return this};b(H,F);function H(a){return a===null||a===void 0?xa():x(a)?y(a)?a.entrySeq():a.toIndexedSeq():za(a)}H.of=function(){return H(arguments)};H.prototype.toIndexedSeq=function(){return this};H.prototype.toString=function(){return this.__toString("Seq [","]")};H.prototype.__iterate=function(a,b){return Ca(this,a,b,!1)};H.prototype.__iterator=function(a,b){return Da(this,a,b,!1)};b(I,F);function I(a){return(a===null||a===void 0?xa():x(a)?y(a)?a.entrySeq():a:za(a)).toSetSeq()}I.of=function(){return I(arguments)};I.prototype.toSetSeq=function(){return this};F.isSeq=va;F.Keyed=G;F.Set=I;F.Indexed=H;var qa="@@__IMMUTABLE_SEQ__@@";F.prototype[qa]=!0;b(ra,H);function ra(a){this._array=a,this.size=a.length}ra.prototype.get=function(a,b){return this.has(a)?this._array[o(this,a)]:b};ra.prototype.__iterate=function(a,b){var c=this._array,d=c.length-1;for(var e=0;e<=d;e++)if(a(c[b?d-e:e],e,this)===!1)return e+1;return e};ra.prototype.__iterator=function(a,b){var c=this._array,d=c.length-1,e=0;return new C(function(){return e>d?E():D(a,e,c[b?d-e++:e++])})};b(sa,G);function sa(a){var b=Object.keys(a);this._object=a;this._keys=b;this.size=b.length}sa.prototype.get=function(a,b){return b!==void 0&&!this.has(a)?b:this._object[a]};sa.prototype.has=function(a){return this._object.hasOwnProperty(a)};sa.prototype.__iterate=function(a,b){var c=this._object,d=this._keys,e=d.length-1;for(var f=0;f<=e;f++){var g=d[b?e-f:f];if(a(c[g],g,this)===!1)return f+1}return f};sa.prototype.__iterator=function(a,b){var c=this._object,d=this._keys,e=d.length-1,f=0;return new C(function(){var g=d[b?e-f:f];return f++>e?E():D(a,g,c[g])})};sa.prototype[ga]=!0;b(ta,H);function ta(a){this._iterable=a,this.size=a.length||a.size}ta.prototype.__iterateUncached=function(a,b){if(b)return this.cacheResult().__iterate(a,b);b=this._iterable;b=na(b);var c=0;if(ma(b)){var d;while(!(d=b.next()).done)if(a(d.value,c++,this)===!1)break}return c};ta.prototype.__iteratorUncached=function(a,b){if(b)return this.cacheResult().__iterator(a,b);b=this._iterable;var c=na(b);if(!ma(c))return new C(E);var d=0;return new C(function(){var b=c.next();return b.done?b:D(a,d++,b.value)})};b(ua,H);function ua(a){this._iterator=a,this._iteratorCache=[]}ua.prototype.__iterateUncached=function(a,b){if(b)return this.cacheResult().__iterate(a,b);b=this._iterator;var c=this._iteratorCache,d=0;while(d<c.length)if(a(c[d],d++,this)===!1)return d;var e;while(!(e=b.next()).done){e=e.value;c[d]=e;if(a(e,d++,this)===!1)break}return d};ua.prototype.__iteratorUncached=function(a,b){if(b)return this.cacheResult().__iterator(a,b);var c=this._iterator,d=this._iteratorCache,e=0;return new C(function(){if(e>=d.length){var b=c.next();if(b.done)return b;d[e]=b.value}return D(a,e,d[e++])})};function va(a){return!!(a&&a[qa])}var wa;function xa(){return wa||(wa=new ra([]))}function ya(a){var b=Array.isArray(a)?new ra(a).fromEntrySeq():ma(a)?new ua(a).fromEntrySeq():la(a)?new ta(a).fromEntrySeq():typeof a==="object"?new sa(a):void 0;if(!b)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+a);return b}function za(a){var b=Ba(a);if(!b)throw new TypeError("Expected Array or iterable object of values: "+a);return b}function Aa(a){var b=Ba(a)||typeof a==="object"&&new sa(a);if(!b)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+a);return b}function Ba(a){return pa(a)?new ra(a):ma(a)?new ua(a):la(a)?new ta(a):void 0}function Ca(a,b,c,d){var e=a._cache;if(e){var f=e.length-1;for(var g=0;g<=f;g++){var h=e[c?f-g:g];if(b(h[1],d?h[0]:g,a)===!1)return g+1}return g}return a.__iterateUncached(b,c)}function Da(a,b,c,d){var e=a._cache;if(e){var f=e.length-1,g=0;return new C(function(){var a=e[c?f-g:g];return g++>f?E():D(b,d?a[0]:g-1,a[1])})}return a.__iteratorUncached(b,c)}b(Ea,t);function Ea(){throw TypeError("Abstract")}b(Fa,Ea);function Fa(){}b(Ga,Ea);function Ga(){}b(Ha,Ea);function Ha(){}Ea.Keyed=Fa;Ea.Indexed=Ga;Ea.Set=Ha;function J(a,b){if(a===b||a!==a&&b!==b)return!0;if(!a||!b)return!1;if(typeof a.valueOf==="function"&&typeof b.valueOf==="function"){a=a.valueOf();b=b.valueOf();if(a===b||a!==a&&b!==b)return!0;if(!a||!b)return!1}return typeof a.equals==="function"&&typeof b.equals==="function"&&a.equals(b)?!0:!1}function Ia(a,b){return b?Ja(b,a,"",{"":a}):Ka(a)}function Ja(a,b,c,d){if(Array.isArray(b))return a.call(d,c,H(b).map(function(c,d){return Ja(a,c,d,b)}));return La(b)?a.call(d,c,G(b).map(function(c,d){return Ja(a,c,d,b)})):b}function Ka(a){if(Array.isArray(a))return H(a).map(Ka).toList();return La(a)?G(a).map(Ka).toMap():a}function La(a){return a&&(a.constructor===Object||a.constructor===void 0)}var Ma=typeof Math.imul==="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(a,b){a=a|0;b=b|0;var c=a&65535,d=b&65535;return c*d+((a>>>16)*d+c*(b>>>16)<<16>>>0)|0};function Na(a){return a>>>1&1073741824|a&3221225471}function K(a){if(a===!1||a===null||a===void 0)return 0;if(typeof a.valueOf==="function"){a=a.valueOf();if(a===!1||a===null||a===void 0)return 0}if(a===!0)return 1;var b=typeof a;if(b==="number"){var c=a|0;c!==a&&(c^=a*4294967295);while(a>4294967295)a/=4294967295,c^=a;return Na(c)}if(b==="string")return a.length>Ya?Oa(a):Pa(a);return typeof a.hashCode==="function"?a.hashCode():Qa(a)}function Oa(b){var a=ab[b];a===void 0&&(a=Pa(b),$a===Za&&($a=0,ab={}),$a++,ab[b]=a);return a}function Pa(b){var a=0;for(var c=0;c<b.length;c++)a=31*a+b.charCodeAt(c)|0;return Na(a)}function Qa(b){var a;if(Ua){a=Va.get(b);if(a!==void 0)return a}a=b[Xa];if(a!==void 0)return a;if(!Sa){a=b.propertyIsEnumerable&&b.propertyIsEnumerable[Xa];if(a!==void 0)return a;a=Ta(b);if(a!==void 0)return a}a=++Wa;Wa&1073741824&&(Wa=0);if(Ua)Va.set(b,a);else if(Ra!==void 0&&Ra(b)===!1)throw new Error("Non-extensible objects are not allowed as keys.");else if(Sa)Object.defineProperty(b,Xa,{enumerable:!1,configurable:!1,writable:!1,value:a});else if(b.propertyIsEnumerable!==void 0&&b.propertyIsEnumerable===b.constructor.prototype.propertyIsEnumerable)b.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},b.propertyIsEnumerable[Xa]=a;else if(b.nodeType!==void 0)b[Xa]=a;else throw new Error("Unable to set a non-enumerable property on object.");return a}var Ra=Object.isExtensible,Sa=function(){try{Object.defineProperty({},"@",{});return!0}catch(a){return!1}}();function Ta(a){if(a&&a.nodeType>0)switch(a.nodeType){case 1:return a.uniqueID;case 9:return a.documentElement&&a.documentElement.uniqueID}}var Ua=typeof WeakMap==="function",Va;Ua&&(Va=new WeakMap());var Wa=0,Xa="__immutablehash__";typeof Symbol==="function"&&(Xa=Symbol(Xa));var Ya=16,Za=255,$a=0,ab={};function bb(a,b){if(!a)throw new Error(b)}function L(a){bb(a!==Infinity,"Cannot perform this action with an infinite size.")}b(M,G);function M(a,b){this._iter=a,this._useKeys=b,this.size=a.size}M.prototype.get=function(a,b){return this._iter.get(a,b)};M.prototype.has=function(a){return this._iter.has(a)};M.prototype.valueSeq=function(){return this._iter.valueSeq()};M.prototype.reverse=function(){var a=this,b=hb(this,!0);this._useKeys||(b.valueSeq=function(){return a._iter.toSeq().reverse()});return b};M.prototype.map=function(a,b){var c=this,d=gb(this,a,b);this._useKeys||(d.valueSeq=function(){return c._iter.toSeq().map(a,b)});return d};M.prototype.__iterate=function(a,b){var c=this,d;return this._iter.__iterate(this._useKeys?function(b,d){return a(b,d,c)}:(d=b?xb(this):0,function(e){return a(e,b?--d:d++,c)}),b)};M.prototype.__iterator=function(a,b){if(this._useKeys)return this._iter.__iterator(a,b);var c=this._iter.__iterator(A,b),d=b?xb(this):0;return new C(function(){var e=c.next();return e.done?e:D(a,b?--d:d++,e.value,e)})};M.prototype[ga]=!0;b(cb,H);function cb(a){this._iter=a,this.size=a.size}cb.prototype.includes=function(a){return this._iter.includes(a)};cb.prototype.__iterate=function(a,b){var c=this,d=0;return this._iter.__iterate(function(b){return a(b,d++,c)},b)};cb.prototype.__iterator=function(a,b){var c=this._iter.__iterator(A,b),d=0;return new C(function(){var b=c.next();return b.done?b:D(a,d++,b.value,b)})};b(db,I);function db(a){this._iter=a,this.size=a.size}db.prototype.has=function(a){return this._iter.includes(a)};db.prototype.__iterate=function(a,b){var c=this;return this._iter.__iterate(function(b){return a(b,b,c)},b)};db.prototype.__iterator=function(a,b){var c=this._iter.__iterator(A,b);return new C(function(){var b=c.next();return b.done?b:D(a,b.value,b.value,b)})};b(eb,G);function eb(a){this._iter=a,this.size=a.size}eb.prototype.entrySeq=function(){return this._iter.toSeq()};eb.prototype.__iterate=function(a,b){var c=this;return this._iter.__iterate(function(b){if(b){wb(b);var d=x(b);return a(d?b.get(1):b[1],d?b.get(0):b[0],c)}},b)};eb.prototype.__iterator=function(a,b){var c=this._iter.__iterator(A,b);return new C(function(){while(!0){var b=c.next();if(b.done)return b;var d=b.value;if(d){wb(d);var e=x(d);return D(a,e?d.get(0):d[0],e?d.get(1):d[1],b)}}})};cb.prototype.cacheResult=M.prototype.cacheResult=db.prototype.cacheResult=eb.prototype.cacheResult=Ab;function fb(a){var b=zb(a);b._iter=a;b.size=a.size;b.flip=function(){return a};b.reverse=function(){var b=a.reverse.apply(this);b.flip=function(){return a.reverse()};return b};b.has=function(b){return a.includes(b)};b.includes=function(b){return a.has(b)};b.cacheResult=Ab;b.__iterateUncached=function(b,c){var d=this;return a.__iterate(function(a,c){return b(c,a,d)!==!1},c)};b.__iteratorUncached=function(b,c){if(b===B){var d=a.__iterator(b,c);return new C(function(){var a=d.next();if(!a.done){var b=a.value[0];a.value[0]=a.value[1];a.value[1]=b}return a})}return a.__iterator(b===A?ha:A,c)};return b}function gb(a,b,c){var d=zb(a);d.size=a.size;d.has=function(b){return a.has(b)};d.get=function(d,e){var f=a.get(d,g);return f===g?e:b.call(c,f,d,a)};d.__iterateUncached=function(d,e){var f=this;return a.__iterate(function(a,e,g){return d(b.call(c,a,e,g),e,f)!==!1},e)};d.__iteratorUncached=function(d,e){var f=a.__iterator(B,e);return new C(function(){var e=f.next();if(e.done)return e;var g=e.value,h=g[0];return D(d,h,b.call(c,g[1],h,a),e)})};return d}function hb(a,b){var c=zb(a);c._iter=a;c.size=a.size;c.reverse=function(){return a};a.flip&&(c.flip=function(){var b=fb(a);b.reverse=function(){return a.flip()};return b});c.get=function(c,d){return a.get(b?c:-1-c,d)};c.has=function(c){return a.has(b?c:-1-c)};c.includes=function(b){return a.includes(b)};c.cacheResult=Ab;c.__iterate=function(b,c){var d=this;return a.__iterate(function(a,c){return b(a,c,d)},!c)};c.__iterator=function(b,c){return a.__iterator(b,!c)};return c}function ib(a,b,c,d){var e=zb(a);d&&(e.has=function(d){var e=a.get(d,g);return e!==g&&!!b.call(c,e,d,a)},e.get=function(d,e){var f=a.get(d,g);return f!==g&&b.call(c,f,d,a)?f:e});e.__iterateUncached=function(e,f){var g=this,h=0;a.__iterate(function(a,f,i){if(b.call(c,a,f,i)){h++;return e(a,d?f:h-1,g)}},f);return h};e.__iteratorUncached=function(e,f){var g=a.__iterator(B,f),h=0;return new C(function(){while(!0){var f=g.next();if(f.done)return f;var i=f.value,j=i[0];i=i[1];if(b.call(c,i,j,a))return D(e,d?j:h++,i,f)}})};return e}function jb(a,b,c){var d=O().asMutable();a.__iterate(function(e,f){d.update(b.call(c,e,f,a),0,function(a){return a+1})});return d.asImmutable()}function kb(a,b,c){var d=y(a),e=(ca(a)?S():O()).asMutable();a.__iterate(function(f,g){e.update(b.call(c,f,g,a),function(a){return a=a||[],a.push(d?[g,f]:f),a})});var f=yb(a);return e.map(function(b){return N(a,f(b))})}function lb(a,b,c,d){var e=a.size;if(q(b,c,e))return a;var f=r(b,e);e=s(c,e);if(f!==f||e!==e)return lb(a.toSeq().cacheResult(),b,c,d);b=e-f;var g;b===b&&(g=b<0?0:b);c=zb(a);c.size=g;!d&&va(a)&&g>=0&&(c.get=function(b,c){b=o(this,b);return b>=0&&b<g?a.get(b+f,c):c});c.__iterateUncached=function(b,c){var e=this;if(g===0)return 0;if(c)return this.cacheResult().__iterate(b,c);var h=0,i=!0,j=0;a.__iterate(function(a,c){if(!(i&&(i=h++<f))){j++;return b(a,d?c:j-1,e)!==!1&&j!==g}});return j};c.__iteratorUncached=function(b,c){if(g!==0&&c)return this.cacheResult().__iterator(b,c);var e=g!==0&&a.__iterator(b,c),h=0,i=0;return new C(function(){while(h++<f)e.next();if(++i>g)return E();var a=e.next();if(d||b===A)return a;else if(b===ha)return D(b,i-1,void 0,a);else return D(b,i-1,a.value[1],a)})};return c}function mb(a,b,c){var d=zb(a);d.__iterateUncached=function(d,e){var f=this;if(e)return this.cacheResult().__iterate(d,e);var g=0;a.__iterate(function(a,e,h){return b.call(c,a,e,h)&&++g&&d(a,e,f)});return g};d.__iteratorUncached=function(d,e){var f=this;if(e)return this.cacheResult().__iterator(d,e);var g=a.__iterator(B,e),h=!0;return new C(function(){if(!h)return E();var a=g.next();if(a.done)return a;var e=a.value,i=e[0];e=e[1];if(!b.call(c,e,i,f)){h=!1;return E()}return d===B?a:D(d,i,e,a)})};return d}function nb(a,b,c,d){var e=zb(a);e.__iterateUncached=function(e,f){var g=this;if(f)return this.cacheResult().__iterate(e,f);var h=!0,i=0;a.__iterate(function(a,f,j){if(!(h&&(h=b.call(c,a,f,j)))){i++;return e(a,d?f:i-1,g)}});return i};e.__iteratorUncached=function(e,f){var g=this;if(f)return this.cacheResult().__iterator(e,f);var h=a.__iterator(B,f),i=!0,j=0;return new C(function(){var a,f;do{a=h.next();if(a.done)if(d||e===A)return a;else if(e===ha)return D(e,j++,void 0,a);else return D(e,j++,a.value[1],a);var k=a.value;f=k[0];k=k[1];i&&(i=b.call(c,k,f,g))}while(i);return e===B?a:D(e,f,k,a)})};return e}function ob(a,b){var c=y(a);b=[a].concat(b).map(function(a){!x(a)?a=c?ya(a):za(Array.isArray(a)?a:[a]):c&&(a=u(a));return a}).filter(function(a){return a.size!==0});if(b.length===0)return a;if(b.length===1){var d=b[0];if(d===a||c&&y(d)||z(a)&&z(d))return d}d=new ra(b);c?d=d.toKeyedSeq():z(a)||(d=d.toSetSeq());d=d.flatten(!0);d.size=b.reduce(function(a,b){if(a!==void 0){b=b.size;if(b!==void 0)return a+b}},0);return d}function pb(a,b,c){var d=zb(a);d.__iterateUncached=function(d,e){var f=0,g=!1;function h(a,i){var j=this;a.__iterate(function(a,e){(!b||i<b)&&x(a)?h(a,i+1):d(a,c?e:f++,j)===!1&&(g=!0);return!g},e)}h(a,0);return f};d.__iteratorUncached=function(d,e){var f=a.__iterator(d,e),g=[],h=0;return new C(function(){while(f){var a=f.next();if(a.done!==!1){f=g.pop();continue}var i=a.value;d===B&&(i=i[1]);if((!b||g.length<b)&&x(i))g.push(f),f=i.__iterator(d,e);else return c?a:D(d,h++,i,a)}return E()})};return d}function qb(a,b,c){var d=yb(a);return a.toSeq().map(function(e,f){return d(b.call(c,e,f,a))}).flatten(!0)}function rb(a,b){var c=zb(a);c.size=a.size&&a.size*2-1;c.__iterateUncached=function(c,d){var e=this,f=0;a.__iterate(function(a,d){return(!f||c(b,f++,e)!==!1)&&c(a,f++,e)!==!1},d);return f};c.__iteratorUncached=function(c,d){var e=a.__iterator(A,d),f=0,g;return new C(function(){if(!g||f%2){g=e.next();if(g.done)return g}return f%2?D(c,f++,b):D(c,f++,g.value,g)})};return c}function sb(a,b,c){b||(b=Bb);var d=y(a),e=0,f=a.toSeq().map(function(b,d){return[d,b,e++,c?c(b,d,a):b]}).toArray();f.sort(function(a,c){return b(a[3],c[3])||a[2]-c[2]}).forEach(d?function(a,b){f[b].length=2}:function(a,b){f[b]=a[1]});return d?G(f):z(a)?H(f):I(f)}function tb(a,b,c){b||(b=Bb);if(c){var d=a.toSeq().map(function(b,d){return[b,c(b,d,a)]}).reduce(function(a,c){return ub(b,a[1],c[1])?c:a});return d&&d[0]}else return a.reduce(function(a,c){return ub(b,a,c)?c:a})}function ub(a,b,c){a=a(c,b);return a===0&&c!==b&&(c===void 0||c===null||c!==c)||a>0}function vb(a,b,c){a=zb(a);a.size=new ra(c).map(function(a){return a.size}).min();a.__iterate=function(a,b){b=this.__iterator(A,b);var c,d=0;while(!(c=b.next()).done)if(a(c.value,d++,this)===!1)break;return d};a.__iteratorUncached=function(a,d){var e=c.map(function(a){return a=t(a),na(d?a.reverse():a)}),f=0,g=!1;return new C(function(){var c;g||(c=e.map(function(a){return a.next()}),g=c.some(function(a){return a.done}));return g?E():D(a,f++,b.apply(null,c.map(function(a){return a.value})))})};return a}function N(a,b){return va(a)?b:a.constructor(b)}function wb(a){if(a!==Object(a))throw new TypeError("Expected [K, V] tuple: "+a)}function xb(a){L(a.size);return n(a)}function yb(a){return y(a)?u:z(a)?v:w}function zb(a){return Object.create((y(a)?G:z(a)?H:I).prototype)}function Ab(){if(this._iter.cacheResult){this._iter.cacheResult();this.size=this._iter.size;return this}else return F.prototype.cacheResult.call(this)}function Bb(a,b){return a>b?1:a<b?-1:0}function Cb(a){var b=na(a);if(!b){if(!pa(a))throw new TypeError("Expected iterable or array-like: "+a);b=na(t(a))}return b}b(O,Fa);function O(a){return a===null||a===void 0?Pb():Db(a)?a:Pb().withMutations(function(b){var c=u(a);L(c.size);c.forEach(function(a,c){return b.set(c,a)})})}O.prototype.toString=function(){return this.__toString("Map {","}")};O.prototype.get=function(a,b){return this._root?this._root.get(0,void 0,a,b):b};O.prototype.set=function(a,b){return Qb(this,a,b)};O.prototype.setIn=function(a,b){return this.updateIn(a,g,function(){return b})};O.prototype.remove=function(a){return Qb(this,a,g)};O.prototype.deleteIn=function(a){return this.updateIn(a,function(){return g})};O.prototype.update=function(a,b,c){return arguments.length===1?a(this):this.updateIn([a],b,c)};O.prototype.updateIn=function(a,b,c){c||(c=b,b=void 0);a=$b(this,Cb(a),b,c);return a===g?void 0:a};O.prototype.clear=function(){if(this.size===0)return this;if(this.__ownerID){this.size=0;this._root=null;this.__hash=void 0;this.__altered=!0;return this}return Pb()};O.prototype.merge=function(){return Xb(this,void 0,arguments)};O.prototype.mergeWith=function(b){var c=a.call(arguments,1);return Xb(this,b,c)};O.prototype.mergeIn=function(b){var c=a.call(arguments,1);return this.updateIn(b,Pb(),function(a){return typeof a.merge==="function"?a.merge.apply(a,c):c[c.length-1]})};O.prototype.mergeDeep=function(){return Xb(this,Yb(void 0),arguments)};O.prototype.mergeDeepWith=function(b){var c=a.call(arguments,1);return Xb(this,Yb(b),c)};O.prototype.mergeDeepIn=function(b){var c=a.call(arguments,1);return this.updateIn(b,Pb(),function(a){return typeof a.mergeDeep==="function"?a.mergeDeep.apply(a,c):c[c.length-1]})};O.prototype.sort=function(a){return S(sb(this,a))};O.prototype.sortBy=function(a,b){return S(sb(this,b,a))};O.prototype.withMutations=function(a){var b=this.asMutable();a(b);return b.wasAltered()?b.__ensureOwner(this.__ownerID):this};O.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new l())};O.prototype.asImmutable=function(){return this.__ensureOwner()};O.prototype.wasAltered=function(){return this.__altered};O.prototype.__iterator=function(a,b){return new Kb(this,a,b)};O.prototype.__iterate=function(a,b){var c=this,d=0;this._root&&this._root.iterate(function(b){d++;return a(b[1],b[0],c)},b);return d};O.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;if(!a){this.__ownerID=a;this.__altered=!1;return this}return Nb(this.size,this._root,a,this.__hash)};function Db(a){return!!(a&&a[Eb])}O.isMap=Db;var Eb="@@__IMMUTABLE_MAP__@@",P=O.prototype;P[Eb]=!0;P[c]=P.remove;P.removeIn=P.deleteIn;function Fb(a,b){this.ownerID=a,this.entries=b}Fb.prototype.get=function(a,b,c,d){a=this.entries;for(var b=0,e=a.length;b<e;b++)if(J(c,a[b][0]))return a[b][1];return d};Fb.prototype.update=function(a,b,c,d,e,f,h){b=e===g;c=this.entries;var i=0;for(var j=c.length;i<j;i++)if(J(d,c[i][0]))break;var l=i<j;if(l?c[i][1]===e:b)return this;k(h);(b||!l)&&k(f);if(b&&c.length===1)return;if(!l&&!b&&c.length>=ec)return Ub(a,c,d,e);h=a&&a===this.ownerID;f=h?c:m(c);l?b?i===j-1?f.pop():f[i]=f.pop():f[i]=[d,e]:f.push([d,e]);if(h){this.entries=f;return this}return new Fb(a,f)};function Gb(a,b,c){this.ownerID=a,this.bitmap=b,this.nodes=c}Gb.prototype.get=function(a,b,c,e){b===void 0&&(b=K(c));var g=1<<((a===0?b:b>>>a)&f),h=this.bitmap;return(h&g)===0?e:this.nodes[ac(h&g-1)].get(a+d,b,c,e)};Gb.prototype.update=function(a,b,c,e,h,i,j){c===void 0&&(c=K(e));var k=(b===0?c:c>>>b)&f,l=1<<k,m=this.bitmap,n=(m&l)!==0;if(!n&&h===g)return this;var o=ac(m&l-1),p=this.nodes,q=n?p[o]:void 0;b=Rb(q,a,b+d,c,e,h,i,j);if(b===q)return this;if(!n&&b&&p.length>=fc)return Wb(a,p,m,k,b);if(n&&!b&&p.length===2&&Sb(p[o^1]))return p[o^1];if(n&&b&&p.length===1&&Sb(b))return b;c=a&&a===this.ownerID;e=n?b?m:m^l:m|l;h=n?b?bc(p,o,b,c):dc(p,o,c):cc(p,o,b,c);if(c){this.bitmap=e;this.nodes=h;return this}return new Gb(a,e,h)};function Hb(a,b,c){this.ownerID=a,this.count=b,this.nodes=c}Hb.prototype.get=function(a,b,c,e){b===void 0&&(b=K(c));var g=(a===0?b:b>>>a)&f;g=this.nodes[g];return g?g.get(a+d,b,c,e):e};Hb.prototype.update=function(a,b,c,e,h,i,j){c===void 0&&(c=K(e));var k=(b===0?c:c>>>b)&f,l=h===g,m=this.nodes,n=m[k];if(l&&!n)return this;l=Rb(n,a,b+d,c,e,h,i,j);if(l===n)return this;b=this.count;if(!n)b++;else if(!l){b--;if(b<gc)return Vb(a,m,b,k)}c=a&&a===this.ownerID;e=bc(m,k,l,c);if(c){this.count=b;this.nodes=e;return this}return new Hb(a,b,e)};function Ib(a,b,c){this.ownerID=a,this.keyHash=b,this.entries=c}Ib.prototype.get=function(a,b,c,d){a=this.entries;for(var b=0,e=a.length;b<e;b++)if(J(c,a[b][0]))return a[b][1];return d};Ib.prototype.update=function(a,b,c,d,e,f,h){c===void 0&&(c=K(d));var i=e===g;if(c!==this.keyHash){if(i)return this;k(h);k(f);return Tb(this,a,b,c,[d,e])}b=this.entries;c=0;for(var j=b.length;c<j;c++)if(J(d,b[c][0]))break;var l=c<j;if(l?b[c][1]===e:i)return this;k(h);(i||!l)&&k(f);if(i&&j===2)return new Jb(a,this.keyHash,b[c^1]);h=a&&a===this.ownerID;f=h?b:m(b);l?i?c===j-1?f.pop():f[c]=f.pop():f[c]=[d,e]:f.push([d,e]);if(h){this.entries=f;return this}return new Ib(a,this.keyHash,f)};function Jb(a,b,c){this.ownerID=a,this.keyHash=b,this.entry=c}Jb.prototype.get=function(a,b,c,d){return J(c,this.entry[0])?this.entry[1]:d};Jb.prototype.update=function(a,b,c,d,e,f,h){c=e===g;var i=J(d,this.entry[0]);if(i?e===this.entry[1]:c)return this;k(h);if(c){k(f);return}if(i){if(a&&a===this.ownerID){this.entry[1]=e;return this}return new Jb(a,this.keyHash,[d,e])}k(f);return Tb(this,a,b,K(d),[d,e])};Fb.prototype.iterate=Ib.prototype.iterate=function(a,b){var c=this.entries;for(var d=0,e=c.length-1;d<=e;d++)if(a(c[b?e-d:d])===!1)return!1};Gb.prototype.iterate=Hb.prototype.iterate=function(a,b){var c=this.nodes;for(var d=0,e=c.length-1;d<=e;d++){var f=c[b?e-d:d];if(f&&f.iterate(a,b)===!1)return!1}};Jb.prototype.iterate=function(a,b){return a(this.entry)};b(Kb,C);function Kb(a,b,c){this._type=b,this._reverse=c,this._stack=a._root&&Mb(a._root)}Kb.prototype.next=function(){var a=this._type,b=this._stack;while(b){var c=b.node,d=b.index++,e;if(c.entry){if(d===0)return Lb(a,c.entry)}else if(c.entries){e=c.entries.length-1;if(d<=e)return Lb(a,c.entries[this._reverse?e-d:d])}else{e=c.nodes.length-1;if(d<=e){c=c.nodes[this._reverse?e-d:d];if(c){if(c.entry)return Lb(a,c.entry);b=this._stack=Mb(c,b)}continue}}b=this._stack=this._stack.__prev}return E()};function Lb(a,b){return D(a,b[0],b[1])}function Mb(a,b){return{node:a,index:0,__prev:b}}function Nb(b,c,d,a){var e=Object.create(P);e.size=b;e._root=c;e.__ownerID=d;e.__hash=a;e.__altered=!1;return e}var Ob;function Pb(){return Ob||(Ob=Nb(0))}function Qb(a,b,c){var d,e;if(!a._root){if(c===g)return a;e=1;d=new Fb(a.__ownerID,[[b,c]])}else{var f=j(h),k=j(i);d=Rb(a._root,a.__ownerID,0,void 0,b,c,f,k);if(!k.value)return a;e=a.size+(f.value?c===g?-1:1:0)}if(a.__ownerID){a.size=e;a._root=d;a.__hash=void 0;a.__altered=!0;return a}return d?Nb(e,d):Pb()}function Rb(a,b,c,d,e,f,h,i){if(!a){if(f===g)return a;k(i);k(h);return new Jb(b,d,[e,f])}return a.update(b,c,d,e,f,h,i)}function Sb(a){return a.constructor===Jb||a.constructor===Ib}function Tb(a,b,c,e,g){if(a.keyHash===e)return new Ib(b,e,[a.entry,g]);var h=(c===0?a.keyHash:a.keyHash>>>c)&f,i=(c===0?e:e>>>c)&f;e=h===i?[Tb(a,b,c+d,e,g)]:(c=new Jb(b,e,g),h<i?[a,c]:[c,a]);return new Gb(b,1<<h|1<<i,e)}function Ub(a,b,c,d){a||(a=new l());c=new Jb(a,K(c),[c,d]);for(var d=0;d<b.length;d++){var e=b[d];c=c.update(a,0,void 0,e[0],e[1])}return c}function Vb(a,b,c,d){var e=0,f=0;c=new Array(c);for(var g=0,h=1,i=b.length;g<i;g++,h<<=1){var j=b[g];j!==void 0&&g!==d&&(e|=h,c[f++]=j)}return new Gb(a,e,c)}function Wb(a,b,c,d,f){var g=0,h=new Array(e);for(var i=0;c!==0;i++,c>>>=1)h[i]=c&1?b[g++]:void 0;h[d]=f;return new Hb(a,g+1,h)}function Xb(a,b,c){var d=[];for(var e=0;e<c.length;e++){var f=c[e],g=u(f);x(f)||(g=g.map(function(a){return Ia(a)}));d.push(g)}return Zb(a,b,d)}function Yb(a){return function(b,c,d){return b&&b.mergeDeepWith&&x(c)?b.mergeDeepWith(a,c):a?a(b,c,d):c}}function Zb(a,b,c){c=c.filter(function(a){return a.size!==0});if(c.length===0)return a;return a.size===0&&!a.__ownerID&&c.length===1?a.constructor(c[0]):a.withMutations(function(a){var d=b?function(c,d){a.update(d,g,function(a){return a===g?c:b(a,c,d)})}:function(b,c){a.set(c,b)};for(var e=0;e<c.length;e++)c[e].forEach(d)})}function $b(a,b,c,d){var e=a===g,f=b.next();if(f.done){var h=e?c:a,i=d(h);return i===h?a:i}bb(e||a&&a.set,"invalid keyPath");h=f.value;i=e?g:a.get(h,g);f=$b(i,b,c,d);return f===i?a:f===g?a.remove(h):(e?Pb():a).set(h,f)}function ac(a){a=a-(a>>1&1431655765);a=(a&858993459)+(a>>2&858993459);a=a+(a>>4)&252645135;a=a+(a>>8);a=a+(a>>16);return a&127}function bc(a,b,c,d){d=d?a:m(a);d[b]=c;return d}function cc(a,b,c,d){var e=a.length+1;if(d&&b+1===e){a[b]=c;return a}d=new Array(e);var f=0;for(var g=0;g<e;g++)g===b?(d[g]=c,f=-1):d[g]=a[g+f];return d}function dc(a,b,c){var d=a.length-1;if(c&&b===d){a.pop();return a}c=new Array(d);var e=0;for(var f=0;f<d;f++)f===b&&(e=1),c[f]=a[f+e];return c}var ec=e/4,fc=e/2,gc=e/4;b(Q,Ga);function Q(a){var b=oc();if(a===null||a===void 0)return b;if(hc(a))return a;var c=v(a),f=c.size;if(f===0)return b;L(f);return f>0&&f<e?mc(0,f,d,null,new jc(c.toArray())):b.withMutations(function(a){a.setSize(f),c.forEach(function(b,c){return a.set(c,b)})})}Q.of=function(){return this(arguments)};Q.prototype.toString=function(){return this.__toString("List [","]")};Q.prototype.get=function(a,b){a=o(this,a);if(a<0||a>=this.size)return b;a+=this._origin;b=sc(this,a);return b&&b.array[a&f]};Q.prototype.set=function(a,b){return pc(this,a,b)};Q.prototype.remove=function(a){return this.has(a)?a===0?this.shift():a===this.size-1?this.pop():this.splice(a,1):this};Q.prototype.clear=function(){if(this.size===0)return this;if(this.__ownerID){this.size=this._origin=this._capacity=0;this._level=d;this._root=this._tail=null;this.__hash=void 0;this.__altered=!0;return this}return oc()};Q.prototype.push=function(){var a=arguments,b=this.size;return this.withMutations(function(c){tc(c,0,b+a.length);for(var d=0;d<a.length;d++)c.set(b+d,a[d])})};Q.prototype.pop=function(){return tc(this,0,-1)};Q.prototype.unshift=function(){var a=arguments;return this.withMutations(function(b){tc(b,-a.length);for(var c=0;c<a.length;c++)b.set(c,a[c])})};Q.prototype.shift=function(){return tc(this,1)};Q.prototype.merge=function(){return uc(this,void 0,arguments)};Q.prototype.mergeWith=function(b){var c=a.call(arguments,1);return uc(this,b,c)};Q.prototype.mergeDeep=function(){return uc(this,Yb(void 0),arguments)};Q.prototype.mergeDeepWith=function(b){var c=a.call(arguments,1);return uc(this,Yb(b),c)};Q.prototype.setSize=function(a){return tc(this,0,a)};Q.prototype.slice=function(a,b){var c=this.size;return q(a,b,c)?this:tc(this,r(a,c),s(b,c))};Q.prototype.__iterator=function(a,b){var c=0,d=lc(this,b);return new C(function(){var b=d();return b===kc?E():D(a,c++,b)})};Q.prototype.__iterate=function(a,b){var c=0;b=lc(this,b);var d;while((d=b())!==kc)if(a(d,c++,this)===!1)break;return c};Q.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;if(!a){this.__ownerID=a;return this}return mc(this._origin,this._capacity,this._level,this._root,this._tail,a,this.__hash)};function hc(a){return!!(a&&a[ic])}Q.isList=hc;var ic="@@__IMMUTABLE_LIST__@@",R=Q.prototype;R[ic]=!0;R[c]=R.remove;R.setIn=P.setIn;R.deleteIn=R.removeIn=P.removeIn;R.update=P.update;R.updateIn=P.updateIn;R.mergeIn=P.mergeIn;R.mergeDeepIn=P.mergeDeepIn;R.withMutations=P.withMutations;R.asMutable=P.asMutable;R.asImmutable=P.asImmutable;R.wasAltered=P.wasAltered;function jc(a,b){this.array=a,this.ownerID=b}jc.prototype.removeBefore=function(a,b,c){if(c===b?1<<b:this.array.length===0)return this;var e=c>>>b&f;if(e>=this.array.length)return new jc([],a);var g=e===0,h;if(b>0){var i=this.array[e];h=i&&i.removeBefore(a,b-d,c);if(h===i&&g)return this}if(g&&!h)return this;b=rc(this,a);if(!g)for(var c=0;c<e;c++)b.array[c]=void 0;h&&(b.array[e]=h);return b};jc.prototype.removeAfter=function(a,b,c){if(c===b?1<<b:this.array.length===0)return this;var e=c-1>>>b&f;if(e>=this.array.length)return this;var g=e===this.array.length-1,h;if(b>0){var i=this.array[e];h=i&&i.removeAfter(a,b-d,c);if(h===i&&g)return this}if(g&&!h)return this;b=rc(this,a);g||b.array.pop();h&&(b.array[e]=h);return b};var kc={};function lc(a,b){var c=a._origin,f=a._capacity,g=vc(f),h=a._tail;return i(a._root,a._level,0);function i(a,b,c){return b===0?j(a,c):k(a,b,c)}function j(a,d){var i=d===g?h&&h.array:a&&a.array,j=d>c?0:c-d,k=f-d;k>e&&(k=e);return function(){if(j===k)return kc;var a=b?--k:j++;return i&&i[a]}}function k(a,g,h){var j,k=a&&a.array,l=h>c?0:c-h>>g,m=(f-h>>g)+1;m>e&&(m=e);return function(){do{if(j){var a=j();if(a!==kc)return a;j=null}if(l===m)return kc;a=b?--m:l++;j=i(k&&k[a],g-d,h+(a<<g))}while(!0)}}}function mc(b,c,d,e,f,g,a){var h=Object.create(R);h.size=c-b;h._origin=b;h._capacity=c;h._level=d;h._root=e;h._tail=f;h.__ownerID=g;h.__hash=a;h.__altered=!1;return h}var nc;function oc(){return nc||(nc=mc(0,0,d))}function pc(a,b,c){b=o(a,b);if(b>=a.size||b<0)return a.withMutations(function(a){b<0?tc(a,b).set(0,c):tc(a,0,b+1).set(b,c)});b+=a._origin;var d=a._tail,e=a._root,f=j(i);b>=vc(a._capacity)?d=qc(d,a.__ownerID,0,b,c,f):e=qc(e,a.__ownerID,a._level,b,c,f);if(!f.value)return a;if(a.__ownerID){a._root=e;a._tail=d;a.__hash=void 0;a.__altered=!0;return a}return mc(a._origin,a._capacity,a._level,e,d)}function qc(a,b,c,e,g,h){var i=e>>>c&f,j=a&&i<a.array.length;if(!j&&g===void 0)return a;if(c>0){var l=a&&a.array[i];c=qc(l,b,c-d,e,g,h);if(c===l)return a;e=rc(a,b);e.array[i]=c;return e}if(j&&a.array[i]===g)return a;k(h);e=rc(a,b);g===void 0&&i===e.array.length-1?e.array.pop():e.array[i]=g;return e}function rc(a,b){return b&&a&&b===a.ownerID?a:new jc(a?a.array.slice():[],b)}function sc(a,b){if(b>=vc(a._capacity))return a._tail;if(b<1<<a._level+d){var c=a._root;a=a._level;while(c&&a>0)c=c.array[b>>>a&f],a-=d;return c}}function tc(a,b,c){var e=a.__ownerID||new l(),g=a._origin,h=a._capacity;b=g+b;c=c===void 0?h:c<0?h+c:g+c;if(b===g&&c===h)return a;if(b>=c)return a.clear();var i=a._level,j=a._root,k=0;while(b+k<0)j=new jc(j&&j.array.length?[void 0,j]:[],e),i+=d,k+=1<<i;k&&(b+=k,g+=k,c+=k,h+=k);var m=vc(h),n=vc(c);while(n>=1<<i+d)j=new jc(j&&j.array.length?[j]:[],e),i+=d;var o=a._tail,p=n<m?sc(a,c-1):n>m?new jc([],e):o;if(o&&n>m&&b<h&&o.array.length){j=rc(j,e);var q=j;for(var r=i;r>d;r-=d){var s=m>>>r&f;q=q.array[s]=rc(q.array[s],e)}q.array[m>>>d&f]=o}c<h&&(p=p&&p.removeAfter(e,0,c));if(b>=n)b-=n,c-=n,i=d,j=null,p=p&&p.removeBefore(e,0,b);else if(b>g||n<m){k=0;while(j){s=b>>>i&f;if(s!==n>>>i&f)break;s&&(k+=(1<<i)*s);i-=d;j=j.array[s]}j&&b>g&&(j=j.removeBefore(e,i,b-k));j&&n<m&&(j=j.removeAfter(e,i,n-k));k&&(b-=k,c-=k)}if(a.__ownerID){a.size=c-b;a._origin=b;a._capacity=c;a._level=i;a._root=j;a._tail=p;a.__hash=void 0;a.__altered=!0;return a}return mc(b,c,i,j,p)}function uc(a,b,c){var d=[],e=0;for(var f=0;f<c.length;f++){var g=c[f],h=v(g);h.size>e&&(e=h.size);x(g)||(h=h.map(function(a){return Ia(a)}));d.push(h)}e>a.size&&(a=a.setSize(e));return Zb(a,b,d)}function vc(a){return a<e?0:a-1>>>d<<d}b(S,O);function S(a){return a===null||a===void 0?zc():wc(a)?a:zc().withMutations(function(b){var c=u(a);L(c.size);c.forEach(function(a,c){return b.set(c,a)})})}S.of=function(){return this(arguments)};S.prototype.toString=function(){return this.__toString("OrderedMap {","}")};S.prototype.get=function(a,b){a=this._map.get(a);return a!==void 0?this._list.get(a)[1]:b};S.prototype.clear=function(){if(this.size===0)return this;if(this.__ownerID){this.size=0;this._map.clear();this._list.clear();return this}return zc()};S.prototype.set=function(a,b){return Ac(this,a,b)};S.prototype.remove=function(a){return Ac(this,a,g)};S.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()};S.prototype.__iterate=function(a,b){var c=this;return this._list.__iterate(function(b){return b&&a(b[1],b[0],c)},b)};S.prototype.__iterator=function(a,b){return this._list.fromEntrySeq().__iterator(a,b)};S.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map.__ensureOwner(a),c=this._list.__ensureOwner(a);if(!a){this.__ownerID=a;this._map=b;this._list=c;return this}return xc(b,c,a,this.__hash)};function wc(a){return Db(a)&&ca(a)}S.isOrderedMap=wc;S.prototype[ga]=!0;S.prototype[c]=S.prototype.remove;function xc(b,c,d,a){var e=Object.create(S.prototype);e.size=b?b.size:0;e._map=b;e._list=c;e.__ownerID=d;e.__hash=a;return e}var yc;function zc(){return yc||(yc=xc(Pb(),oc()))}function Ac(a,b,c){var d=a._map,f=a._list,h=d.get(b),i=h!==void 0,j,k;if(c===g){if(!i)return a;f.size>=e&&f.size>=d.size*2?(k=f.filter(function(a,b){return a!==void 0&&h!==b}),j=k.toKeyedSeq().map(function(a){return a[0]}).flip().toMap(),a.__ownerID&&(j.__ownerID=k.__ownerID=a.__ownerID)):(j=d.remove(b),k=h===f.size-1?f.pop():f.set(h,void 0))}else if(i){if(c===f.get(h)[1])return a;j=d;k=f.set(h,[b,c])}else j=d.set(b,f.size),k=f.set(f.size,[b,c]);if(a.__ownerID){a.size=j.size;a._map=j;a._list=k;a.__hash=void 0;return a}return xc(j,k)}b(T,Ga);function T(a){return a===null||a===void 0?Gc():Bc(a)?a:Gc().unshiftAll(a)}T.of=function(){return this(arguments)};T.prototype.toString=function(){return this.__toString("Stack [","]")};T.prototype.get=function(a,b){var c=this._head;a=o(this,a);while(c&&a--)c=c.next;return c?c.value:b};T.prototype.peek=function(){return this._head&&this._head.value};T.prototype.push=function(){if(arguments.length===0)return this;var a=this.size+arguments.length,b=this._head;for(var c=arguments.length-1;c>=0;c--)b={value:arguments[c],next:b};if(this.__ownerID){this.size=a;this._head=b;this.__hash=void 0;this.__altered=!0;return this}return Ec(a,b)};T.prototype.pushAll=function(a){a=v(a);if(a.size===0)return this;L(a.size);var b=this.size,c=this._head;a.reverse().forEach(function(a){b++,c={value:a,next:c}});if(this.__ownerID){this.size=b;this._head=c;this.__hash=void 0;this.__altered=!0;return this}return Ec(b,c)};T.prototype.pop=function(){return this.slice(1)};T.prototype.unshift=function(){return this.push.apply(this,arguments)};T.prototype.unshiftAll=function(a){return this.pushAll(a)};T.prototype.shift=function(){return this.pop.apply(this,arguments)};T.prototype.clear=function(){if(this.size===0)return this;if(this.__ownerID){this.size=0;this._head=void 0;this.__hash=void 0;this.__altered=!0;return this}return Gc()};T.prototype.slice=function(a,b){if(q(a,b,this.size))return this;var c=r(a,this.size),d=s(b,this.size);if(d!==this.size)return Ga.prototype.slice.call(this,a,b);d=this.size-c;a=this._head;while(c--)a=a.next;if(this.__ownerID){this.size=d;this._head=a;this.__hash=void 0;this.__altered=!0;return this}return Ec(d,a)};T.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;if(!a){this.__ownerID=a;this.__altered=!1;return this}return Ec(this.size,this._head,a,this.__hash)};T.prototype.__iterate=function(a,b){if(b)return this.reverse().__iterate(a);b=0;var c=this._head;while(c){if(a(c.value,b++,this)===!1)break;c=c.next}return b};T.prototype.__iterator=function(a,b){if(b)return this.reverse().__iterator(a);var c=0,d=this._head;return new C(function(){if(d){var b=d.value;d=d.next;return D(a,c++,b)}return E()})};function Bc(a){return!!(a&&a[Cc])}T.isStack=Bc;var Cc="@@__IMMUTABLE_STACK__@@",Dc=T.prototype;Dc[Cc]=!0;Dc.withMutations=P.withMutations;Dc.asMutable=P.asMutable;Dc.asImmutable=P.asImmutable;Dc.wasAltered=P.wasAltered;function Ec(b,c,d,a){var e=Object.create(Dc);e.size=b;e._head=c;e.__ownerID=d;e.__hash=a;e.__altered=!1;return e}var Fc;function Gc(){return Fc||(Fc=Ec(0))}b(U,Ha);function U(a){return a===null||a===void 0?Mc():Hc(a)?a:Mc().withMutations(function(b){var c=w(a);L(c.size);c.forEach(function(a){return b.add(a)})})}U.of=function(){return this(arguments)};U.fromKeys=function(a){return this(u(a).keySeq())};U.prototype.toString=function(){return this.__toString("Set {","}")};U.prototype.has=function(a){return this._map.has(a)};U.prototype.add=function(a){return Jc(this,this._map.set(a,!0))};U.prototype.remove=function(a){return Jc(this,this._map.remove(a))};U.prototype.clear=function(){return Jc(this,this._map.clear())};U.prototype.union=function(){var b=a.call(arguments,0);b=b.filter(function(a){return a.size!==0});if(b.length===0)return this;return this.size===0&&!this.__ownerID&&b.length===1?this.constructor(b[0]):this.withMutations(function(a){for(var c=0;c<b.length;c++)w(b[c]).forEach(function(b){return a.add(b)})})};U.prototype.intersect=function(){var b=a.call(arguments,0);if(b.length===0)return this;b=b.map(function(a){return w(a)});var c=this;return this.withMutations(function(a){c.forEach(function(c){b.every(function(a){return a.includes(c)})||a.remove(c)})})};U.prototype.subtract=function(){var b=a.call(arguments,0);if(b.length===0)return this;b=b.map(function(a){return w(a)});var c=this;return this.withMutations(function(a){c.forEach(function(c){b.some(function(a){return a.includes(c)})&&a.remove(c)})})};U.prototype.merge=function(){return this.union.apply(this,arguments)};U.prototype.mergeWith=function(b){var c=a.call(arguments,1);return this.union.apply(this,c)};U.prototype.sort=function(a){return Nc(sb(this,a))};U.prototype.sortBy=function(a,b){return Nc(sb(this,b,a))};U.prototype.wasAltered=function(){return this._map.wasAltered()};U.prototype.__iterate=function(a,b){var c=this;return this._map.__iterate(function(b,d){return a(d,d,c)},b)};U.prototype.__iterator=function(a,b){return this._map.map(function(a,b){return b}).__iterator(a,b)};U.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map.__ensureOwner(a);if(!a){this.__ownerID=a;this._map=b;return this}return this.__make(b,a)};function Hc(a){return!!(a&&a[Ic])}U.isSet=Hc;var Ic="@@__IMMUTABLE_SET__@@",V=U.prototype;V[Ic]=!0;V[c]=V.remove;V.mergeDeep=V.merge;V.mergeDeepWith=V.mergeWith;V.withMutations=P.withMutations;V.asMutable=P.asMutable;V.asImmutable=P.asImmutable;V.__empty=Mc;V.__make=Kc;function Jc(a,b){if(a.__ownerID){a.size=b.size;a._map=b;return a}return b===a._map?a:b.size===0?a.__empty():a.__make(b)}function Kc(a,b){var c=Object.create(V);c.size=a?a.size:0;c._map=a;c.__ownerID=b;return c}var Lc;function Mc(){return Lc||(Lc=Kc(Pb()))}b(Nc,U);function Nc(a){return a===null||a===void 0?Sc():Oc(a)?a:Sc().withMutations(function(b){var c=w(a);L(c.size);c.forEach(function(a){return b.add(a)})})}Nc.of=function(){return this(arguments)};Nc.fromKeys=function(a){return this(u(a).keySeq())};Nc.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function Oc(a){return Hc(a)&&ca(a)}Nc.isOrderedSet=Oc;var Pc=Nc.prototype;Pc[ga]=!0;Pc.__empty=Sc;Pc.__make=Qc;function Qc(a,b){var c=Object.create(Pc);c.size=a?a.size:0;c._map=a;c.__ownerID=b;return c}var Rc;function Sc(){return Rc||(Rc=Qc(zc()))}b(W,Fa);function W(a,b){var c,d=function(f){if(f instanceof d)return f;if(!(this instanceof d))return new d(f);if(!c){c=!0;var g=Object.keys(a);Vc(e,g);e.size=g.length;e._name=b;e._keys=g;e._defaultValues=a}this._map=O(f)},e=d.prototype=Object.create(X);e.constructor=d;return d}W.prototype.toString=function(){return this.__toString(Uc(this)+" {","}")};W.prototype.has=function(a){return this._defaultValues.hasOwnProperty(a)};W.prototype.get=function(a,b){if(!this.has(a))return b;b=this._defaultValues[a];return this._map?this._map.get(a,b):b};W.prototype.clear=function(){if(this.__ownerID){this._map&&this._map.clear();return this}var a=this.constructor;return a._empty||(a._empty=Tc(this,Pb()))};W.prototype.set=function(a,b){if(!this.has(a))throw new Error('Cannot set unknown key "'+a+'" on '+Uc(this));a=this._map&&this._map.set(a,b);return this.__ownerID||a===this._map?this:Tc(this,a)};W.prototype.remove=function(a){if(!this.has(a))return this;a=this._map&&this._map.remove(a);return this.__ownerID||a===this._map?this:Tc(this,a)};W.prototype.wasAltered=function(){return this._map.wasAltered()};W.prototype.__iterator=function(a,b){var c=this;return u(this._defaultValues).map(function(a,b){return c.get(b)}).__iterator(a,b)};W.prototype.__iterate=function(a,b){var c=this;return u(this._defaultValues).map(function(a,b){return c.get(b)}).__iterate(a,b)};W.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map&&this._map.__ensureOwner(a);if(!a){this.__ownerID=a;this._map=b;return this}return Tc(this,b,a)};var X=W.prototype;X[c]=X.remove;X.deleteIn=X.removeIn=P.removeIn;X.merge=P.merge;X.mergeWith=P.mergeWith;X.mergeIn=P.mergeIn;X.mergeDeep=P.mergeDeep;X.mergeDeepWith=P.mergeDeepWith;X.mergeDeepIn=P.mergeDeepIn;X.setIn=P.setIn;X.update=P.update;X.updateIn=P.updateIn;X.withMutations=P.withMutations;X.asMutable=P.asMutable;X.asImmutable=P.asImmutable;function Tc(a,b,c){a=Object.create(Object.getPrototypeOf(a));a._map=b;a.__ownerID=c;return a}function Uc(a){return a._name||a.constructor.name||"Record"}function Vc(a,b){try{b.forEach(Wc.bind(void 0,a))}catch(a){}}function Wc(a,b){Object.defineProperty(a,b,{get:function(){return this.get(b)},set:function(a){bb(this.__ownerID,"Cannot set on an immutable record."),this.set(b,a)}})}function Xc(a,b){if(a===b)return!0;if(!x(b)||a.size!==void 0&&b.size!==void 0&&a.size!==b.size||a.__hash!==void 0&&b.__hash!==void 0&&a.__hash!==b.__hash||y(a)!==y(b)||z(a)!==z(b)||ca(a)!==ca(b))return!1;if(a.size===0&&b.size===0)return!0;var c=!ba(a);if(ca(a)){var d=a.entries();return b.every(function(a,b){var e=d.next().value;return e&&J(e[1],a)&&(c||J(e[0],b))})&&d.next().done}var e=!1;if(a.size===void 0)if(b.size===void 0)typeof a.cacheResult==="function"&&a.cacheResult();else{e=!0;var f=a;a=b;b=f}f=!0;b=b.__iterate(function(b,d){if(c?!a.has(b):e?!J(b,a.get(d,g)):!J(a.get(d,g),b)){f=!1;return!1}});return f&&a.size===b}b(Y,H);function Y(a,b,c){if(!(this instanceof Y))return new Y(a,b,c);bb(c!==0,"Cannot step a Range by 0");a=a||0;b===void 0&&(b=Infinity);c=c===void 0?1:Math.abs(c);b<a&&(c=-c);this._start=a;this._end=b;this._step=c;this.size=Math.max(0,Math.ceil((b-a)/c-1)+1);if(this.size===0){if(Yc)return Yc;Yc=this}}Y.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"};Y.prototype.get=function(a,b){return this.has(a)?this._start+o(this,a)*this._step:b};Y.prototype.includes=function(a){a=(a-this._start)/this._step;return a>=0&&a<this.size&&a===Math.floor(a)};Y.prototype.slice=function(a,b){if(q(a,b,this.size))return this;a=r(a,this.size);b=s(b,this.size);return b<=a?new Y(0,0):new Y(this.get(a,this._end),this.get(b,this._end),this._step)};Y.prototype.indexOf=function(a){a=a-this._start;if(a%this._step===0){a=a/this._step;if(a>=0&&a<this.size)return a}return-1};Y.prototype.lastIndexOf=function(a){return this.indexOf(a)};Y.prototype.__iterate=function(a,b){var c=this.size-1,d=this._step,e=b?this._start+c*d:this._start;for(var f=0;f<=c;f++){if(a(e,f,this)===!1)return f+1;e+=b?-d:d}return f};Y.prototype.__iterator=function(a,b){var c=this.size-1,d=this._step,e=b?this._start+c*d:this._start,f=0;return new C(function(){var g=e;e+=b?-d:d;return f>c?E():D(a,f++,g)})};Y.prototype.equals=function(a){return a instanceof Y?this._start===a._start&&this._end===a._end&&this._step===a._step:Xc(this,a)};var Yc;b(Z,H);function Z(a,b){if(!(this instanceof Z))return new Z(a,b);this._value=a;this.size=b===void 0?Infinity:Math.max(0,b);if(this.size===0){if(Zc)return Zc;Zc=this}}Z.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"};Z.prototype.get=function(a,b){return this.has(a)?this._value:b};Z.prototype.includes=function(a){return J(this._value,a)};Z.prototype.slice=function(a,b){var c=this.size;return q(a,b,c)?this:new Z(this._value,s(b,c)-r(a,c))};Z.prototype.reverse=function(){return this};Z.prototype.indexOf=function(a){return J(this._value,a)?0:-1};Z.prototype.lastIndexOf=function(a){return J(this._value,a)?this.size:-1};Z.prototype.__iterate=function(a,b){for(var b=0;b<this.size;b++)if(a(this._value,b,this)===!1)return b+1;return b};Z.prototype.__iterator=function(a,b){var c=this,d=0;return new C(function(){return d<c.size?D(a,d++,c._value):E()})};Z.prototype.equals=function(a){return a instanceof Z?J(this._value,a._value):Xc(a)};var Zc;function $c(a,b){var c=function(c){a.prototype[c]=b[c]};Object.keys(b).forEach(c);Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(b).forEach(c);return a}t.Iterator=C;$c(t,{toArray:function(){L(this.size);var a=new Array(this.size||0);this.valueSeq().__iterate(function(b,c){a[c]=b});return a},toIndexedSeq:function(){return new cb(this)},toJS:function(){return this.toSeq().map(function(a){return a&&typeof a.toJS==="function"?a.toJS():a}).__toJS()},toJSON:function(){return this.toSeq().map(function(a){return a&&typeof a.toJSON==="function"?a.toJSON():a}).__toJS()},toKeyedSeq:function(){return new M(this,!0)},toMap:function(){return O(this.toKeyedSeq())},toObject:function(){L(this.size);var a={};this.__iterate(function(b,c){a[c]=b});return a},toOrderedMap:function(){return S(this.toKeyedSeq())},toOrderedSet:function(){return Nc(y(this)?this.valueSeq():this)},toSet:function(){return U(y(this)?this.valueSeq():this)},toSetSeq:function(){return new db(this)},toSeq:function(){return z(this)?this.toIndexedSeq():y(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return T(y(this)?this.valueSeq():this)},toList:function(){return Q(y(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(a,b){return this.size===0?a+b:a+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+b},concat:function(){var b=a.call(arguments,0);return N(this,ob(this,b))},contains:function(a){return this.includes(a)},includes:function(a){return this.some(function(b){return J(b,a)})},entries:function(){return this.__iterator(B)},every:function(a,b){L(this.size);var c=!0;this.__iterate(function(d,e,f){if(!a.call(b,d,e,f)){c=!1;return!1}});return c},filter:function(a,b){return N(this,ib(this,a,b,!0))},find:function(a,b,c){a=this.findEntry(a,b);return a?a[1]:c},findEntry:function(a,b){var c;this.__iterate(function(d,e,f){if(a.call(b,d,e,f)){c=[e,d];return!1}});return c},findLastEntry:function(a,b){return this.toSeq().reverse().findEntry(a,b)},forEach:function(a,b){L(this.size);return this.__iterate(b?a.bind(b):a)},join:function(a){L(this.size);a=a!==void 0?""+a:",";var b="",c=!0;this.__iterate(function(d){c?c=!1:b+=a,b+=d!==null&&d!==void 0?d.toString():""});return b},keys:function(){return this.__iterator(ha)},map:function(a,b){return N(this,gb(this,a,b))},reduce:function(a,b,c){L(this.size);var d,e;arguments.length<2?e=!0:d=b;this.__iterate(function(b,f,g){e?(e=!1,d=b):d=a.call(c,d,b,f,g)});return d},reduceRight:function(a,b,c){var d=this.toKeyedSeq().reverse();return d.reduce.apply(d,arguments)},reverse:function(){return N(this,hb(this,!0))},slice:function(a,b){return N(this,lb(this,a,b,!0))},some:function(a,b){return!this.every(cd(a),b)},sort:function(a){return N(this,sb(this,a))},values:function(){return this.__iterator(A)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(a,b){return n(a?this.toSeq().filter(a,b):this)},countBy:function(a,b){return jb(this,a,b)},equals:function(a){return Xc(this,a)},entrySeq:function(){var a=this;if(a._cache)return new ra(a._cache);var b=a.toSeq().map(bd).toIndexedSeq();b.fromEntrySeq=function(){return a.toSeq()};return b},filterNot:function(a,b){return this.filter(cd(a),b)},findLast:function(a,b,c){return this.toKeyedSeq().reverse().find(a,b,c)},first:function(){return this.find(p)},flatMap:function(a,b){return N(this,qb(this,a,b))},flatten:function(a){return N(this,pb(this,a,!0))},fromEntrySeq:function(){return new eb(this)},get:function(a,b){return this.find(function(b,c){return J(c,a)},void 0,b)},getIn:function(a,b){var c=this;a=Cb(a);var d;while(!(d=a.next()).done){d=d.value;c=c&&c.get?c.get(d,g):g;if(c===g)return b}return c},groupBy:function(a,b){return kb(this,a,b)},has:function(a){return this.get(a,g)!==g},hasIn:function(a){return this.getIn(a,g)!==g},isSubset:function(a){a=typeof a.includes==="function"?a:t(a);return this.every(function(b){return a.includes(b)})},isSuperset:function(a){return a.isSubset(this)},keySeq:function(){return this.toSeq().map(ad).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(a){return tb(this,a)},maxBy:function(a,b){return tb(this,b,a)},min:function(a){return tb(this,a?dd(a):gd)},minBy:function(a,b){return tb(this,b?dd(b):gd,a)},rest:function(){return this.slice(1)},skip:function(a){return this.slice(Math.max(0,a))},skipLast:function(a){return N(this,this.toSeq().reverse().skip(a).reverse())},skipWhile:function(a,b){return N(this,nb(this,a,b,!0))},skipUntil:function(a,b){return this.skipWhile(cd(a),b)},sortBy:function(a,b){return N(this,sb(this,b,a))},take:function(a){return this.slice(0,Math.max(0,a))},takeLast:function(a){return N(this,this.toSeq().reverse().take(a).reverse())},takeWhile:function(a,b){return N(this,mb(this,a,b))},takeUntil:function(a,b){return this.takeWhile(cd(a),b)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=hd(this))}});var $=t.prototype;$[da]=!0;$[ka]=$.values;$.__toJS=$.toArray;$.__toStringMapper=ed;$.inspect=$.toSource=function(){return this.toString()};$.chain=$.flatMap;(function(){try{Object.defineProperty($,"length",{get:function(){if(!t.noLengthWarning){var a;try{throw new Error()}catch(b){a=b.stack}if(a.indexOf("_wrapObject")===-1){console&&emptyFunction&&!1;return this.size}}}})}catch(a){}})();$c(u,{flip:function(){return N(this,fb(this))},findKey:function(a,b){a=this.findEntry(a,b);return a&&a[0]},findLastKey:function(a,b){return this.toSeq().reverse().findKey(a,b)},keyOf:function(a){return this.findKey(function(b){return J(b,a)})},lastKeyOf:function(a){return this.findLastKey(function(b){return J(b,a)})},mapEntries:function(a,b){var c=this,d=0;return N(this,this.toSeq().map(function(e,f){return a.call(b,[f,e],d++,c)}).fromEntrySeq())},mapKeys:function(a,b){var c=this;return N(this,this.toSeq().flip().map(function(d,e){return a.call(b,d,e,c)}).flip())}});c=u.prototype;c[ea]=!0;c[ka]=$.entries;c.__toJS=$.toObject;c.__toStringMapper=function(a,b){return JSON.stringify(b)+": "+ed(a)};$c(v,{toKeyedSeq:function(){return new M(this,!1)},filter:function(a,b){return N(this,ib(this,a,b,!1))},findIndex:function(a,b){a=this.findEntry(a,b);return a?a[0]:-1},indexOf:function(a){a=this.toKeyedSeq().keyOf(a);return a===void 0?-1:a},lastIndexOf:function(a){return this.toSeq().reverse().indexOf(a)},reverse:function(){return N(this,hb(this,!1))},slice:function(a,b){return N(this,lb(this,a,b,!1))},splice:function(a,b){var c=arguments.length;b=Math.max(b|0,0);if(c===0||c===2&&!b)return this;a=r(a,this.size);var d=this.slice(0,a);return N(this,c===1?d:d.concat(m(arguments,2),this.slice(a+b)))},findLastIndex:function(a,b){a=this.toKeyedSeq().findLastKey(a,b);return a===void 0?-1:a},first:function(){return this.get(0)},flatten:function(a){return N(this,pb(this,a,!1))},get:function(a,b){a=o(this,a);return a<0||this.size===Infinity||this.size!==void 0&&a>this.size?b:this.find(function(b,c){return c===a},void 0,b)},has:function(a){a=o(this,a);return a>=0&&(this.size!==void 0?this.size===Infinity||a<this.size:this.indexOf(a)!==-1)},interpose:function(a){return N(this,rb(this,a))},interleave:function(){var a=[this].concat(m(arguments)),b=vb(this.toSeq(),H.of,a),c=b.flatten(!0);b.size&&(c.size=b.size*a.length);return N(this,c)},last:function(){return this.get(-1)},skipWhile:function(a,b){return N(this,nb(this,a,b,!1))},zip:function(){var a=[this].concat(m(arguments));return N(this,vb(this,fd,a))},zipWith:function(a){var b=m(arguments);b[0]=this;return N(this,vb(this,a,b))}});v.prototype[fa]=!0;v.prototype[ga]=!0;$c(w,{get:function(a,b){return this.has(a)?a:b},includes:function(a){return this.has(a)},keySeq:function(){return this.valueSeq()}});w.prototype.has=$.includes;$c(G,u.prototype);$c(H,v.prototype);$c(I,w.prototype);$c(Fa,u.prototype);$c(Ga,v.prototype);$c(Ha,w.prototype);function ad(a,b){return b}function bd(a,b){return[b,a]}function cd(a){return function(){return!a.apply(this,arguments)}}function dd(a){return function(){return-a.apply(this,arguments)}}function ed(a){return typeof a==="string"?JSON.stringify(a):a}function fd(){return m(arguments)}function gd(a,b){return a<b?1:a>b?-1:0}function hd(a){if(a.size===Infinity)return 0;var b=ca(a),c=y(a),d=b?1:0;a=a.__iterate(c?b?function(a,b){d=31*d+jd(K(a),K(b))|0}:function(a,b){d=d+jd(K(a),K(b))|0}:b?function(a){d=31*d+K(a)|0}:function(a){d=d+K(a)|0});return id(a,d)}function id(a,b){b=Ma(b,3432918353);b=Ma(b<<15|b>>>-15,461845907);b=Ma(b<<13|b>>>-13,5);b=(b+3864292196|0)^a;b=Ma(b^b>>>16,2246822507);b=Ma(b^b>>>13,3266489909);b=Na(b^b>>>16);return b}function jd(a,b){return a^b+2654435769+(a<<6)+(a>>2)|0}b={Iterable:t,Seq:F,Collection:Ea,Map:O,OrderedMap:S,List:Q,Stack:T,Set:U,OrderedSet:Nc,Record:W,Range:Y,Repeat:Z,is:J,fromJS:Ia};return b})}),null);
__d("replaceSelectionWithMention",["DraftModifier","EditorState"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c,d,e,f){e=e(c.getCurrentContent(),a);var g=e.getLastCreatedEntityKey();f=f?f(a):a.getTitle();a=b("DraftModifier").replaceText(e,d,f,c.getCurrentInlineStyle(),g);return b("EditorState").push(c,a,"insert-fragment")}}),null);
__d("moveSelectionBackward",["warning"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=a.getSelection();b("warning")(d.isCollapsed(),"moveSelectionBackward should only be called with a collapsed SelectionState");a=a.getCurrentContent();var e=d.getStartKey(),f=d.getStartOffset(),g=e,h=0;if(c>f){var i=a.getKeyBefore(e);if(i==null)g=e;else{g=i;e=a.getBlockForKey(i);h=e.getText().length}}else h=f-c;return d.merge({focusKey:g,focusOffset:h,isBackward:!0})}e.exports=a}),null);
__d("moveSelectionForward",["warning"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=a.getSelection();b("warning")(d.isCollapsed(),"moveSelectionForward should only be called with a collapsed SelectionState");var e=d.getStartKey(),f=d.getStartOffset();a=a.getCurrentContent();var g=e,h=a.getBlockForKey(e);c>h.getText().length-f?(g=a.getKeyAfter(e),h=0):h=f+c;return d.merge({focusKey:g,focusOffset:h})}e.exports=a}),null);
__d("removeTextWithStrategy",["DraftModifier","gkx"],(function(a,b,c,d,e,f){"use strict";var g=b("gkx")("676842");function a(a,c,d){var e=a.getSelection(),f=a.getCurrentContent(),h=e,i=e.getAnchorKey(),j=e.getFocusKey(),k=f.getBlockForKey(i);if(g&&(d==="forward"&&i!==j))return f;if(e.isCollapsed()){if(d==="forward"){if(a.isSelectionAtEndOfContent())return f;if(g){j=e.getAnchorOffset()===f.getBlockForKey(i).getLength();if(j){i=f.getBlockForKey(k.nextSibling);if(!i||i.getLength()===0)return f}}}else if(a.isSelectionAtStartOfContent())return f;h=c(a);if(h===e)return f}return b("DraftModifier").removeRange(f,h,d)}e.exports=a}),null);
__d("setImmediate",["TimerStorage","TimeSlice","setImmediateAcrossTransitions"],(function(a,b,c,d,e,f){e.exports=a;function a(a){var c,d=function(){b("TimerStorage").unset(b("TimerStorage").IMMEDIATE,c);for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];Function.prototype.apply.call(a,this,e)};b("TimeSlice").copyGuardForWrapper(a,d);for(var e=arguments.length,f=new Array(e>1?e-1:0),g=1;g<e;g++)f[g-1]=arguments[g];c=b("setImmediateAcrossTransitions").apply(void 0,[d].concat(f));b("TimerStorage").set(b("TimerStorage").IMMEDIATE,c);return c}}),null);
__d("CometRelayEF",["Bootloader","ClientConsistencyEventEmitter","CometSSREntrypoint","cometAsyncFetch","gkx","promiseDone"],(function(a,b,c,d,e,f){"use strict";f.fetchPredictions=h;f.fetchPredictedResources=a;var g=new Map();function h(a,c){if(!b("gkx")("1334580"))return;a=b("CometSSREntrypoint").processRootEntryPoint(a,c);var d=[];a.forEach(function(a){g.has(a.name)||d.push(a.name)});if(d.length===0)return;var e=b("cometAsyncFetch")("/ajax/relay-ef/",{data:{queries:d},method:"POST"});d.forEach(function(a){g.set(a,e)})}function a(a,c){if(!b("gkx")("1334580"))return;h(a,c);a=b("CometSSREntrypoint").processRootEntryPoint(a,c);a.forEach(function(a){var c=a.name,d=g.get(c);d&&d!==!0&&b("promiseDone")(d,function(a){if(a!=null&&typeof a==="object"){var d;a="consistency"in a?a:{consistency:null,predictions:a};b("Bootloader").loadPredictedResourceMap(a.predictions[c],null,(d=a.consistency)==null?void 0:d.rev);a.consistency!=null&&b("ClientConsistencyEventEmitter").emit("newEntry",a.consistency)}});g.set(a.name,!0)})}}),null);
__d("ThriftTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,STRUCT:12,MAP:13,SET:14,LIST:15,FLOAT:19});b=a;e.exports=b}),null);
__d("TWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(b){b===void 0&&(b=a.DEFAULT_BYTE_BUFFER_SIZE),this.$1=new DataView(new ArrayBuffer(b)),this.$2=0}var b=a.prototype;b.write=function(a){this.$2+a.length>this.$1.byteLength&&this.$3(this.$2+a.length);for(var b=0;b<a.length;b++)this.$1.setUint8(this.$2+b,a[b]);this.$2+=a.length;return a.length};b.writeByte=function(a){this.$2+1>this.$1.byteLength&&this.$3(this.$2+1);this.$1.setUint8(this.$2,a);this.$2++;return 1};b.writeFloatBE=function(a){this.$2+Float32Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float32Array.BYTES_PER_ELEMENT);this.$1.setFloat32(this.$2,a);this.$2+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$2+Float64Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float64Array.BYTES_PER_ELEMENT);this.$1.setFloat64(this.$2,a);this.$2+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){var a=new Uint8Array(this.$1.buffer,0,this.$2);return a};b.currentSize=function(){return this.$2};b.getUnderlyingDataView=function(){return this.$1};b.$3=function(a){a=a*2;if(!Number.isSafeInteger(a))throw new Error("unable to resize");a=new DataView(new ArrayBuffer(a));for(var b=0;b<this.$2;b++)a.setUint8(b,this.$1.getUint8(b));this.$1=a};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();e.exports=a;a.DEFAULT_BYTE_BUFFER_SIZE=16}),null);
__d("StringToUtf8",["TWriteBuffer"],(function(a,b,c,d,e,f){a=function(a){var c=new(b("TWriteBuffer"))(a.length),d;for(var e=0;e<a.length;e++){d=a.charCodeAt(e);if(d<128)c.writeByte(d);else if(d<2048)c.writeByte(d>>6|192),c.writeByte(d&63|128);else if((d&64512)==55296){if(e+1>=a.length)throw new Error("UTF-16 string is truncated: ["+d.toString(16)+"]");if((a.charCodeAt(e+1)&64512)!==56320)throw new Error("Invalid UTF-16 string: ["+d.toString(16)+", "+a.charCodeAt(e+1).toString(16)+"]");d=65536+((d&1023)<<10)+(a.charCodeAt(++e)&1023);c.writeByte(d>>18|240);c.writeByte(d>>12&63|128);c.writeByte(d>>6&63|128);c.writeByte(d&63|128)}else c.writeByte(d>>12|224),c.writeByte(d>>6&63|128),c.writeByte(d&63|128)}return c.toByteArray()};f.StringToUtf8=a}),null);
__d("Utf8ToString",[],(function(a,b,c,d,e,f){var g=function(a,b){throw new Error(a+": ["+b.map(function(a){return a.toString(16)}).toString()+"]")},h=function(a){g("Invalid UTF-8 sequence",a)},i=function(a,b){g("Not enough bytes for "+a+"-byte sequence",b)};a=function(a){var b=0,c=[];while(b<a.length){var d=a[b++];if(d<128)c.push(String.fromCharCode(d));else if(d>=128&&d<194)h([d]);else if(d>=194&&d<224){b>=a.length&&i(2,[d]);var e=a[b++];(e&192)!==128&&h([d,e]);c.push(String.fromCharCode((d&31)<<6|e&63))}else if(d>=240&&d<245){b+2>=a.length&&i(4,[d]);e=a[b++];var f=a[b++],g=a[b++];(d==240&&(!(e>=144&&e<192)||(f&192)!==128||(g&192)!==128)||d>=241&&d<244&&((e&192)!==128||(f&192)!==128||(g&192)!==128)||d==244&&(!(e>=128&&e<144)||(f&192)!==128||(g&192)!==128))&&h([d,e,f,g]);e=((d&7)<<18|(e&63)<<12|(f&63)<<6|g&63)-65536;c.push(String.fromCharCode(55296+(e>>10)));c.push(String.fromCharCode(56320+(e&1023)))}else if(d>=245)h([d]);else{b+1>=a.length&&i(3,[d]);f=a[b++];g=a[b++];d==224?f>=160&&f<192||h([d,f,g]):d>=225&&d<237?f>=128&&f<192||h([d,f,g]):d==237?f>=128&&f<160||h([d,f,g]):d>=238&&d<240&&(f>=128&&f<192||h([d,f,g]));g>=128&&g<192||h([d,f,g]);c.push(String.fromCharCode((d&15)<<12|(f&63)<<6|g&63))}}return c.join("")};f.Utf8ToString=a}),null);
__d("TNoOpWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(){this.$1=0}var b=a.prototype;b.write=function(a){this.$1+=a.length;return a.length};b.writeByte=function(a){this.$1++;return 1};b.writeFloatBE=function(a){this.$1+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$1+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){throw new Error("operation not supported")};b.currentSize=function(){return this.$1};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();e.exports=a}),null);
__d("TReadBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=a,this.$2=0}var b=a.prototype;b.readByte=function(){if(this.$2<this.$1.length)return this.$1[this.$2++];throw new Error("no available byte to read")};b.readBytes=function(a){if(a<0)throw new Error("cannot readBytes of negative length: "+a);if(a+this.$2>this.$1.length)throw new Error("not enough bytes to read");var b=new Uint8Array(this.$1.buffer,this.$3(),a);this.$2+=a;return b};b.readFloatBE=function(){if(Float32Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat32(this.$3());this.$2+=Float32Array.BYTES_PER_ELEMENT;return a};b.readDoubleBE=function(){if(Float64Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat64(this.$3());this.$2+=Float64Array.BYTES_PER_ELEMENT;return a};b.$3=function(){return this.$2+this.$1.byteOffset};b.getCurrentCursor=function(){return this.$2};b.writeByte=function(a){throw new Error("operation not supported")};b.write=function(a){throw new Error("operation not supported")};b.toByteArray=function(){throw new Error("operation not supported")};b.writeFloatBE=function(a){throw new Error("operation not supported")};b.writeDoubleBE=function(a){throw new Error("operation not supported")};return a}();e.exports=a}),null);
__d("react-relay/ReactRelayContainerUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a){return a.displayName||a.name||"Component"}function a(a){return"Relay("+g(a)+")"}e.exports={getComponentName:g,getContainerName:a}}),null);
__d("react-relay/isRelayEnvironment",[],(function(a,b,c,d,e,f){"use strict";function a(a){return typeof a==="object"&&a!==null&&typeof a.check==="function"&&typeof a.lookup==="function"&&typeof a.retain==="function"&&typeof a.execute==="function"&&typeof a.subscribe==="function"}e.exports=a}),null);
__d("react-relay/RelayContext",["invariant","react-relay/isRelayEnvironment"],(function(a,b,c,d,e,f,g){"use strict";function a(a){h(a)||g(0,6172,a);return a}function h(a){return typeof a==="object"&&a!==null&&!Array.isArray(a)&&b("react-relay/isRelayEnvironment")(a.environment)}e.exports={assertRelayContext:a,isRelayContext:h}}),null);
__d("react-relay/readContext",["react"],(function(a,b,c,d,e,f){"use strict";var g;c=g||b("react");d=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var h=d.ReactCurrentDispatcher,i=d.ReactCurrentOwner;function a(a){var b=h!=null?h.current:i.currentDispatcher;return b.readContext(a)}e.exports=a}),null);
__d("react-relay/buildReactRelayContainer",["invariant","react","react-relay/ReactRelayContext","react-relay/assertFragmentMap","mapObject","react-relay/readContext","react-relay/ReactRelayContainerUtils","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=b("react-relay/ReactRelayContainerUtils").getComponentName,l=b("react-relay/ReactRelayContainerUtils").getContainerName,m=b("relay-runtime").getFragment;function a(a,c,d){var e=l(a);b("react-relay/assertFragmentMap")(k(a),c);c=(i||(i=b("mapObject")))(c,m);var f=d(a,c);f.displayName=e;function h(a,c){var d=b("react-relay/readContext")(b("react-relay/ReactRelayContext"));d!=null||g(0,18241,e,e);return j.jsx(f,babelHelpers["extends"]({},a,{__relayContext:d,componentRef:a.componentRef||c}))}h.displayName=e;d=j.forwardRef(h);return d}e.exports=a}),null);
__d("react-relay/getRootVariablesForFragments",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";var g=b("relay-runtime").getSelector;function a(a,b){var c={};Object.keys(a).forEach(function(d){var e=a[d];d=b[d];e=g(e,d);e=e!=null&&e.kind==="PluralReaderSelector"?(d=(d=e.selectors[0])==null?void 0:d.owner.variables)!=null?d:{}:(d=e==null?void 0:e.owner.variables)!=null?d:{};c=babelHelpers["extends"]({},c,e)});return c}e.exports=a}),null);
__d("react-relay/ReactRelayFragmentContainer",["react","areEqual","react-relay/buildReactRelayContainer","react-relay/getRootVariablesForFragments","react-relay/ReactRelayContainerUtils","react-relay/RelayContext","relay-runtime"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=b("react-relay/ReactRelayContainerUtils").getContainerName,k=b("react-relay/RelayContext").assertRelayContext,l=b("relay-runtime").createFragmentSpecResolver,m=b("relay-runtime").getDataIDsFromObject,n=b("relay-runtime").isScalarAndEqual;function o(a,c){var d,e,f=j(a);return e=d=function(d){babelHelpers.inheritsLoose(e,d);function e(a){var b;b=d.call(this,a)||this;b.$3=function(){var a=b.state.resolver;b.setState(function(b){return a===b.resolver?{data:b.resolver.resolve(),relayProp:p(b.relayProp.environment)}:null})};var e=k(a.__relayContext),g=l(e,f,c,a);b.state={data:g.resolve(),prevProps:a,prevPropsContext:e,relayProp:p(e.environment),resolver:g};return b}e.getDerivedStateFromProps=function(a,d){var e=d.prevProps,g=k(a.__relayContext);e=m(c,e);var i=m(c,a),j=d.resolver;if(d.prevPropsContext.environment!==g.environment||!(h||(h=b("areEqual")))(e,i)){j=l(g,f,c,a);return{data:j.resolve(),prevPropsContext:g,prevProps:a,relayProp:p(g.environment),resolver:j}}else{j.setProps(a);e=j.resolve();if(e!==d.data)return{data:e,prevProps:a,prevPropsContext:g,relayProp:p(g.environment)}}return null};var g=e.prototype;g.componentDidMount=function(){this.$1(),this.$2()};g.componentDidUpdate=function(a,b){this.state.resolver!==b.resolver&&(b.resolver.dispose(),this.$1()),this.$2()};g.componentWillUnmount=function(){this.state.resolver.dispose()};g.shouldComponentUpdate=function(a,b){if(b.data!==this.state.data)return!0;var d=Object.keys(a);for(var e=0;e<d.length;e++){var f=d[e];if(f==="__relayContext"){if(b.prevPropsContext.environment!==this.state.prevPropsContext.environment)return!0}else if(!Object.prototype.hasOwnProperty.call(c,f)&&!n(a[f],this.props[f]))return!0}return!1};g.$2=function(){var a=this.state,b=a.data;a=a.resolver;a=a.resolve();b!==a&&this.setState({data:a})};g.$1=function(){var a=this.state.resolver;a.setCallback(this.$3)};g.render=function(){var b=this.props,c=b.componentRef;b.__relayContext;b=babelHelpers.objectWithoutPropertiesLoose(b,["componentRef","__relayContext"]);return i.createElement(a,babelHelpers["extends"]({},b,this.state.data,{ref:c,relay:this.state.relayProp}))};return e}(i.Component),d.displayName=f,e}function p(a){return{environment:a}}function a(a,c){return b("react-relay/buildReactRelayContainer")(a,c,o)}e.exports={createContainer:a}}),null);
__d("react-relay/ReactRelayLocalQueryRenderer",["react","react-relay/ReactRelayContext","relay-runtime","areEqual"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=i.useLayoutEffect,k=i.useState,l=i.useRef,m=i.useMemo,n=b("relay-runtime").createOperationDescriptor;c=b("relay-runtime").deepFreeze;var o=b("relay-runtime").getRequest;function p(a){var c=i.useRef(a);(h||(h=b("areEqual")))(c.current,a)||(c.current=a);return c.current}function a(a){var c=a.environment,d=a.query,e=a.variables;a=a.render;var f=p(e),g=m(function(){var a=o(d);return n(a,f)},[d,f]);e=m(function(){return{environment:c}},[c]);var h=l(null),q=k(null),r=q[1],s=l(null);q=m(function(){c.check(g);var a=c.lookup(g.fragment);h.current=a.data;var b=c.retain(g),d=c.subscribe(a,function(a){h.current=a.data,r(h.current)}),e=!1;function f(){e||(e=!0,s.current=null,b.dispose(),d.dispose())}s.current&&s.current();s.current=f;return a},[c,g]);j(function(){var a=s.current;return function(){a&&a()}},[q]);return i.jsx(b("react-relay/ReactRelayContext").Provider,{value:e,children:a({props:h.current})})}e.exports=a}),null);
__d("react-relay/ReactRelayQueryFetcher",["invariant","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=b("relay-runtime").isRelayModernEnvironment,i=b("relay-runtime").__internal.fetchQuery;a=function(){function a(a){this.$4=[],this.$8=!1,a!=null&&(this.$7=a.cacheSelectionReference,this.$4=a.selectionReferences)}var b=a.prototype;b.getSelectionReferences=function(){return{cacheSelectionReference:this.$7,selectionReferences:this.$4}};b.lookupInStore=function(a,b,c){if((c==="store-and-network"||c==="store-or-network")&&a.check(b).status==="available"){this.$9(a,b);return a.lookup(b.fragment)}return null};b.execute=function(a){var b=this,c=a.environment,d=a.operation,e=a.cacheConfig;a=a.preservePreviousReferences;var f=a===void 0?!1:a,g=c.retain(d);a=e!=null?{networkCacheConfig:e}:{};var j=function(){b.$4=b.$4.concat(g)},k=function(){f||b.disposeSelectionReferences(),b.$4=b.$4.concat(g)},l=function(){b.$4=b.$4.concat(g)};return!h(c)?c.execute({operation:d,cacheConfig:e})["do"]({error:j,complete:k,unsubscribe:l}):i(c,d,a)["do"]({error:j,complete:k,unsubscribe:l})};b.setOnDataChange=function(a){this.$1||g(0,4542),typeof a==="function"&&(this.$1.onDataChangeCallbacks=this.$1.onDataChangeCallbacks||[],this.$1.onDataChangeCallbacks.push(a),this.$8&&(this.$6!=null?a({error:this.$6}):this.$5!=null&&a({snapshot:this.$5})))};b.fetch=function(a,b){var c=this,d=a.cacheConfig,e=a.environment,f=a.operation;a=a.onDataChange;var g=!1,h;this.disposeRequest();var i=this.$1&&this.$1.onDataChangeCallbacks;this.$1={cacheConfig:d,environment:e,onDataChangeCallbacks:i||[],operation:f};a&&this.$1.onDataChangeCallbacks.indexOf(a)===-1&&this.$1.onDataChangeCallbacks.push(a);var j=this.execute({environment:e,operation:f,cacheConfig:(i=b)!=null?i:d})["finally"](function(){c.$2=null}).subscribe({next:function(){c.$8=!0,c.$6=null,c.$10({notifyFirstResult:g})},error:function(a){c.$8=!0;c.$6=a;c.$5=null;var b=c.$1&&c.$1.onDataChangeCallbacks;g?b&&b.forEach(function(b){b({error:a})}):h=a}});this.$2={dispose:function(){j.unsubscribe()}};g=!0;if(h)throw h;return this.$5};b.retry=function(a){this.$1||g(0,4543);return this.fetch({cacheConfig:this.$1.cacheConfig,environment:this.$1.environment,operation:this.$1.operation,onDataChange:null},a)};b.dispose=function(){this.disposeRequest(),this.disposeSelectionReferences()};b.disposeRequest=function(){this.$6=null,this.$5=null,this.$2&&this.$2.dispose(),this.$3&&(this.$3.dispose(),this.$3=null)};b.$9=function(a,b){this.$11(),this.$7=a.retain(b)};b.$11=function(){this.$7&&this.$7.dispose(),this.$7=null};b.disposeSelectionReferences=function(){this.$11(),this.$4.forEach(function(a){return a.dispose()}),this.$4=[]};b.$10=function(a){var b=this;a=a.notifyFirstResult;this.$1||g(0,4544);var c=this.$1,d=c.environment,e=c.onDataChangeCallbacks;c=c.operation;if(this.$5)return;this.$5=d.lookup(c.fragment);this.$3=d.subscribe(this.$5,function(a){if(b.$1!=null){var c=b.$1.onDataChangeCallbacks;Array.isArray(c)&&c.forEach(function(b){return b({snapshot:a})})}});if(this.$5&&a&&Array.isArray(e)){var f=this.$5;e.forEach(function(a){return a({snapshot:f})})}};return a}();e.exports=a}),null);
__d("react-relay/ReactRelayPaginationContainer",["invariant","react","react-relay/ReactRelayContext","react-relay/ReactRelayQueryFetcher","areEqual","react-relay/buildReactRelayContainer","react-relay/getRootVariablesForFragments","warning","react-relay/ReactRelayContainerUtils","react-relay/RelayContext","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=b("react-relay/ReactRelayContainerUtils").getComponentName,l=b("react-relay/ReactRelayContainerUtils").getContainerName,m=b("react-relay/RelayContext").assertRelayContext,n=b("relay-runtime").ConnectionInterface,o=b("relay-runtime").Observable,p=b("relay-runtime").createFragmentSpecResolver,q=b("relay-runtime").createOperationDescriptor,r=b("relay-runtime").getDataIDsFromObject,s=b("relay-runtime").getRequest;b("relay-runtime").getSelector;var t=b("relay-runtime").getVariablesFromObject,u=b("relay-runtime").isScalarAndEqual,v="forward";function w(a){var b=a.path;b||g(0,1219);return function(c){c=c[a.fragmentName];for(var d=0;d<b.length;d++){if(!c||typeof c!=="object")return null;c=c[b[d]]}return c}}function x(a){var b=a.count;b||g(0,1220);return function(a,c){return babelHelpers["extends"]({},a,(a={},a[b]=c,a))}}function y(a){var b=null,c=!1;for(var d in a){var e=a[d],f=e.metadata&&e.metadata.connection;e.metadata!==void 0&&(c=!0);f&&(f.length===1||g(0,1221,d,f.length),b&&g(0,1222),b=babelHelpers["extends"]({},f[0],{fragmentName:d}))}!c||b!==null||g(0,1223);return b||{}}function z(a){return typeof a==="function"?{error:a,complete:a,unsubscribe:function(b){typeof a==="function"&&a()}}:a||{}}function A(a,c,d){var e,f=k(a),h=l(a),A=y(c),B=d.getConnectionFromProps||w(A),C=d.direction||A.direction;C||g(0,1224);var D=d.getFragmentVariables||x(A);return e=A=function(e){babelHelpers.inheritsLoose(k,e);function k(a){var d;d=e.call(this,a)||this;d.$8=function(){d.setState({data:d.$4.resolve()})};d.$11=function(){var a=d.$15();return!!(a&&a.hasMore&&a.cursor)};d.$12=function(){return!!d.$2};d.$14=function(a,b,c){if(!d.$16("refetchConnection"))return{dispose:function(){}};d.$3=c;c={count:a,cursor:null,totalCount:a};a=d.$17(c,z(b),{force:!0});return{dispose:a.unsubscribe}};d.$13=function(a,c,e){if(!d.$16("loadMore"))return{dispose:function(){}};var f=z(c),g=d.$15();if(!g){o.create(function(a){return a.complete()}).subscribe(f);return null}var h=g.edgeCount+a;if(e&&e.force)return d.$14(h,c);c=n.get();var i=c.END_CURSOR;c=c.START_CURSOR;g=g.cursor;b("warning")(g!=null&&g!=="","ReactRelayPaginationContainer: Cannot `loadMore` without valid `%s` (got `%s`)",C===v?i:c,g);i={count:a,cursor:g,totalCount:h};c=d.$17(i,f,e);return{dispose:c.unsubscribe}};var f=m(a.__relayContext);d.$1=!1;d.$2=null;d.$3=null;d.$4=p(f,h,c,a,d.$8);d.state={data:d.$4.resolve(),prevContext:f,contextForChildren:f,relayProp:d.$9(f)};d.$6=!1;d.$7=!1;return d}var l=k.prototype;l.UNSAFE_componentWillReceiveProps=function(a){var d=m(a.__relayContext),e=r(c,this.props),f=r(c,a),g=b("react-relay/getRootVariablesForFragments")(c,this.props),j=b("react-relay/getRootVariablesForFragments")(c,a);d.environment!==this.state.prevContext.environment||!(i||(i=b("areEqual")))(g,j)||!(i||(i=b("areEqual")))(e,f)?(this.$10(),this.$4=p(d,h,c,a,this.$8),this.setState({prevContext:d,contextForChildren:d,relayProp:this.$9(d)})):this.$7||this.$4.setProps(a);g=this.$4.resolve();g!==this.state.data&&this.setState({data:g})};l.componentWillUnmount=function(){this.$6=!0,this.$10()};l.shouldComponentUpdate=function(a,b){if(b.data!==this.state.data||b.relayProp!==this.state.relayProp)return!0;var d=Object.keys(a);for(var e=0;e<d.length;e++){var f=d[e];if(f==="__relayContext"){if(b.prevContext.environment!==this.state.prevContext.environment)return!0}else if(!Object.prototype.hasOwnProperty.call(c,f)&&!u(a[f],this.props[f]))return!0}return!1};l.$9=function(a){return{hasMore:this.$11,isLoading:this.$12,loadMore:this.$13,refetchConnection:this.$14,environment:a.environment}};l.$15=function(){var a=this.props;a.componentRef;a=babelHelpers.objectWithoutPropertiesLoose(a,["componentRef"]);a=babelHelpers["extends"]({},a,this.state.data);a=B(a);if(a==null)return null;var c=n.get(),d=c.EDGES,e=c.PAGE_INFO,h=c.HAS_NEXT_PAGE,i=c.HAS_PREV_PAGE,j=c.END_CURSOR;c=c.START_CURSOR;typeof a==="object"||g(0,1225,f,d,e,a);var k=a[d];a=a[e];if(k==null||a==null)return null;Array.isArray(k)||g(0,1226,f,d,k);typeof a==="object"||g(0,1227,f,e,a);d=C===v?a[h]:a[i];a=C===v?a[j]:a[c];if(typeof d!=="boolean"||k.length!==0&&typeof a==="undefined"){b("warning")(!1,"ReactRelayPaginationContainer: Cannot paginate without %s fields in `%s`. Be sure to fetch %s (got `%s`) and %s (got `%s`).",e,f,C===v?h:i,d,C===v?j:c,a);return null}return{cursor:a,edgeCount:k.length,hasMore:d}};l.$18=function(){this.$5||(this.$5=new(b("react-relay/ReactRelayQueryFetcher"))());return this.$5};l.$16=function(a){if(this.$6){b("warning")(!1,"ReactRelayPaginationContainer: Unexpected call of `%s` on unmounted container `%s`. It looks like some instances of your container still trying to fetch data but they already unmounted. Please make sure you clear all timers, intervals, async calls, etc that may trigger `%s` call.",a,h,a);return!1}return!0};l.$17=function(a,e,h){var j=this,k=m(this.props.__relayContext);k=k.environment;var l=this.props;l.componentRef;l.__relayContext;l=babelHelpers.objectWithoutPropertiesLoose(l,["componentRef","__relayContext"]);var n=babelHelpers["extends"]({},l,this.state.data),p,r=b("react-relay/getRootVariablesForFragments")(c,l);p=t(c,l);p=babelHelpers["extends"]({},r,p,this.$3);l=d.getVariables(n,{count:a.count,cursor:a.cursor},p);typeof l==="object"&&l!==null||g(0,1228,l,f);l=babelHelpers["extends"]({},l,this.$3);p=babelHelpers["extends"]({},l,p);r=h?{force:!!h.force}:void 0;r!=null&&(h==null?void 0:h.metadata)!=null&&(r.metadata=h==null?void 0:h.metadata);n=s(d.query);var u=q(n,l),v=null;this.$2&&this.$2.unsubscribe();this.$7=!0;var w=function(c,d){c=j.$4.resolve();j.$4.setVariables(D(p,a.totalCount),u.request.node);var e=j.$4.resolve();!(i||(i=b("areEqual")))(c,e)?j.setState({data:e,contextForChildren:{environment:j.props.__relayContext.environment}},d):d()};h=function(){j.$2===v&&(j.$2=null,j.$1=!1)};this.$1=!0;v=this.$18().execute({environment:k,operation:u,cacheConfig:r,preservePreviousReferences:!0}).mergeMap(function(a){return o.create(function(b){w(a,function(){b.next(),b.complete()})})})["do"]({error:h,complete:h,unsubscribe:h}).subscribe(e||{});this.$2=this.$1?v:null;return v};l.$10=function(){this.$4.dispose(),this.$3=null,this.$7=!1,this.$2&&(this.$2.unsubscribe(),this.$2=null,this.$1=!1),this.$5&&this.$5.dispose()};l.render=function(){var c=this.props,d=c.componentRef;c.__relayContext;c=babelHelpers.objectWithoutPropertiesLoose(c,["componentRef","__relayContext"]);return j.jsx(b("react-relay/ReactRelayContext").Provider,{value:this.state.contextForChildren,children:j.jsx(a,babelHelpers["extends"]({},c,this.state.data,{ref:d,relay:this.state.relayProp}))})};return k}(j.Component),A.displayName=h,e}function a(a,c,d){return b("react-relay/buildReactRelayContainer")(a,c,function(a,b){return A(a,b,d)})}e.exports={createContainer:a}}),null);
__d("react-relay/ReactRelayQueryRenderer",["react","react-relay/ReactRelayContext","react-relay/ReactRelayQueryFetcher","areEqual","relay-runtime"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=b("relay-runtime").createOperationDescriptor;a=b("relay-runtime").deepFreeze;var k=b("relay-runtime").getRequest,l={};c=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;var e={handleDataChange:null,handleRetryAfterError:null},f;if(c.query){var g=c.query;g=k(g);f=p(g.params,c.variables);g=l[f]?l[f].queryFetcher:new(b("react-relay/ReactRelayQueryFetcher"))()}else g=new(b("react-relay/ReactRelayQueryFetcher"))();d.state=babelHelpers["extends"]({prevPropsEnvironment:c.environment,prevPropsVariables:c.variables,prevQuery:c.query,queryFetcher:g,retryCallbacks:e},q(c,g,e,f));return d}c.getDerivedStateFromProps=function(a,c){if(c.prevQuery!==a.query||c.prevPropsEnvironment!==a.environment||!(h||(h=b("areEqual")))(c.prevPropsVariables,a.variables)){var d=a.query,e=c.queryFetcher.getSelectionReferences();c.queryFetcher.disposeRequest();if(d){d=k(d);d=p(d.params,a.variables);d=l[d]?l[d].queryFetcher:new(b("react-relay/ReactRelayQueryFetcher"))(e)}else d=new(b("react-relay/ReactRelayQueryFetcher"))(e);return babelHelpers["extends"]({prevQuery:a.query,prevPropsEnvironment:a.environment,prevPropsVariables:a.variables,queryFetcher:d},q(a,d,c.retryCallbacks))}return null};var d=c.prototype;d.componentDidMount=function(){var a=this,b=this.state,c=b.retryCallbacks,d=b.queryFetcher;b=b.requestCacheKey;b&&delete l[b];c.handleDataChange=function(b){var c=b.error==null?null:b.error,d=b.snapshot==null?null:b.snapshot;a.setState(function(a){var b=a.requestCacheKey;b&&delete l[b];return d===a.snapshot&&c===a.error?null:{renderProps:o(c,d,a.queryFetcher,a.retryCallbacks),snapshot:d,requestCacheKey:null}})};c.handleRetryAfterError=function(b){return a.setState(function(a){a=a.requestCacheKey;a&&delete l[a];return{renderProps:m(),requestCacheKey:null}})};this.props.query&&d.setOnDataChange(c.handleDataChange)};d.componentDidUpdate=function(){var a=this.state.requestCacheKey;a&&(delete l[a],delete this.state.requestCacheKey)};d.componentWillUnmount=function(){this.state.queryFetcher.dispose()};d.shouldComponentUpdate=function(a,b){return a.render!==this.props.render||b.renderProps!==this.state.renderProps};d.render=function(){var a=this.state,c=a.renderProps;a=a.relayContext;return i.jsx(b("react-relay/ReactRelayContext").Provider,{value:a,children:this.props.render(c)})};return c}(i.Component);function m(){return{error:null,props:null,retry:null}}function n(){return{error:null,props:{},retry:null}}function o(a,b,c,d){return{error:a?a:null,props:b?b.data:null,retry:function(b){b=c.retry(b);b&&typeof d.handleDataChange==="function"?d.handleDataChange({snapshot:b}):a&&typeof d.handleRetryAfterError==="function"&&d.handleRetryAfterError(a)}}}function p(a,b){return JSON.stringify({id:a.cacheID?a.cacheID:a.id,variables:b})}function q(a,b,c,d){var e=a.environment,f=a.query,g=a.variables;e=e;if(f){f=k(f);g=j(f,g);var h={environment:e};if(typeof d==="string"&&l[d]){var i=l[d].snapshot;if(i)return{error:null,relayContext:h,renderProps:o(null,i,b,c),snapshot:i,requestCacheKey:d};else return{error:null,relayContext:h,renderProps:m(),snapshot:null,requestCacheKey:d}}try{i=b.lookupInStore(e,g,a.fetchPolicy);g=b.fetch({cacheConfig:a.cacheConfig,environment:e,onDataChange:c.handleDataChange,operation:g});g=g||i;d=d||p(f.params,a.variables);l[d]={queryFetcher:b,snapshot:g};return!g?{error:null,relayContext:h,renderProps:m(),snapshot:null,requestCacheKey:d}:{error:null,relayContext:h,renderProps:o(null,g,b,c),snapshot:g,requestCacheKey:d}}catch(a){return{error:a,relayContext:h,renderProps:o(a,null,b,c),snapshot:null,requestCacheKey:d}}}else{b.dispose();i={environment:e};return{error:null,relayContext:i,renderProps:n(),requestCacheKey:null}}}e.exports=c}),null);
__d("react-relay/ReactRelayRefetchContainer",["react","react-relay/ReactRelayContext","react-relay/ReactRelayQueryFetcher","areEqual","react-relay/buildReactRelayContainer","react-relay/getRootVariablesForFragments","warning","react-relay/ReactRelayContainerUtils","react-relay/RelayContext","relay-runtime"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=b("react-relay/ReactRelayContainerUtils").getContainerName,k=b("react-relay/RelayContext").assertRelayContext,l=b("relay-runtime").Observable,m=b("relay-runtime").createFragmentSpecResolver,n=b("relay-runtime").createOperationDescriptor,o=b("relay-runtime").getDataIDsFromObject,p=b("relay-runtime").getRequest;b("relay-runtime").getSelector;var q=b("relay-runtime").getVariablesFromObject,r=b("relay-runtime").isScalarAndEqual;function s(a,c,d){var e,f,g=j(a);return f=e=function(e){babelHelpers.inheritsLoose(f,e);function f(a){var f;f=e.call(this,a)||this;f.$6=function(){var a=f.state.resolver;f.setState(function(b){return a===b.resolver?{data:b.resolver.resolve()}:null})};f.$4=function(a,e,h,i){if(f.$3){b("warning")(!1,"ReactRelayRefetchContainer: Unexpected call of `refetch` on unmounted container `%s`. It looks like some instances of your container still trying to refetch the data but they already unmounted. Please make sure you clear all timers, intervals, async calls, etc that may trigger `refetch`.",g);return{dispose:function(){}}}var j=k(f.props.__relayContext);j=j.environment;var m=b("react-relay/getRootVariablesForFragments")(c,f.props);a=typeof a==="function"?a(f.$7()):a;a=babelHelpers["extends"]({},m,a);var o=e?babelHelpers["extends"]({},a,e):a;m=i?{force:!!i.force}:void 0;m!=null&&(i==null?void 0:i.metadata)!=null&&(m.metadata=i==null?void 0:i.metadata);var q=typeof h==="function"?{next:h,error:h}:h||{};e=p(d);var r=n(e,a);f.state.localVariables=a;f.$1&&f.$1.unsubscribe();var s;h=f.$8().lookupInStore(j,r,i==null?void 0:i.fetchPolicy);if(h!=null){f.state.resolver.setVariables(o,r.request.node);f.setState(function(a){return{data:a.resolver.resolve(),contextForChildren:{environment:f.props.__relayContext.environment}}},function(){q.next&&q.next(),q.complete&&q.complete()});return{dispose:function(){}}}f.$8().execute({environment:j,operation:r,cacheConfig:m,preservePreviousReferences:!0}).mergeMap(function(a){f.state.resolver.setVariables(o,r.request.node);return l.create(function(a){return f.setState(function(a){return{data:a.resolver.resolve(),contextForChildren:{environment:f.props.__relayContext.environment}}},function(){a.next(),a.complete()})})})["finally"](function(){f.$1===s&&(f.$1=null)}).subscribe(babelHelpers["extends"]({},q,{start:function(a){f.$1=s=a,q.start&&q.start(a)}}));return{dispose:function(){s&&s.unsubscribe()}}};var h=k(a.__relayContext);f.$1=null;var i=m(h,g,c,a);f.state={data:i.resolve(),localVariables:null,prevProps:a,prevPropsContext:h,contextForChildren:h,relayProp:t(h.environment,f.$4),resolver:i};f.$3=!1;return f}var j=f.prototype;j.componentDidMount=function(){this.$5()};j.componentDidUpdate=function(a,b){this.state.resolver!==b.resolver&&(b.resolver.dispose(),this.$2&&this.$2.dispose(),this.$1&&this.$1.unsubscribe(),this.$5())};f.getDerivedStateFromProps=function(a,d){var e=d.prevProps,f=k(a.__relayContext),i=o(c,e),j=o(c,a);e=b("react-relay/getRootVariablesForFragments")(c,e);var l=b("react-relay/getRootVariablesForFragments")(c,a),n=d.resolver;if(d.prevPropsContext.environment!==f.environment||!(h||(h=b("areEqual")))(e,l)||!(h||(h=b("areEqual")))(i,j)){n=m(f,g,c,a);return{data:n.resolve(),localVariables:null,prevProps:a,prevPropsContext:f,contextForChildren:f,relayProp:t(f.environment,d.relayProp.refetch),resolver:n}}else d.localVariables||n.setProps(a);e=n.resolve();return e!==d.data?{data:e,prevProps:a}:null};j.componentWillUnmount=function(){this.$3=!0,this.state.resolver.dispose(),this.$2&&this.$2.dispose(),this.$1&&this.$1.unsubscribe()};j.shouldComponentUpdate=function(a,b){if(b.data!==this.state.data||b.relayProp!==this.state.relayProp)return!0;var d=Object.keys(a);for(var e=0;e<d.length;e++){var f=d[e];if(f==="__relayContext"){if(this.state.prevPropsContext.environment!==b.prevPropsContext.environment)return!0}else if(!Object.prototype.hasOwnProperty.call(c,f)&&!r(a[f],this.props[f]))return!0}return!1};j.$5=function(){var a=this.state,b=a.data;a=a.resolver;a.setCallback(this.$6);a=a.resolve();b!==a&&this.setState({data:a})};j.$7=function(){return q(c,this.props)};j.$8=function(){this.$2||(this.$2=new(b("react-relay/ReactRelayQueryFetcher"))());return this.$2};j.render=function(){var c=this.props,d=c.componentRef;c.__relayContext;c=babelHelpers.objectWithoutPropertiesLoose(c,["componentRef","__relayContext"]);var e=this.state,f=e.relayProp;e=e.contextForChildren;return i.jsx(b("react-relay/ReactRelayContext").Provider,{value:e,children:i.jsx(a,babelHelpers["extends"]({},c,this.state.data,{ref:d,relay:f}))})};return f}(i.Component),e.displayName=g,f}function t(a,b){return{environment:a,refetch:b}}function a(a,c,d){return b("react-relay/buildReactRelayContainer")(a,c,function(a,b){return s(a,b,d)})}e.exports={createContainer:a}}),null);
__d("react-relay",["react-relay/ReactRelayContext","react-relay/ReactRelayFragmentContainer","react-relay/ReactRelayLocalQueryRenderer","react-relay/ReactRelayPaginationContainer","react-relay/ReactRelayQueryRenderer","react-relay/ReactRelayRefetchContainer","relay-runtime"],(function(a,b,c,d,e,f){"use strict";e.exports={ConnectionHandler:(a=b("relay-runtime")).ConnectionHandler,QueryRenderer:b("react-relay/ReactRelayQueryRenderer"),LocalQueryRenderer:b("react-relay/ReactRelayLocalQueryRenderer"),MutationTypes:a.MutationTypes,RangeOperations:a.RangeOperations,ReactRelayContext:b("react-relay/ReactRelayContext"),applyOptimisticMutation:a.applyOptimisticMutation,commitLocalUpdate:a.commitLocalUpdate,commitMutation:a.commitMutation,createFragmentContainer:b("react-relay/ReactRelayFragmentContainer").createContainer,createPaginationContainer:b("react-relay/ReactRelayPaginationContainer").createContainer,createRefetchContainer:b("react-relay/ReactRelayRefetchContainer").createContainer,fetchQuery:a.fetchQuery,graphql:a.graphql,readInlineData:a.readInlineData,requestSubscription:a.requestSubscription}}),null);
__d("RelayModern",["RelayFBMutations","RelayFBSubscription","enqueueMutation","react-relay","RelayFBEnvironmentDefinitions","configureRelayForWWW"],(function(a,b,c,d,e,f){"use strict";a=b("enqueueMutation").enqueueMutation;c=b("RelayFBEnvironmentDefinitions").createEnvironment;d=b("RelayFBEnvironmentDefinitions").createEnvironmentFactory;b("configureRelayForWWW")();e.exports=babelHelpers["extends"]({},b("react-relay"),{commitMutation:b("RelayFBMutations").addFBisms(b("react-relay").commitMutation),enqueueMutation:b("RelayFBMutations").addFBisms(a),requestSubscription:b("RelayFBSubscription").addFBisms(b("react-relay").requestSubscription),createEnvironment:c,createEnvironmentFactory:d})}),null);
__d("jsbi",[],(function(a,b,c,d,e,f){(function(a,b){"object"==typeof f&&"undefined"!=typeof e?e.exports=b():"function"==typeof define&&define.amd?define(b):a.JSBI=b()})(this,function(){"use strict";function a(b){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a(b)}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&g(a,b)}function f(a){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},f(a)}function g(a,b){return g=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},g(a,b)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function i(){return i=h()?Reflect.construct:function(a,b,c){var d=[null];d.push.apply(d,b);b=Function.bind.apply(a,d);a=new b();return c&&g(a,c.prototype),a},i.apply(null,arguments)}function j(a){return-1!==Function.toString.call(a).indexOf("[native code]")}function k(a){var b="function"==typeof Map?new Map():void 0;return k=function(a){function c(){return i(a,arguments,f(this).constructor)}if(null===a||!j(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),g(c,a)},k(a)}function l(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function m(a,b){return b&&("object"==typeof b||"function"==typeof b)?b:l(a)}var n=function(c){var h=Math.abs,i=Math.max,j=Math.imul,k=Math.clz32;function g(a,c){if(b(this,g),a>g.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return a=m(this,f(g).call(this,a)),a.sign=c,a}return e(g,c),d(g,[{key:"toDebugString",value:function(){var a=["BigInt["],b=!0,c=!1,d=void 0;try{for(var e,e,f=this[Symbol.iterator]();!(b=(e=f.next()).done);b=!0)e=e.value,a.push((e?(e>>>0).toString(16):e)+", ")}catch(a){c=!0,d=a}finally{try{b||null==f["return"]||f["return"]()}finally{if(c)throw d}}return a.push("]"),a.join("")}},{key:"toString",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;if(2>a||36<a)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(a&a-1)?g.__toStringBasePowerOfTwo(this,a):g.__toStringGeneric(this,a,!1)}},{key:"__copy",value:function(){for(var a=new g(this.length,this.sign),b=0;b<this.length;b++)a[b]=this[b];return a}},{key:"__trim",value:function(){for(var a=this.length,b=this[a-1];0===b;)a--,b=this[a-1],this.pop();return 0===a&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var a=0;a<this.length;a++)this[a]=0}},{key:"__clzmsd",value:function(){return k(this[this.length-1])}},{key:"__inplaceMultiplyAdd",value:function(a,b,c){c>this.length&&(c=this.length);for(var d=65535&a,a=a>>>16,e=0,f=65535&b,b=b>>>16,i=0;i<c;i++){var n=this.__digit(i),m=65535&n;n=n>>>16;var o=j(m,d);m=j(m,a);var p=j(n,d);n=j(n,a);var q=f+(65535&o);o=b+e+(q>>>16)+(o>>>16)+(65535&m)+(65535&p);f=(m>>>16)+(p>>>16)+(65535&n)+(o>>>16),e=f>>>16,f&=65535,b=n>>>16;this.__setDigit(i,65535&q|o<<16)}if(0!==e||0!==f||0!==b)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(a,b,c){for(var d,e=0,f=0;f<c;f++)d=this.__halfDigit(b+f)+a.__halfDigit(f)+e,e=d>>>16,this.__setHalfDigit(b+f,d);return e}},{key:"__inplaceSub",value:function(a,b,c){var d=0;if(1&b){b>>=1;for(var e=this.__digit(b),f=65535&e,k=0;k<c-1>>>1;k++){var l=a.__digit(k),m=(e>>>16)-(65535&l)-d;d=1&m>>>16,this.__setDigit(b+k,m<<16|65535&f),e=this.__digit(b+k+1),f=(65535&e)-(l>>>16)-d,d=1&f>>>16}m=a.__digit(k);l=(e>>>16)-(65535&m)-d;d=1&l>>>16,this.__setDigit(b+k,l<<16|65535&f);if(b+k+1>=this.length)throw new RangeError("out of bounds");0==(1&c)&&(e=this.__digit(b+k+1),f=(65535&e)-(m>>>16)-d,d=1&f>>>16,this.__setDigit(b+a.length,4294901760&e|65535&f))}else{b>>=1;for(var l=0;l<a.length-1;l++){k=this.__digit(b+l);m=a.__digit(l);e=(65535&k)-(65535&m)-d;d=1&e>>>16;f=(k>>>16)-(m>>>16)-d;d=1&f>>>16,this.__setDigit(b+l,f<<16|65535&e)}k=this.__digit(b+l);m=a.__digit(l);f=(65535&k)-(65535&m)-d;d=1&f>>>16;e=0;0==(1&c)&&(e=(k>>>16)-(m>>>16)-d,d=1&e>>>16),this.__setDigit(b+l,e<<16|65535&f)}return d}},{key:"__inplaceRightShift",value:function(a){if(0!==a){for(var b,c=this.__digit(0)>>>a,d=this.length-1,e=0;e<d;e++)b=this.__digit(e+1),this.__setDigit(e,b<<32-a|c),c=b>>>a;this.__setDigit(d,c)}}},{key:"__digit",value:function(a){return this[a]}},{key:"__unsignedDigit",value:function(a){return this[a]>>>0}},{key:"__setDigit",value:function(a,b){this[a]=0|b}},{key:"__setDigitGrow",value:function(a,b){this[a]=0|b}},{key:"__halfDigitLength",value:function(){var a=this.length;return 65535>=this.__unsignedDigit(a-1)?2*a-1:2*a}},{key:"__halfDigit",value:function(a){return 65535&this[a>>>1]>>>((1&a)<<4)}},{key:"__setHalfDigit",value:function(a,b){var c=a>>>1,d=this.__digit(c);a=1&a?65535&d|b<<16:4294901760&d|65535&b;this.__setDigit(c,a)}}],[{key:"BigInt",value:function(b){var c=Math.floor,d=Number.isFinite;if("number"==typeof b){if(0===b)return g.__zero();if((0|b)===b)return 0>b?g.__oneDigit(-b,!0):g.__oneDigit(b,!1);if(!d(b)||c(b)!==b)throw new RangeError("The number "+b+" cannot be converted to BigInt because it is not an integer");return g.__fromDouble(b)}if("string"==typeof b){d=g.__fromString(b);if(null===d)throw new SyntaxError("Cannot convert "+b+" to a BigInt");return d}if("boolean"==typeof b)return!0===b?g.__oneDigit(1,!1):g.__zero();if("object"===a(b)){if(b.constructor===g)return b;c=g.__toPrimitive(b);return g.BigInt(c)}throw new TypeError("Cannot convert "+b+" to a BigInt")}},{key:"toNumber",value:function(a){var b=a.length;if(0===b)return 0;if(1===b){var c=a.__unsignedDigit(0);return a.sign?-c:c}c=a.__digit(b-1);var d=k(c),e=32*b-d;if(1024<e)return a.sign?-Infinity:1/0;e=e-1;c=c;b=b-1;d=d+1;var f=32===d?0:c<<d;f>>>=12;var h=d-12,i=12<=d?0:c<<20+d;d=20+d;0<h&&0<b&&(b--,c=a.__digit(b),f|=c>>>32-h,i=c<<h,d=h),0<d&&0<b&&(b--,c=a.__digit(b),i|=c>>>32-d,d-=32);h=g.__decideRounding(a,d,b,c);if((1===h||0===h&&1==(1&i))&&(i=i+1>>>0,0===i&&(f++,0!=f>>>20&&(f=0,e++,1023<e))))return a.sign?-Infinity:1/0;d=a.sign?-2147483648:0;return e=e+1023<<20,g.__kBitConversionInts[1]=d|e|f,g.__kBitConversionInts[0]=i,g.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(a){if(0===a.length)return a;var b=a.__copy();return b.sign=!a.sign,b}},{key:"bitwiseNot",value:function(a){return a.sign?g.__absoluteSubOne(a).__trim():g.__absoluteAddOne(a,!0)}},{key:"exponentiate",value:function(a,b){if(b.sign)throw new RangeError("Exponent must be positive");if(0===b.length)return g.__oneDigit(1,!1);if(0===a.length)return a;if(1===a.length&&1===a.__digit(0))return a.sign&&0==(1&b.__digit(0))?g.unaryMinus(a):a;if(1<b.length)throw new RangeError("BigInt too big");b=b.__unsignedDigit(0);if(1===b)return a;if(b>=g.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===a.length&&2===a.__digit(0)){var c=1+(b>>>5),d=a.sign&&0!=(1&b);d=new g(c,d);d.__initializeDigits();var e=1<<(31&b);return d.__setDigit(c-1,e),d}c=null;e=a;for(0!=(1&b)&&(c=a),b>>=1;0!==b;b>>=1)e=g.multiply(e,e),0!=(1&b)&&(null===c?c=e:c=g.multiply(c,e));return c}},{key:"multiply",value:function(a,b){if(0===a.length)return a;if(0===b.length)return b;var c=a.length+b.length;32<=a.__clzmsd()+b.__clzmsd()&&c--;c=new g(c,a.sign!==b.sign);c.__initializeDigits();for(var d=0;d<a.length;d++)g.__multiplyAccumulate(b,a.__digit(d),c,d);return c.__trim()}},{key:"divide",value:function(a,b){if(0===b.length)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(a,b))return g.__zero();var c=a.sign!==b.sign,d=b.__unsignedDigit(0);if(1===b.length&&65535>=d){if(1===d)return c===a.sign?a:g.unaryMinus(a);d=g.__absoluteDivSmall(a,d,null)}else d=g.__absoluteDivLarge(a,b,!0,!1);return d.sign=c,d.__trim()}},{key:"remainder",value:function(a,b){if(0===b.length)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(a,b))return a;var c=b.__unsignedDigit(0);if(1===b.length&&65535>=c){if(1===c)return g.__zero();c=g.__absoluteModSmall(a,c);return 0===c?g.__zero():g.__oneDigit(c,a.sign)}c=g.__absoluteDivLarge(a,b,!1,!0);return c.sign=a.sign,c.__trim()}},{key:"add",value:function(a,b){var c=a.sign;return c===b.sign?g.__absoluteAdd(a,b,c):0<=g.__absoluteCompare(a,b)?g.__absoluteSub(a,b,c):g.__absoluteSub(b,a,!c)}},{key:"subtract",value:function(a,b){var c=a.sign;return c===b.sign?0<=g.__absoluteCompare(a,b)?g.__absoluteSub(a,b,c):g.__absoluteSub(b,a,!c):g.__absoluteAdd(a,b,c)}},{key:"leftShift",value:function(a,b){return 0===b.length||0===a.length?a:b.sign?g.__rightShiftByAbsolute(a,b):g.__leftShiftByAbsolute(a,b)}},{key:"signedRightShift",value:function(a,b){return 0===b.length||0===a.length?a:b.sign?g.__leftShiftByAbsolute(a,b):g.__rightShiftByAbsolute(a,b)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(a,b){return 0>g.__compareToBigInt(a,b)}},{key:"lessThanOrEqual",value:function(a,b){return 0>=g.__compareToBigInt(a,b)}},{key:"greaterThan",value:function(a,b){return 0<g.__compareToBigInt(a,b)}},{key:"greaterThanOrEqual",value:function(a,b){return 0<=g.__compareToBigInt(a,b)}},{key:"equal",value:function(a,b){if(a.sign!==b.sign)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a.__digit(c)!==b.__digit(c))return!1;return!0}},{key:"notEqual",value:function(a,b){return!g.equal(a,b)}},{key:"bitwiseAnd",value:function(a,b){if(!a.sign&&!b.sign)return g.__absoluteAnd(a,b).__trim();if(a.sign&&b.sign){var c=i(a.length,b.length)+1;c=g.__absoluteSubOne(a,c);var d=g.__absoluteSubOne(b);return c=g.__absoluteOr(c,d,c),g.__absoluteAddOne(c,!0,c).__trim()}if(a.sign){d=[b,a];a=d[0],b=d[1]}return g.__absoluteAndNot(a,g.__absoluteSubOne(b)).__trim()}},{key:"bitwiseXor",value:function(a,b){if(!a.sign&&!b.sign)return g.__absoluteXor(a,b).__trim();if(a.sign&&b.sign){var c=i(a.length,b.length);c=g.__absoluteSubOne(a,c);var d=g.__absoluteSubOne(b);return g.__absoluteXor(c,d,c).__trim()}d=i(a.length,b.length)+1;if(a.sign){c=[b,a];a=c[0],b=c[1]}c=g.__absoluteSubOne(b,d);return c=g.__absoluteXor(c,a,c),g.__absoluteAddOne(c,!0,c).__trim()}},{key:"bitwiseOr",value:function(a,b){var c=i(a.length,b.length);if(!a.sign&&!b.sign)return g.__absoluteOr(a,b).__trim();if(a.sign&&b.sign){var d=g.__absoluteSubOne(a,c),e=g.__absoluteSubOne(b);return d=g.__absoluteAnd(d,e,d),g.__absoluteAddOne(d,!0,d).__trim()}if(a.sign){e=[b,a];a=e[0],b=e[1]}d=g.__absoluteSubOne(b,c);return d=g.__absoluteAndNot(d,a,d),g.__absoluteAddOne(d,!0,d).__trim()}},{key:"asIntN",value:function(a,b){if(0===b.length)return b;if(0===a)return g.__zero();if(a>=g.__kMaxLengthBits)return b;var c=a+31>>>5;if(b.length<c)return b;var d=b.__unsignedDigit(c-1),e=1<<(31&a-1);if(b.length===c&&d<e)return b;if(!((d&e)===e))return g.__truncateToNBits(a,b);if(!b.sign)return g.__truncateAndSubFromPowerOfTwo(a,b,!0);if(0==(d&e-1)){for(var f=c-2;0<=f;f--)if(0!==b.__digit(f))return g.__truncateAndSubFromPowerOfTwo(a,b,!1);return b.length===c&&d===e?b:g.__truncateToNBits(a,b)}return g.__truncateAndSubFromPowerOfTwo(a,b,!1)}},{key:"asUintN",value:function(a,b){if(0===b.length)return b;if(0===a)return g.__zero();if(b.sign){if(a>g.__kMaxLengthBits)throw new RangeError("BigInt too big");return g.__truncateAndSubFromPowerOfTwo(a,b,!1)}if(a>=g.__kMaxLengthBits)return b;var c=a+31>>>5;if(b.length<c)return b;var d=31&a;if(b.length==c){if(0==d)return b;c=b.__digit(c-1);if(0==c>>>d)return b}return g.__truncateToNBits(a,b)}},{key:"ADD",value:function(a,b){if(a=g.__toPrimitive(a),b=g.__toPrimitive(b),"string"==typeof a)return"string"!=typeof b&&(b=b.toString()),a+b;if("string"==typeof b)return a.toString()+b;if(a=g.__toNumeric(a),b=g.__toNumeric(b),g.__isBigInt(a)&&g.__isBigInt(b))return g.add(a,b);if("number"==typeof a&&"number"==typeof b)return a+b;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(a,b){return g.__compare(a,b,0)}},{key:"LE",value:function(a,b){return g.__compare(a,b,1)}},{key:"GT",value:function(a,b){return g.__compare(a,b,2)}},{key:"GE",value:function(a,b){return g.__compare(a,b,3)}},{key:"EQ",value:function(b,c){for(;;){if(g.__isBigInt(b))return g.__isBigInt(c)?g.equal(b,c):g.EQ(c,b);if("number"==typeof b){if(g.__isBigInt(c))return g.__equalToNumber(c,b);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("string"==typeof b){if(g.__isBigInt(c))return b=g.__fromString(b),null!==b&&g.equal(b,c);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("boolean"==typeof b){if(g.__isBigInt(c))return g.__equalToNumber(c,+b);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("symbol"===a(b)){if(g.__isBigInt(c))return!1;if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("object"===a(b)){if("object"===a(c)&&c.constructor!==g)return b==c;b=g.__toPrimitive(b)}else return b==c}}},{key:"NE",value:function(a,b){return!g.EQ(a,b)}},{key:"__zero",value:function(){return new g(0,!1)}},{key:"__oneDigit",value:function(a,b){b=new g(1,b);return b.__setDigit(0,a),b}},{key:"__decideRounding",value:function(a,b,c,d){if(0<b)return-1;if(0>b)b=-b-1;else{if(0===c)return-1;c--,d=a.__digit(c),b=31}b=1<<b;if(0==(d&b))return-1;if(b-=1,0!=(d&b))return 1;for(;0<c;)if(c--,0!==a.__digit(c))return 1;return 0}},{key:"__fromDouble",value:function(a){g.__kBitConversionDouble[0]=a;var b,c=2047&g.__kBitConversionInts[1]>>>20;c=c-1023;var d=(c>>>5)+1;a=new g(d,0>a);var e=1048575&g.__kBitConversionInts[1]|1048576,f=g.__kBitConversionInts[0],k=20;c=31&c;var n=0;if(c<k){var m=k-c;n=m+32,b=e>>>m,e=e<<32-m|f>>>m,f<<=32-m}else if(c===k)n=32,b=e,e=f;else{m=c-k;n=32-m,b=e<<m|f>>>32-m,e=f<<m}a.__setDigit(d-1,b);for(var c=d-2;0<=c;c--)0<n?(n-=32,b=e,e=f):b=0,a.__setDigit(c,b);return a.__trim()}},{key:"__isWhitespace",value:function(a){return!!(13>=a&&9<=a)||(159>=a?32==a:131071>=a?160==a||5760==a:196607>=a?(a&=131071,10>=a||40==a||41==a||47==a||95==a||4096==a):65279==a)}},{key:"__fromString",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=0,d=a.length,e=0;if(e===d)return g.__zero();for(var f=a.charCodeAt(e);g.__isWhitespace(f);){if(++e===d)return g.__zero();f=a.charCodeAt(e)}if(43===f){if(++e===d)return null;f=a.charCodeAt(e),c=1}else if(45===f){if(++e===d)return null;f=a.charCodeAt(e),c=-1}if(0===b){if(b=10,48===f){if(++e===d)return g.__zero();if(f=a.charCodeAt(e),88===f||120===f){if(b=16,++e===d)return null;f=a.charCodeAt(e)}else if(79===f||111===f){if(b=8,++e===d)return null;f=a.charCodeAt(e)}else if(66===f||98===f){if(b=2,++e===d)return null;f=a.charCodeAt(e)}}}else if(16===b&&48===f){if(++e===d)return g.__zero();if(f=a.charCodeAt(e),88===f||120===f){if(++e===d)return null;f=a.charCodeAt(e)}}for(;48===f;){if(++e===d)return g.__zero();f=a.charCodeAt(e)}var m=d-e,i=g.__kMaxBitsPerChar[b],j=g.__kBitsPerCharTableMultiplier-1;if(m>1073741824/i)return null;var k=i*m+j>>>g.__kBitsPerCharTableShift,l=new g(k+31>>>5,!1),n=10>b?b:10,o=10<b?b-10:0;if(0==(b&b-1)){i>>=g.__kBitsPerCharTableShift;var p=[],q=[],r=!1;do{for(var s,t=0,u=0;;){if(void 0,f-48>>>0<n)s=f-48;else if((32|f)-97>>>0<o)s=(32|f)-87;else{r=!0;break}if(u+=i,t=t<<i|s,++e===d){r=!0;break}if(f=a.charCodeAt(e),32<u+i)break}p.push(t),q.push(u)}while(!r);g.__fillFromParts(l,p,q)}else{l.__initializeDigits();var v=!1,w=0;do{for(var x,y=0,z=1;;){if(void 0,f-48>>>0<n)x=f-48;else if((32|f)-97>>>0<o)x=(32|f)-87;else{v=!0;break}var A=z*b;if(4294967295<A)break;if(z=A,y=y*b+x,w++,++e===d){v=!0;break}f=a.charCodeAt(e)}j=32*g.__kBitsPerCharTableMultiplier-1;var B=i*w+j>>>g.__kBitsPerCharTableShift+5;l.__inplaceMultiplyAdd(z,y,B)}while(!v)}if(e!==d){if(!g.__isWhitespace(f))return null;for(e++;e<d;e++)if(f=a.charCodeAt(e),!g.__isWhitespace(f))return null}return 0!==c&&10!==b?null:(l.sign=-1===c,l.__trim())}},{key:"__fillFromParts",value:function(a,b,c){for(var d=0,e=0,f=0,k=b.length-1;0<=k;k--){var l=b[k],m=c[k];e|=l<<f,f+=m,32===f?(a.__setDigit(d++,e),f=0,e=0):32<f&&(a.__setDigit(d++,e),f-=32,e=l>>>m-f)}if(0!==e){if(d>=a.length)throw new Error("implementation bug");a.__setDigit(d++,e)}for(;d<a.length;d++)a.__setDigit(d,0)}},{key:"__toStringBasePowerOfTwo",value:function(a,b){var c=a.length,d=b-1;d=(85&d>>>1)+(85&d),d=(51&d>>>2)+(51&d),d=(15&d>>>4)+(15&d);d=d;b=b-1;var e=a.__digit(c-1),f=k(e);f=0|(32*c-f+d-1)/d;if(a.sign&&f++,268435456<f)throw new Error("string too long");for(var h=Array(f),f=f-1,l=0,n=0,o=0;o<c-1;o++){var p=a.__digit(o),q=(l|p<<n)&b;h[f--]=g.__kConversionChars[q];q=d-n;for(l=p>>>q,n=32-q;n>=d;)h[f--]=g.__kConversionChars[l&b],l>>>=d,n-=d}p=(l|e<<n)&b;for(h[f--]=g.__kConversionChars[p],l=e>>>d-n;0!==l;)h[f--]=g.__kConversionChars[l&b],l>>>=d;if(a.sign&&(h[f--]="-"),-1!==f)throw new Error("implementation bug");return h.join("")}},{key:"__toStringGeneric",value:function(a,b,c){var d=a.length;if(0===d)return"";if(1===d){var e=a.__unsignedDigit(0).toString(b);return!1===c&&a.sign&&(e="-"+e),e}e=32*d-k(a.__digit(d-1));d=g.__kMaxBitsPerChar[b];d=d-1;e=e*g.__kBitsPerCharTableMultiplier;e+=d-1,e=0|e/d;var f;d=e+1>>1;e=g.exponentiate(g.__oneDigit(b,!1),g.__oneDigit(d,!1));var h=e.__unsignedDigit(0);if(1===e.length&&65535>=h){f=new g(a.length,!1),f.__initializeDigits();for(var i,j=0,l=2*a.length-1;0<=l;l--)i=j<<16|a.__halfDigit(l),f.__setHalfDigit(l,0|i/h),j=0|i%h;i=j.toString(b)}else{h=g.__absoluteDivLarge(a,e,!0,!0);f=h.quotient;l=h.remainder.__trim();i=g.__toStringGeneric(l,b,!0)}f.__trim();for(var j=g.__toStringGeneric(f,b,!0);i.length<d;)i="0"+i;return!1===c&&a.sign&&(j="-"+j),j+i}},{key:"__unequalSign",value:function(a){return a?-1:1}},{key:"__absoluteGreater",value:function(a){return a?-1:1}},{key:"__absoluteLess",value:function(a){return a?1:-1}},{key:"__compareToBigInt",value:function(a,b){var c=a.sign;if(c!==b.sign)return g.__unequalSign(c);a=g.__absoluteCompare(a,b);return 0<a?g.__absoluteGreater(c):0>a?g.__absoluteLess(c):0}},{key:"__compareToNumber",value:function(a,b){if(!0|b){var c=a.sign,d=0>b;if(c!==d)return g.__unequalSign(c);if(0===a.length){if(d)throw new Error("implementation bug");return 0===b?0:-1}if(1<a.length)return g.__absoluteGreater(c);d=h(b);var e=a.__unsignedDigit(0);return e>d?g.__absoluteGreater(c):e<d?g.__absoluteLess(c):0}return g.__compareToDouble(a,b)}},{key:"__compareToDouble",value:function(a,b){if(b!==b)return b;if(b===1/0)return-1;if(b===-Infinity)return 1;var c=a.sign;if(c!==0>b)return g.__unequalSign(c);if(0===b)throw new Error("implementation bug: should be handled elsewhere");if(0===a.length)return-1;g.__kBitConversionDouble[0]=b;b=2047&g.__kBitConversionInts[1]>>>20;if(2047==b)throw new Error("implementation bug: handled elsewhere");b=b-1023;if(0>b)return g.__absoluteGreater(c);var d=a.length,e=a.__digit(d-1),f=k(e),l=32*d-f;b=b+1;if(l<b)return g.__absoluteLess(c);if(l>b)return g.__absoluteGreater(c);b=1048576|1048575&g.__kBitConversionInts[1];var m=g.__kBitConversionInts[0],o=20;f=31-f;if(f!==(l-1)%31)throw new Error("implementation bug");var p;l=0;if(f<o){var q=o-f;l=q+32,p=b>>>q,b=b<<32-q|m>>>q,m<<=32-q}else if(f===o)l=32,p=b,b=m;else{q=f-o;l=32-q,p=b<<q|m>>>32-q,b=m<<q}if(e>>>=0,p>>>=0,e>p)return g.__absoluteGreater(c);if(e<p)return g.__absoluteLess(c);for(var f=d-2;0<=f;f--){0<l?(l-=32,p=b>>>0,b=m,m=0):p=0;o=a.__unsignedDigit(f);if(o>p)return g.__absoluteGreater(c);if(o<p)return g.__absoluteLess(c)}if(0!==b||0!==m){if(0===l)throw new Error("implementation bug");return g.__absoluteLess(c)}return 0}},{key:"__equalToNumber",value:function(a,b){return b|0===b?0===b?0===a.length:1===a.length&&a.sign===0>b&&a.__unsignedDigit(0)===h(b):0===g.__compareToDouble(a,b)}},{key:"__comparisonResultToBool",value:function(a,b){switch(b){case 0:return 0>a;case 1:return 0>=a;case 2:return 0<a;case 3:return 0<=a}throw new Error("unreachable")}},{key:"__compare",value:function(a,b,c){if(a=g.__toPrimitive(a),b=g.__toPrimitive(b),"string"==typeof a&&"string"==typeof b)switch(c){case 0:return a<b;case 1:return a<=b;case 2:return a>b;case 3:return a>=b}if(g.__isBigInt(a)&&"string"==typeof b)return b=g.__fromString(b),null!==b&&g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if("string"==typeof a&&g.__isBigInt(b))return a=g.__fromString(a),null!==a&&g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if(a=g.__toNumeric(a),b=g.__toNumeric(b),g.__isBigInt(a)){if(g.__isBigInt(b))return g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if("number"!=typeof b)throw new Error("implementation bug");return g.__comparisonResultToBool(g.__compareToNumber(a,b),c)}if("number"!=typeof a)throw new Error("implementation bug");if(g.__isBigInt(b))return g.__comparisonResultToBool(g.__compareToNumber(b,a),2^c);if("number"!=typeof b)throw new Error("implementation bug");return 0===c?a<b:1===c?a<=b:2===c?a>b:3===c?a>=b:void 0}},{key:"__absoluteAdd",value:function(a,b,c){if(a.length<b.length)return g.__absoluteAdd(b,a,c);if(0===a.length)return a;if(0===b.length)return a.sign===c?a:g.unaryMinus(a);var d=a.length;(0===a.__clzmsd()||b.length===a.length&&0===b.__clzmsd())&&d++;for(var d=new g(d,c),c=0,e=0;e<b.length;e++){var f=b.__digit(e),h=a.__digit(e),m=(65535&h)+(65535&f)+c;h=(h>>>16)+(f>>>16)+(m>>>16);c=h>>>16,d.__setDigit(e,65535&m|h<<16)}for(;e<a.length;e++){f=a.__digit(e);m=(65535&f)+c;h=(f>>>16)+(m>>>16);c=h>>>16,d.__setDigit(e,65535&m|h<<16)}return e<d.length&&d.__setDigit(e,c),d.__trim()}},{key:"__absoluteSub",value:function(a,b,c){if(0===a.length)return a;if(0===b.length)return a.sign===c?a:g.unaryMinus(a);for(var c=new g(a.length,c),d=0,e=0;e<b.length;e++){var f=a.__digit(e),l=b.__digit(e),m=(65535&f)-(65535&l)-d;d=1&m>>>16;f=(f>>>16)-(l>>>16)-d;d=1&f>>>16,c.__setDigit(e,65535&m|f<<16)}for(;e<a.length;e++){l=a.__digit(e);m=(65535&l)-d;d=1&m>>>16;f=(l>>>16)-d;d=1&f>>>16,c.__setDigit(e,65535&m|f<<16)}return c.__trim()}},{key:"__absoluteAddOne",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length;null===c?c=new g(d,b):c.sign=b;for(var e=!0,f=0;f<d;f++){var k=a.__digit(f),l=-1===k;e&&(k=0|k+1),e=l,c.__setDigit(f,k)}return e&&c.__setDigitGrow(d,1),c}},{key:"__absoluteSubOne",value:function(a,b){var c=a.length;b=b||c;for(var d=new g(b,!1),e=!0,f=0;f<c;f++){var k=a.__digit(f),l=0===k;e&&(k=0|k-1),e=l,d.__setDigit(f,k)}for(var l=c;l<b;l++)d.__setDigit(l,0);return d}},{key:"__absoluteAnd",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,e,b=m,n}var k=f;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)&b.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteAndNot",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;d<e&&(f=d);var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)&~b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteOr",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,d=e,b=m,n}var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)|b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteXor",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,d=e,b=m,n}var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)^b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteCompare",value:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(var c=a.length-1;0<=c&&a.__digit(c)===b.__digit(c);)c--;return 0>c?0:a.__unsignedDigit(c)>b.__unsignedDigit(c)?1:-1}},{key:"__multiplyAccumulate",value:function(a,b,c,d){if(0!==b){for(var e=65535&b,b=b>>>16,f=0,g=0,k=0,l=0;l<a.length;l++,d++){var m=c.__digit(d),n=65535&m,o=m>>>16,p=a.__digit(l),q=65535&p;p=p>>>16;var r=j(q,e);q=j(q,b);var s=j(p,e);p=j(p,b);n+=g+(65535&r),o+=k+f+(n>>>16)+(r>>>16)+(65535&q)+(65535&s),f=o>>>16,g=(q>>>16)+(s>>>16)+(65535&p)+f,f=g>>>16,g&=65535,k=p>>>16,m=65535&n|o<<16,c.__setDigit(d,m)}for(;0!==f||0!==g||0!==k;d++){r=c.__digit(d);q=(65535&r)+g;s=(r>>>16)+(q>>>16)+k+f;g=0,k=0,f=s>>>16,r=65535&q|s<<16,c.__setDigit(d,r)}}}},{key:"__internalMultiplyAdd",value:function(a,b,c,d,e){for(var c=c,f=0,h=0;h<d;h++){var l=a.__digit(h),m=j(65535&l,b),n=(65535&m)+f+c;c=n>>>16;l=j(l>>>16,b);m=(65535&l)+(m>>>16)+c;c=m>>>16,f=l>>>16,e.__setDigit(h,m<<16|65535&n)}if(e.length>d)for(e.__setDigit(d++,c+f);d<e.length;)e.__setDigit(d++,0);else if(0!==c+f)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(a,b,c){null===c&&(c=new g(a.length,!1));for(var d=0,e=2*a.length-1;0<=e;e-=2){var f=(d<<16|a.__halfDigit(e))>>>0,k=0|f/b;d=0|f%b,f=(d<<16|a.__halfDigit(e-1))>>>0;var l=0|f/b;d=0|f%b,c.__setDigit(e>>>1,k<<16|l)}return c}},{key:"__absoluteModSmall",value:function(a,b){for(var c,d=0,e=2*a.length-1;0<=e;e--)c=(d<<16|a.__halfDigit(e))>>>0,d=0|c%b;return d}},{key:"__absoluteDivLarge",value:function(a,b,c,d){var f=b.__halfDigitLength(),e=b.length,n=a.__halfDigitLength()-f,i=null;c&&(i=new g(n+2>>>1,!1),i.__initializeDigits());var l=new g(f+2>>>1,!1);l.__initializeDigits();var m=g.__clz16(b.__halfDigit(f-1));0<m&&(b=g.__specialLeftShift(b,m,0));for(var a=g.__specialLeftShift(a,m,1),k=b.__halfDigit(f-1),o=0,n=n;0<=n;n--){var p=65535,q=a.__halfDigit(n+f);if(q!==k){q=(q<<16|a.__halfDigit(n+f-1))>>>0;p=0|q/k;for(var q=0|q%k,r=b.__halfDigit(f-2),s=a.__halfDigit(n+f-2);j(p,r)>>>0>(q<<16|s)>>>0&&(p--,q+=k,!(65535<q)););}g.__internalMultiplyAdd(b,p,0,e,l);r=a.__inplaceSub(l,n,f+1);0!==r&&(r=a.__inplaceAdd(b,n,f),a.__setHalfDigit(n+f,a.__halfDigit(n+f)+r),p--),c&&(1&n?o=p<<16:i.__setDigit(n>>>1,o|p))}return d?(a.__inplaceRightShift(m),c?{quotient:i,remainder:a}:a):c?i:void 0}},{key:"__clz16",value:function(a){return k(a)-16}},{key:"__specialLeftShift",value:function(a,b,c){var e=a.length,d=new g(e+c,!1);if(0===b){for(var f=0;f<e;f++)d.__setDigit(f,a.__digit(f));return 0<c&&d.__setDigit(e,0),d}for(var j,f=0,l=0;l<e;l++)j=a.__digit(l),d.__setDigit(l,j<<b|f),f=j>>>32-b;return 0<c&&d.__setDigit(e,f),d}},{key:"__leftShiftByAbsolute",value:function(a,b){b=g.__toShiftAmount(b);if(0>b)throw new RangeError("BigInt too big");var c=b>>>5;b=31&b;var d=a.length,e=0!==b&&0!=a.__digit(d-1)>>>32-b,f=d+c+(e?1:0),m=new g(f,a.sign);if(0===b){for(var n=0;n<c;n++)m.__setDigit(n,0);for(;n<f;n++)m.__setDigit(n,a.__digit(n-c))}else{for(var n=0,f=0;f<c;f++)m.__setDigit(f,0);for(var o,f=0;f<d;f++)o=a.__digit(f),m.__setDigit(f+c,o<<b|n),n=o>>>32-b;if(e)m.__setDigit(d+c,n);else if(0!==n)throw new Error("implementation bug")}return m.__trim()}},{key:"__rightShiftByAbsolute",value:function(a,b){var c=a.length,d=a.sign;b=g.__toShiftAmount(b);if(0>b)return g.__rightShiftByMaximum(d);var e=b>>>5;b=31&b;var f=c-e;if(0>=f)return g.__rightShiftByMaximum(d);var i=!1;if(d)if(0!=(a.__digit(e)&(1<<b)-1))i=!0;else for(var m=0;m<e;m++)if(0!==a.__digit(m)){i=!0;break}if(i&&0===b){m=a.__digit(c-1);0==~m&&f++}m=new g(f,d);if(0===b)for(var f=e;f<c;f++)m.__setDigit(f-e,a.__digit(f));else{for(var n,d=a.__digit(e)>>>b,f=c-e-1,c=0;c<f;c++)n=a.__digit(c+e+1),m.__setDigit(c,n<<32-b|d),d=n>>>b;m.__setDigit(f,d)}return i&&(m=g.__absoluteAddOne(m,!0,m)),m.__trim()}},{key:"__rightShiftByMaximum",value:function(a){return a?g.__oneDigit(1,!0):g.__zero()}},{key:"__toShiftAmount",value:function(a){if(1<a.length)return-1;a=a.__unsignedDigit(0);return a>g.__kMaxLengthBits?-1:a}},{key:"__toPrimitive",value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if("object"!==a(b))return b;if(b.constructor===g)return b;var d=b[Symbol.toPrimitive];if(d){var e=d(c);if("object"!==a(e))return e;throw new TypeError("Cannot convert object to primitive value")}var f=b.valueOf;if(f){var k=f.call(b);if("object"!==a(k))return k}var l=b.toString;if(l){var m=l.call(b);if("object"!==a(m))return m}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(a){return g.__isBigInt(a)?a:+a}},{key:"__isBigInt",value:function(b){return"object"===a(b)&&b.constructor===g}},{key:"__truncateToNBits",value:function(a,b){for(var c=a+31>>>5,d=new g(c,b.sign),c=c-1,e=0;e<c;e++)d.__setDigit(e,b.__digit(e));e=b.__digit(c);if(0!=(31&a)){b=32-(31&a);e=e<<b>>>b}return d.__setDigit(c,e),d.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(a,b,c){for(var d=Math.min,e=a+31>>>5,c=new g(e,c),f=0,e=e-1,h=0,d=d(e,b.length);f<d;f++){var j=b.__digit(f),l=0-(65535&j)-h;h=1&l>>>16;j=0-(j>>>16)-h;h=1&j>>>16,c.__setDigit(f,65535&l|j<<16)}for(;f<e;f++)c.__setDigit(f,0|-h);l=e<b.length?b.__digit(e):0;j=31&a;if(0===j){d=0-(65535&l)-h;h=1&d>>>16;f=0-(l>>>16)-h;b=65535&d|f<<16}else{a=32-j;l=l<<a>>>a;d=1<<32-a;f=(65535&d)-(65535&l)-h;h=1&f>>>16;j=(d>>>16)-(l>>>16)-h;b=65535&f|j<<16,b&=d-1}return c.__setDigit(e,b),c.__trim()}},{key:"__digitPow",value:function(a,b){for(var c=1;0<b;)1&b&&(c*=a),b>>>=1,a*=a;return c}}]),g}(k(Array));return n.__kMaxLength=33554432,n.__kMaxLengthBits=n.__kMaxLength<<5,n.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],n.__kBitsPerCharTableShift=5,n.__kBitsPerCharTableMultiplier=1<<n.__kBitsPerCharTableShift,n.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.__kBitConversionBuffer=new ArrayBuffer(8),n.__kBitConversionDouble=new Float64Array(n.__kBitConversionBuffer),n.__kBitConversionInts=new Int32Array(n.__kBitConversionBuffer),n})}),null);
__d("BanzaiLogger",["Banzai"],(function(a,b,c,d,e,f){function g(a){return{log:function(c,d){b("Banzai").post("logger:"+c,d,a)},create:g}}a=g();c=a;e.exports=c}),null);
__d("CometPhotoViewer_photo.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b=[a];return{argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"CometPhotoViewer_photo",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"can_viewer_add_tags",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:"user_id",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"additional_profile_has_taggable_products",args:null,kind:"ScalarField",name:"has_taggable_products",storageKey:null}],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"page_id",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_admin",storageKey:null},{alias:"page_shop_has_taggable_products",args:null,kind:"ScalarField",name:"has_taggable_products",storageKey:null}],type:"Page",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_time",storageKey:null},{alias:null,args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"immersive_photo_encodings",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"projection_type",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductTag",kind:"LinkedField",name:"photo_product_tags",plural:!0,selections:b,storageKey:null},{alias:null,args:null,concreteType:"PhotoTagsConnection",kind:"LinkedField",name:"tags",plural:!1,selections:[{alias:null,args:null,concreteType:"PhotoTagsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"PhotoTag",kind:"LinkedField",name:"tag",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_product_tag",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"container_story",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"encrypted_tracking",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewability_config",storageKey:null},{alias:null,args:null,concreteType:"CometClientViewConfig",kind:"LinkedField",name:"client_view_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_delay_log_impression",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_signal_imp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_vital_imp",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"photo_viewer"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[{kind:"InlineFragment",selections:[{documentName:"CometPhotoViewer_photo",fragmentName:"CometWarningScreenOverlay_data",fragmentPropName:"data",kind:"ModuleImport"}],type:"OverlayWarningScreenViewModel",abstractKey:null}],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"photo_viewer")'},{args:null,kind:"FragmentSpread",name:"CometRemote360PhotoViewer_photo"},{args:null,kind:"FragmentSpread",name:"CometRemote3DPhotoViewer_photo"},{kind:"InlineDataFragmentSpread",name:"CometAIProductTagSuggestionsUtil_photo",selections:[a,{alias:null,args:null,concreteType:"ProductTag",kind:"LinkedField",name:"photo_product_tags",plural:!0,selections:[a,{alias:null,args:null,concreteType:"ProductItem",kind:"LinkedField",name:"product_item",plural:!1,selections:b,storageKey:null},{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"xy_location",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null}],storageKey:null}]}],type:"Photo",abstractKey:null}}();e.exports=a}),null);
__d("EndianAwareDataView",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){c===void 0&&(c=0),this.$2=new DataView(a,c),this.$1=b}var b=a.prototype;b.getByteLength=function(){return this.$2.byteLength};b.getU8=function(a){return this.$2.getUint8(a)};b.getI8=function(a){return this.$2.getInt8(a)};b.getU16=function(a){return this.$2.getUint16(a,this.$1)};b.getI16=function(a){return this.$2.getInt16(a,this.$1)};b.getU32=function(a){return this.$2.getUint32(a,this.$1)};b.getI32=function(a){return this.$2.getInt32(a,this.$1)};b.getF32=function(a){return this.$2.getFloat32(a,this.$1)};return a}();e.exports=a}),null);
__d("EndianAwareDataReader",["EndianAwareDataView"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c){this.$2=new(b("EndianAwareDataView"))(a,c),this.$1=0}var c=a.prototype;c.canReadU8=function(){return this.$1<this.$2.getByteLength()};c.canReadU16=function(){return this.$1<this.$2.getByteLength()-1};c.canReadU32=function(){return this.$1<this.$2.getByteLength()-3};c.seekTo=function(a){this.$1=a};c.seekRelative=function(a){this.$1+=a};c.readU8=function(){var a=this.$2.getU8(this.$1);this.$1+=1;return a};c.peekU8=function(){return this.$2.getU8(this.$1)};c.readI8=function(){var a=this.$2.getI8(this.$1);this.$1+=1;return a};c.peekI8=function(){return this.$2.getI8(this.$1)};c.readU16=function(){var a=this.$2.getU16(this.$1);this.$1+=2;return a};c.peekU16=function(){return this.$2.getU16(this.$1)};c.readI16=function(){var a=this.$2.getI16(this.$1);this.$1+=2;return a};c.peekI16=function(){return this.$2.getI16(this.$1)};c.readU32=function(){var a=this.$2.getU32(this.$1);this.$1+=4;return a};c.peekU32=function(){return this.$2.getU32(this.$1)};c.readI32=function(){var a=this.$2.getI32(this.$1);this.$1+=4;return a};c.peekI32=function(){return this.$2.getI32(this.$1)};c.readF32=function(){var a=this.$2.getF32(this.$1);this.$1+=4;return a};c.peekF32=function(){return this.$2.getF32(this.$1)};return a}();e.exports=a}),null);
__d("CometFeedStoryImmersiveMediaMouseOverlay.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=a.descriptionFbt,d=a.isActive;a=a.showClick;return h.jsxs("div",{className:(g||(g=b("stylex"))).dedupe({"bottom-1":"d2iitwg3","opacity-1":"pedkr2u6","pointer-events-1":"hzruof5a","position-1":"pmk7jnqg","start-1":"kfkz5moi","transform-0.1":"tvo4c8rq"},d?null:{"opacity-1":"b5wmifdl"}),children:[h.jsx("div",{className:"ov9facns kfkz5moi pmk7jnqg qx04eu75 k7cz35w2 hioi5xb0 awevd9ak ee40wjg4 r7fvqmod",children:h.jsx("div",{className:"sk3xx2xc ee40wjg4 r7fvqmod",children:h.jsxs("div",{className:"kz4qo9ow ee40wjg4 r7fvqmod",children:[h.jsx("div",{className:"pgctjfs5 affysrvo pmk7jnqg tv7at329 omcyoz59 ed597pkb kb8x4rkr qw6c0r16 kaqsd373"}),h.jsxs("div",{className:"ov9facns dimoa7g4 pmk7jnqg stjgntxs ni8dbmo4 fz6q6hdd mrjvor2e jinzq4gt jos75b7i t0qjyqq4",children:[h.jsx("div",{className:a?"c9rrlmt1 pmk7jnqg ooasylqa q2y6ezfg j3og7z1a ee40wjg4 r7fvqmod":"c9rrlmt1 pmk7jnqg ooasylqa q2y6ezfg"}),h.jsx("div",{className:"c0wkt4kp oz4tkbee pmk7jnqg ooasylqa q2y6ezfg"})]}),h.jsx("div",{className:"ov9facns pmk7jnqg oeo4gz9l kv0toi1t j6sty90h h905i5nu monazrh9 q2y6ezfg"})]})})}),h.jsx("div",{className:"g0qnabr5 jb1g5q76 oqcyycmt dwxx2s2f dicw6rsg kady6ibp rs0gx3tq n3ffmt46 sq6gx45u ljqsnud1",children:c})]})}}),null);
__d("Matrices",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){a=Math.tan(a/2)*c;var e=-a,f=a*b;b=e*b;return[2*c/(f-b),0,0,0,0,2*c/(a-e),0,0,(f+b)/(f-b),(a+e)/(a-e),(c+d)/(c-d),-1,0,0,c*d*2/(c-d),0]}function g(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function b(a,b,c){return[a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1]}function c(a){var b=a[0],c=a[1],d=a[2];a=a[3];var e=2/Math.sqrt(b*b+c*c+d*d+a*a);return[1-e*(c*c+d*d),e*(b*c+d*a),e*(b*d-c*a),0,e*(b*c-d*a),1-e*(b*b+d*d),e*(c*d+b*a),0,e*(b*d+c*a),e*(c*d-b*a),1-e*(b*b+c*c),0,0,0,0,1]}function d(a){return h(a[0],a[1],a[2])}function h(a,b,c){return[1,0,0,0,0,1,0,0,0,0,1,0,a,b,c,1]}function f(a){var b=a[0]*a[5]-a[1]*a[4],c=a[0]*a[6]-a[2]*a[4],d=a[0]*a[7]-a[3]*a[4],e=a[1]*a[6]-a[2]*a[5],f=a[1]*a[7]-a[3]*a[5],g=a[2]*a[7]-a[3]*a[6],h=a[8]*a[13]-a[9]*a[12],i=a[8]*a[14]-a[10]*a[12],j=a[8]*a[15]-a[11]*a[12],k=a[9]*a[14]-a[10]*a[13],l=a[9]*a[15]-a[11]*a[13],m=a[10]*a[15]-a[11]*a[14],n=b*m-c*l+d*k+e*j-f*i+g*h,o=(a[5]*m-a[6]*l+a[7]*k)/n,p=(a[2]*l-a[1]*m-a[3]*k)/n,q=(a[13]*g-a[14]*f+a[15]*e)/n,r=(a[10]*f-a[9]*g-a[11]*e)/n,s=(a[6]*j-a[4]*m-a[7]*i)/n;m=(a[0]*m-a[2]*j+a[3]*i)/n;var t=(a[14]*d-a[12]*g-a[15]*c)/n;g=(a[8]*g-a[10]*d+a[11]*c)/n;var u=(a[4]*l-a[5]*j+a[7]*h)/n;j=(a[1]*j-a[0]*l-a[3]*h)/n;l=(a[12]*f-a[13]*d+a[15]*b)/n;d=(a[9]*d-a[8]*f-a[11]*b)/n;f=(a[5]*i-a[4]*k-a[6]*h)/n;k=(a[0]*k-a[1]*i+a[2]*h)/n;i=(a[13]*c-a[12]*e-a[14]*b)/n;h=(a[8]*e-a[9]*c+a[10]*b)/n;return[o,p,q,r,s,m,t,g,u,j,l,d,f,k,i,h]}function i(a,b){var c=g();c[0]=a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12];c[1]=a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13];c[2]=a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14];c[3]=a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15];c[4]=a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12];c[5]=a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13];c[6]=a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14];c[7]=a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15];c[8]=a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12];c[9]=a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13];c[10]=a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14];c[11]=a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15];c[12]=a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12];c[13]=a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13];c[14]=a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14];c[15]=a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15];return c}function j(a,b){var c=[0,0,0,0];c[0]=a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12];c[1]=a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13];c[2]=a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14];c[3]=a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15];return c}function k(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]]}a={createIdentityMat4:g,createPerspectiveProjectionMatrix:a,createRotationMatrixFromQuaternion:c,createScalingMatrix:b,createTranslationMatrix:h,createTranslationMatrixFromVec:d,invertMat4:f,multiplyMat4:i,multiplyVec4:j,transposeMatrix:k};e.exports=a}),null);
__d("CometWebGLCubemapTexture",["recoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a,this.$2=a.createTexture(),this.initializeTexture()}var c=a.prototype;c.initializeTexture=function(){var a=this.$1;a.bindTexture(a.TEXTURE_CUBE_MAP,this.$2);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_LINEAR);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);var b=new Uint8Array([0,0,0,0]);a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_X,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Y,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Z,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.bindTexture(a.TEXTURE_CUBE_MAP,null)};c.setFace=function(a,c){var d=this.$1,e=0;switch(a){case 0:e=d.TEXTURE_CUBE_MAP_POSITIVE_X;break;case 1:e=d.TEXTURE_CUBE_MAP_NEGATIVE_Z;break;case 2:e=d.TEXTURE_CUBE_MAP_NEGATIVE_X;break;case 3:e=d.TEXTURE_CUBE_MAP_POSITIVE_Z;break;case 4:e=d.TEXTURE_CUBE_MAP_POSITIVE_Y;break;case 5:e=d.TEXTURE_CUBE_MAP_NEGATIVE_Y;break;default:b("recoverableViolation")("Cubemap face out of bounds","webgl");return}e!==0&&(d.bindTexture(d.TEXTURE_CUBE_MAP,this.$2),d.texImage2D(e,0,d.RGB,d.RGB,d.UNSIGNED_BYTE,c),d.bindTexture(d.TEXTURE_CUBE_MAP,null))};c.generateMipmap=function(){var a=this.$1;a.bindTexture(a.TEXTURE_CUBE_MAP,this.$2);a.generateMipmap(a.TEXTURE_CUBE_MAP);a.bindTexture(a.TEXTURE_CUBE_MAP,null)};c.bindToSlot=function(a){var b=this.$1;b.activeTexture(b.TEXTURE0+a);b.bindTexture(b.TEXTURE_CUBE_MAP,this.$2)};c.release=function(){this.$1.deleteTexture(this.$2)};return a}();e.exports=a}),null);
__d("CometWebGLIndexBuffer",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$2=a,this.$1=a.createBuffer()}var b=a.prototype;b.bufferData=function(a){var b=this.$2;b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.$1);b.bufferData(b.ELEMENT_ARRAY_BUFFER,a,b.STATIC_DRAW)};b.bindToElements=function(){var a=this.$2;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.$1)};return a}();e.exports=a}),null);
__d("CometWebGLVertexBuffer",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$2=a,this.$1=a.createBuffer()}var b=a.prototype;b.bufferData=function(a){var b=this.$2;b.bindBuffer(b.ARRAY_BUFFER,this.$1);b.bufferData(b.ARRAY_BUFFER,a,b.STATIC_DRAW)};b.bindToAttribute=function(a,b,c,d,e,f){var g=this.$2;g.bindBuffer(g.ARRAY_BUFFER,this.$1);g.vertexAttribPointer(a,b,c,d,e,f);g.enableVertexAttribArray(a)};return a}();e.exports=a}),null);
__d("getWebGLAttributeSizeAndType",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){b=b?WebGLRenderingContext.UNSIGNED_BYTE:WebGLRenderingContext.FLOAT;switch(a.type){case WebGLRenderingContext.FLOAT:return{size:1,type:b};case WebGLRenderingContext.FLOAT_VEC2:return{size:2,type:b};case WebGLRenderingContext.FLOAT_VEC3:return{size:3,type:b};case WebGLRenderingContext.FLOAT_VEC4:return{size:4,type:b};case WebGLRenderingContext.FLOAT_MAT2:return{size:4,type:b};case WebGLRenderingContext.FLOAT_MAT3:return{size:9,type:b};case WebGLRenderingContext.FLOAT_MAT4:return{size:16,type:b}}return{size:1,type:b}}}),null);
__d("CometWebGLGeometry",["CometWebGLIndexBuffer","CometWebGLVertexBuffer","getWebGLAttributeSizeAndType","recoverableViolation","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a){switch(a){case WebGLRenderingContext.BYTE:case WebGLRenderingContext.UNSIGNED_BYTE:return 1;case WebGLRenderingContext.SHORT:case WebGLRenderingContext.UNSIGNED_SHORT:return 2;case WebGLRenderingContext.FLOAT:return 4}b("recoverableViolation")("Unrecognized vertex type: "+a,"webgl");return 1}a=function(){function a(a,c){c===void 0&&(c={interleaved:!0}),this.$1=[],this.$2=new(b("CometWebGLVertexBuffer"))(a),this.$3=null,this.$4=0,this.$6=null,this.$7=null,this.$8=0,this.$9=c.interleaved!==!1,this.$5=a,this.$10=0}var c=a.prototype;c.addAttribute=function(a,c){c===void 0&&(c={normalize:!1});if(!this.$9&&c.offset==null)throw b("unrecoverableViolation")("Vertex Buffer is not interleaved but attribute was added without an offset","immersive_media");var d=!!c.normalize,e=b("getWebGLAttributeSizeAndType")(a,d),f=e.size;e=e.type;var h=g(e);this.$1.push({loc:a.location,normalize:d,offset:c.offset!=null?c.offset:this.$10,size:f,stride:c.stride!=null?c.stride:h*f,type:e});this.$10+=h*f};c.bufferData=function(a){if(a instanceof ArrayBuffer){this.$2.bufferData(a);this.$4=a.byteLength;return}if(this.$3&&a.length<=this.$3.length){for(var b=0;b<a.length;b++)this.$3[b]=a[b];for(var b=a.length;b<this.$3.length;b++)this.$3[b]=0}else this.$3=new Float32Array(a);this.$4=a.length*4;this.$2.bufferData(this.$3.buffer)};c.bufferIndex=function(a){if(this.$7&&a.length<this.$7.length){for(var c=0;c<a.length;c++)this.$7[c]=a[c];for(var c=a.length;c<this.$7.length;c++)this.$7[c]=0}else this.$7=new Uint16Array(a);this.$8=a.length;this.$6||(this.$6=new(b("CometWebGLIndexBuffer"))(this.$5));this.$6.bufferData(this.$7)};c.bindToAttributes=function(){for(var a=0;a<this.$1.length;a++){var b=this.$1[a];this.$2.bindToAttribute(b.loc,b.size,b.type,!!b.normalize,this.$9?this.$10:b.stride,b.offset)}this.$6&&this.$6.bindToElements()};c.draw=function(){if(this.$9&&this.$4%this.$10!==0){b("recoverableViolation")("Geometry buffer length is not perfectly divisible by stride","webgl");return}var a=this.$5;if(this.$7)a.drawElements(a.TRIANGLES,this.$8,a.UNSIGNED_SHORT,0);else{var c=this.$4/this.$10;a.drawArrays(a.TRIANGLES,0,c)}};return a}();e.exports=a}),null);
__d("CometWebGLTexture",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){var c;b===void 0&&(b=Object.freeze({}));this.$1=a;this.$4=a.createTexture();a.bindTexture(a.TEXTURE_2D,this.$4);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);this.$5=(c=b.width)!=null?c:0;this.$2=(c=b.height)!=null?c:0;if("source"in b){c=b.source;c==null?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.$5,this.$2,0,a.RGBA,a.UNSIGNED_BYTE,c):this.setSource(c)}else a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([0,0,0,0]))}var b=a.prototype;b.getGLTexture=function(){return this.$4};b.setSource=function(a,b){b===void 0&&(b=!1);this.$3=a;var c=this.$1;c.bindTexture(c.TEXTURE_2D,this.$4);a instanceof Image&&(c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,b?1:0),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,a),this.$5=a.naturalWidth,this.$2=a.naturalHeight);c.bindTexture(c.TEXTURE_2D,null)};b.bindToSlot=function(a){var b=this.$1;b.activeTexture(b.TEXTURE0+a);b.bindTexture(b.TEXTURE_2D,this.$4)};return a}();e.exports=a}),null);
__d("CometWebGLMesh",["CometWebGLCubemapTexture","CometWebGLGeometry","CometWebGLTexture","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d){d===void 0&&(d={interleaved:!0}),this.$1=a,this.geometry=new(b("CometWebGLGeometry"))(a,{interleaved:d.interleaved!==!1}),this.program=c,this.renderOrder=1,this.uniforms={},this.visible=!0}var c=a.prototype;c.addAttribute=function(a,b){a=this.program.getAttribute(a);if(a==null)return this;this.geometry.addAttribute(a,b);return this};c.setUniform=function(a,b){this.uniforms[a]=b};c.getUniform=function(a){return this.uniforms[a]};c.unsetUniform=function(a){delete this.uniforms[a]};c.bufferData=function(a){this.geometry.bufferData(a)};c.bufferIndex=function(a){this.geometry.bufferIndex(a)};c.setVisible=function(a){this.visible=a};c.draw=function(){if(!this.visible)return;var a=0,c=this.program,d=c.getUniforms();for(var e in d){d=null;e in this.uniforms?d=this.uniforms[e]:d=c.getDefaultValueForUniform(e);var f=c.getUniform(e);if(f==null)throw b("unrecoverableViolation")("Specified uniform does not exist in program: "+e,"immersive_media");typeof d==="number"?f.set(d):Array.isArray(d)||d instanceof Float32Array?f.set(d):(d instanceof b("CometWebGLTexture")||d instanceof b("CometWebGLCubemapTexture"))&&(d.bindToSlot(a),f.set(a),a++)}this.geometry.bindToAttributes();this.geometry.draw()};return a}();e.exports=a}),null);
__d("defaultValueForWebGLUniform",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){switch(a){case WebGLRenderingContext.FLOAT:return 0;case WebGLRenderingContext.FLOAT_VEC2:return[0,0];case WebGLRenderingContext.FLOAT_VEC3:return[0,0,0];case WebGLRenderingContext.FLOAT_VEC4:return[0,0,0,0];case WebGLRenderingContext.INT:return 0;case WebGLRenderingContext.INT_VEC2:return[0,0];case WebGLRenderingContext.INT_VEC3:return[0,0,0];case WebGLRenderingContext.INT_VEC4:return[0,0,0,0];case WebGLRenderingContext.FLOAT_MAT2:return[0,0,0,0];case WebGLRenderingContext.FLOAT_MAT3:return[0,0,0,0,0,0,0,0,0];case WebGLRenderingContext.FLOAT_MAT4:return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];case WebGLRenderingContext.SAMPLER_2D:return null;default:return null}}}),null);
__d("extractAttributesFromWebGLProgram",["recoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c){var d={},e=a.getProgramParameter(c,a.ACTIVE_ATTRIBUTES);for(var f=0;f<e;f++){var g=a.getActiveAttrib(c,f);if(!g){b("recoverableViolation")("Attempted to retrieve an attribute that did not exist","webgl");continue}var h=a.getAttribLocation(c,g.name);d[g.name]={location:h,size:g.size,type:g.type}}return d}}),null);
__d("createWebGLUniformSetter",["recoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c,d){switch(d){case a.FLOAT:return a.uniform1f.bind(a,c);case a.FLOAT_VEC2:return a.uniform2fv.bind(a,c);case a.FLOAT_VEC3:return a.uniform3fv.bind(a,c);case a.FLOAT_VEC4:return a.uniform4fv.bind(a,c);case a.INT:return a.uniform1i.bind(a,c);case a.INT_VEC2:return a.uniform2iv.bind(a,c);case a.INT_VEC3:return a.uniform3iv.bind(a,c);case a.INT_VEC4:return a.uniform4iv.bind(a,c);case a.FLOAT_MAT2:return a.uniformMatrix2fv.bind(a,c,!1);case a.FLOAT_MAT3:return a.uniformMatrix3fv.bind(a,c,!1);case a.FLOAT_MAT4:return a.uniformMatrix4fv.bind(a,c,!1);case a.SAMPLER_2D:return a.uniform1i.bind(a,c);case a.SAMPLER_CUBE:return a.uniform1i.bind(a,c);default:return function(){b("recoverableViolation")("This uniform type is not supported: "+d,"webgl")}}}}),null);
__d("extractUniformsFromWebGLProgram",["createWebGLUniformSetter","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c){var d={},e=a.getProgramParameter(c,a.ACTIVE_UNIFORMS);for(var f=0;f<e;f++){var g=a.getActiveUniform(c,f);if(!g){b("recoverableViolation")("Attempted to retrieve a uniform that did not exist","webgl");continue}var h=a.getUniformLocation(c,g.name);d[g.name]={location:h,set:b("createWebGLUniformSetter")(a,h,g.type),size:g.size,type:g.type}}return d}}),null);
__d("CometWebGLProgram",["defaultValueForWebGLUniform","extractAttributesFromWebGLProgram","extractUniformsFromWebGLProgram","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1={},this.$3=null,this.$4=[],this.$5={},this.$6={},this.$2=a}var c=a.prototype;c.addShader=function(a,c,d){if(this.$3){b("recoverableViolation")("Cannot add a shader, the program has already been compiled","webgl");return this}var e=a;if(d){d=d.map(function(a){return"#define "+a+"\n"}).join("");if(a.startsWith("#version")){var f=a.indexOf("\n")+1;e=a.substr(0,f)+d+a.substr(f)}else e=d+a}this.$4.push({code:e,type:c});return this};c.compile=function(){if(this.$3){b("recoverableViolation")("Cannot compile, the program has already been compiled","webgl");return this}var a=this.$2,c=this.$4.map(function(c){var d=c.code;c=c.type;c=a.createShader(c);a.shaderSource(c,d);a.compileShader(c);if(!a.getShaderParameter(c,a.COMPILE_STATUS)){d=a.getShaderInfoLog(c)||"";a.deleteShader(c);b("recoverableViolation")("Failed to compile shader: "+d,"webgl")}return c}),d=a.createProgram();for(var c=c,e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;a.attachShader(d,g)}a.linkProgram(d);if(!a.getProgramParameter(d,a.LINK_STATUS)){g=a.getProgramInfoLog(d)||"";a.deleteProgram(d);b("recoverableViolation")("Failed to link program: "+g,"webgl");return this}this.$3=d;this.$6=b("extractUniformsFromWebGLProgram")(a,d);this.$1=b("extractAttributesFromWebGLProgram")(a,d);return this};c.use=function(){if(!this.$3){b("recoverableViolation")("Cannot use Program before it has been compiled","webgl");return}this.$2.useProgram(this.$3)};c.getUniform=function(a){var c=this.$6[a];if(!c){b("recoverableViolation")("Program does not have a uniform called "+a,"webgl");return null}return c};c.getUniforms=function(){return this.$6};c.getAttribute=function(a){var c=this.$1[a];if(!c){b("recoverableViolation")("Program does not have an attribute called "+a,"webgl");return null}return c};c.setUniformDefaults=function(a){for(var b in a)this.$5[b]=a[b];return this};c.getDefaultValueForUniform=function(a){if(!(a in this.$6)){b("recoverableViolation")("Program does not have a uniform called "+a,"webgl");return null}if(a in this.$5){var c=this.$5[a];return Array.isArray(c)?c.slice():c}return b("defaultValueForWebGLUniform")(this.$6[a].type)};return a}();e.exports=a}),null);
__d("createWebGL3DPhotoProgram",["CometWebGLProgram"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g="\nattribute vec3 a_position;\nattribute vec2 a_texcoord_0;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec2 v_texcoord_0;\n\nvoid main() {\n  v_texcoord_0 = a_texcoord_0;\n  gl_Position = projectionMatrix * viewMatrix * vec4(a_position, 1.0);\n}\n",h="\nprecision mediump float;\n\nvarying vec2 v_texcoord_0;\nuniform sampler2D u_texture_0;\n\nvoid main() {\n  gl_FragColor = texture2D(u_texture_0, v_texcoord_0);\n}\n";function a(a){var c=new(b("CometWebGLProgram"))(a);return c.addShader(g,a.VERTEX_SHADER).addShader(h,a.FRAGMENT_SHADER).compile().setUniformDefaults({projectionMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],viewMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]})}}),null);
__d("createMeshesFromGLTF",["Promise","CometWebGLMesh","CometWebGLTexture","createWebGL3DPhotoProgram"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g={POSITION:"a_position",TEXCOORD_0:"a_texcoord_0"};function a(a,c){var d=[],e=b("createWebGL3DPhotoProgram")(a),f=[],i=c.getMeshes();for(var i=i,j=Array.isArray(i),k=0,i=j?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(j){if(k>=i.length)break;l=i[k++]}else{k=i.next();if(k.done)break;l=k.value}l=l;l=l.primitives;for(var l=l,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{n=l.next();if(n.done)break;o=n.value}o=o;var p=o.attributes,q=[],r=Infinity,s=0;p=Object.entries(p);for(var t=0;t<p.length;t++){var u=p[t],v=u[0];u=u[1];if(typeof u==="number"){u=c.getAccessor(u);var w=c.getBufferView(u.bufferView);w.byteOffset<r&&(r=w.byteOffset);w.byteOffset+w.byteLength>s&&(s=w.byteOffset+w.byteLength);u=u.byteOffset!=null?u.byteOffset:0;q.push({byteOffset:w.byteOffset+u,name:v})}}q.sort(h);var x=new(b("CometWebGLMesh"))(a,e,{interleaved:!1});w=c.getBinarySource();for(var u=0;u<q.length;u++){v=q[u];if(v.name in g){p=v.byteOffset-r;t={offset:p};x.addAttribute(g[v.name],t)}}x.bufferData(new Float32Array(w.buffer,w.byteOffset+r,(s-r)/4));o.indices!=null&&x.bufferIndex(c.getDataViewForAccessor(o.indices));if(o.material!=null){p=c.getMaterial(o.material);var y=p==null?void 0:(v=p.pbrMetallicRoughness)==null?void 0:(t=v.baseColorTexture)==null?void 0:t.index;y!=null&&(function(){var d=c.getTexture(y),e=c.getImage(d.source),g=new(b("CometWebGLTexture"))(a);f.push(new(b("Promise"))(function(a,b){e.onload=function(){g.setSource(e),a()},e.onerror=function(){b()}}));x.setUniform("u_texture_0",g)})()}d.push(x)}}return b("Promise").all(f).then(function(){return d})}function h(a,b){return a.byteOffset-b.byteOffset}}),null);
__d("glVec3CrossProduct",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}}),null);
__d("glMatrixLookingAtTarget",["glVec3CrossProduct"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c){c=[a[0]-c[0],a[1]-c[1],a[2]-c[2]];var d=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);c[0]/=d;c[1]/=d;c[2]/=d;d=b("glVec3CrossProduct")([0,1,0],c);var e=b("glVec3CrossProduct")(c,d);return[d[0],d[1],d[2],0,e[0],e[1],e[2],0,c[0],c[1],c[2],0,a[0],a[1],a[2],1]}}),null);
__d("useFrameTiming",["React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){var a=g.useRef(null),b=g.useRef(null),c=g.useCallback(function(a){var c=b.current;if(c==null)return;c(a)},[]),d=g.useCallback(function(d){var e=a.current;e!=null&&window.cancelAnimationFrame(e);b.current=d;a.current=window.requestAnimationFrame(c)},[c]),e=g.useCallback(function(){var b=a.current;if(b==null)return;window.cancelAnimationFrame(b)},[]);g.useEffect(function(){return function(){var b=a.current;if(b==null)return;window.cancelAnimationFrame(b)}},[]);return[d,e]}}),null);
__d("GLTFResource",["unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=[],this.$2=[],this.$3=null,this.$4=null,this.$5=[],this.$6=[],this.$7=[],this.$8=[]}var c=a.prototype;c.addBinarySource=function(a,b,c){this.$3=new Uint8Array(a,b,c)};c.useJSON=function(a){var b;this.$4=(b=a.extras)!=null?b:Object.freeze({});this.$1=(b=a.accessors)!=null?b:[];this.$2=(b=a.bufferViews)!=null?b:[];this.$5=(b=a.images)!=null?b:[];this.$6=(b=a.materials)!=null?b:[];this.$7=(b=a.meshes)!=null?b:[];this.$8=(b=a.textures)!=null?b:[]};c.getBinarySource=function(){if(this.$3==null)throw b("unrecoverableViolation")("attempted to access binary source before it was set","webgl");return this.$3};c.hasBinarySource=function(){return this.$3!=null};c.getAccessor=function(a){a=this.$1[a];if(a==null)throw new(b("unrecoverableViolation"))("accessor index out of range","webgl");return a};c.getBufferView=function(a){a=this.$2[a];if(a==null)throw new(b("unrecoverableViolation"))("buffer view index out of range","webgl");return a};c.getExtras=function(){return this.$4};c.getMaterial=function(a){a=this.$6[a];if(a==null)throw new(b("unrecoverableViolation"))("material index out of range","webgl");return a};c.getMeshes=function(){return this.$7};c.getTexture=function(a){a=this.$8[a];if(a==null)throw new(b("unrecoverableViolation"))("texture index out of range","webgl");return a};c.getDataViewForAccessor=function(a){a=this.$1[a];if(a==null)throw new(b("unrecoverableViolation"))("accessor index out of range","webgl");var c=this.$2[a.bufferView];if(c==null)throw new(b("unrecoverableViolation"))("buffer view index out of range","webgl");if(c.buffer!==0)throw new(b("unrecoverableViolation"))("external gltf buffers are not currently supported","webgl");var d=this.$3;if(d==null)throw new(b("unrecoverableViolation"))("attempted to get an accessor before loading binary data","webgl");var e=d.byteOffset+c.byteOffset;switch(a.componentType){case 5120:return new Int8Array(d.buffer,e,c.byteLength);case 5121:return new Uint8Array(d.buffer,e,c.byteLength);case 5122:return new Int16Array(d.buffer,e,c.byteLength/2);case 5123:return new Uint16Array(d.buffer,e,c.byteLength/2);case 5124:return new Int32Array(d.buffer,e,c.byteLength/4);case 5125:return new Uint32Array(d.buffer,e,c.byteLength/4);case 5126:return new Float32Array(d.buffer,e,c.byteLength/4);default:throw new(b("unrecoverableViolation"))("unsupported gl component type","webgl")}};c.getImage=function(a){a=this.$5[a];var b=this.getBufferView(a.bufferView),c=this.getBinarySource();c=new Uint8Array(c.buffer,c.byteOffset+b.byteOffset,b.byteLength);b=new Blob([c],{type:a.mimeType});c=URL.createObjectURL(b);a=new Image();a.src=c;return a};return a}();e.exports=a}),null);
__d("GLTFTypesValidator",["unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";f.throwBadFormat=g;f.validateAccessor=h;f.validateAccessors=i;f.validateArray=j;f.validateBoolean=a;f.validateBuffer=k;f.validateBufferView=l;f.validateBufferViews=m;f.validateBuffers=n;f.validateExtras=o;f.validateGLTFBodyJSON=c;f.validateImage=p;f.validateImages=q;f.validateInteger=r;f.validateMaterial=s;f.validateMaterials=t;f.validateMesh=u;f.validateMeshes=v;f.validatePrimitive=w;f.validatePrimitives=x;f.validateString=y;f.validateTexture=z;f.validateTextures=A;function g(a){throw new(b("unrecoverableViolation"))("unrecoverable incorrectly formatted JSON ".concat(a),"webgl")}function h(a){a===void 0&&g("GLTFAccessor undefined"),r(a.bufferView,!0,"GLTFAccessor.bufferView",0),r(a.byteOffset,!1,"GLTFAccessor.byteOffset",0),r(a.componentType,!0,"GLTFAccessor.componentType",5120,5126),r(a.count,!0,"GLTFAccessor.count",1),a.type!==void 0&&(a.type!=="SCALAR"&&a.type!=="VEC2"&&a.type!=="VEC3"&&a.type!=="VEC4"&&g("GLTFAccessor malformed"))}function i(a){j(a,!0,"GLTFAccessor");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;h(d)}}function j(a,b,c){if(a===void 0)if(b)g("Array<".concat(c).concat("> undefined"));else return;else a.length===0&&g("Array<".concat(c).concat("> length=0"))}function a(a,b,c){if(a===void 0)if(b)g(c.concat(" undefined"));else return;typeof a!=="boolean"&&g(c.concat(" not a boolean"))}function k(a){a===void 0&&g("GLTFBuffer undefined"),r(a.byteLength,!0,"GLTFBuffer.byteLength",1)}function l(a){r(a.buffer,!0,"GLTFBufferView.buffer",0),r(a.byteOffset,!0,"GLTFBufferView.byteOffset",0),r(a.byteLength,!0,"GLTFBufferView.byteLength",0)}function m(a){j(a,!1,"GLTFBufferView");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;l(d)}}function n(a){j(a,!1,"GLTFBuffer");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;k(d)}}function o(a){a!==void 0&&(a.FB_PHOTO_3D_DATA!==void 0?(a.FB_PHOTO_3D_DATA.hFov!==void 0&&r(a.FB_PHOTO_3D_DATA.hFov,!1,"GLTFExtras.FB_PHOTO_3D_DATA.hFov"),a.FB_PHOTO_3D_DATA.vFov!==void 0&&r(a.FB_PHOTO_3D_DATA.vFov,!1,"GLTFExtras.FB_PHOTO_3D_DATA.vFov")):g("GLTFExtras undefined"))}function c(a){a!==void 0?(i(a.accessors),n(a.buffers),m(a.bufferViews),o(a.extras),q(a.images),t(a.materials),v(a.meshes),A(a.textures)):g("GLTFBody undefined")}function p(a){a===void 0&&g("GLTFImage undefined"),y(a.mimeType,!0,"GLTFImage.mimeType"),r(a.bufferView,!0,"GLTFImage.bufferView",0)}function q(a){j(a,!1,"GLTFImage");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;p(d)}}function r(a,b,c,d,e){d===void 0&&(d=Number.MIN_SAFE_INTEGER);e===void 0&&(e=Number.MAX_SAFE_INTEGER);if(a===void 0)if(b)g(c.concat(" undefined"));else return;typeof a==="number"?(a<d||a>e)&&g(c.concat(" out of range")):g(c.concat(" not an integer"))}function s(a){a===void 0&&g("GLTFMaterial undefined"),a.pbrMetallicRoughness!==void 0&&(a.pbrMetallicRoughness.baseColorTexture!==void 0&&r(a.pbrMetallicRoughness.baseColorTexture.index,!1,"GLTFMaterial.pbrMetallicRoughness.baseColorTexture.index",0))}function t(a){j(a,!1,"GLTFMaterial");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;s(d)}}function u(a){a===void 0&&g("GLTFMesh undefined"),x(a.primitives)}function v(a){j(a,!0,"GLTFMesh");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;u(d)}}function w(a){a===void 0&&g("GLTFPrimitive undefined");for(var b in a.attributes)Object.prototype.hasOwnProperty.call(a.attributes,b)&&(b==="POSITION"||b==="TEXCOORD_0"||b==="TEXCOORD_1"?r(a.attributes[b],!0,"GLTFPrimitives.attributes[".concat(b).concat("]"),0):g("GLTFPrimitive malformed"));r(a.indices,!1,"GLTFPrimitives.indicies",0);r(a.material,!1,"GLTFPrimitives.material",0)}function x(a){a===void 0&&g("GLTFPrimatives undefined");j(a,!0,"GLTFPrimitive");for(var b=0;b<a.length;b++){var c=a[b];w(c)}}function y(a,b,c){if(a===void 0)if(b)g(c.concat(" undefined"));else return;typeof a!=="string"&&g(c.concat(" not a string"))}function z(a){a===void 0&&g("GLTFTexture undefined"),r(a.sampler,!0,"GLTFTexture.sampler",0),r(a.source,!0,"GLTFTexture.source",0)}function A(a){j(a,!0,"GLTFTexture");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;z(d)}}}),null);
__d("extractUTF8StringFromBuffer",["EndianAwareDataReader","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function g(a){return a>127}function h(a){return a>=192&&a<=223}function i(a){return a>=224&&a<=239}function j(a){return a>=240&&a<=247}function a(a,c,d){if(c+d>a.byteLength)throw new(b("unrecoverableViolation"))("offset and length exceed ArrayBuffer bounds","webgl");if("TextDecoder"in window){var e=new TextDecoder("utf-8"),f=new Uint8Array(a,c,d);return e.decode(f)}e=new(b("EndianAwareDataReader"))(a.slice(c,c+d),!1);f=[];while(e.canReadU8()){a=e.readU8();if(g(a))if(h(a)){if(!e.canReadU8())throw new(b("unrecoverableViolation"))("incomplete two-byte utf8 sequence","webgl");c=e.readU8();a=(a&31)<<6|c&63}else if(i(a)){d=e.canReadU8()?e.readU8():null;c=e.canReadU8()?e.readU8():null;if(d==null||c==null)throw new(b("unrecoverableViolation"))("incomplete three-byte utf8 sequence","webgl");a=(a&15)<<12|(d&63)<<6|c&63}else if(j(a)){d=e.canReadU8()?e.readU8():null;c=e.canReadU8()?e.readU8():null;var k=e.canReadU8()?e.readU8():null;if(d==null||c==null||k==null)throw new(b("unrecoverableViolation"))("incomplete four-byte utf8 sequence","webgl");a=(a&7)<<18|(d&63)<<12|(c&63)<<6|k&63}else throw new(b("unrecoverableViolation"))("unknown utf8 start sequence","webgl");if(a<=65535)f.push(String.fromCharCode(a));else if(a<=1114111)a-=65536,f.push(String.fromCharCode(a>>10|55296)),f.push(String.fromCharCode(a&1023|56320));else throw new(b("unrecoverableViolation"))("codepoint is beyond ","webgl")}return f.join("")}}),null);
__d("parseGLBResource",["GLTFResource","GLTFTypesValidator","extractUTF8StringFromBuffer","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=1179937895;function a(a){var c=new DataView(a);if(c.getUint32(0,!0)!==g)throw new(b("unrecoverableViolation"))("invalid GLB magic number","webgl");if(c.getUint32(4,!0)!==2)throw new(b("unrecoverableViolation"))("unsupported GLB version number","webgl");var d=c.getUint32(8,!0);if(d>a.byteLength)throw new(b("unrecoverableViolation"))("glb buffer is shorter than declared byte length","webgl");var e=new(b("GLTFResource"))(),f=12;while(f<d){var h=c.getUint32(f,!0),i=c.getUint32(f+4,!0);switch(i){case 1313821514:i=b("extractUTF8StringFromBuffer")(a,f+8,h);var j="";try{j=JSON.parse(i)}catch(a){throw new(b("unrecoverableViolation"))("failed to parse glTF JSON","webgl",a)}b("GLTFTypesValidator").validateGLTFBodyJSON(j);e.useJSON(j);break;case 5130562:e.addBinarySource(a,f+8,h);break;default:throw new(b("unrecoverableViolation"))("unexpected GLB section label","webgl")}f+=h+8}return e}}),null);
__d("useGLBLoadAndParse",["React","parseGLBResource","promiseDone"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=g.useState(null),d=c[0],e=c[1];g.useEffect(function(){var c=!1;b("promiseDone")(window.fetch(a).then(function(a){return a.arrayBuffer()}).then(function(a){if(c)return;a=b("parseGLBResource")(a);e(a)})["catch"](function(){e(null)}));return function(){c=!0}},[a]);return d}}),null);
__d("useGLContext",["React","WebPixelRatio","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a,c,d){var e=g.useState(null),f=e[0],h=e[1],i=(e=d==null?void 0:d.expand)!=null?e:!1;g.useEffect(function(){var a=document.createElement("canvas"),c=a.getContext("webgl");if(c==null){b("recoverableViolation")("Unable to create WebGL context","webgl");return function(){}}h(c);return function(){try{c.getExtension("WEBGL_lose_context").loseContext()}catch(a){b("recoverableViolation")("Failed to clean up WebGL context","webgl",{error:a})}}},[]);g.useEffect(function(){if(f==null)return;var d=f.canvas,e=b("WebPixelRatio").get(),g=a*e;e=c*e;d.width=g;d.height=e;f.viewport(0,0,g,e);d.style.width=i?"100%":a+"px"},[f,a,c,i]);d=g.useCallback(function(a){if(f==null)return;var b=f.canvas,c=b.parentNode;c!=null&&c.removeChild(b);a!=null&&a.appendChild(b)},[f]);return[f,d]}}),null);
__d("useGLTFDerivedFOV",["React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=1,i=.508015513,j=.666488587,k=.925,l=Object.freeze({landscape:-.14,portrait:-.124}),m=Object.freeze({landscape:-.124,portrait:-.112}),n=Object.freeze({landscape:.96,portrait:.8}),o=Object.freeze({landscape:.6,portrait:.7});function a(a){var b=g.useMemo(function(){var b;b=(b=a==null?void 0:(b=a.getExtras())==null?void 0:(b=b.FB_PHOTO_3D_DATA)==null?void 0:b.vFov)!=null?b:j;return b*k},[a]),c=g.useMemo(function(){var b;b=(b=a==null?void 0:(b=a.getExtras())==null?void 0:(b=b.FB_PHOTO_3D_DATA)==null?void 0:b.hFov)!=null?b:i;return b*k},[a]),d=g.useMemo(function(){var a=.1,d=1e3,e=1/Math.tan(b/2),f=c/b;return[e/f,0,0,0,0,e,0,0,0,0,(a+d)/(a-d),-1,0,0,a*d*2/(a-d),0]},[c,b]),e=g.useMemo(function(){var a=c>b?"landscape":"portrait",d=l[a],e=m[a];return[Math.tan(c/2)*h*d,Math.tan(b/2)*h*e,1-n[a],o[a]]},[c,b]),f=e[0],p=e[1],q=e[2];e=e[3];return{hFov:c,maxHorizontalAngle:f,maxVerticalAngle:p,projectionMatrix:d,targetInteractionWeightHorizontal:q,targetScrollWeightVertical:e,vFov:b}}}),null);
__d("Comet3DPhotoViewer.react",["fbt","CometFeedStoryImmersiveMediaMouseOverlay.react","CometLazyPopoverTrigger.react","ConstUriUtils","JSResourceForInteraction","Matrices","React","UserAgent","clearTimeout","createMeshesFromGLTF","gkx","glMatrixLookingAtTarget","mergeRefs","promiseDone","setTimeout","stylex","useFrameTiming","useGLBLoadAndParse","useGLContext","useGLTFDerivedFOV","useThrottled","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React"),i=b("JSResourceForInteraction")("CometFeedStory3DPhotoContextMenu.react").__setRef("Comet3DPhotoViewer.react"),j=1,k=.01,l=.005,m=.1,n=.06,o=.12;function a(a){var c=a.fallbackURI,d=a.fileURI,e=a.height,f=a.onLoad,p=a.photoID;a=a.width;var q=b("gkx")("678680"),r=h.useState(!1),s=r[0],t=r[1],u=h.useRef(null);r=b("useGLContext")(a,e,{expand:!0});var v=r[0],w=r[1];a=b("useFrameTiming")();var x=a[0],y=b("useGLBLoadAndParse")(d);e=h.useState([]);var z=e[0],A=e[1];h.useEffect(function(){if(v==null||y==null)return;var a=!1;b("promiseDone")(b("createMeshesFromGLTF")(v,y).then(function(b){if(a)return;A(b);f&&f()}));return function(){a=!0}},[v,y,f]);r=b("useGLTFDerivedFOV")(y);var B=r.hFov,C=r.maxHorizontalAngle,D=r.maxVerticalAngle,E=r.projectionMatrix,F=r.targetInteractionWeightHorizontal,G=r.targetScrollWeightVertical,H=r.vFov,I=h.useCallback(function(){if(v==null||z.length===0)return;v.enable(v.DEPTH_TEST);v.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT);v.enable(v.BLEND);v.blendFunc(v.SRC_ALPHA,v.ONE_MINUS_SRC_ALPHA);for(var a=z,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.program.use();d.draw()}},[z,v]),J=function(){b("clearTimeout")(u.current),u.current=b("setTimeout")(function(){t(!0)},3e3)};a=function(){s&&t(!1),J()};var K=b("useThrottled")(a,100),L=b("useVisibilityObserver")({onVisible:function(){b("clearTimeout")(u.current),u.current=b("setTimeout")(function(){t(!0)},3e3)}});e=h.useMemo(function(){return b("mergeRefs")(w,L)},[w,L]);h.useEffect(function(){return function(){b("clearTimeout")(u.current)}},[]);var M=h.useRef([0,0]),N=h.useRef(1),O=h.useRef(1),P=h.useRef([0,0]),Q=h.useRef([0,0]),R=h.useRef(0),S=h.useCallback(function(a){if(v==null)return;if(a!=null){if(R.current!==0){var c=Math.min(a-R.current,50);c=Math.max(Math.min(l*c,1),0);var d=P.current,e=d[0];d=d[1];var f=Q.current,g=f[0];f=f[1];Q.current=[g+c*(e-g),f+c*(d-f)];g=N.current;f=O.current;O.current=f+c*(g-f);(Math.abs(Q.current[0]-e)>k||Math.abs(Q.current[1]-d)>k||Math.abs(O.current-g)>k)&&x(S)}R.current=a}c=O.current;f=H*o*(2*c-1);e=(1-2*c)*D;d=Q.current;g=d[0];a=d[1];d=Math.sin(g*Math.PI*.5);g=Math.sin(a*Math.PI*.5);a=H*n*g;var h=B*n*d;d=-d*C;g=-g*D;c=Math.pow(c+.16,3)/(Math.pow(c+.16,3)+Math.pow(1-(c+.16),3))-.9;a=-(a+f);f=-h;h=j-c*m;c=[0+h*Math.cos(a)*Math.sin(f),0+h*Math.sin(a),-j+h*Math.cos(a)*Math.cos(f)];h=[-(F*d),-(e*G+g*(1-G)),-j];a=b("glMatrixLookingAtTarget")(c,h);f=b("Matrices").invertMat4(a);for(var d=z,e=Array.isArray(d),g=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(g>=d.length)break;c=d[g++]}else{g=d.next();if(g.done)break;c=g.value}h=c;h.setUniform("viewMatrix",f);h.setUniform("projectionMatrix",E)}I()},[I,v,B,C,D,z,E,x,F,G,H]),T=h.useCallback(function(){if(v==null)return;var a=v.canvas,b=0,c=0;while(a!=null)b+=a instanceof HTMLElement?a.offsetLeft:0,c+=a instanceof HTMLElement?a.offsetTop:0,a=a instanceof HTMLElement?a.offsetParent:null;M.current=[b,c]},[M,v]),U=h.useCallback(function(){var a;if(v==null)return;T();var b=window.innerHeight,c=v.canvas.clientHeight;b=b+c;a=M.current[1]-((a=(a=document.scrollingElement)==null?void 0:a.scrollTop)!=null?a:0)+c;c=a/b;N.current=c;if(c<0||c>1)return;x(S)},[M,v,x,S,T]);r=h.useCallback(function(a){if(v==null)return;T();var b=a.pageX;a=a.pageY;b=b-M.current[0];a=a-M.current[1];b=2*b/v.canvas.clientWidth-1;a=1-2*a/v.canvas.clientHeight;P.current=[b,a];K();if(b<-1||a<-1||b>1||a>1)return;x(S)},[v,P,x,K,S,T]);h.useEffect(function(){document.addEventListener("scroll",U);S();return function(){document.removeEventListener("scroll",U)}},[S,U]);var V,W;if(p!=null){V=(a=b("ConstUriUtils").getUri("/intern/compphoto/x3d/3dphoto_console"))==null?void 0:(a=a.setDomain("our.intern.facebook.com"))==null?void 0:(a=a.setProtocol("https"))==null?void 0:(a=a.addQueryParam("ent_id",p))==null?void 0:a.toString();W=(a=b("ConstUriUtils").getUri("/intern/compphoto/x3d/"+p+"/depth"))==null?void 0:(p=a.setDomain("our.intern.facebook.com"))==null?void 0:(a=p.setProtocol("https"))==null?void 0:a.toString()}var X=function(a,c){var d=/^a$/i.test(a.target.nodeName||""),e=b("UserAgent").isPlatform("Mac OS X")?a.metaKey:a.ctrlKey;d=!d&&q&&e;d&&(a.preventDefault(),c())},Y=h.jsx("div",{onMouseMove:r,ref:e,children:h.jsx(b("CometFeedStoryImmersiveMediaMouseOverlay.react"),{descriptionFbt:g._("Move your mouse to view the photo in 3D"),isActive:s,showClick:!1})});p=h.jsx(b("CometLazyPopoverTrigger.react"),{popoverProps:{consoleURL:V,depthURL:W,fallbackImgURL:c,fileURL:d},popoverResource:i,children:function(a,b){return h.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 i09qtzwb",onContextMenu:function(a){X(a,b)},ref:a,children:Y})}});return q?p:Y}}),null);
__d("PagesCometInviteFriendsListPlaceholder.react",["CometProfileListRowLoadingState.react","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){a=a.count;return g.jsx("div",{children:Array.apply(null,Array(a)).map(function(a,c){return g.jsx(b("CometProfileListRowLoadingState.react"),{},c)})})}}),null);
__d("CometPhotoViewerResponsiveInnerWrapper.react",["CometRouteRenderType","React","stylex"],(function(a,b,c,d,e,f){"use strict";f.useCometPhotoViewerContainerStyles=j;var g,h=b("React"),i={backgroundContainerDialog:{"@media (max-width: 899px)":{height:"nos9j3a5"}},backgroundContainerDialogWithFooter:{height:"n626y76b","@media (max-width: 899px)":{height:"aessy0lw"}},backgroundContainerResponsive:{alignItems:"bp9cbjyn",display:"j83agx80",position:"l9j0dhe7","@media (max-width: 899px)":{height:"spskuzq3"}},backgroundContainerTabs:{height:"bkyfam09","@media (max-width: 899px)":{height:"pw8zj2ei"}},backgroundContainerTabsWithFooter:{height:"bekozo2m","@media (max-width: 899px)":{height:"f6tgzqhp"}},image:{maxWidth:"d2edcug0","@media (max-width: 899px)":{maxHeight:"r9f5tntg"}},maxImageHeightDialog:{maxHeight:"ji94ytn4","@media (max-width: 899px)":{maxHeight:"bnxxjg7g"}},maxImageHeightDialogWithFooter:{maxHeight:"nskh8ow2","@media (max-width: 899px)":{maxHeight:"dx5evmzu"}},maxImageHeightTabs:{maxHeight:"gitj76qy","@media (max-width: 899px)":{maxHeight:"bnxxjg7g"}},maxImageHeightTabsWithFooter:{maxHeight:"kgqd366c","@media (max-width: 899px)":{maxHeight:"a7lra598"}},passthroughImage:{backgroundPosition:"d2hbt3d9",backgroundRepeat:"qb00l2mb",backgroundSize:"gj6al65z",height:"datstx6m",width:"k4urcfbm"},photoWrapperPlaceholder:{height:"datstx6m",width:"k4urcfbm"},photoWrapperResponsive:{alignItems:"bp9cbjyn",display:"j83agx80",flexDirection:"cbu4d94t",justifyContent:"taijpn5t",position:"l9j0dhe7"},placeholderContainer:{height:"datstx6m",width:"k4urcfbm"}};function j(a,c){a===void 0&&(a=!1);c===void 0&&(c=!1);var d=b("CometRouteRenderType").useIsPushView();return(g||(g=b("stylex")))(i.backgroundContainerResponsive,!a&&d&&i.backgroundContainerDialog,!a&&!d&&i.backgroundContainerTabs,a&&d&&i.backgroundContainerDialogWithFooter,a&&!d&&i.backgroundContainerTabsWithFooter,c&&i.placeholderContainer)}function k(a,c){var d=b("CometRouteRenderType").useIsPushView();return(g||(g=b("stylex")))(!a&&d?i.maxImageHeightDialog:null,!a&&!d?i.maxImageHeightTabs:null,a&&d?i.maxImageHeightDialogWithFooter:null,a&&!d?i.maxImageHeightTabsWithFooter:null,c?i.passthroughImage:null,c?null:i.image)}function l(a,c){var d=b("CometRouteRenderType").useIsPushView();return[!a&&d&&i.maxImageHeightDialog,!a&&!d&&i.maxImageHeightTabs,a&&d&&i.maxImageHeightDialogWithFooter,a&&!d&&i.maxImageHeightTabsWithFooter,c&&i.passthroughImage,!c&&i.image]}function a(a,c){var d=a.height,e=a.imageUri,f=a.showPlaceholderImage;f=f===void 0?!0:f;var l=a.width;a=a.withFooter;a=a===void 0?!1:a;a=k(a,!0);var m=j(!1,!0);return h.jsx("div",{className:m,ref:(m=c)!=null?m:null,children:e!=null&&f&&h.jsx("div",{className:(g||(g=b("stylex")))(i.photoWrapperResponsive,i.photoWrapperPlaceholder),children:h.jsx("div",{className:a,style:d!=null&&l!=null?{backgroundImage:"url("+e+")",maxHeight:d,maxWidth:l}:{backgroundImage:"url("+e+")"}},e)})})}function c(a,c){var d=a.imageComponent,e=a.imageComponentWithXStyle;a=a.withFooter;a=a===void 0?!1:a;var f=k(a,!1);a=l(a,!1);return h.jsx("div",{className:(g||(g=b("stylex")))(i.photoWrapperResponsive),ref:c,children:d!=null?d(f):e!=null?e(a):null})}d=h.forwardRef(c);f.CometPhotoViewerImageWrapper=d;e=h.forwardRef(a);f.CometPhotoViewerPlaceholderWrapper=e}),null);
__d("NumAiSuggestionsBubbleImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1746400");c=b("FalcoLoggerInternal").create("num_ai_suggestions_bubble_impression",a);e.exports=c}),null);
__d("ProductTagPhotoViewerDoneClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744225");c=b("FalcoLoggerInternal").create("product_tag_photo_viewer_done_click",a);e.exports=c}),null);
__d("CometPhotoViewer.react",["fbt","Actor","CometAIProductTagSuggestionsUtil.react","CometHero.react","CometImage.react","CometMediaViewerStage.react","CometPagelet.react","CometPhotoTaggingConstants","CometPhotoViewerImageSuspense","CometPhotoViewerResponsiveInnerWrapper.react","CometPhotoViewerViewStateContext","CometPhotoViewerViewStateDispatcherContext","CometPlaceholder.react","CometRelay","CometRouteParams","CometRouteRenderType","CometTheme.react","CometVisualCompletionAttributes","CometWarningScreenContext","JSResourceForInteraction","React","TetraButton.react","TetraText.react","WebSession","deferredLoadComponent","gkx","recoverableViolation","requireCond","requireDeferred","requireDeferredForDisplay","stylex","useCometLazyDialog","useCurrentRoute","useMediaViewerVPVDLogger","useMergeRefs","useStoryViewabilityLogger","cr:1685690","cr:1685691","CometPhotoViewer_photo.graphql","NumAiSuggestionsBubbleImpressionFalcoEvent","ProductTagPhotoViewerDoneClickFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=b("React"),j=b("requireDeferred")("CometMediaTagFalcoEvent");c=b("requireDeferred")("CometPhotoTagLayer.react");d=b("requireDeferredForDisplay")("CometPhotoViewerTopRightIcons.react");var k=b("deferredLoadComponent")(c),l=b("deferredLoadComponent")(d),m=b("JSResourceForInteraction")("CometPhotoViewerProductTagEducationDialog.react").__setRef("CometPhotoViewer.react");function n(a){return(a||[]).some(function(a){a=a.projection_type;return a==="tiled_cubemap"})}function o(a){return(a||[]).some(function(a){a=a.projection_type;return a==="three_d"})}var p=h!==void 0?h:h=b("CometPhotoViewer_photo.graphql");function a(a){var c,d,e,f,h,q,r,s,t,u=i.useContext(b("CometPhotoViewerViewStateDispatcherContext")),v=i.useContext(b("CometPhotoViewerViewStateContext")),w=b("useCometLazyDialog")(m),x=w[0];w=b("Actor").useActor();var y=w[0];w[1];w=a.origHeight;var z=a.origSrc,A=a.origWidth,B=a.photo,C=a.photoTagLayerQueryReference,D=a.showTag,E=D===void 0?!1:D;D=a.storyRenderLocation;var F=babelHelpers.objectWithoutPropertiesLoose(a,["origHeight","origSrc","origWidth","photo","photoTagLayerQueryReference","showTag","storyRenderLocation"]),G=b("CometRelay").useFragment(p,B);B=i.useCallback(function(){u({tagData:{isProductTagging:!1,tagModeEnabled:!1},type:"UPDATE_TAG_DATA"})},[u]);var H=G==null?void 0:(c=G.image)==null?void 0:c.uri,I=G==null?void 0:G.id,J=G==null?void 0:(c=G.owner)==null?void 0:c.id;c=(c=G==null?void 0:(c=G.tags)==null?void 0:c.edges)!=null?c:[];var K=i.useRef(new Set(c.map(function(a){return a==null?void 0:(a=a.node)==null?void 0:a.name}))),L=G==null?void 0:G.created_time,M=G==null?void 0:(c=G.container_story)==null?void 0:c.post_id;c=(G==null?void 0:G.can_viewer_add_tags)===!0;d=G==null?void 0:(d=G.cix_screen)==null?void 0:d.view_model;var N=i.useMemo(function(){return{authorId:J,createdTime:L,fbid:I,source:6,storyContainerId:M}},[J,L,I,M]);N=b("useMediaViewerVPVDLogger")(N);var O=N[0],P=N[1];N=G==null?void 0:(N=G.container_story)==null?void 0:N.encrypted_tracking;e=G==null?void 0:(e=G.container_story)==null?void 0:e.viewability_config;f=(f=G==null?void 0:G.container_story)!=null?f:{};f=f.client_view_config;f={can_delay_log_impression:f==null?void 0:f.can_delay_log_impression,use_banzai_signal_imp:f==null?void 0:f.use_banzai_signal_imp,use_banzai_vital_imp:f==null?void 0:f.use_banzai_vital_imp};f=b("useStoryViewabilityLogger")({clientViewConfig:f,disabledViewabilityEventTypes:[5],encryptedTracking:N,position:0,viewabilityConfig:e});N=f.ref;e=b("useMergeRefs")(O,N);f=b("CometPhotoViewerResponsiveInnerWrapper.react").useCometPhotoViewerContainerStyles();var Q=b("CometWarningScreenContext").useIsOverlayShown();O=b("CometAIProductTagSuggestionsUtil.react").getUntaggedKnownTags(G,v.knownAITags);N=b("CometAIProductTagSuggestionsUtil.react").getUntaggedUnknownTags(G,v.unknownAITags);var R=O.length+N.length,S=i.useRef(function(){b("NumAiSuggestionsBubbleImpressionFalcoEvent").log(function(){var a;return{creator_id:G==null?void 0:(a=G.owner)==null?void 0:a.page_id,media_id:I,media_type:"photo",platform:"comet",referral_source:"post_viewer"}})});i.useEffect(function(){R>0&&(S.current&&S.current())},[R]);O=function(){var a;u({tagData:{isProductTagging:!1,tagModeEnabled:!1},type:"UPDATE_TAG_DATA"});if(I==null){b("recoverableViolation")("photo id can not be null","comet_feed");return}a=(a=G==null?void 0:(a=G.tags)==null?void 0:a.edges)!=null?a:[];a=a.map(function(a){return a==null?void 0:(a=a.node)==null?void 0:a.name});var c=b("WebSession").getId(),d=K.current.size?a.filter(function(a){return!K.current.has(a)}):a;T?b("ProductTagPhotoViewerDoneClickFalcoEvent").log(function(){return{container_post_id:M,creator_id:y,media_id:I,media_type:"photo",platform:"comet",referral_source:"post_viewer"}}):j.onReady(function(a){a.log(function(){return{media_fbid:I,num_users_tagged:d.length,session_id:c}})});K.current=new Set(a)};N=Boolean(G==null?void 0:(N=G.tags)==null?void 0:N.edges.some(function(a){return!(a==null?void 0:(a=a.tag)==null?void 0:a.is_product_tag)}));h=((G==null?void 0:(h=G.photo_product_tags)==null?void 0:h.length)||0)>0;q=Boolean(G==null?void 0:(q=G.owner)==null?void 0:q.page_shop_has_taggable_products)&&Boolean(G==null?void 0:(q=G.owner)==null?void 0:q.is_viewer_admin);r=G==null?void 0:(r=G.owner)==null?void 0:r.additional_profile_has_taggable_products;r=r!==null&&r!==void 0&&b("gkx")("1733965")?Boolean(r)&&y===(G==null?void 0:(r=G.owner)==null?void 0:r.user_id):q&&Boolean((G==null?void 0:(r=G.owner)==null?void 0:r.page_id)!=null)&&y===(G==null?void 0:(r=G.owner)==null?void 0:r.page_id);h=N||!h&&!N&&!q;var T=r&&!N;q=b("CometRouteParams").useRouteParams();r=b("useCurrentRoute")();r=(N=r==null?void 0:r.transparent)!=null?N:!1;var U=q.aymt_channel!==null&&q.aymt_channel!==void 0,V=i.useRef(!1);i.useEffect(function(){U&&b("gkx")("1818047")&&(V.current||x({})),V.current=!0});N=b("CometRouteRenderType").useIsPushView();q=b("CometWarningScreenContext").useParentRenderInstructions();var W=G==null?void 0:(s=G.image)==null?void 0:s.width,X=G==null?void 0:(s=G.image)==null?void 0:s.height;s=i.useMemo(function(){if(G==null||H==null||W==null||X==null)return null;var a=i.jsx(b("CometImage.react"),{height:X,src:H,width:W},b("gkx")("1778518")?void 0:H);if(b("cr:1685690")!=null&&b("gkx")("1680758")&&n(G==null?void 0:G.immersive_photo_encodings))return i.jsx(b("cr:1685690"),{fallback:a,photo:G});else if(b("cr:1685691")!=null&&b("gkx")("1680759")&&o(G==null?void 0:G.immersive_photo_encodings))return i.jsx(b("cr:1685691"),{fallback:a,photo:G})},[H,X,G,W]);if(H==null){b("recoverableViolation")("Error loading media. More investigation is needed, might be an invalid photo, a special type of MediaSet, or something else.","comet_ui");return g._("No valid photo to display.")}t=!r||!N?(t=z)!=null?t:H:null;t=t!=null&&t!==""?{backgroundSrc:t}:null;var Y=q==="CLIP_TO_MEDIA",Z=d!=null?i.jsx(b("CometRelay").MatchContainer,{match:d,props:{alwaysShowDetails:!0,data:d,isFullScreenMediaPlayerStyle:!0,mediaUri:H,surface:"photo_viewer"}}):null;q=i.jsx(b("CometPagelet.react").Placeholder,{className:f,fallback:z!=null?i.jsx(b("CometPhotoViewerResponsiveInnerWrapper.react").CometPhotoViewerPlaceholderWrapper,{height:w,imageUri:z,ref:e,showPlaceholderImage:z!=null&&A!=null&&w!=null&&!Q,width:A}):i.jsx("div",{className:f,ref:e,children:i.jsx(b("CometPhotoViewerResponsiveInnerWrapper.react").CometPhotoViewerImageWrapper,{imageComponentWithXStyle:function(a){return i.jsxs(i.Fragment,{children:[P,!Q&&i.jsx(b("CometImage.react"),{src:H,testid:void 0,xstyle:a},b("gkx")("1778518")?void 0:H)]})}})}),name:"MediaViewerPhoto",pageletType:"media",ref:e,children:s!=null?s:i.jsx(b("CometPhotoViewerResponsiveInnerWrapper.react").CometPhotoViewerImageWrapper,{imageComponent:function(a){return i.jsxs(i.Fragment,{children:[P,i.jsx(b("CometHero.react"),{description:"MainPhoto"}),i.jsx(b("CometPhotoViewerImageSuspense"),{className:a,"data-testid":void 0,src:H},b("gkx")("1778518")?void 0:H),Y&&Z,E&&C!=null?i.jsx(b("CometPlaceholder.react"),{fallback:null,children:i.jsx("div",babelHelpers["extends"]({},b("CometVisualCompletionAttributes").IGNORE,{className:"kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 i09qtzwb"+(v.tagModeEnabled?"":" hzruof5a"),children:i.jsx(k,{isTaggingProducts:v.isProductTagging,photoTagLayerQueryReference:C,tagBoxSize:b("CometPhotoTaggingConstants").TAGGING_BOX_SIZE,tagModeEnabled:v.tagModeEnabled})}))}):null]})}})},b("gkx")("1778518")?void 0:H);d=v.isProductTagging?"btwxx1t3 j83agx80 bp9cbjyn":"cj5g2342 kfkz5moi pmk7jnqg";z=v.isProductTagging?g._("Click on the photo to start product tagging"):g._("\u1013\u102c\u1010\u103a\u1015\u102f\u1036\u1010\u103d\u1004\u103a \u101b\u100a\u103a\u100a\u103d\u103e\u1014\u103a\u1038\u1001\u103b\u1000\u103a\u1010\u1015\u103a\u101b\u1014\u103a \u1014\u103e\u102d\u1015\u103a\u1015\u102b");w=E&&C!=null&&c===!0&&!s;return i.jsxs("div",{className:"l9j0dhe7 buofh1pr cbu4d94t j83agx80","data-testid":void 0,children:[i.jsx(b("CometMediaViewerStage.react"),babelHelpers["extends"]({},t,{backgroundColor:r&&N?"dark":"default",initialTracePolicy:a.initialTracePolicy,onNavigatePhoto:B,storyRenderLocation:D,subOrigin:a.subOrigin},F,{children:q})),Q?null:i.jsx(l,{authorId:J,canTag:w,fromAYMTRetroTagNotification:U,numNewAISuggestions:R,photoID:I,shouldShowPeopleTagButton:h,shouldShowProductTagButton:T,storyContainerId:M}),w&&v.tagModeEnabled?i.jsx(b("CometTheme.react"),{className:"k4urcfbm pmk7jnqg hzruof5a jfpizvyy taijpn5t fdipuqhw j83agx80 i09qtzwb kpb67iw4 aovydwv3",element:"div",theme:"dark",children:i.jsxs("div",{className:d,children:[i.jsx("div",{className:"rv4hoivh j83agx80 bp9cbjyn",children:i.jsx("div",{className:T!==!0?"ihqw7lf3":null,children:i.jsx(b("TetraText.react"),{color:"primary",numberOfLines:1,type:"headline4",children:z})})}),i.jsx("div",{className:"oqq733wu",children:i.jsx(b("TetraButton.react"),{label:g._("Done Tagging"),onPress:O,type:"primary"})})]})}):null,!Y&&Z]})}}),null);
__d("SaveClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744339");c=b("FalcoLoggerInternal").create("save_click",a);e.exports=c}),null);
__d("SaveSurfaceImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744342");c=b("FalcoLoggerInternal").create("save_surface_impression",a);e.exports=c}),null);
__d("CometComposerEditVideoButtonWithNuxQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"nux_id",value:8473}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometComposerEditVideoButtonWithNuxQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometComposerEditVideoButtonWithNux_nux"}],storageKey:"nux(nux_id:8473)"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"CometComposerEditVideoButtonWithNuxQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"nux_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show",storageKey:null}],type:"DefaultNUX",abstractKey:null}],storageKey:"nux(nux_id:8473)"}]},params:{id:"3557933320896366",metadata:{},name:"CometComposerEditVideoButtonWithNuxQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometComposerEditVideoButtonWithNux_nux.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometComposerEditVideoButtonWithNux_nux",selections:[{args:null,kind:"FragmentSpread",name:"useMaybeNUX_nux"}],type:"DefaultNUX",abstractKey:null};e.exports=a}),null);
__d("EntPhotoCollageItemContainerQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"id"},b={defaultValue:null,kind:"LocalArgument",name:"scale"},c=[{kind:"Variable",name:"id",variableName:"id"}];return{fragment:{argumentDefinitions:[a,b],kind:"Fragment",metadata:null,name:"EntPhotoCollageItemContainerQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"EntPhotoCollageItem_media"}],type:"Photo",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[b,a],kind:"Operation",name:"EntPhotoCollageItemContainerQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"focus",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null}],storageKey:null}]},params:{id:"2930723467039587",metadata:{},name:"EntPhotoCollageItemContainerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("EntPhotoCollageItem_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"EntPhotoCollageItem_media",selections:[{alias:null,args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"focus",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null};e.exports=a}),null);
__d("ComposerMediaDeepDiveItemQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],b=[{kind:"Variable",name:"id",variableName:"id"}],c={alias:null,args:null,kind:"ScalarField",name:"has_taggable_products",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"ComposerMediaDeepDiveItemQuery",selections:[{alias:null,args:b,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[c],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ComposerMediaDeepDiveItemQuery",selections:[{alias:null,args:b,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"2545780295523587",metadata:{},name:"ComposerMediaDeepDiveItemQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("EntPhotoDeepDiveItemContainerQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"id"},b={defaultValue:null,kind:"LocalArgument",name:"scale"},c=[{kind:"Variable",name:"id",variableName:"id"}];return{fragment:{argumentDefinitions:[a,b],kind:"Fragment",metadata:null,name:"EntPhotoDeepDiveItemContainerQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"EntPhotoDeepDiveItem_media"}],type:"Photo",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[b,a],kind:"Operation",name:"EntPhotoDeepDiveItemContainerQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null}],storageKey:null}]},params:{id:"2758576607601107",metadata:{},name:"EntPhotoDeepDiveItemContainerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("EntPhotoDeepDiveItem_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"EntPhotoDeepDiveItem_media",selections:[{alias:null,args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null};e.exports=a}),null);
__d("RemoteVideoFilePreviewQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"videoID"}],b=[{kind:"Variable",name:"id",variableName:"videoID"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"start",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"representation_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mime_codec",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"segment_type",storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"RemoteVideoFilePreviewQuery",selections:[{alias:null,args:b,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"VideoPlayerRelay_video"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"RemoteVideoFilePreviewQuery",selections:[{alias:null,args:b,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"original_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcaster_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_streaming",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_trace_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_looping",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_video_broadcast",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"loop_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical_enabled",storageKey:null},{alias:null,args:null,concreteType:"MusicVideoMetadata",kind:"LinkedField",name:"pmv_metadata",plural:!1,selections:[d,c],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"permalink_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dash_prefetch_experimental",storageKey:null},{alias:null,args:null,concreteType:"VideoCaptionLocale",kind:"LinkedField",name:"video_available_captions_locales",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"localized_creation_method",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoPrefetchResources",kind:"LinkedField",name:"dash_prefetch_resources",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoPrefetchResource",kind:"LinkedField",name:"audio",plural:!0,selections:e,storageKey:null},{alias:null,args:null,concreteType:"VideoPrefetchResource",kind:"LinkedField",name:"video",plural:!0,selections:e,storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"context",value:"DEFAULT"},{kind:"Literal",name:"supported",value:["CometVideoPlayerOzImplementation","CometVideoPlayerShakaImplementation","CometVideoPlayerProgressiveImplementation"]}],concreteType:null,kind:"LinkedField",name:"comet_video_player_implementations",plural:!0,selections:[d,{kind:"InlineFragment",selections:[{documentName:"useRelay3DVideoImplementations_video",fragmentName:"useRelay3DOzImplementation_implementation",fragmentPropName:"implementation",kind:"ModuleImport"}],type:"CometVideoPlayerOzImplementation",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useRelay3DVideoImplementations_video",fragmentName:"useRelay3DShakaImplementation_implementation",fragmentPropName:"implementation",kind:"ModuleImport"}],type:"CometVideoPlayerShakaImplementation",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useRelay3DVideoImplementations_video",fragmentName:"useRelay3DProgressiveImplementation_implementation",fragmentPropName:"implementation",kind:"ModuleImport"}],type:"CometVideoPlayerProgressiveImplementation",abstractKey:null}],storageKey:'comet_video_player_implementations(context:"DEFAULT",supported:["CometVideoPlayerOzImplementation","CometVideoPlayerShakaImplementation","CometVideoPlayerProgressiveImplementation"])'},{alias:null,args:null,kind:"ScalarField",name:"can_use_oz",storageKey:null},{alias:"playable_url_dash",args:[{kind:"Literal",name:"scrubbing_preference",value:"MPEG_DASH"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(scrubbing_preference:"MPEG_DASH")'},{alias:null,args:null,kind:"ScalarField",name:"dash_manifest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_quality_preference",storageKey:null},{alias:null,args:null,concreteType:"VideoPlayerShakaLiveP2PInit",kind:"LinkedField",name:"video_player_shaka_live_p2p_init",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"json_encoded_video_data",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"playable_url",storageKey:null},{alias:"playable_url_quality_hd",args:[{kind:"Literal",name:"quality",value:"HD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"HD")'},{alias:null,args:null,concreteType:"SphericalVideoFallbackUrls",kind:"LinkedField",name:"spherical_video_fallback_urls",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sd",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_gaming_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_latency_menu_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"comet_video_player_static_config",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"comet_video_player_context_sensitive_config",storageKey:null},{alias:null,args:null,concreteType:"VideoPlayerShakaPerformanceLoggerInit",kind:"LinkedField",name:"video_player_shaka_performance_logger_init",plural:!1,selections:[{documentName:"useVideoPlayerShakaPerformanceLoggerRelay_video",fragmentName:"useVideoPlayerShakaPerformanceLoggerRelay_init",fragmentPropName:"init",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoplay_gating_result",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_autoplay_setting",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_autoplay",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"drm_info",storageKey:null},{alias:null,args:null,concreteType:"VideoP2PSettings",kind:"LinkedField",name:"p2p_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ticket",storageKey:null},{alias:null,args:null,concreteType:"VideoP2PSettingsConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"delay_p2p_until_play",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"disable_hivejava_for_livevc",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoHiveInitializationOptions",kind:"LinkedField",name:"hive_initialization_options",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoHiveInitializationOptionHiveJava",kind:"LinkedField",name:"hive_java",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"min_version",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hive_tech_order",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"debug_level",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"video_volume_setting",storageKey:null},c],storageKey:null},{alias:null,args:null,concreteType:"CaptionsSettings",kind:"LinkedField",name:"captions_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"always_show_captions",storageKey:null},c],storageKey:null},{alias:null,args:null,concreteType:"VideoBroadcastLowLatencyConfig",kind:"LinkedField",name:"broadcast_low_latency_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ll_desired_latency_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ll_latency_tolerance_ms",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_availability",storageKey:null},{alias:null,args:null,concreteType:"VideoMutedSegment",kind:"LinkedField",name:"muted_segments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"mute_start_time_in_sec",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mute_end_time_in_sec",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"SphericalVideoRenderer",kind:"LinkedField",name:"spherical_video_renderer",plural:!1,selections:[{documentName:"VideoPlayerRelay_video_spherical_video_renderer",fragmentName:"VideoPlayerSphericalRelay_sphericalVideoRenderer",fragmentPropName:"sphericalVideoRenderer",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreaks",kind:"LinkedField",name:"instream_video_ad_breaks_comet",plural:!1,selections:[{documentName:"VideoPlayerRelay_video_instream_video_ad_breaks_comet",fragmentName:"InstreamVideoAdBreaksPlayer_adBreaks",fragmentPropName:"adBreaks",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_premium_music_video",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"selected_latency_setting",storageKey:null}]}],storageKey:null}]},params:{id:"3201247810004507",metadata:{},name:"RemoteVideoFilePreviewQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometMediaEditorPageResource",["JSResourceForInteraction"],(function(a,b,c,d,e,f){"use strict";a=b("JSResourceForInteraction")("CometMediaEditorPage.react").__setRef("CometMediaEditorPageResource");c=a;e.exports=c}),null);
__d("CometComposerEditMediaAttachmentItemButton.react",["ix","fbt","CometMediaEditorPageResource","React","TetraButton.react","emptyFunction","fbicon","lazyLoadComponent","useCometComposerPushPage","useComposerPluginIneligibility"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("lazyLoadComponent")(b("CometMediaEditorPageResource"));function a(a,c){var d=a.buttonLabel;d=d===void 0?h._("Edit"):d;var e=a.index,f=a.isOnVideoLiteComposer;a=a.onClickLog;var k=a===void 0?b("emptyFunction"):a,l=b("useCometComposerPushPage")();a=b("useComposerPluginIneligibility")().has("MEDIA_EDIT");return a?null:i.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("477825"),16),label:d,onPress:function(){l!=null&&(k(),l(h._("\u1013\u102c\u1010\u103a\u1015\u102f\u1036 \u1021\u101e\u1031\u1038\u1005\u102d\u1010\u103a"),function(a){a=a.onReturn;return i.jsx(j,{index:e,isDialog:!0,isOnVideoLiteComposer:f,onBack:a})},{hasCustomHeader:!0}))},ref:c,testid:void 0,type:"overlay"})}c=i.forwardRef(a);e.exports=c}),null);
__d("CometComposerEditVideoButtonWithNux.react",["fbt","CometComposerEditMediaAttachmentItemButton.react","CometRelay","React","setTimeout","stylex","useCometCallout","useCometVideoComposerLog","useMaybeNUX","CometComposerEditVideoButtonWithNuxQuery.graphql","CometComposerEditVideoButtonWithNux_nux.graphql"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i,j=b("React"),k={nux:{maxWidth:"nqmqzb3c"}},l=h!==void 0?h:h=b("CometComposerEditVideoButtonWithNuxQuery.graphql"),m=i!==void 0?i:i=b("CometComposerEditVideoButtonWithNux_nux.graphql");function n(a){var c=g._("Use Publishing Options to add a title and captions to your video and make other changes that can improve its distribution.");a=b("CometRelay").useFragment(m,a);a=b("useMaybeNUX")(a);var d=a[0],e=a[1];a=j.useState(!1);var f=a[0],h=a[1];a={align:"start",arrowStyle:"inset",autoAlign:!0,hasCloseButton:!0,label:c,onHide:function(){h(!1),e()},position:"below",type:"accent",xstyle:k.nux};c=b("useCometCallout")(a,f);d===!0&&b("setTimeout")(function(){h(d)},100);return c}function a(){var a=j.useRef(!1),c=b("useCometVideoComposerLog")(),d=c.logEvent;j.useEffect(function(){a.current||(d("dialog_bootloaded"),a.current=!0)},[d]);c=b("CometRelay").useLazyLoadQuery(l,{});c=c.nux!==null?n(c.nux):null;return j.jsx(b("CometComposerEditMediaAttachmentItemButton.react"),{buttonLabel:g._("\u1011\u102f\u1010\u103a\u101d\u1031\u1001\u103c\u1004\u103a\u1038 \u101b\u103d\u1031\u1038\u1001\u103b\u101a\u103a\u1005\u101b\u102c\u1019\u103b\u102c\u1038"),index:0,isOnVideoLiteComposer:!0,onClickLog:function(){d("open_publish_option_edit_flow")},ref:c})}}),null);
__d("Comet360PhotoEditButton.react",["ix","fbt","CometComposerPushPageContext","CometErrorBoundary.react","FeedComposerCometGlimmer.react","JSResourceForInteraction","React","TetraButton.react","lazyLoadComponent","fbicon","useCometComposerPushPage"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React"),j=b("lazyLoadComponent")(b("JSResourceForInteraction")("Comet360PhotoEditor.react").__setRef("Comet360PhotoEditButton.react"));function a(){var a=b("useCometComposerPushPage")(),c="Edit";return i.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("477825"),16),label:c,onPress:function(){a&&a(h._("\u1005\u1010\u1004\u103a\u1019\u100a\u1037\u103a \u1019\u103c\u1004\u103a\u1000\u103d\u1004\u103a\u1000\u102d\u102f \u101b\u103d\u1031\u1038\u1001\u103b\u101a\u103a\u1015\u102b"),function(c){c=c.onReturn;return i.jsx(b("CometComposerPushPageContext").Provider,{value:a,children:i.jsx(b("CometErrorBoundary.react"),{fallback:function(){return i.jsx(b("FeedComposerCometGlimmer.react"),{})},children:i.jsx(j,{onBack:c})})})})},type:"overlay"})}}),null);
__d("ComposerMediaDeepDiveAddMediaButton.react",["ix","fbt","React","TetraButton.react","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React");function a(a){a=a.onClick;return i.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("481773"),16),label:h._("\u1013\u102c\u1010\u103a\u1015\u102f\u1036\u1019\u103b\u102c\u1038\/\u1017\u102e\u1012\u102e\u101a\u102d\u102f\u1019\u103b\u102c\u1038 \u1011\u100a\u1037\u103a\u1015\u102b"),onPress:a,reduceEmphasis:!0,type:"secondary"})}}),null);
__d("CometComposerRemoveMediaAttachmentItemButton.react",["ix","fbt","React","TetraCircleButton.react","fbicon","isMimeTypeForMedia","stylex","useComposerViewStateDispatcher"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React");function a(a){var c=a.attachment,d=b("useComposerViewStateDispatcher")();a=i.useCallback(function(){d({attachment:c,type:"REMOVE_MEDIA_ATTACHMENT_ITEM"})},[c,d]);return i.jsx("div",{className:"a7x4jqbc gwewmpg2 pmk7jnqg jaqpu5ht",children:i.jsx(b("TetraCircleButton.react"),{icon:b("fbicon")._(g("478238"),20),label:b("isMimeTypeForMedia").isMimeTypeForPhoto(c==null?void 0:c.fileType)?h._("\u1013\u102c\u1010\u103a\u1015\u102f\u1036\u1016\u101a\u103a\u101b\u103e\u102c\u1038\u101b\u1014\u103a"):h._("\u1017\u102e\u1012\u102e\u101a\u102d\u102f\u1000\u102d\u102f \u1016\u101a\u103a\u101b\u103e\u102c\u1038\u1015\u102b"),onPress:a,size:36,type:"overlay"})})}}),null);
__d("LocalVideoFilePreview.react",["regeneratorRuntime","React","VideoPlayerPlayButton.react","clearTimeout","generateVideoThumbnails","setTimeout","stylex","useComposerViewStateDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=function(a){var c,d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=a.videoPlayer;f.next=3;return b("regeneratorRuntime").awrap(b("generateVideoThumbnails")(c,c.videoWidth?c.videoWidth:0,c.videoHeight?c.videoHeight:0,10,"contain",0,null));case 3:d=f.sent;e=d.thumbnails;return f.abrupt("return",e);case 6:case"end":return f.stop()}},null,this)};function a(a){var c=a.disableHoverPlay,d=a.disablePlayOverlayBtn,e=a.mediaAttachment,f=a.needLoadData,i=a.setVideoRef,j=a.showPlaybackControls,k=a.videoAttachmentMetadata,l=g.useRef(null),m=g.useRef(null);a=g.useState(!1);var n=a[0],o=a[1],p=b("useComposerViewStateDispatcher")();a=function(){m.current!==null&&b("clearTimeout")(m.current),l.current&&l.current.play(),o(!0),j||(m.current=b("setTimeout")(q,1e4))};var q=function(){var a=l.current;a!==null&&(a.pause(),j||(a.currentTime=0));o(!1)},r=function(a){p({type:"SET_VIDEO_ATTACHMENT_METADATA",videoAttachmentMetadata:babelHelpers["extends"]({},k,{generatedThumbnails:a})})},s=function(a){p({type:"SET_VIDEO_ATTACHMENT_METADATA",videoAttachmentMetadata:babelHelpers["extends"]({},k,{isGeneratingThumbnails:a})})},t=function(){var a,c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a=l.current;if(!(a!==null)){d.next=11;break}i&&i(a);if(!f){d.next=11;break}s(!0);d.next=7;return b("regeneratorRuntime").awrap(h({videoPlayer:a}));case 7:c=d.sent,a.currentTime=0,r(c),s(!1);case 11:case"end":return d.stop()}},null,this)};return e.fileType!=="FILE"?g.jsxs(g.Fragment,{children:[g.jsx("video",{className:"k4urcfbm r0294ipz datstx6m",controls:j,onClick:function(){o(!0)},onLoadedData:t,onMouseEnter:c?null:a,onMouseLeave:c?null:q,onPause:function(){o(!1)},ref:l,src:e.state!=="NEW"&&e.state!=="CLIENT_PROCESSING"&&e.state!=="CLIENT_PROCESSING_COMPLETE"&&e.fileObjectURL}),g.jsx(b("VideoPlayerPlayButton.react"),{isVisible:!n&&!d,onClick:a})]}):null}}),null);
__d("PlayableCollageItemOverlay.react",["CometImage.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){return g.jsx("div",{className:"hyc5pup2 rr1tmaxi pmk7jnqg",children:g.jsx(b("CometImage.react"),{height:72,src:"/images/video/play_72dp.png",width:72})})}}),null);
__d("RemoteVideoFilePreview.react",["CometPlaceholder.react","CometProgressRing.react","CometRelay","PlayableCollageItemOverlay.react","React","RecoverableViolationWithComponentStack.react","VideoPlayerHooks","VideoPlayerRelay.react","VideoPlayerSurface.react","stylex","useDebouncedValue","useVideoPlayerClip","RemoteVideoFilePreviewQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){a=a.mediaAttachment;a=a.entID;return a==null?null:h.jsx(b("CometPlaceholder.react"),{fallback:h.jsx(j,{}),children:h.jsx(i,{videoID:a})})}function i(a){a=a.videoID;a=b("CometRelay").useLazyLoadQuery(g!==void 0?g:g=b("RemoteVideoFilePreviewQuery.graphql"),{videoID:a});a=a.video;return a==null?h.jsx(b("RecoverableViolationWithComponentStack.react"),{errorMessage:"video should not be null in preview",projectName:"comet_composer"}):h.jsx(b("VideoPlayerRelay.react"),{canAutoplay:"do_not_autoplay",portalingEnabled:!1,subOrigin:"embedded_video_preview",video:a,children:h.jsx(b("VideoPlayerSurface.react"),{children:h.jsx(k,{})})})}function j(){return h.jsx("div",{className:"k4urcfbm pmk7jnqg datstx6m",children:h.jsx(b("CometProgressRing.react"),{color:"dark",duration:5,size:32,type:"estimated"})})}function k(){var a=b("VideoPlayerHooks").useController(),c=b("VideoPlayerHooks").usePaused(),d=b("VideoPlayerHooks").usePlaying();d=b("useDebouncedValue")(d,5);c=c&&!d;b("useVideoPlayerClip")({clipDuration:10,pauseOnLoop:!0});d=function(){a.getCurrentState().paused&&a.play("user_initiated")};var e=function(){a.getCurrentState().playing&&(a.pause("product_initiated"),a.seek(0))};return h.jsx("div",{className:"k4urcfbm pmk7jnqg datstx6m",onMouseEnter:d,onMouseLeave:e,children:c?h.jsx(b("PlayableCollageItemOverlay.react"),{}):null})}}),null);
__d("CometComposerVideoPreview.react",["CollageItemFallback.react","LocalVideoFilePreview.react","React","RemoteVideoFilePreview.react","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i={imageArea:{height:"djkytl3r"}};function a(a){var c=a.isPlayablePreview;c=c===void 0?!1:c;var d=a.mediaAttachment,e=a.setVideoRef;a=a.videoStyle;if(d.fileType!=="VIDEO")return null;if(d.file&&d.fileObjectURL!=null)if(d.useCDNPreview===!0)return h.jsx("div",{className:(g||(g=b("stylex")))(i.imageArea),children:h.jsx(b("CollageItemFallback.react"),{fileType:d.fileType,filename:d.file.name})});else{var f=(d==null?void 0:d.videoAttachmentMetadata)||{},j=(f==null?void 0:f.generatedThumbnails)||[];j=j&&j.length>0;return h.jsx("div",{className:(g||(g=b("stylex")))(a),children:h.jsx(b("LocalVideoFilePreview.react"),{disableHoverPlay:c,disablePlayOverlayBtn:c&&(f==null?void 0:f.thumbnailType)==="scrubber_selected",mediaAttachment:d,needLoadData:c&&!j,setVideoRef:e,showPlaybackControls:c&&(f==null?void 0:f.thumbnailType)!=="scrubber_selected",videoAttachmentMetadata:f})})}return d.state==="PREEXISTING"?h.jsx("div",{className:(g||(g=b("stylex")))(a),children:h.jsx(b("RemoteVideoFilePreview.react"),{mediaAttachment:d})}):null}}),null);
__d("ComposerMediaDeepDiveCaptionEditor.react",["fbt","CometFormTextArea.react","React","composerMediaAttachmentReducer","useComposerViewStateDispatcher","useComposerViewStateReducer"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(a){var c=a.mediaAttachmentItem;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")();return h.jsx(b("CometFormTextArea.react"),{label:g._("Caption"),maxRows:2,minRows:2,onValueChange:function(a){d({attachment:c,caption:a,type:"SET_MEDIA_ATTACHMENT_CAPTION"})},value:c.fileType==="PHOTO"||c.fileType==="VIDEO"?((a=c.data)==null?void 0:(a=a.message)==null?void 0:a.text)||"":""})}}),null);
__d("ComposerMediaDeepDiveMetadataPill.react",["CometPressable.react","React","TetraIcon.react","TetraText.react","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=g.useState(!1),d=c[0],e=c[1];return g.jsx("div",{children:g.jsx(b("CometPressable.react"),{"aria-label":a.label,onHoverIn:function(){e(!0)},onHoverOut:function(){return e(!1)},onPress:a.onPress,overlayDisabled:!0,children:g.jsxs("div",{className:"pcp91wgn iuny7tx3 p8fzw8mz ipjc6fyt qjjbsfad j83agx80 qrtewk5h lsl2245n hqlzco19 o3c63hce lit7pgxp d6rk862h bp9cbjyn",children:[g.jsx(b("TetraIcon.react"),{color:"white",icon:a.icon}),d||Boolean(a.shouldAlwaysShowLabel)?g.jsx("div",{className:"pcp91wgn buofh1pr rj1gh0hx",children:g.jsx(b("TetraText.react"),{color:"white",type:"body4",children:a.label})}):null]})})})}}),null);
__d("ProductTagComposerPhotoHoverProductIconClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744201");c=b("FalcoLoggerInternal").create("product_tag_composer_photo_hover_product_icon_click",a);e.exports=c}),null);
__d("ComposerMediaDeepDiveTagProducts.react",["ix","fbt","Actor","CometMediaEditorPageResource","ComposerMediaDeepDiveMetadataPill.react","React","fbicon","intlList","lazyLoadComponent","useCometComposerPushPage","withComposerViewStatePart","ProductTagComposerPhotoHoverProductIconClickFalcoEvent"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("lazyLoadComponent")(b("CometMediaEditorPageResource"));function a(a){var c=b("useCometComposerPushPage")(),d=a.mediaAttachment.fileType==="PHOTO"?(a.mediaAttachment.data.tags||[]).map(function(a){return a==null?void 0:(a=a.taggee)==null?void 0:a.name}).filter(Boolean):null,e=h._("Tag Products"),f=!1;d&&d.length>0&&(f=!0,e=b("intlList")(d));d=b("Actor").useActor();var k=d[0],l=function(){if(a.mediaAttachment.fileType!=="PHOTO")return;var c=a.mediaAttachment.data.id;b("ProductTagComposerPhotoHoverProductIconClickFalcoEvent").log(function(){return{creation_session_id:a.creationSessionID,creator_id:k,media_id:c,media_type:"photo",platform:"comet",referral_source:"composer"}})};return a.mediaAttachment.fileType==="PHOTO"?i.jsx(b("ComposerMediaDeepDiveMetadataPill.react"),{icon:b("fbicon")._(g("1650379"),12),label:e,onPress:function(){l(),c!=null&&c(h._("\u1013\u102c\u1010\u103a\u1015\u102f\u1036 \u1021\u101e\u1031\u1038\u1005\u102d\u1010\u103a"),function(b){b=b.onReturn;return i.jsx(j,{index:a.index,initialTool:"PRODUCT_TAG",isDialog:!0,onBack:b})},{hasCustomHeader:!0})},shouldAlwaysShowLabel:f}):null}c=b("withComposerViewStatePart")(a,function(a){return{creationSessionID:a.creationSessionID}});e.exports=c}),null);
__d("ComposerMediaDeepDiveTaggedPeople.react",["ix","fbt","CometMediaEditorPageResource","ComposerMediaDeepDiveMetadataPill.react","React","fbicon","intlList","lazyLoadComponent","useCometComposerPushPage"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React"),j=b("lazyLoadComponent")(b("CometMediaEditorPageResource"));function a(a){var c=b("useCometComposerPushPage")(),d=a.mediaAttachment.fileType==="PHOTO"?(a.mediaAttachment.data.tags||[]).map(function(a){return a==null?void 0:(a=a.taggee)==null?void 0:a.name}).filter(Boolean):null,e=h._("\u1013\u102c\u1010\u103a\u1015\u102f\u1036\u1000\u102d\u102f \u1021\u1019\u100a\u103a\u1000\u1012\u103a\u1001\u103b\u102d\u1010\u103a\u1015\u102b"),f=!1;d&&d.length>0&&(f=!0,e=b("intlList")(d));return i.jsx(b("ComposerMediaDeepDiveMetadataPill.react"),{icon:b("fbicon")._(g("502469"),12),label:e,onPress:function(){c!=null&&c(h._("\u1013\u102c\u1010\u103a\u1015\u102f\u1036 \u1021\u101e\u1031\u1038\u1005\u102d\u1010\u103a"),function(b){b=b.onReturn;return i.jsx(j,{index:a.index,initialTool:"XY_TAG",isDialog:!0,onBack:b})},{hasCustomHeader:!0})},shouldAlwaysShowLabel:f})}}),null);
__d("ComposerMediaDeepDiveUploadFailedItem.react",["CometColumn.react","CometColumnItem.react","CometPickerNullState.react","NullStateMedia","React","TetraNullState.react","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.errorMessage;a=a.fileName;return g.jsx("div",{className:"datstx6m j83agx80 gigke590 l36b2tei mvoc3dfa zonuqk10 ljqcmsvz bp9cbjyn",children:g.jsx(b("CometColumn.react"),{align:"center",expanding:!0,verticalAlign:"center",children:g.jsx(b("CometColumnItem.react"),{children:g.jsx(b("TetraNullState.react"),{body:(c=c)!=null?c:"",bodyColor:"negative",headline:a,icon:b("NullStateMedia")})})})})}}),null);
__d("DeepDiveImageFilePreview.react",["BaseImage.react","CometBlurredBackgroundImage.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i={image:{height:"datstx6m",objectFit:"r0294ipz",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4",width:"k4urcfbm"},root:{backgroundColor:"pgeiv1et",position:"l9j0dhe7"}};function a(a){var c=a.blurredBackground,d=a.fileName,e=a.uri;a=a.xstyle;return h.jsxs("div",{className:(g||(g=b("stylex")))(i.root,a),children:[c===!0&&h.jsx(b("CometBlurredBackgroundImage.react"),{draggable:!1,src:e}),h.jsx(b("BaseImage.react"),{alt:d,draggable:!1,src:e,xstyle:i.image})]})}}),null);
__d("EntPhotoDeepDiveItem.react",["CometRelay","DeepDiveImageFilePreview.react","React","EntPhotoDeepDiveItem_media.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=a.media;a=babelHelpers.objectWithoutPropertiesLoose(a,["media"]);c=b("CometRelay").useFragment(g!==void 0?g:g=b("EntPhotoDeepDiveItem_media.graphql"),c);c=c==null?void 0:(c=c.image)==null?void 0:c.uri;return c!=null?h.jsx(b("DeepDiveImageFilePreview.react"),babelHelpers["extends"]({uri:c},a)):null}}),null);
__d("EntPhotoDeepDiveItemContainer.react",["CometRelay","EntPhotoDeepDiveItem.react","React","WebPixelRatio","EntPhotoDeepDiveItemContainerQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=a.fileName,d=a.id;a=a.xstyle;d={id:d,scale:b("WebPixelRatio").get()};d=b("CometRelay").useLazyLoadQuery(g!==void 0?g:g=b("EntPhotoDeepDiveItemContainerQuery.graphql"),d);return h.jsx(b("EntPhotoDeepDiveItem.react"),{blurredBackground:!0,fileName:c,media:d==null?void 0:d.node,xstyle:a})}}),null);
__d("ComposerMediaDeepDiveItem.react",["Actor","CollageItemFallback.react","CometComposerEditMediaAttachmentItemButton.react","CometComposerRemoveMediaAttachmentItemButton.react","CometComposerVideoPreview.react","CometPlaceholder.react","CometRelay","ComposerMediaDeepDiveCaptionEditor.react","ComposerMediaDeepDiveTaggedPeople.react","ComposerMediaDeepDiveTagProducts.react","ComposerMediaDeepDiveUploadFailedItem.react","DeepDiveImageFilePreview.react","EntPhotoDeepDiveItemContainer.react","React","recoverableViolation","requireCond","stylex","useComposerPluginIneligibility","cr:1707168","ComposerMediaDeepDiveItemQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=b("React"),j=(c=b("cr:1707168"))!=null?c:function(a){return null},k={captionArea:{backgroundColor:"cwj9ozl2",paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr"},editMediaButton:{position:"pmk7jnqg",start:"rnx8an3s",top:"fcg2cn6m"},failedImageArea:{height:"jh4d4hv6"},imageArea:{height:"djkytl3r"},mediaAndMetadata:{position:"l9j0dhe7"},metadataArea:{bottom:"d2iitwg3",marginEnd:"tvfksri0",position:"pmk7jnqg",start:"rnx8an3s"},removeItemButton:{end:"swmj3c3o",position:"pmk7jnqg",top:"fcg2cn6m"},root:{borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",borderBottomEndRadius:"uo3d90p7",borderBottomStartRadius:"l82x9zwi",boxShadow:"ad9n1n66",marginBottom:"sjgh65i0",overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"l9j0dhe7"}};function a(a){var c,d=a.canUserEditCaption,e=a.itemIndex,f=a.mediaAttachment;a=i.useState(!1);var l=a[0],m=a[1];a=b("Actor").useActor();a=b("CometRelay").useLazyLoadQuery(g!==void 0?g:g=b("ComposerMediaDeepDiveItemQuery.graphql"),{id:a[0]});var n=(a==null?void 0:(a=a.page)==null?void 0:a.has_taggable_products)===!0,o=f.fileType==="VIDEO",p=j([f]),q=b("useComposerPluginIneligibility")().has("MEDIA_EDIT");a=function(a){return i.jsxs("div",{className:(h||(h=b("stylex")))(k.root),onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)},children:[i.jsxs("div",{className:h(k.mediaAndMetadata),children:[a,!o&&!q&&i.jsx("div",{className:(h||(h=b("stylex")))(k.metadataArea),children:n===!0?i.jsx(b("ComposerMediaDeepDiveTagProducts.react"),{index:e,mediaAttachment:f}):i.jsx(b("ComposerMediaDeepDiveTaggedPeople.react"),{index:e,mediaAttachment:f})})]}),l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:(h||(h=b("stylex")))(k.editMediaButton),children:o&&!s?p:i.jsx(b("CometComposerEditMediaAttachmentItemButton.react"),{index:e})}),i.jsx("div",{className:(h||(h=b("stylex")))(k.removeItemButton),children:i.jsx(b("CometComposerRemoveMediaAttachmentItemButton.react"),{attachment:f})})]}):null,d&&!s?i.jsx("div",{className:(h||(h=b("stylex")))(k.captionArea),children:i.jsx(b("ComposerMediaDeepDiveCaptionEditor.react"),{mediaAttachmentItem:f})}):null]})};var r,s;if(f.state==="CLIENT_PROCESSING"||f.state==="CLIENT_PROCESSING_COMPLETE")return i.jsx("div",{className:(h||(h=b("stylex")))(k.imageArea),children:i.jsx(b("CollageItemFallback.react"),{fileType:f.fileType})});else if(f.state==="FAILED"){s=!0;r=i.jsx("div",{className:(h||(h=b("stylex")))(k.failedImageArea),children:i.jsx(b("ComposerMediaDeepDiveUploadFailedItem.react"),{errorMessage:f.error,fileName:f.file.name})});return a(r)}else if(f.state==="PREEXISTING"){var t=i.jsx("div",{className:(h||(h=b("stylex")))(k.imageArea),children:i.jsx(b("CollageItemFallback.react"),{fileType:f.fileType})});switch(f.fileType){case"PHOTO":r=f.entID!=null?i.jsx(b("CometPlaceholder.react"),{fallback:t,children:i.jsx(b("EntPhotoDeepDiveItemContainer.react"),{id:f.entID,xstyle:k.imageArea})}):null;break;case"VIDEO":r=i.jsx(b("CometComposerVideoPreview.react"),{mediaAttachment:f});break;case"UNKNOWN":b("recoverableViolation")("`UNKNOWN` media attachment in composer media deep dive","comet_composer");r=null;break}return a(r)}else if(f.file&&f.fileObjectURL!=null){switch(f.fileType){case"PHOTO":switch(f.useCDNPreview){case!0:t=i.jsx("div",{className:(h||(h=b("stylex")))(k.imageArea),children:i.jsx(b("CollageItemFallback.react"),{fileType:f.fileType,filename:(t=f.file)==null?void 0:t.name,percentComplete:f.state==="UPLOADING"?f.percentComplete:void 0})});switch(f.state){case"UPLOADED":r=f.entID!=null?i.jsx(b("CometPlaceholder.react"),{fallback:t,children:i.jsx(b("EntPhotoDeepDiveItemContainer.react"),{fileName:(c=f.file)==null?void 0:c.name,id:f.entID,xstyle:k.imageArea})}):null;break;default:r=t;break}break;default:r=i.jsx(b("DeepDiveImageFilePreview.react"),{blurredBackground:!0,fileName:(c=f.file)==null?void 0:c.name,uri:f.fileObjectURL,xstyle:k.imageArea})}break;case"VIDEO":f.file.type==="image/gif"?r=i.jsx(b("DeepDiveImageFilePreview.react"),{fileName:f.file.name,uri:f.fileObjectURL,xstyle:k.imageArea}):r=i.jsx(b("CometComposerVideoPreview.react"),{mediaAttachment:f});break;case"FILE":case"UNKNOWN":r=null}return a(r)}else return null}}),null);
__d("ComposerMediaDeepDive.react",["fbt","CometComposerUploadMediaButtonRenderer.react","CometDraggableList.react","CometPickerNullState.react","CometRow.react","CometRowItem.react","CometScrollableArea.react","ComposerMediaDeepDiveAddMediaButton.react","ComposerMediaDeepDiveItem.react","NullStateMedia","React","TetraButton.react","TetraText.react","composerMediaAttachmentReducer","composerMediaAttachmentUtils","gkx","stylex","useComposerValidationErrors","useComposerViewStateDispatcher","useComposerViewStateReducer","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j=b("gkx")("1663744"),k={error:{display:"j83agx80",justifyContent:"taijpn5t"},items:{backgroundColor:"g6srhlxm",flexGrow:"buofh1pr",flexShrink:"g5gj957u",paddingTop:"discj3wi",paddingEnd:"hv4rvrfc",paddingBottom:"qt6c0cv9",paddingStart:"dati1w0a"},root:{display:"j83agx80",flexDirection:"cbu4d94t",maxHeight:"f0kvp8a6",width:"oh7imozk"},toolbar:{borderTop:"dwg5866k",paddingTop:"pybr56ya",paddingEnd:"ph5uu5jm",paddingBottom:"f10w8fjw",paddingStart:"b3onmgus"}},l=80;function a(a){var c=a.mediaAttachments,d=a.mediaAttachmentsLimit,e=a.popPage;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var f=b("useComposerViewStateDispatcher")();a=b("useComposerValidationErrors")();a=a.mediaLimit;d=(d=d)!=null?d:l;a=a!=null?i.jsxs(b("TetraText.react"),{color:"negative",type:"bodyLink4",children:[c==null?void 0:c.length,"/",d]}):null;d=i.useCallback(function(a,b,c){f({sourceIndex:b,targetIndex:c,type:"REORDER_MEDIA_ATTACHMENT_ITEM"})},[f]);var m=c||[];return i.jsxs("div",{className:(h||(h=b("stylex")))(k.root),children:[m.length===0?i.jsx(b("CometPickerNullState.react"),{body:g._("Start by adding a photo\/video"),icon:b("NullStateMedia")}):i.jsx(b("CometScrollableArea.react"),{horizontal:!1,xstyle:k.items,children:i.jsx(b("CometDraggableList.react"),{items:m.map(function(a,c){return a.file||a.useCDNPreview?i.jsx(b("ComposerMediaDeepDiveItem.react"),{canUserEditCaption:!j||m.length>1,itemIndex:c,mediaAttachment:a},"media-"+(b("composerMediaAttachmentUtils").getIDFromMediaAttachment(a)||c)):null}).filter(Boolean),onReorder:d})}),i.jsx("div",{className:h(k.toolbar),children:i.jsxs(b("CometRow.react"),{align:"end",paddingTop:0,children:[b("gkx")("1733966")&&a!=null&&i.jsx(b("CometRowItem.react"),{expanding:!0,xstyle:k.error,children:a}),i.jsx(b("CometRowItem.react"),{children:i.jsx(b("CometComposerUploadMediaButtonRenderer.react"),{Button:b("ComposerMediaDeepDiveAddMediaButton.react")})}),i.jsx(b("CometRowItem.react"),{children:i.jsx(b("TetraButton.react"),{label:g._("\u1015\u103c\u102e\u1038\u1015\u102b\u1015\u103c\u102e"),onPress:function(){e()},padding:"wide",type:"primary"})})]})})]})}c=b("withComposerViewStatePart")(a,function(a){return{mediaAttachments:a.mediaAttachments,mediaAttachmentsLimit:a.mediaAttachmentsLimit}});e.exports=c}),null);
__d("ComposerCometOpenMediaDeepDiveButton.react",["ix","fbt","CometComposerPushPageContext","ComposerMediaDeepDive.react","React","TetraButton.react","fbicon","useCometComposerPushPage"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React");function a(a){a=a.buttonLabel;a=a===void 0?h._("Edit All"):a;var c=b("useCometComposerPushPage")();return i.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("477825"),16),label:a,onPress:function(){c&&c(h._("\u1013\u102c\u1010\u103a\u1015\u102f\u1036\u1019\u103b\u102c\u1038\/\u1017\u102e\u1012\u102e\u101a\u102d\u102f\u1019\u103b\u102c\u1038"),function(a){a=a.onReturn;return i.jsx(b("CometComposerPushPageContext").Provider,{value:c,children:i.jsx(b("ComposerMediaDeepDive.react"),{popPage:a})})})},type:"overlay"})}}),null);
__d("ComposerCometEditMediaActionsOverlay.react",["ix","fbt","Comet360PhotoEditButton.react","CometComposerEditMediaAttachmentItemButton.react","CometComposerEditVideoButtonWithNux.react","CometFileSelector.react","CometRow.react","CometRowItem.react","ComposerCometOpenMediaDeepDiveButton.react","React","TetraButton.react","fbicon","gkx","requireCond","stylex","useComposerPluginIneligibility","useComposerViewStateDispatcher","cr:1613921","cr:1707168"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=b("React"),k=(c=b("cr:1707168"))!=null?c:function(a){return null},l={buttonLayer:{backgroundColor:"rsx06lma",height:"datstx6m",opacity:"b5wmifdl",paddingTop:"pybr56ya",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4",width:"k4urcfbm"},buttonLayerVisible:{opacity:"pedkr2u6"}};function a(a){var c=a.accept,d=a.inComposer,e=a.mediaAttachments,f=a.showButtons;a=a.videoLiteComposerEligible;var m=b("useComposerViewStateDispatcher")(),n=function(a){a.length>0&&m({files:Array.from(a),type:"ADD_MEDIA_ATTACHMENT_ITEMS"})},o=e.length===1&&e[0].fileType==="VIDEO",p=a&&o,q=e.length===1&&e[0].fileType==="PHOTO"&&e[0].sphericalEncoding!=null,r=b("useComposerPluginIneligibility")().has("MEDIA_EDIT"),s=j.useMemo(function(){if(e.length>1)return j.jsx(b("ComposerCometOpenMediaDeepDiveButton.react"),{});if(r)return null;if(o)return p?j.jsx(b("CometComposerEditVideoButtonWithNux.react"),{}):null;return q&&b("gkx")("1750713")?j.jsx(b("Comet360PhotoEditButton.react"),{}):j.jsx(b("CometComposerEditMediaAttachmentItemButton.react"),{index:0})},[e.length,r,o,q,p]),t=k(e);return j.jsx(b("CometFileSelector.react"),{accept:c,multiple:!0,onFilesSelected:n,children:function(a){return d&&j.jsx("div",{className:(i||(i=b("stylex")))([l.buttonLayer,(p||f)&&l.buttonLayerVisible]),children:j.jsxs(b("CometRow.react"),{align:"start",paddingTop:0,children:[s&&j.jsx(b("CometRowItem.react"),{children:s}),p?null:j.jsx(b("CometRowItem.react"),{children:j.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("481773"),16),label:h._("\u1013\u102c\u1010\u103a\u1015\u102f\u1036\u1019\u103b\u102c\u1038\/\u1017\u102e\u1012\u102e\u101a\u102d\u102f\u1019\u103b\u102c\u1038 \u1011\u100a\u1037\u103a\u1015\u102b"),onPress:a,type:"overlay"})}),b("cr:1613921")?j.jsx(b("CometRowItem.react"),{children:j.jsx(b("cr:1613921"),{})}):null,t&&j.jsx(b("CometRowItem.react"),{children:t})]})})}})}}),null);
__d("CometComposerFocusImage.react",["CometFeedFocusMedia.react","CometImage.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=.5;f.DEFAULT_FOCUS_X=c;d=.5;f.DEFAULT_FOCUS_Y=d;function a(a){var c=a.alt,d=a.focusX,e=a.focusY,f=a.imageHeight,h=a.imageWidth,i=a.onError,j=a.src;a=a.viewportAspectRatio;var k=g.useCallback(function(){i&&i();return void 0},[i]);return g.jsx("div",{className:"stjgntxs ni8dbmo4",children:g.jsx(b("CometFeedFocusMedia.react"),{focusX:d,focusY:e,mediaHeight:f,mediaWidth:h,viewportAspectRatio:a,children:function(a){return g.jsx(b("CometImage.react"),{alt:c,onError:k,src:j,xstyle:a})}})})}e=g.memo(a);f.CometComposerFocusImage=e}),null);
__d("CometPhotoLayoutMediaOverlay.react",["fbt","React","TetraText.react","stylex"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(a){a=a.numItemsNotShown;return h.jsx("div",{className:"hzruof5a taijpn5t cbu4d94t j83agx80 sx5rzos5 bp9cbjyn kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 rq0escxv i09qtzwb",children:h.jsx(b("TetraText.react"),{align:"center",color:"white",type:"entityHeaderHeadline2",children:g._("+{num}",[g._param("num",a)])})})}}),null);
__d("ComposerCometPhotoLayoutMediaAttachmentContext",["CometComposerFocusImage.react","React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c={adID:null,focusX:b("CometComposerFocusImage.react").DEFAULT_FOCUS_X,focusY:b("CometComposerFocusImage.react").DEFAULT_FOCUS_Y,mediasetToken:null,numPhotosNotShown:0,shouldRoundCorners:!0,shouldShowOverlay:!1,viewportAspectRatio:1};d=a.createContext(c);e.exports=d}),null);
__d("CometComposerPhotoLayoutItem.react",["CometBackgroundImage.react","CometComposerFocusImage.react","CometPhotoLayoutMediaOverlay.react","ComposerCometPhotoLayoutMediaAttachmentContext","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.alt,d=a.height,e=a.numPhotosNotShown,f=a.onError,h=a.shouldShowOverlay,i=a.src,j=a.viewportAspectRatio;a=a.width;var k=g.useContext(b("ComposerCometPhotoLayoutMediaAttachmentContext")),l=k.focusX;k=k.focusY;if(d==null||a==null)return g.jsx(b("CometBackgroundImage.react"),{draggable:!1,src:i});else return g.jsxs(g.Fragment,{children:[g.jsx(b("CometComposerFocusImage.react").CometComposerFocusImage,{alt:c,focusX:l,focusY:k,imageHeight:d,imageWidth:a,onError:f,src:i,viewportAspectRatio:j}),h===!0&&e!=null?g.jsx(b("CometPhotoLayoutMediaOverlay.react"),{numItemsNotShown:e}):null]})}}),null);
__d("ComposerCometSelectedPhotoLayoutContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c={layout:"classic"};d=a.createContext(c);e.exports=d}),null);
__d("EntPhotoCollageItem.react",["CometBackgroundImage.react","CometComposerPhotoLayoutItem.react","CometRelay","ComposerCometPhotoLayoutMediaAttachmentContext","ComposerCometSelectedPhotoLayoutContext","React","composerMediaAttachmentReducer","useComposerViewStateDispatcher","useComposerViewStateReducer","EntPhotoCollageItem_media.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")(),e=b("CometRelay").useFragment(g!==void 0?g:g=b("EntPhotoCollageItem_media.graphql"),a.media);h.useEffect(function(){var b,c;b=e==null?void 0:(b=e.image)==null?void 0:b.height;c=e==null?void 0:(c=e.image)==null?void 0:c.width;b!=null&&c!=null&&d({entID:a.id,height:b,type:"SET_MEDIA_ATTACHMENT_ITEM_CDN_DIMENSIONS",width:c})},[e,d,a.id]);c=e==null?void 0:(c=e.image)==null?void 0:c.uri;var f=h.useContext(b("ComposerCometSelectedPhotoLayoutContext")),i=h.useContext(b("ComposerCometPhotoLayoutMediaAttachmentContext")),j=i.numPhotosNotShown,k=i.setFocusX,l=i.setFocusY,m=i.shouldShowOverlay;i=i.viewportAspectRatio;var n=e==null?void 0:e.image,o=n==null?void 0:n.height;n=n==null?void 0:n.width;var p=e==null?void 0:e.focus,q=p==null?void 0:p.x,r=p==null?void 0:p.y;h.useEffect(function(){k&&l&&q!=null&&r!=null&&(k(q),l(r))},[k,l,q,r]);if(c==null)return null;else if(!!f.layout&&f.layout!=="classic")return h.jsx(b("CometComposerPhotoLayoutItem.react"),{height:o,numPhotosNotShown:j,shouldShowOverlay:m,src:c,viewportAspectRatio:i,width:n});else return h.jsx(b("CometBackgroundImage.react"),{draggable:!1,src:c})}}),null);
__d("EntPhotoCollageItemContainer.react",["CometRelay","EntPhotoCollageItem.react","React","WebPixelRatio","EntPhotoCollageItemContainerQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=b("CometRelay").useLazyLoadQuery(g!==void 0?g:g=b("EntPhotoCollageItemContainerQuery.graphql"),{id:a.id,scale:b("WebPixelRatio").get()});return h.jsx(b("EntPhotoCollageItem.react"),{id:a.id,media:c==null?void 0:c.node})}}),null);
__d("CDNPreviewPhotoCollageItem.react",["CollageItemFallback.react","CometPlaceholder.react","EntPhotoCollageItemContainer.react","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.entID,d=a.filename,e=a.fileType;a=a.percentComplete;e=g.jsx(b("CollageItemFallback.react"),{fileType:e,filename:d,percentComplete:a});if(c!=null)return g.jsx(b("CometPlaceholder.react"),{fallback:e,children:g.jsx(b("EntPhotoCollageItemContainer.react"),{id:c})});else return e}}),null);
__d("OptimisticallyUploadedPhotoCollageItem.react",["CDNPreviewPhotoCollageItem.react","CometBackgroundImage.react","JSResource","PlayableCollageItemOverlay.react","React","composerMediaAttachmentReducer","lazyLoadComponent","useComposerViewStateDispatcher","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=b("lazyLoadComponent")(b("JSResource")("CometComposerSphericalMediaGyroIndicator.react").__setRef("OptimisticallyUploadedPhotoCollageItem.react"));function a(a){var c=a.attachment;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")();a=c.sphericalEncoding?g.jsx(h,{}):null;return c.fileObjectURL!=null&&c.useCDNPreview!==!0?g.jsxs(g.Fragment,{children:[g.jsx(b("CometBackgroundImage.react"),{draggable:!1,onError:function(){d({attachment:c,type:"SET_MEDIA_ATTACHMENT_ITEM_USE_CDN_PREVIEW"})},src:c.fileObjectURL}),c.fileType==="VIDEO"?g.jsx(b("PlayableCollageItemOverlay.react"),{}):null,a]}):g.jsxs(g.Fragment,{children:[g.jsx(b("CDNPreviewPhotoCollageItem.react"),{entID:c.entID,fileType:c.fileType,filename:c.fileName,percentComplete:c.percentComplete}),a]})}}),null);
__d("OptimisticallyUploadedVideoCollageItem.react",["CDNPreviewPhotoCollageItem.react","CircularProgressBar.react","PlayableCollageItemOverlay.react","React","composerMediaAttachmentReducer","stylex","useComposerViewStateDispatcher","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.attachment;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")();a=c.fileObjectURL;var e=c.percentComplete;return c.fileObjectURL!=null&&c.useCDNPreview!==!0?g.jsxs(g.Fragment,{children:[g.jsx("video",{className:"k4urcfbm bixrwtb6 datstx6m",onLoadedMetadata:function(a){a.target.videoWidth===0&&a.target.videoHeight===0&&d({attachment:c,type:"SET_MEDIA_ATTACHMENT_ITEM_USE_CDN_PREVIEW"})},src:a}),g.jsx(b("PlayableCollageItemOverlay.react"),{}),e!=null&&g.jsx(b("CircularProgressBar.react"),{percentComplete:e*100})]}):g.jsx(b("CDNPreviewPhotoCollageItem.react"),{fileType:c.fileType,filename:c.fileName,percentComplete:c.percentComplete})}}),null);
__d("OptimisticallyUploadedCollageItem.react",["OptimisticallyUploadedPhotoCollageItem.react","OptimisticallyUploadedVideoCollageItem.react","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){a=a.attachment;var c=a.fileType==="PHOTO"||a.fileType==="UNKNOWN"||a.fileType==="VIDEO"&&a.fileMimeType==="image/gif";return c?g.jsx(b("OptimisticallyUploadedPhotoCollageItem.react"),{attachment:a}):g.jsx(b("OptimisticallyUploadedVideoCollageItem.react"),{attachment:a})}}),null);
__d("PreexistingPhotoLayoutItem.react",["CDNPreviewPhotoCollageItem.react","CometPlaceholder.react","JSResource","React","composerMediaAttachmentReducer","lazyLoadComponent","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=b("lazyLoadComponent")(b("JSResource")("CometComposerSphericalMediaGyroIndicator.react").__setRef("PreexistingPhotoLayoutItem.react"));function a(a){a=a.attachment;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var c=a.sphericalEncoding?g.jsx(b("CometPlaceholder.react"),{fallback:null,children:g.jsx(h,{})}):null;return g.jsxs(g.Fragment,{children:[g.jsx(b("CDNPreviewPhotoCollageItem.react"),{entID:a.entID,fileType:a.fileType,filename:null}),c]})}}),null);
__d("PreexistingPhotoCollageItem.react",["CometBackgroundImage.react","PreexistingPhotoLayoutItem.react","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){a=a.attachment;return a.fileType!=="UNKNOWN"?g.jsx(b("PreexistingPhotoLayoutItem.react"),{attachment:a}):g.jsx(b("CometBackgroundImage.react"),{draggable:!1,src:a.url})}}),null);
__d("UploadingOrUploadedPhotoCollageItem.react",["CDNPreviewPhotoCollageItem.react","CometBackgroundImage.react","CometPlaceholder.react","JSResource","PlayableCollageItemOverlay.react","React","composerMediaAttachmentReducer","lazyLoadComponent","useComposerViewStateDispatcher","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=b("lazyLoadComponent")(b("JSResource")("CometComposerSphericalMediaGyroIndicator.react").__setRef("UploadingOrUploadedPhotoCollageItem.react"));function a(a){var c=a.attachment;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")();a=c.sphericalEncoding?g.jsx(b("CometPlaceholder.react"),{fallback:null,children:g.jsx(h,{})}):null;var e=c.file;return c.fileObjectURL!=null&&c.useCDNPreview!==!0?g.jsxs(g.Fragment,{children:[g.jsx(b("CometBackgroundImage.react"),{alt:e.name,draggable:!1,onError:function(){d({attachment:c,type:"SET_MEDIA_ATTACHMENT_ITEM_USE_CDN_PREVIEW"})},src:c.fileObjectURL}),c.fileType==="VIDEO"?g.jsx(b("PlayableCollageItemOverlay.react"),{}):null,a]}):g.jsxs(g.Fragment,{children:[g.jsx(b("CDNPreviewPhotoCollageItem.react"),{entID:c.state==="UPLOADED"?c.entID:void 0,fileType:c.fileType,filename:e.name}),a]})}}),null);
__d("UploadingOrUploadedPhotoLayoutItem.react",["CDNPreviewPhotoCollageItem.react","CometComposerPhotoLayoutItem.react","CometPlaceholder.react","ComposerCometPhotoLayoutMediaAttachmentContext","JSResource","React","composerMediaAttachmentReducer","lazyLoadComponent","useComposerViewStateDispatcher","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=b("lazyLoadComponent")(b("JSResource")("CometComposerSphericalMediaGyroIndicator.react").__setRef("UploadingOrUploadedPhotoLayoutItem.react")),i=500,j=261;function a(a){var c=a.attachment;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")();a=c.sphericalEncoding?g.jsx(b("CometPlaceholder.react"),{fallback:null,children:g.jsx(h,{})}):null;var e=function(){d({attachment:c,type:"SET_MEDIA_ATTACHMENT_ITEM_USE_CDN_PREVIEW"})},f=c.width!=null?c.width:null,k=c.height!=null?c.height:null;(f==null||k==null)&&(f=i,k=j);var l=g.useContext(b("ComposerCometPhotoLayoutMediaAttachmentContext")),m=l.numPhotosNotShown,n=l.shouldShowOverlay;l=l.viewportAspectRatio;var o=c.file;if(c.useCDNPreview!==!0&&c.fileObjectURL!=null)return g.jsxs("div",{children:[g.jsx(b("CometComposerPhotoLayoutItem.react"),{alt:o.name,height:k,numPhotosNotShown:m,onError:e,shouldShowOverlay:n,src:c.fileObjectURL,viewportAspectRatio:l,width:f}),a]});else return g.jsxs(g.Fragment,{children:[g.jsx(b("CDNPreviewPhotoCollageItem.react"),{entID:c.state==="UPLOADED"?c.entID:void 0,fileType:c.fileType,filename:o.name}),a]})}}),null);
__d("CDNPreviewVideoCollageItem.react",["CollageItemFallback.react","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.filename;a=a.fileType;return g.jsx(b("CollageItemFallback.react"),{fileType:a,filename:c})}}),null);
__d("CometVideoEditorUtils.react",[],(function(a,b,c,d,e,f){"use strict";var g=function(a){if(!a||!a.length)return null;for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;switch(d.state){case"UPLOADING":switch(d.fileType){case"VIDEO":return d;default:}break;case"UPLOADED":switch(d.fileType){case"VIDEO":return d;default:}break;default:}}return null};f.getFirstVideoAttachment=g;a=function(a){if(!a)return null;a=g(a.mediaAttachments);return(a==null?void 0:a.videoAttachmentMetadata)||null};f.getVideoAttachmentMetaDataFromComposerState=a;b=function(a){if(a.fileType==="VIDEO"&&a.state==="UPLOADED"){return(a==null?void 0:(a=a.videoAttachmentMetadata)==null?void 0:a.thumbnailPreviewURL)||""}return""};f.getThumbnailURLFromVideoMetadata=b}),null);
__d("UploadingOrUploadedVideoCollageItem.react",["CDNPreviewVideoCollageItem.react","CometVideoEditorUtils.react","PlayableCollageItemOverlay.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){a=a.attachment;if(a.fileType==="VIDEO"){var c=a.file,d=b("CometVideoEditorUtils.react").getThumbnailURLFromVideoMetadata(a);return a.fileObjectURL!=null&&a.useCDNPreview!==!0?g.jsxs(g.Fragment,{children:[g.jsx("video",{className:"k4urcfbm bixrwtb6 datstx6m",poster:d,src:a.fileObjectURL}),g.jsx(b("PlayableCollageItemOverlay.react"),{})]}):g.jsx(b("CDNPreviewVideoCollageItem.react"),{entID:a.state==="UPLOADED"?a.entID:void 0,fileType:a.fileType,filename:c.name})}else return null}}),null);
__d("UploadingOrUploadedCollageItem.react",["ComposerCometSelectedPhotoLayoutContext","React","UploadingOrUploadedPhotoCollageItem.react","UploadingOrUploadedPhotoLayoutItem.react","UploadingOrUploadedVideoCollageItem.react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){a=a.attachment;var c=a.fileType==="PHOTO"||a.fileType==="VIDEO"&&a.file.type==="image/gif",d=g.useContext(b("ComposerCometSelectedPhotoLayoutContext"));d=!!d.layout&&d.layout!=="classic";if(c)return d?g.jsx(b("UploadingOrUploadedPhotoLayoutItem.react"),{attachment:a}):g.jsx(b("UploadingOrUploadedPhotoCollageItem.react"),{attachment:a});else return g.jsx(b("UploadingOrUploadedVideoCollageItem.react"),{attachment:a})}}),null);
__d("CometComposerMediaAttachmentItem.react",["CollageItemFallback.react","CometBackgroundImage.react","CometComposerRemoveMediaAttachmentItemButton.react","CometPlaceholder.react","JSResource","OptimisticallyUploadedCollageItem.react","PlayableCollageItemOverlay.react","PreexistingPhotoCollageItem.react","React","TetraText.react","UploadingOrUploadedCollageItem.react","lazyLoadComponent","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=b("lazyLoadComponent")(b("JSResource")("CometComposerSphericalMediaGyroIndicator.react").__setRef("CometComposerMediaAttachmentItem.react"));function a(a){var c=a.attachment;a=a.withRemoveButton;var d=a===void 0?!0:a;a=c.sphericalEncoding?g.jsx(b("CometPlaceholder.react"),{fallback:null,children:g.jsx(h,{})}):null;var e=function(a){return d?g.jsx(b("CometComposerRemoveMediaAttachmentItemButton.react"),{attachment:a}):null};switch(c.state){case"PREEXISTING":var f;switch(c.fileType){case"VIDEO":f=g.jsxs(g.Fragment,{children:[g.jsx(b("CometBackgroundImage.react"),{draggable:!1,src:c.imageURL}),g.jsx(b("PlayableCollageItemOverlay.react"),{}),a]});break;case"PHOTO":f=g.jsx(b("PreexistingPhotoCollageItem.react"),{attachment:c});break;default:f=g.jsxs(g.Fragment,{children:[g.jsx(b("CometBackgroundImage.react"),{draggable:!1,src:c.url}),a]});break}return g.jsxs(g.Fragment,{children:[f,e(c)]});case"NEW":case"CLIENT_PROCESSING":case"CLIENT_PROCESSING_COMPLETE":return g.jsxs(g.Fragment,{children:[g.jsx(b("CollageItemFallback.react"),{fileType:c.fileType,filename:c.file.name}),a]});case"QUEUED":case"UPLOADING":case"UPLOADED":return c.file==null?null:g.jsxs(g.Fragment,{children:[g.jsx(b("UploadingOrUploadedCollageItem.react"),{attachment:c}),c.state==="UPLOADED"?e(c):g.jsx("div",{className:"g7nl5sj3 kr520xx4 pmk7jnqg datstx6m n7fi1qx3 cxbav39q",style:{width:(1-(c.percentComplete||0))*100+"%"},children:e(c)})]});case"FAILED":return g.jsxs(g.Fragment,{children:[c.file.name,c.error!=null?g.jsxs(g.Fragment,{children:[g.jsx("br",{}),g.jsx(b("TetraText.react"),{color:"negative",type:"body4",children:c.error})]}):null]});case"OPTIMISTIC_UPLOADED":return c.fileObjectURL==null?null:g.jsx(b("OptimisticallyUploadedCollageItem.react"),{attachment:c});default:return null}}}),null);
__d("CometComposerMediaAttachmentItemContainer.react",["CometComposerMediaAttachmentItem.react","React","qex","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i=b("qex")._("1138950");function a(a){var c=h.jsx(b("CometComposerMediaAttachmentItem.react"),babelHelpers["extends"]({},a));return c?h.jsx("div",{className:(g||(g=b("stylex"))).dedupe({"overflow-wrap-1":"jm1wdb64","position-1":"l9j0dhe7"},a.attachment.state==="failed"?{"border-top-color-0.4":"jw3uvs1e","border-end-color-0.4":"hmw3o7ox","border-bottom-color-0.4":"ku5f423u","border-start-color-0.4":"a64ryyup"}:null,i===!0?{"height-1":"datstx6m","width-1":"k4urcfbm"}:{"border-top-0.3":"dwg5866k","border-end-0.3":"ccnbzhu1","border-bottom-0.3":"eip75gnj","border-start-0.3":"tr4kgdav","flex-grow-1":"kb5gq1qc","flex-shrink-1":"pfnyh3mw","height-1":"qzj7cv8z","margin-top-1":"rs0gx3tq","margin-end-1":"fv0vnmcu","margin-bottom-1":"dicw6rsg","margin-start-1":"ggphbty4","width-1":"gjzvkazv","border-top-color-0.4":null,"border-bottom-color-0.4":null}),children:c}):null}}),null);
__d("useMediaCollage",["CollageLayoutConfig","CometFeedStoryMediaLayoutConstants","React","ReactComposerCollageLayoutSelection"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a,c,d){var e=g.useState(null),f=e[0],h=e[1];e=g.useRef(new Map());a=a.reduce(function(b,c,a){c.width!=null&&c.height!=null?b.set(a,[c.width,c.height]):b.set(a,[0,0]);return b},new Map());if(a.size!==e.current.size)e.current=a;else{var i=!1;for(var j=a,k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=j.length)break;m=j[l++]}else{l=j.next();if(l.done)break;m=l.value}m=m;var n=m[0];m=m[1];var o=m[0];m=m[1];n=e.current.get(n)||[void 0,void 0];var p=n[0];n=n[1];i=i||o!==p||m!==n}i&&(e.current=a)}var q=e.current,r=g.useCallback(function(){if(q.size===1){var a=q.get(0)||[400,400];a=Math.max(a[0]/a[1],b("CometFeedStoryMediaLayoutConstants").DEFAULT_MIN_ASPECT_RATIO);h(new(b("CollageLayoutConfig"))([{height:1,width:1,x:0,y:0}],c,d,c/a))}else if(q.size>1){a=b("ReactComposerCollageLayoutSelection").getBestUserCollageLayout(q);var e=[];a.forEach(function(a,b){e.push({height:a.getHeight(),width:a.getWidth(),x:a.getLeft(),y:a.getTop()})});h(new(b("CollageLayoutConfig"))(e,c,d))}else h(null)},[c,q,d]);g.useEffect(function(){q.size>0&&r()},[r,q]);return f}}),null);
__d("ComposerCometMediaAttachmentClassicLayout.react",["fbt","CometComposerHeadlessMediaUploader.react","CometComposerMediaAttachmentItemContainer.react","CometPlaceholder.react","React","composerMediaAttachmentReducer","stylex","useComposerViewStateReducer","useMediaCollage"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React"),i=5;c=500;d=16;f=1;var j=c-d*2-f*2,k=466;function a(a){var c=a.mediaAttachments,d=a.mediaUploadLoggingMetadata,e=a.width;e=e===void 0?j:e;a=a.withoutUploader;e=b("useMediaCollage")(c,e,2);var f=e!=null?e.getItemStyleInfos():[],l=(c||[]).length-f.length;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));return h.jsxs("div",{style:{height:e!=null?e.getCalculatedHeight()+"px":k},children:[a!==!0&&h.jsx(b("CometPlaceholder.react"),{fallback:null,children:h.jsx(b("CometComposerHeadlessMediaUploader.react"),{mediaUploadLoggingMetadata:d})}),f.map(function(a,d){var e=(c||[])[d];if(e==null)return null;var f=d===i-1&&l>0;return h.jsxs("div",{className:"pmk7jnqg stjgntxs ni8dbmo4 taijpn5t j83agx80 bp9cbjyn","data-testid":void 0,style:a,children:[h.jsx(b("CometComposerMediaAttachmentItemContainer.react"),{attachment:e,withRemoveButton:!1},"media-"+d),f?h.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg taijpn5t cbu4d94t n7fi1qx3 j83agx80 i09qtzwb sx5rzos5 bp9cbjyn",children:h.jsx("div",{className:"oqcyycmt lrazzd5p mhxlubs3 qrtewk5h",children:g._("+{num}",[g._param("num",l+1)])})}):null]},"media-"+d+"-container")})]})}}),null);
__d("ComposerCometMediaAttachmentCollageLayoutRenderer.react",["ComposerCometMediaAttachmentClassicLayout.react","React","gkx","requireCond","stylex","unrecoverableViolation","cr:1661928","cr:1674490"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.selectedPhotoLayout,d=babelHelpers.objectWithoutPropertiesLoose(a,["selectedPhotoLayout"]);a=b("gkx")("1609581");var e=function(){return g.jsx(b("ComposerCometMediaAttachmentClassicLayout.react"),babelHelpers["extends"]({},d))};if(!c||!a)return e();switch(c){case"classic":return e();case"columns":if(b("cr:1661928"))return g.jsx(b("cr:1661928"),{mediaAttachments:d.mediaAttachments});else throw new(b("unrecoverableViolation"))("ComposerCometMediaAttachmentCollageLayoutRenderer was unable to render Column Photo Layout","comet_composer");case"banner":return h(c);case"frame":if(b("cr:1674490"))return g.jsx(b("cr:1674490"),{mediaAttachments:d.mediaAttachments});else throw new(b("unrecoverableViolation"))("ComposerCometMediaAttachmentCollageLayoutRenderer was unable to render Frame Photo Layout","comet_composer");default:c;throw b("unrecoverableViolation")("photo layout not supported in ComposerCometMediaAttachmentCollageLayoutRenderer","comet_composer")}}function h(a){return g.jsx("div",{className:"sgwjjusx",children:a})}}),null);
__d("ComposerCometMediaAttachmentCollage.react",["ComposerCometEditMediaActionsOverlay.react","ComposerCometMediaAttachmentCollageLayoutRenderer.react","React","composerMediaAttachmentReducer","fileInputAcceptValues","stylex","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=a.disableVideoUploads,d=a.inComposer,e=a.mediaAttachments,f=a.mediaUploadLoggingMetadata,i=a.removeBorderRadiusBottomStyle;i=i===void 0?!1:i;var j=a.selectedPhotoLayout,k=a.videoLiteComposerEligible;k=k===void 0?!1:k;var l=a.width;a=a.withoutUploader;var m=h.useState(!1),n=m[0],o=m[1];m=h.useState(!1);var p=m[0],q=m[1];b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));m=c!==!0?b("fileInputAcceptValues").PHOTO_AND_VIDEO:b("fileInputAcceptValues").PHOTO;return h.jsxs("div",{className:(g||(g=b("stylex"))).dedupe({"border-top-start-radius-1":"ue3kfks5","border-top-end-radius-1":"pw54ja7n","border-bottom-end-radius-1":"uo3d90p7","border-bottom-start-radius-1":"l82x9zwi","overflow-x-1":"ni8dbmo4","overflow-y-1":"stjgntxs","position-1":"l9j0dhe7","width-1":"k4urcfbm"},d?null:{"border-top-0.3":"qu0x051f","border-end-0.3":"esr5mh6w","border-bottom-0.3":"e9989ue4","border-start-0.3":"r7d6kgcz","border-top-start-radius-1":"monazrh9","border-top-end-radius-1":"h905i5nu","border-bottom-end-radius-1":"jinzq4gt","border-bottom-start-radius-1":"mrjvor2e"},i?{"border-bottom-end-radius-1":"jinzq4gt","border-bottom-start-radius-1":"mrjvor2e"}:null),onBlur:function(){return o(!1)},onFocus:function(){return o(!0)},onMouseEnter:function(){return q(!0)},onMouseLeave:function(){return q(!1)},children:[h.jsx(b("ComposerCometMediaAttachmentCollageLayoutRenderer.react"),{inComposer:d,mediaAttachments:e,mediaUploadLoggingMetadata:f,selectedPhotoLayout:j,width:l,withoutUploader:a}),h.jsx(b("ComposerCometEditMediaActionsOverlay.react"),{accept:m,inComposer:d,mediaAttachments:e,showButtons:n||p,videoLiteComposerEligible:k})]})}}),null);
__d("makeMediaAttachmentReadyForPreview",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){switch(a.state){case"NEW":case"CLIENT_PROCESSING":switch(a.fileType){case"PHOTO":return{data:a.data,file:a.file,fileObjectURL:a.fileObjectURL,fileType:"PHOTO",sphericalEncoding:a.sphericalEncoding,state:"CLIENT_PROCESSING",useCDNPreview:a.useCDNPreview};case"VIDEO":return{data:a.data,file:a.file,fileObjectURL:a.fileObjectURL,fileType:"VIDEO",state:"CLIENT_PROCESSING",useCDNPreview:a.useCDNPreview};default:return a}case"PREEXISTING":return a;case"UPLOADED":switch(a.fileType){case"PHOTO":return{data:a.data,entID:a.data.id,file:a.file,fileObjectURL:a.fileObjectURL,fileType:"PHOTO",height:a.height,sphericalEncoding:a.sphericalEncoding,state:"UPLOADED",useCDNPreview:a.useCDNPreview,width:a.width};case"VIDEO":return{data:a.data,entID:a.data.id,file:a.file,fileObjectURL:a.fileObjectURL,fileType:"VIDEO",height:a.height,state:"UPLOADED",useCDNPreview:a.useCDNPreview,videoAttachmentMetadata:a.videoAttachmentMetadata,width:a.width};default:return a}case"FAILED":switch(a.fileType){case"PHOTO":return{data:a.data,error:a.error,file:a.file,fileObjectURL:a.fileObjectURL,fileType:"PHOTO",height:a.height,sphericalEncoding:a.sphericalEncoding,state:"FAILED",useCDNPreview:!0,width:a.width};case"VIDEO":return{data:a.data,error:a.error,file:a.file,fileObjectURL:a.fileObjectURL,fileType:"VIDEO",height:a.height,state:"FAILED",useCDNPreview:!0,width:a.width};default:return a}default:var b;switch(a.state){case"QUEUED":b=0;break;case"UPLOADING":b=a.percentComplete;break;case"UPLOADED":b=1;break;default:b=void 0;break}switch(a.fileType){case"PHOTO":return{fileMimeType:a.file.type,fileName:a.file.name,fileObjectURL:a.fileObjectURL,fileType:a.fileType,height:a.height,percentComplete:b,sphericalEncoding:a.sphericalEncoding,state:"OPTIMISTIC_UPLOADED",uploadID:a.file.uploadID,useCDNPreview:a.useCDNPreview,width:a.width};case"VIDEO":return{fileMimeType:a.file.type,fileName:a.file.name,fileObjectURL:a.fileObjectURL,fileType:a.fileType,height:a.height,percentComplete:b,state:"OPTIMISTIC_UPLOADED",uploadID:a.file.uploadID,useCDNPreview:a.useCDNPreview,width:a.width};default:return{fileMimeType:a.file.type,fileName:a.file.name,fileObjectURL:a.fileObjectURL,fileType:a.fileType,percentComplete:b,state:"OPTIMISTIC_UPLOADED",uploadID:a.file.uploadID}}}}}),null);
__d("CometComposerMediaAttachmentArea.react",["ComposerCometMediaAttachmentCollage.react","ComposerCometSelectedPhotoLayoutContext","React","composerMediaAttachmentReducer","makeMediaAttachmentReadyForPreview","requireDeferred","useComposerViewStateDispatcher","useComposerViewStateReducer","withComposerViewStatePart"],(function(a,b,c,d,e,f){"use strict";var g=b("React");b("requireDeferred")("mediaAttachmentAreaTransform");function a(a){var c=a.disableVideo;c=c===void 0?!1:c;var d=a.mediaAttachments,e=a.mediaUploadLoggingMetadata,f=a.selectedPhotoLayout,h=a.videoLiteComposerEligible;h=h===void 0?!1:h;a=a.width;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var i=b("useComposerViewStateDispatcher")();g.useEffect(function(){return function(){i({type:"REMOVE_ALL_MEDIA_ATTACHMENT_ITEMS"})}},[i]);var j=g.useMemo(function(){return{layout:f}},[f]);return d!=null?g.jsx(b("ComposerCometSelectedPhotoLayoutContext").Provider,{value:j,children:g.jsx(b("ComposerCometMediaAttachmentCollage.react"),{disableVideoUploads:c,inComposer:!0,mediaAttachments:d.map(function(a){switch(a.state){case"PREEXISTING":return a;default:return a.file&&a.fileType!=="UNKNOWN"?a:null}}).filter(Boolean).map(b("makeMediaAttachmentReadyForPreview")),mediaUploadLoggingMetadata:e,selectedPhotoLayout:f,videoLiteComposerEligible:h,width:a})}):null}c=b("withComposerViewStatePart")(a,function(a){return{mediaAttachments:a.mediaAttachments,selectedPhotoLayout:a.photoLayout}});e.exports=c}),null);